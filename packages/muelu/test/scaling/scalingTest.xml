<ParameterList name="MueLu">
  
  <!-- Configuration of the Xpetra operator (fine level) -->
  <ParameterList name="Operator">
    <Parameter name="PDE equations" type="int" value="2"/> <!-- Number of PDE equations at each grid node.-->
  </ParameterList>

  <!-- Factory collection -->
  <ParameterList name="Factories">

    <ParameterList name="myTentativePFact">
      <Parameter name="factory" type="string" value="TentativePFactory"/>
    </ParameterList>

    <ParameterList name="myTentativeRFact">
      <Parameter name="factory" type="string" value="TransPFactory"/>
      <Parameter name="PFactory" type="string" value="myTentativePFactory"/>
    </ParameterList>

    <ParameterList name="myProlongatorFact">
      <Parameter name="factory" type="string" value="SaPFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="TentativeFactory" type="string" value="myTentativePFactory"/>
<!--    <Parameter name="DampingFactor" type="double" value="4./3"/> -->
      </ParameterList>
    </ParameterList>

    <ParameterList name="myRestrictorFact">
      <Parameter name="factory" type="string" value="TransPFactory"/>
    </ParameterList>

    <ParameterList name="myCoordinateTransfertFact">
      <Parameter name="factory" type="string" value="MultiVectorTransferFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="vectorName"      type="string" value="Coordinates"/>
        <Parameter name="restrictionName" type="string" value="R"/>
        <Parameter name="factory"         type="string" value="myTentativeRFact"/>
      </ParameterList>
    </ParameterList>
    
    <ParameterList name="myRAPFactory">
      <Parameter name="factory" type="string" value="RAPFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="PFactory" type="string" value="myProlongatorFact"/>
        <Parameter name="RFactory" type="string" value="myRestrictorFact"/>
        <ParameterList name="TransferFactories">
          <Parameter name="For Coordinates" type="string" value="myCoordinateTransfertFact"/>
        </ParameterList>
      </ParameterList>
    </ParameterList>

<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->

    <ParameterList name="myZoltanInterface">
      <Parameter name="factory" type="string" value="ZoltanInterface"/>
      <ParameterList name="ParameterList">
        <Parameter name="AFactory"        type="string" value="myRAPFactory"/>
        <Parameter name="TransferFactory" type="string" value="myCoordinateTransfertFact"/>
        <ParameterList name="TransferFactories">
          <Parameter name="For Coordinates" type="string" value="myCoordinateTransfertFact"/>
        </ParameterList>
      </ParameterList>
    </ParameterList>

    <ParameterList name="myRepartitionFact">
      <Parameter name="factory" type="string" value="RepartitionFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="Factory"        type="string" value="myZoltanInterface"/>
        <Parameter name="AFactory" type="string" value="myRAPFactory"/>
        <Parameter name="minRowsPerProc" type="string" value="2000"/>
        <Parameter name="nonzeroImbalance" type="string" value="1.2"/>
      </ParameterList>
    </ParameterList>

    <ParameterList name="myPermutedProlongatorFact">
      <Parameter name="factory" type="string" value="PermutedTransferFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="RepartitionFactory" type="string" value="myRepartitionFact"/>
        <Parameter name="AFactory" type="string" value="myRAPFactory"/>
        <Parameter name="PFactory" type="string" value="myProlongatorFact"/>
        <Parameter name="type"     type="string" value="Interpolation"/>
      </ParameterList>
    </ParameterList>

    <ParameterList name="myPermutedRestrictionFact">
      <Parameter name="factory" type="string" value="PermutedTransferFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="RepartitionFactory" type="string" value="myRepartitionFact"/>
        <Parameter name="RFactory" type="string" value="myRestrictorFact"/>
        <Parameter name="type"     type="string" value="Restriction"/>
        <Parameter name="PFactory" type="string" value="myTentativePFactory"/>
        <Parameter name="TransferFactory" type="string" value="myCoordinateTransfertFact"/>
      </ParameterList>
    </ParameterList>
    
    <ParameterList name="myPermutedRAPFactory">
      <Parameter name="factory" type="string" value="RAPFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="PFactory" type="string" value="myPermutedProlongatorFact"/>
        <Parameter name="RFactory" type="string" value="myPermutedRestrictionFact"/>
      </ParameterList>
    </ParameterList>
    
<!-- -->
<!-- -->
<!-- -->
<!-- -->
<!-- -->

    <ParameterList name="myAggregationFact">
      <Parameter name="factory" type="string" value="UCAggregationFactory"/>
      <ParameterList name="ParameterList">
        <Parameter name="Ordering"                type="string" value="Natural"/> <!-- Natural, Random, Graph -->
        <Parameter name="MaxNeighAlreadySelected" type="int"    value="0"/>
        <Parameter name="Phase3AggCreation"       type="double" value="0.5"/>
        <Parameter name="MinNodesPerAggregate"    type="int"    value="2"/>
       </ParameterList>
    </ParameterList>

    <ParameterList name="SymGaussSeidel">
      <Parameter name="factory" type="string" value="TrilinosSmoother"/>
      
      <Parameter name="type"                         type="string" value="RELAXATION"/>
      <ParameterList name="ParameterList">
        <Parameter name="relaxation: type"           type="string" value="Symmetric Gauss-Seidel"/>
        <Parameter name="relaxation: sweeps"         type="int"    value="1"/>
        <Parameter name="relaxation: damping factor" type="double" value="1"/>
      </ParameterList>
    </ParameterList>

    <ParameterList name="Chevyshev"> <!-- interpreter not tested yet -->
      <Parameter name="factory" type="string" value="TrilinosSmoother"/>
      
      <Parameter name="type" type="string" value="CHEBYSHEV"/>
      <ParameterList name="ParameterList">
        <Parameter name="chebyshev: degree"                 type="int"     value="1"/>>
        <Parameter name="chebyshev: ratio eigenvalue"       type="double"  value="20"/>
        <Parameter name="chebyshev: max eigenvalue"         type="double"  value="-1.0"/>
        <Parameter name="chebyshev: min eigenvalue"         type="double"  value="1.0"/>
        <Parameter name="chebyshev: zero starting solution" type="boolean" value="true"/>
      </ParameterList>
    </ParameterList>

  </ParameterList>
   
  <!-- Definition of the multigrid preconditioner -->
  <ParameterList name="Hierarchy">
    
    <Parameter name="numDesiredLevel" type="int" value="10"/> <!-- Max number of levels -->
    
    <ParameterList name="FineLevel">
      <Parameter name="startLevel" type="int" value="0"/>
      <Parameter name="Smoother"   type="string" value="SymGaussSeidel"/>
    </ParameterList>

    <ParameterList name="OtherLevels">
      <Parameter name="startLevel" type="int" value="1"/>
      <Parameter name="A"          type="string" value="myPermutedRAPFactory"/>
      <Parameter name="P"          type="string" value="myPermutedProlongatorFact"/> <!-- TODO: should not be needed -->
      <Parameter name="R"          type="string" value="myPermutedRestrictionFact"/> <!-- TODO: should not be needed -->
      <Parameter name="Smoother"   type="string" value="SymGaussSeidel"/>
    </ParameterList>
    
    <ParameterList name="CoarsestLevel">
      <Parameter name="startLevel"   type="int" value="-1"/>
      <Parameter name="CoarseSolver" type="string" value="DirectSolver"/>
    </ParameterList>
    
  </ParameterList>
</ParameterList>
