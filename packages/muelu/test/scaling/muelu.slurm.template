#!/bin/bash

#SBATCH --time=01:00:00            # WALLTIME
#SBATCH --account=FY115672         # WC ID
#SBATCH -N _NODES_                 # Number of nodes 

nodes=$SLURM_JOB_NUM_NODES
cores=_CPN_
tcores=`expr $nodes \* $cores`
tol=1e-7                            # Krylov stopping tolerance
its=15                              # max number of fixed point iterations
maxCoarseSize=3000                  # max number of DOFs allowed in coarsest level
maxLevels=15                        # max number of levels allowed in AMG hierarchy

outfile="screen.out.$SLURM_JOB_ID"
touch outfile

echo "===========================================" >> $outfile
echo "Start Time: " `date` >> $outfile
echo "===========================================" >> $outfile

mpiexec -np $tcores /apps/contrib/numa_wrapper-16ppn _BINARY_ --nx=_NX_ --ny=_NX_ --nz=_NX_ --linAlgebra=1 --explicitR=1 --matrixType=_MTYPE_ --maxLevels=$maxLevels --maxCoarseSize=$maxCoarseSize --its=$its --tol=$tol 2>&1 >> $outfile

echo "===========================================" >> $outfile
echo "Stop Time: " `date` >>$outfile
echo "===========================================" >> $outfile
