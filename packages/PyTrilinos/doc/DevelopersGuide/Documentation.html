<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>PyTrilinos Documentation System</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="pytrilinos-documentation-system">
<h1 class="title">PyTrilinos Documentation System</h1>
<div class="section">
<h1><a id="python-docstrings" name="python-docstrings">Python Docstrings</a></h1>
<p>Python has an effective interactive documentation system, utilizing
what are known as &quot;docstrings&quot;.  If the first statement of a python
module, a python function or a python class is a string constant, then
that string becomes the documentation string, or &quot;docstring&quot;, for the
given module, function or class.  For example,</p>
<pre class="literal-block">
def func(arg):
    &quot;Docstring for function func&quot;
    return &quot;Hello, world!&quot;
</pre>
<p>Docstrings are fundamentally different from python comments, because
of their position relative to the code they describe and because they
are used by the python <tt class="docutils literal"><span class="pre">help</span></tt> facility and other documentation
tools, such as <tt class="docutils literal"><span class="pre">pydoc</span></tt>:</p>
<pre class="literal-block">
&gt;&gt;&gt; help(func)
Help on function func in module __main__:

func(arg)
    Docstring for function func
&gt;&gt;&gt;
</pre>
</div>
<div class="section">
<h1><a id="pytrilinos-docstring-policy" name="pytrilinos-docstring-policy">PyTrilinos Docstring Policy</a></h1>
<p>It is the policy of PyTrilinos that python docstrings should be
maintained to provide useful, current and accurate information to
PyTrilinos users that</p>
<blockquote>
<ul class="simple">
<li>correctly reflect the calling arguments of PyTrilinos methods
and functions,</li>
<li>match the coresponding doxygen documentation provided by
Trilinos developers when appropriate, and</li>
<li>supercede the doxygen documentation when the python interface
and/or implementation is different from the C++ interface and/or
implementation.</li>
</ul>
</blockquote>
<p>The difficulty in adhering to these policies is that the python code
(and therefore the python docstrings) that makes up PyTrilinos is
automatically generated by swig.  Fortunately, there are several tools
available that allow these policies to be met.</p>
</div>
<div class="section">
<h1><a id="module-docstrings" name="module-docstrings">Module docstrings</a></h1>
<p>Every PyTrilinos module should contain a module docstring.  This is
typically implemented in the package interface file as follows:</p>
<pre class="literal-block">
%define %my_package_docstring
&quot;
Multi-line documentation string for
My_Package
&quot;
%enddef
%module (docstring = %my_package_docstring) My_Package
</pre>
<p>SWIG does not require that SWIG macro names begin with &quot;<tt class="docutils literal"><span class="pre">%</span></tt>&quot;, but it
is allowed and it is the convention for PyTrilinos SWIG macros.
Further, PyTrilinos module docstrings follow a set format:</p>
<pre class="literal-block">
PyTrilinos.My_Package is the python interface to the Trilinos
such-and-such package My_Package:

    http://trilinos.sandia.gov/packages/my_package

The purpose of My_Package is to . . . .  The python version of the
My_Package package supports the following classes:

    * Class1          - Short description 1
    * Class2          - Short description 2
    * ...

Any other notes about the package as a whole. . . .
</pre>
</div>
<div class="section">
<h1><a id="function-and-method-docstrings" name="function-and-method-docstrings">Function and Method Docstrings</a></h1>
<p>Docstrings for functions and methods are partially implemented by the
SWIG <tt class="docutils literal"><span class="pre">%feature</span></tt> called <tt class="docutils literal"><span class="pre">autodoc</span></tt>.  Before any code is directed to
be wrapped within an interface file (by the first <tt class="docutils literal"><span class="pre">%include</span></tt>
directive), the following feature should be activated:</p>
<pre class="literal-block">
%feature(&quot;autodoc&quot;, &quot;1&quot;);
</pre>
<p>This automatically adds docstrings to each function and class method
showing the function name, argument list, and return type.  The
argument list contains both type and name information (as per the
<tt class="docutils literal"><span class="pre">&quot;1&quot;</span></tt> option).  If a function or method is overloaded, each valid
calling signature is listed.</p>
</div>
<div class="section">
<h1><a id="appending-doxygen-documentation-to-docstrings" name="appending-doxygen-documentation-to-docstrings">Appending Doxygen Documentation to Docstrings</a></h1>
<p>A system is in place for automatically extracting Doxygen
documentation from a Trilinos package source code and inserting it
into the package's python module.  First, Doxygen is used to extract
the documentation and save it in XML format.  Second, a python script
is run to read this XML data and convert it to a series of valid SWIG
statements of the form::</p>
<pre class="literal-block">
%feature(&quot;docstring&quot;) &lt;symbol-name&gt; &lt;docstring&gt;
</pre>
<p>Third, each package interface file implements an <tt class="docutils literal"><span class="pre">%include</span></tt>
statement to read these documentation directives.  This adds the
Doxygen documentation string to the end of the string created by
<tt class="docutils literal"><span class="pre">%feature(&quot;autodoc&quot;,</span> <span class="pre">&quot;1&quot;)</span></tt>.</p>
<p>All of this infrastructure is contained within the PyTrilinos
subdirectory:</p>
<pre class="literal-block">
doc/Doxygen
</pre>
<p>Within this subdirectory are a series of Doxygen control files, one
for each package: <tt class="docutils literal"><span class="pre">Doxyfile_Teuchos</span></tt>, <tt class="docutils literal"><span class="pre">Doxyfile_Epetra</span></tt>, etc.
These Doxyfiles have certain features in common: they all generate XML
output:</p>
<pre class="literal-block">
GENERATE_XML = YES
</pre>
<p>while suppressing all other forms of output.  They all direct output
to their own subdirectory:</p>
<pre class="literal-block">
OUTPUT_DIRECTORY = Teuchos
XML_OUTPUT = .
</pre>
<p>If you add documentation for a new package, then add the package name
to the <tt class="docutils literal"><span class="pre">PyTrilinos/doc/Doxygen/Makefile</span></tt> variable <tt class="docutils literal"><span class="pre">PACKAGES</span></tt>.
When you run <tt class="docutils literal"><span class="pre">make</span></tt> from the shell, this will cause <tt class="docutils literal"><span class="pre">doxygen</span></tt> to
be run on the Doxyfile and the script <tt class="docutils literal"><span class="pre">doxy2swig.py</span></tt> (generously
provided by Prabhu Ramachandran) to be run on the resulting output.
This produces a file with a <tt class="docutils literal"><span class="pre">_dox.i</span></tt> suffix, e.g. <tt class="docutils literal"><span class="pre">Teuchos_dox.i</span></tt>,
intended to be included into the package interface file
<tt class="docutils literal"><span class="pre">src/Teuchos.i</span></tt>.  To facilitate this inclusion, SWIG is invoked with
<tt class="docutils literal"><span class="pre">-I$(top_srcdir)/doc/Doxygen</span></tt>.</p>
</div>
<div class="section">
<h1><a id="overriding-doxygen-documentation" name="overriding-doxygen-documentation">Overriding Doxygen Documentation</a></h1>
<p>Sometimes the Doxygen documentation is not appropriate for a given
python function or method.  This is often the case when <tt class="docutils literal"><span class="pre">%typemap</span></tt>-s
are employed or when the python implementation replaces the C++
interface by using <tt class="docutils literal"><span class="pre">%ignore</span></tt>, <tt class="docutils literal"><span class="pre">%extend</span></tt> and/or <tt class="docutils literal"><span class="pre">%inline</span></tt>.  This
requires that the automatically created docstrings be overridden or
appended, and can be accomplished by providing a SWIG documentation
directive <em>after</em> the <tt class="docutils literal"><span class="pre">%include</span> <span class="pre">&quot;Teuchos_dox.i&quot;</span></tt> (for example) and
that redefines the docstring for a specified symbol.  These directives
should be placed directly in the appropriate interface file.  By
convention, all directives pertaining to the symbols within a single
<tt class="docutils literal"><span class="pre">%include</span></tt> file are grouped together.  The documentation directives
should be at the top of these groupings.</p>
<p>There are two SWIG documentation directives that can be employed to
override or append docstrings.  If you wish to append documentation to
what is already present, use:</p>
<pre class="literal-block">
%feature(&quot;docstring&quot;)
&lt;symbol-name&gt;
&quot;
&lt;docstring&gt;
&quot;;
</pre>
<p>If you wish to replace the existant docstring completely, use the
directive:</p>
<pre class="literal-block">
%feature(&quot;autodoc&quot;,
&quot;&lt;docstring&gt;&quot;)
&lt;symbol-name&gt;;
</pre>
<p>The formatting given here tends to be the most readable for the widest
range of situations, both for the interface files and for the
resulting docstrings.</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
Generated on: 2009-12-20 18:13 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
