INCLUDE(TribitsAddExecutableAndTest)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/helpers)

#
# Tests for src/algorithms
#

#
# Tests for src/environment
#

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Parameters
  SOURCES environment/Parameters.cpp
  NUM_MPI_PROCS 1
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

#
# Tests for src/input
#

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  XpetraTraits
  SOURCES input/XpetraTraits.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )
 
TRIBITS_ADD_EXECUTABLE_AND_TEST(
  XpetraMatrixInput
  SOURCES input/XpetraMatrixInput.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )
 
TRIBITS_ADD_EXECUTABLE_AND_TEST(
  XpetraGraphInput
  SOURCES input/XpetraGraphInput.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  XpetraVectorInput
  SOURCES input/XpetraVectorInput.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  XpetraMultiVectorInput
  SOURCES input/XpetraMultiVectorInput.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )


TRIBITS_ADD_EXECUTABLE_AND_TEST(
  BasicIdentifierInput
  SOURCES input/BasicIdentifierInput.cpp
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
)

#
# Tests for src/models
#

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  GraphModel
  SOURCES models/GraphModel.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  IdentifierModel
  SOURCES models/IdentifierModel.cpp
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

#
# Tests for src/problems
#

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  PartitioningSolution
  SOURCES problems/PartitioningSolution.cpp
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

#
# Tests for src/util
#

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Metric
  SOURCES util/Metric.cpp
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  IdentifierMap
  SOURCES util/IdentifierMap.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  IdentifierTraits
  SOURCES util/IdentifierTraits.cpp 
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  AlltoAll
  SOURCES util/AlltoAll.cpp
  NUM_MPI_PROCS 4
  COMM serial mpi
  PASS_REGULAR_EXPRESSION "PASS"
  FAIL_REGULAR_EXPRESSION "FAIL"
  )

