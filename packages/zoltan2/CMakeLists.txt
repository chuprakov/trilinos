INCLUDE(TribitsPackageMacros)
INCLUDE(TribitsAddOptionAndDefine)

#
# A) Define the package
#

TRIBITS_PACKAGE(Zoltan2)

#
# B) Set up package-specific options
#

IF (HAVE_TPETRA_EXPLICIT_INSTANTIATION)

IF (HAVE_TPETRA_INST_INT_LONG)

IF (HAVE_TPETRA_INST_FLOAT)
 GLOBAL_SET(HAVE_${PACKAGE_NAME_UC}_INST_FLOAT_INT_LONG ON)
ELSE()
 GLOBAL_SET(HAVE_${PACKAGE_NAME_UC}_INST_DOUBLE_INT_LONG ON)
ENDIF()

ELSE()

IF (HAVE_TPETRA_INST_FLOAT)
 GLOBAL_SET(HAVE_${PACKAGE_NAME_UC}_INST_FLOAT_INT_INT ON)
ELSE()
 GLOBAL_SET(HAVE_${PACKAGE_NAME_UC}_INST_DOUBLE_INT_INT ON)
ENDIF()

ENDIF()

ENDIF()

TRIBITS_ADD_OPTION_AND_DEFINE(TPL_ENABLE_MPI
  HAVE_${PACKAGE_NAME_UC}_MPI
  "MPI is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_METIS
  HAVE_${PACKAGE_NAME_UC}_METIS
  "Metis is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_PaToH
  HAVE_${PACKAGE_NAME_UC}_PATOH
  "PaToH is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_ParMETIS
  HAVE_${PACKAGE_NAME_UC}_PARMETIS
  "ParMetis is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_Scotch
  HAVE_${PACKAGE_NAME_UC}_SCOTCH
  "Scotch is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_OVIS
  HAVE_${PACKAGE_NAME_UC}_OVIS
  "Ovis is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_AMD
  HAVE_${PACKAGE_NAME_UC}_AMD
  "AMD is present"
  OFF )

TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_LINUX_MEMORY_REPORT
  SHOW_${PACKAGE_NAME_UC}_LINUX_MEMORY
  "turn on runtime display of proc/meminfo data"
  OFF )

#
# See the comment in Zoltan2_AlgScotch.hpp to learn how to
# modify the scotch library to return the maximum memory used.
#
TRIBITS_ADD_OPTION_AND_DEFINE(${PACKAGE_NAME}_ENABLE_SCOTCH_MEMORY_REPORT
  SHOW_${PACKAGE_NAME_UC}_SCOTCH_MEMORY
  "turn on runtime display maximum memory used by scotch"
  OFF )


INCLUDE(CheckTypeSize)
CHECK_TYPE_SIZE("long long" HAVE_${PACKAGE_NAME_UC}_LONG_LONG)

#
# C) Add the libraries, tests, and examples
#

ADD_SUBDIRECTORY(src)

TRIBITS_ADD_TEST_DIRECTORIES(test)

TRIBITS_ADD_EXAMPLE_DIRECTORIES(example)

#
# Exclude files for source package.
#
#TRIBITS_EXCLUDE_FILES()


#
# D) Do standard postprocessing
#

TRIBITS_PACKAGE_POSTPROCESS()
