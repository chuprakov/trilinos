INCLUDE(PackageMacros)
INCLUDE(PackageAddExecutable)

INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_BINARY_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_SOURCE_DIR}/../src
  )

SET(HEADERS "")
SET(SOURCES "")

APPEND_SET(HEADERS
		Kokkos_test_hex_grad.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_MDArrayViewRawData.hpp
  )

APPEND_SET(SOURCES
  )

ASSERT_DEFINED(Kokkos_ENABLE_MDArray_Cuda)
IF (Kokkos_ENABLE_MDArray_Cuda)
  
  SET(CUDA_HEADERS "")
  SET(CUDA_SOURCES "")

  APPEND_SET(CUDA_HEADERS
    ${HEADERS}
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_CudaMDArrayView.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_CudaMap.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_CudaDevice.hpp
  )


  APPEND_SET(CUDA_SOURCES
    ${SOURCES}
		Kokkos_test_mdarray_cuda.cu
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_CudaDevice.cu
  )

  CUDA_ADD_EXECUTABLE(cuda_test
    ${CUDA_SOURCES}
    )
  
  #  PACKAGE_ADD_EXECUTABLE(cuda_test
  #  HEADERS ${CUDA_HEADERS}
  #  SOURCES ${CUDA_SOURCES}
  #  )

ENDIF()

ASSERT_DEFINED(Kokkos_ENABLE_ThreadPool)
ASSERT_DEFINED(Kokkos_ENABLE_MDArray_ThreadPool_Host)
IF (Kokkos_ENABLE_MDArray_ThreadPool_Host AND Kokkos_ENABLE_ThreadPool)
  
  SET(HOST_HEADERS "")
  SET(HOST_SOURCES "")

  APPEND_SET(HOST_HEADERS
    ${HEADERS}
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_HostMDArrayView.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_HostMap.hpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_HostDevice.hpp
  )


  APPEND_SET(HOST_SOURCES
    ${SOURCES}
		Kokkos_test_mdarray_host.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/../src/Kokkos_HostDevice.cpp
  )

  PACKAGE_ADD_EXECUTABLE(host_test
    HEADERS ${HOST_HEADERS}
    SOURCES ${HOST_SOURCES}
    )

ENDIF()
