
INCLUDE(TribitsSubPackageMacros)

TRIBITS_SUBPACKAGE(Core)

IF(NOT TPL_ENABLE_MPI)
  SET(TPL_ENABLE_MPI OFF)
ENDIF()

#Enable MPI
TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_MPI
  KOKKOS_HAVE_MPI
  "Enable MPI support in Kokkos."
  ${TPL_ENABLE_MPI}
  )

IF(NOT TPL_ENABLE_CUDA)
  SET(TPL_ENABLE_CUDA OFF)
ENDIF()

#Enable Devices
TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_Cuda
  KOKKOS_HAVE_CUDA
  "Enable CUDA support in Kokkos."
  ${TPL_ENABLE_CUDA}
  )

IF(NOT TPL_ENABLE_Pthread)
  SET(TPL_ENABLE_Pthread OFF)
ENDIF()

TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_Pthread
  KOKKOS_HAVE_PTHREAD
  "Enable Pthread support in Kokkos."
  ${TPL_ENABLE_Pthread}
  )

IF(NOT DEFINED TPL_ENABLE_Winthread)
  SET(TPL_ENABLE_Winthread OFF)
ENDIF()

TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_Winthread
  KOKKOS_HAVE_WINTHREAD
  "Enable Winthread support in Kokkos."
  ${TPL_ENABLE_Winthread}
  )

IF(NOT Trilinos_ENABLE_OpenMP)
  SET(Trilinos_ENABLE_OpenMP OFF)
ENDIF()

TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_OpenMP
  KOKKOS_HAVE_OPENMP
  "Enable OpenMP support in Kokkos."
  ${Trilinos_ENABLE_OpenMP}
  )

#Enable HWLOC
IF(NOT TPL_ENABLE_HWLOC)
  SET(TPL_ENABLE_HWLOC OFF)
ENDIF()
  

TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_HWLOC
  KOKKOS_HAVE_HWLOC
  "Enable HWLOC support in Kokkos."
  ${TPL_ENABLE_HWLOC}
  )

SET(KOKKOS_EXPRESSION_CHECK OFF)

TRIBITS_ADD_OPTION_AND_DEFINE(
  Kokkos_ENABLE_BOUNDS_CHECK
  KOKKOS_EXPRESSION_CHECK
  "Enable bounds checking support in Kokkos."
  ${KOKKOS_EXPRESSION_CHECK}
  )

ADD_SUBDIRECTORY(src)

TRIBITS_ADD_TEST_DIRECTORIES(perf_test)
TRIBITS_ADD_TEST_DIRECTORIES(unit_test)

TRIBITS_ADD_EXAMPLE_DIRECTORIES(usecases)

TRIBITS_SUBPACKAGE_POSTPROCESS()

