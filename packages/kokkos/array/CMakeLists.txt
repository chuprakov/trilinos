INCLUDE(TribitsSubPackageMacros)

TRIBITS_SUBPACKAGE(Array)

#use ADD_DEFINITIONS instead of KokkosArray_config.h.in
#so that we can still use manual build scripts on platforms
#without cmake
IF( KokkosArray_ENABLE_CUDA )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_CUDA )
ENDIF()

IF( KokkosArray_ENABLE_HWLOC )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_HWLOC )
ENDIF()

IF( TPL_ENABLE_Pthread )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_THREADS )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_PTHREAD )
ELSEIF( TPL_ENABLE_Winthread )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_THREADS )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_WINTHREAD )
ENDIF()

IF( TPL_ENABLE_MPI )
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_MPI )
ENDIF()

TRIBITS_ADD_OPTION_AND_DEFINE(
  KokkosArray_ENABLE_DeviceCuda
  HAVE_KOKKOSARRAY_DEVICECUDA
  "Enable arrays using CUDA Device."
  OFF
  )
IF (KokkosArray_ENABLE_DeviceCuda)
  ADD_DEFINITIONS( -DHAVE_KOKKOSARRAY_DEVICE_CUDA )
ENDIF()

ADD_SUBDIRECTORY(src)

TRIBITS_ADD_TEST_DIRECTORIES(perf_test)
TRIBITS_ADD_TEST_DIRECTORIES(unit_test)

TRIBITS_ADD_EXAMPLE_DIRECTORIES(usecases)

TRIBITS_SUBPACKAGE_POSTPROCESS()
