
IF(${PACKAGE_NAME}_ENABLE_SHARED)
  SET( MESQUITE_LIB_DEFINES "${MESQUITE_DEFINES} -DMESQUITE_DLL_EXPORTS" )
ELSE()
  SET( MESQUITE_LIB_DEFINES "${MESQUITE_DEFINES} -DMESQUITE_STATIC_LIB" )
ENDIF()

FIND_FILE( IMESH_DEFS  iMesh-Defs.inc ENV IMESH_DEFS  )
IF(IMESH_DEFS)
  SET(${PACKAGE_NAME}_ENABLE_IMESH ON)
  MAKEFILE_VAL(${IMESH_DEFS} IMESH_LIBS IMESH_LIBS)
  MAKEFILE_VAL(${IMESH_DEFS} IMESH_INCLUDES IMESH_INCL)
  PACKAGE_ADD_LIBRARY(msqimesh HEADERS MsqIMesh.hpp SOURCES MsqIMesh.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIMesh.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ELSE(IMESH_DEFS)
  SET(${PACKAGE_NAME}_ENABLE_IMESH OFF)
ENDIF(IMESH_DEFS)

FIND_FILE( IGEOM_DEFS  iGeom-Defs.inc ENV IGEOM_DEFS  )
IF(IGEOM_DEFS)
  MAKEFILE_VAL(${IGEOM_DEFS} IGEOM_LIBS IGEOM_LIBS)
  MAKEFILE_VAL(${IGEOM_DEFS} IGEOM_INCLUDES IGEOM_INCL)
  PACKAGE_ADD_LIBRARY(msqigeom HEADERS MsqIGeom.hpp SOURCES MsqIGeom.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIGeom.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ENDIF(IGEOM_DEFS)

FIND_FILE( IREL_DEFS   iMesh-Defs.inc ENV IREL_DEFS   )
IF(IREL_DEFS)
  MAKEFILE_VAL(${IREL_DEFS} IREL_LIBS IREL_LIBS)
  MAKEFILE_VAL(${IREL_DEFS} IREL_INCLUDES IREL_INCL)
  PACKAGE_ADD_LIBRARY(msqirel HEADERS MsqIRel.hpp SOURCES MsqIRel.cpp)
  SET_SOURCE_FILES_PROPERTIES( MsqIRel.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
ENDIF(IREL_DEFS)

IF (TPL_ENABLE_MPI)
  FIND_FILE( IMESHP_DEFS iMesh-Defs.inc ENV IMESHP_DEFS )
  IF(IMESHP_DEFS)
    MAKEFILE_VAL(${IMESHP_DEFS} IMESHP_LIBS IMESHP_LIBS)
    MAKEFILE_VAL(${IMESHP_DEFS} IMESHP_INCLUDES IMESHP_INCL)
    PACKAGE_ADD_LIBRARY(msqimeshp HEADERS MsqIMeshP.hpp SOURCES MsqIMeshP.cpp)
    SET_SOURCE_FILES_PROPERTIES( MsqIMeshP.cpp COMPILE_FLAGS ${MESQUITE_LIB_DEFINES} )
  ENDIF(IMESHP_DEFS)
ENDIF()

