
EXTRA_ARGS=$@

#debug:
#
#  -D CMAKE_BUILD_TYPE:STRING=DEBUG \

# Location of Trilinos source, where we build from
#TRILINOS_CODE=/scratch/srkenno/stk_geom/src/Trilinos
TRILINOS_CODE=/scratch/srkenno/code/TPLs_src/Trilinos

# Python installation and related shared library dependencies
PYTHON_EXECUTABLE=/usr/netpub/python-2.7/bin/python
PYTHON_INSTALL_DIR=/usr/netpub/python-2.7
MPI4PY_INSTALL_DIR=$PYTHON_INSTALL_DIR/lib/python2.7/site-packages/mpi4py

# Location of Swig for building the Python/C++ interfaces
SWIG_INSTALL_DIR=/usr/netpub/swig-2.0.4

# Location of other third party library dependencies of Percept
#BOOST_PATH=/scratch/srkenno/code/TPLs_src/boost
BOOST_PATH=/scratch/srkenno/stk_geom/src/tpls/boost_1_50_0/lib
BOOST_INCLUDE_DIR=$BOOST_PATH/include
BOOST_LIB_DIR=$BOOST_PATH/lib

NETCDF_INSTALL_DIR=/projects/seacas/linux_rhel6/current
NETCDF_INCLUDE=$NETCDF_INSTALL_DIR/include
NETCDF_LIB=$NETCDF_INSTALL_DIR/lib/shared

MPIH_INSTALL_DIR=/scratch/srkenno/code/MPIH

export CMAKE_C_FLAGS=""

# not used in this version, can be set to null
#OPENNURBS_PATH=/Users/srkenno/Desktop/srk/sandia/percept/trilinos/opennurbs

#  how to enable OpenNURBS
#  -D STK_ADAPT_HAS_GEOMETRY
#  -D TPL_OpenNURBS_INCLUDE_DIRS:PATH=$OPENNURBS_PATH \
#  -D TPL_OpenNURBS_LIBRARIES:PATH=$OPENNURBS_PATH/libopenNURBS.a \
#  -D TPL_ENABLE_OpenNURBS:BOOL=ON \

# note: special magic to make the configure time not be so slow
#   -D Trilinos_ENABLE_INSTALL_CMAKE_CONFIG_FILES:BOOL=OFF \

#-D TPL_ENABLE_BinUtils=ON \
#-D CMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \

cmake \
-D CMAKE_C_FLAGS:STRING="" \
-D MPIH_INSTALL_DIR:FILEPATH=$MPIH_INSTALL_DIR \
-D Trilinos_ENABLE_INSTALL_CMAKE_CONFIG_FILES:BOOL=OFF \
-D CTEST_USE_LAUNCHERS:BOOL=1 \
-D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=ON \
-D Trilinos_ENABLE_TESTS:BOOL=ON \
-D Trilinos_WARNINGS_AS_ERRORS_FLAGS:STRING= \
-D Trilinos_ALLOW_NO_PACKAGES:BOOL=ON \
-D Trilinos_DEPS_XML_OUTPUT_FILE:FILEPATH= \
-D Trilinos_ENABLE_SECONDARY_STABLE_CODE:BOOL=ON \
-D MPI_EXEC_MAX_NUMPROCS:STRING=4 \
-D Trilinos_ENABLE_Intrepid:BOOL= \
-D Trilinos_ENABLE_TriKota:BOOL=OFF \
-D TPL_ENABLE_Matio=OFF \
-D Intrepid_ENABLE_DEBUG_INF_CHECK=OFF \
-D TPL_ENABLE_MPI:BOOL=ON \
-D Trilinos_ENABLE_EXPLICIT_INSTANTIATION:BOOL=ON \
-D TPL_ENABLE_Pthread:BOOL=ON \
-D Trilinos_ENABLE_TriKota:BOOL=OFF \
\
  -D TPL_ENABLE_Boost:BOOL=ON \
  -D TPL_ENABLE_BoostLib:BOOL=ON \
-D SIERRA_MIGRATION_NEW:BOOL=ON \
\
  -D Boost_INCLUDE_DIRS:PATH=$BOOST_INCLUDE_DIR \
  -D BoostLib_INCLUDE_DIRS:PATH=$BOOST_INCLUDE_DIR \
  -D BoostLib_LIBRARY_NAMES:STRING="boost_program_options;boost_system" \
  -D BoostLib_LIBRARY_DIRS:PATH="/scratch/srkenno/code/objs/tpls/boost/1.50.0/boost-program-options/gcc-4.7.2/release/address-model-64/mpi-openmpi/runtime-link-shared/;/scratch/srkenno/code/objs/tpls/boost/1.50.0/boost-system/gcc-4.7.2/release/address-model-64/mpi-openmpi/runtime-link-shared/" \
\
\
  -D TPL_ENABLE_Netcdf:BOOL=ON \
\
-D Netcdf_INCLUDE_DIRS:FILEPATH=$NETCDF_INCLUDE \
-D Netcdf_LIBRARY_DIRS:FILEPATH=$NETCDF_LIB \
-D HDF5_INCLUDE_DIRS:FILEPATH=$NETCDF_INCLUDE \
-D HDF5_LIBRARY_DIRS:FILEPATH=$NETCDF_LIB \
\
-D Trilinos_ENABLE_STK:BOOL=ON \
  -D STK_ENABLE_TESTS:BOOL=ON \
  $TRILINOS_CODE


