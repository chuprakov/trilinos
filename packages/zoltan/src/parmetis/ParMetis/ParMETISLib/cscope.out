cscope 11 /Net/hondo/raid1/home/eboman/lb/metis/ParMetis-2.0/ParMETISLib 0000429415
	@coarsen.c

15 
	~<·rm‘is.h
>

21 
	$Glob®M©ch_HEM
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

23 
i
, 
ii
, 
j
, 
k
, 
l
, 
Âbrs
, 
nvtxs
, 
úvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
maxi
, 
nk•t
,

24 
Ùh”Ï¡vtx
, 
Äeque¡s
, 
nchªged
, 
·ss
, 
nm©ched
, 
wside
;

25 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vwgt
, *
vtxdi¡
;

26 
idxty³
 *
m©ch
, *
rm©ch
, *
sm©ch
;

27 
idxty³
 *
³šd
, *
£nd±r
, *
»cv±r
;

28 
idxty³
 *
³rm
, *
”m
, *
Å”m
, *
chªged
;

29 *
Äeqs_³
;

30 
KeyV®ueTy³
 *
m©ch_»que¡s
, *
m©ch_g¿Áed
, *
³_»que¡s
;

32 
g¿ph
->
m©ch_ty³
 = 
MATCH_GLOBAL
;

34 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

35 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
M©chTmr
));

37 
nvtxs
 = 
g¿ph
->nvtxs;

38 
xadj
 = 
g¿ph
->xadj;

39 
Ïdjncy
 = 
g¿ph
->
adjncy
;

40 
adjwgt
 = 
g¿ph
->adjwgt;

41 
vwgt
 = 
g¿ph
->vwgt;

43 
vtxdi¡
 = 
g¿ph
->vtxdist;

44 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

45 
Ï¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
+1];

47 
m©ch
 = 
g¿ph
->m©ch = 
	`idxsm®loc
(
nvtxs
+g¿ph->
Äecv
, 
UNMATCHED
, "HEM_Match: match");

49 
Âbrs
 = 
g¿ph
->nnbrs;

50 
³šd
 = 
g¿ph
->peind;

51 
£nd±r
 = 
g¿ph
->sendptr;

52 
»cv±r
 = 
g¿ph
->recvptr;

56 
rm©ch
 = 
m©ch
 + 
nvtxs
;

57 
sm©ch
 = 
w¥aû
->
šdiûs
;

58 
chªged
 = 
sm©ch
+
g¿ph
->
n£nd
;

62 
m©ch_»que¡s
 = 
w¥aû
->
·œs
;

63 
m©ch_g¿Áed
 = 
m©ch_»que¡s
 + 
g¿ph
->
n£nd
;

65 
Äeqs_³
 = 
	`ism®loc
(
Âbrs
, 0, "Match_HEM:‚reqs_pe");

67 
nk•t
 = 
g¿ph
->
gnvtxs
/
ù¾
->
Åes
 - 
nvtxs
;

69 
³rm
 = (
idxty³
 *)
w¥aû
->
deg»es
;

70 
”m
 = 
³rm
 + 
nvtxs
;

71 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 1);

72 
i
=0; i<
nvtxs
; i++)

73 
”m
[
³rm
[
i
]] = i;

75 
Å”m
 = 
”m
 + 
nvtxs
;

76 
i
=0; i<
Âbrs
; i++)

77 
Å”m
[
i
] = i;

83 
nchªged
=
i
=0; i<
nvtxs
; i++) {

84 
vwgt
[
i
] > 
g¿ph
->
maxvwgt
) {

85 
m©ch
[
i
] = 
TOO_HEAVY
;

86 
nchªged
++;

89 
	`Glob®SESum
(
ù¾
, 
nchªged
) > 0) {

90 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ù¾, "Wfound %d h—vy v”tiûs!\n", 
	`Glob®SESum
(ù¾, 
nchªged
)));

91 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
m©ch
, 
sm©ch
, 
rm©ch
);

95 
nm©ched
=
·ss
=0;…ass<4;…ass++) {

96 #ifdeà
DEBUG_MATCH


97 
	`PrštVeùÜ2
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
m©ch
, "Match0");

100 
wside
 = (
g¿ph
->
Ëv–
+
·ss
)%2;

101 
nchªged
 = 
Äeque¡s
 = 0;

102 
ii
=
nm©ched
; ii<
nvtxs
; ii++) {

103 
i
 = 
³rm
[
ii
];

104 
m©ch
[
i
] =ğ
UNMATCHED
) {

105 
maxi
 = -1;

108 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

109 
k
 = 
Ïdjncy
[
j
];

110 
m©ch
[
k
] =ğ
UNMATCHED
 &&

111 (
maxi
 =ğ-1 || 
adjwgt
[maxi] <‡djwgt[
j
] || (adjwgt[maxi] =ğadjwgt[j] && 
k
 < 
nvtxs
)))

112 
maxi
 = 
j
;

115 
maxi
 != -1) {

116 
k
 = 
Ïdjncy
[
maxi
];

117 
k
 < 
nvtxs
) {

119 
i
 <ğ
k
) {

120 
m©ch
[
i
] = 
fœ¡vtx
+
k
 + 
KEEP_BIT
;

121 
m©ch
[
k
] = 
fœ¡vtx
+
i
;

124 
m©ch
[
i
] = 
fœ¡vtx
+
k
;

125 
m©ch
[
k
] = 
fœ¡vtx
+
i
 + 
KEEP_BIT
;

127 
chªged
[
nchªged
++] = 
i
;

128 
chªged
[
nchªged
++] = 
k
;

131 
m©ch
[
k
] = 
MAYBE_MATCHED
;

133 (
wside
 ==0 && 
fœ¡vtx
+
i
 < 
g¿ph
->
im­
[
k
]) || (wside == 1 && firstvtx+i > graph->imap[k])) {

134 
m©ch
[
i
] = 
MAYBE_MATCHED
;

135 
m©ch_»que¡s
[
Äeque¡s
].
key
 = 
g¿ph
->
im­
[
k
];

136 
m©ch_»que¡s
[
Äeque¡s
].
v®
 = 
fœ¡vtx
+
i
;

137 
Äeque¡s
++;

145 #ifdeà
DEBUG_MATCH


146 
	`PrštVeùÜ2
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
m©ch
, "Match1");

147 
	`my´štf
(
ù¾
, "[c: %2d] Nloÿl: %d, N»que¡s: %d\n", 
c
, 
Æoÿl
, 
Äeque¡s
);

157 
i
=0; i<
Âbrs
; i++) {

158 
	`MPI_I»cv
((*)(
m©ch_g¿Áed
+
»cv±r
[
i
]), 2*Ôecv±r[i+1]-»cv±r[i]), 
IDX_DATATYPE
,

159 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

163 
	`ikeysÜt
(
Äeque¡s
, 
m©ch_»que¡s
);

164 
j
=
i
=0; i<
Âbrs
; i++) {

165 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

166 
k
=
j
; k<
Äeque¡s
 && 
m©ch_»que¡s
[k].
key
 < 
Ùh”Ï¡vtx
; k++);

167 
	`MPI_I£nd
((*)(
m©ch_»que¡s
+
j
), 2*(
k
-j), 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

168 
j
 = 
k
;

172 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

173 
i
=0; i<
Âbrs
; i++) {

174 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
Äeqs_³
+i);

175 
Äeqs_³
[
i
] =‚reqs_pe[i]/2;

177 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

184 
	`RªdomP”mu‹
(
Âbrs
, 
Å”m
, 0);

185 
ii
=0; ii<
Âbrs
; ii++) {

186 
i
 = 
Å”m
[
ii
];

187 
³_»que¡s
 = 
m©ch_g¿Áed
+
»cv±r
[
i
];

188 
j
=0; j<
Äeqs_³
[
i
]; j++) {

189 
k
 = 
³_»que¡s
[
j
].
key
;

190 
	`ASSERTP
(
ù¾
, 
k
 >ğ
fœ¡vtx
 && k < 
Ï¡vtx
, (ù¾, "%d %d %d %d %d\n", fœ¡vtx,†a¡vtx, k, 
j
, 
³šd
[
i
]));

192 
m©ch
[
k
-
fœ¡vtx
] =ğ
UNMATCHED
) {

193 
chªged
[
nchªged
++] = 
k
-
fœ¡vtx
;

194 
nk•t
 >= 0) {

195 
m©ch
[
k
-
fœ¡vtx
] = 
³_»que¡s
[
j
].
v®
 + 
KEEP_BIT
;

196 
nk•t
--;

199 
m©ch
[
k
-
fœ¡vtx
] = 
³_»que¡s
[
j
].
v®
;

200 
³_»que¡s
[
j
].
key
 +ğ
KEEP_BIT
;

201 
nk•t
++;

207 
³_»que¡s
[
j
].
key
 = 
UNMATCHED
;

219 
i
=0; i<
Âbrs
; i++) {

220 
	`MPI_I»cv
((*)(
m©ch_»que¡s
+
£nd±r
[
i
]), 2*(£nd±r[i+1]-£nd±r[i]), 
IDX_DATATYPE
,

221 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

225 
i
=0; i<
Âbrs
; i++) {

226 
	`MPI_I£nd
((*)(
m©ch_g¿Áed
+
»cv±r
[
i
]), 2*
Äeqs_³
[i], 
IDX_DATATYPE
,

227 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

231 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

232 
i
=0; i<
Âbrs
; i++) {

233 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
Äeqs_³
+i);

234 
Äeqs_³
[
i
] =‚reqs_pe[i]/2;

236 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

243 
i
=0; i<
Âbrs
; i++) {

244 
³_»que¡s
 = 
m©ch_»que¡s
+
£nd±r
[
i
];

245 
j
=0; j<
Äeqs_³
[
i
]; j++) {

246 
m©ch
[
³_»que¡s
[
j
].
v®
-
fœ¡vtx
] =…e_»que¡s[j].
key
;

247 
³_»que¡s
[
j
].
key
 !ğ
UNMATCHED
)

248 
chªged
[
nchªged
++] = 
³_»que¡s
[
j
].
v®
-
fœ¡vtx
;

252 
i
=0; i<
nchªged
; i++) {

253 
ii
 = 
”m
[
chªged
[
i
]];

254 
³rm
[
ii
] =…”m[
nm©ched
];

255 
”m
[
³rm
[
nm©ched
]] = 
ii
;

256 
nm©ched
++;

259 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
m©ch
, 
m©ch_»que¡s
, 
m©ch_g¿Áed
, 
w¥aû
->
pv4
);

263 
úvtxs
 = 0;

264 
i
=0; i<
nvtxs
; i++) {

265 
m©ch
[
i
] =ğ
UNMATCHED
 || m©ch[i] =ğ
TOO_HEAVY
) {

266 
m©ch
[
i
] = (
fœ¡vtx
+iè+ 
KEEP_BIT
;

267 
úvtxs
++;

269 
m©ch
[
i
] >ğ
KEEP_BIT
) {

270 
úvtxs
++;

274 
ù¾
->
dbglvl
&
DBG_MATCHINFO
) {

275 
	`PrštVeùÜ2
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
m©ch
, "Match");

276 
	`my´štf
(
ù¾
, "Cnvtxs: %d\n", 
úvtxs
);

277 
	`½rštf
(
ù¾
, "Done with matching...\n");

280 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

281 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
M©chTmr
));

283 
	`GKä“
(&
Äeqs_³
, 
LTERM
);

285 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
CÚŒaùTmr
));

286 
	`Glob®_C»©eCßr£G¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
, 
úvtxs
);

287 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
CÚŒaùTmr
));

289 
	}
}

296 
	$Glob®_C»©eCßr£G¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
úvtxs
)

298 
i
, 
j
, 
k
, 
l
, 
ii
, 
jj
, 
kk
, 
Î
, 
Âbrs
, 
nvtxs
, 
Ãdges
;

299 
fœ¡vtx
, 
Ï¡vtx
, 
cfœ¡vtx
, 
şa¡vtx
, 
Ùh”Ï¡vtx
;

300 
Åes
=
ù¾
->Åes, 
my³
=ctrl->mype;

301 
úedges
, 
Ãdgesm
, 
n£nd
, 
Äecv
, 
nk“psize
, 
Äecvsize
, 
n£ndsize
, 
v
, 
u
;

302 
idxty³
 *
xadj
, *
vwgt
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

303 
idxty³
 *
m©ch
, *
cm­
, *
rcm­
, *
scm­
;

304 
idxty³
 *
cxadj
, *
cvwgt
, *
ÿdjncy
, *
ÿdjwgt
, *
cvtxdi¡
;

305 
idxty³
 *
rsizes
, *
ssizes
, *
¾’s
, *
¦’s
, *
rg¿ph
, *
sg¿ph
, *
³rm
;

306 
idxty³
 *
³šd
, *
»cv±r
, *
»cvšd
;

307 
G¿phTy³
 *
cg¿ph
;

308 
KeyV®ueTy³
 *
sÿnd
, *
rÿnd
;

309 
mask
=(1<<13)-1, 
hbË
[8192], 
hbËidx
[8192];

311 
nvtxs
 = 
g¿ph
->nvtxs;

313 
vtxdi¡
 = 
g¿ph
->vtxdist;

314 
xadj
 = 
g¿ph
->xadj;

315 
vwgt
 = 
g¿ph
->vwgt;

316 
Ïdjncy
 = 
g¿ph
->
adjncy
;

317 
adjwgt
 = 
g¿ph
->adjwgt;

319 
m©ch
 = 
g¿ph
->match;

321 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

322 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

324 
cm­
 = 
g¿ph
->cm­ = 
	`idxm®loc
(
nvtxs
+g¿ph->
Äecv
, "CreateCoarseGraph: cmap");

326 
Âbrs
 = 
g¿ph
->nnbrs;

327 
³šd
 = 
g¿ph
->peind;

328 
»cvšd
 = 
g¿ph
->recvind;

329 
»cv±r
 = 
g¿ph
->recvptr;

333 
scm­
 = 
w¥aû
->
šdiûs
;

334 
rcm­
 = 
cm­
 + 
nvtxs
;

338 
cg¿ph
 = 
	`C»©eG¿ph
();

339 
cg¿ph
->
nvtxs
 = 
úvtxs
;

340 
cg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

341 
cg¿ph
->
Ëv–
 = 
g¿ph
->level+1;

343 
cg¿ph
->
fš”
 = 
g¿ph
;

344 
g¿ph
->
cßr£r
 = 
cg¿ph
;

351 
cvtxdi¡
 = 
cg¿ph
->
vtxdi¡
 = 
	`idxm®loc
(
Åes
+1, "CreateCoarseGraph: cvtxdist");

352 
cvtxdi¡
[
Åes
] = 
úvtxs
;

354 
	`MPI_AÎg©h”
((*)(
cvtxdi¡
+
Åes
), 1, 
IDX_DATATYPE
, (*)cvtxdi¡, 1, IDX_DATATYPE, 
ù¾
->
comm
);

356 
	`MAKECSR
(
i
, 
Åes
, 
cvtxdi¡
);

358 
cg¿ph
->
gnvtxs
 = 
cvtxdi¡
[
Åes
];

360 #ifdeà
DEBUG_CONTRACT


361 
	`PrštVeùÜ
(
ù¾
, 
Åes
+1, 0, 
cvtxdi¡
, "cvtxdist");

368 
cfœ¡vtx
 = 
cvtxdi¡
[
my³
];

369 
şa¡vtx
 = 
cvtxdi¡
[
my³
+1];

372 
úvtxs
 = 0;

373 
i
=0; i<
nvtxs
; i++) {

374 
m©ch
[
i
] >ğ
KEEP_BIT
) {

375 
k
 = 
m©ch
[
i
] - 
KEEP_BIT
;

376 
k
>=
fœ¡vtx
 && k<fœ¡vtx+
i
)

379 
cm­
[
i
] = 
cfœ¡vtx
 + 
úvtxs
++;

380 
k
 !ğ
fœ¡vtx
+
i
 && (k>=fœ¡vtx && k<
Ï¡vtx
)) {

381 
cm­
[
k
-
fœ¡vtx
] = cm­[
i
];

382 
m©ch
[
k
-
fœ¡vtx
] +ğ
KEEP_BIT
;

386 
	`ASSERT
(
ù¾
, 
úvtxs
 =ğ
şa¡vtx
-
cfœ¡vtx
);

388 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
cm­
, 
scm­
, 
rcm­
);

392 
i
=0; i<
nvtxs
; i++) {

393 
m©ch
[
i
] < 
KEEP_BIT
) {

394 
cm­
[
i
] = 
rcm­
[
	`BS—rch
(
g¿ph
->
Äecv
, 
»cvšd
, 
m©ch
[i])];

398 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
cm­
, 
scm­
, 
rcm­
);

401 #ifdeà
DEBUG_CONTRACT


402 
	`PrštVeùÜ
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
cm­
, "Cmap");

410 
sÿnd
 = 
w¥aû
->
·œs
;

411 
rÿnd
 = 
g¿ph
->rÿnd = (
KeyV®ueTy³
 *)
	`GKm®loc
(
»cv±r
[
Âbrs
]*(KeyValueType), "CreateCoarseGraph:„cand");

413 
nk“psize
 = 
n£nd
 = 
Äecv
 = 0;

414 
i
=0; i<
nvtxs
; i++) {

415 
m©ch
[
i
] < 
KEEP_BIT
) {

416 
sÿnd
[
n£nd
].
key
 = 
m©ch
[
i
];

417 
sÿnd
[
n£nd
].
v®
 = 
i
;

418 
n£nd
++;

421 
nk“psize
 +ğ(
xadj
[
i
+1]-xadj[i]);

423 
k
 = 
m©ch
[
i
]-
KEEP_BIT
;

424 
k
<
fœ¡vtx
 || k>=
Ï¡vtx
) {

425 
rÿnd
[
Äecv
].
key
 = 
k
;

426 
rÿnd
[
Äecv
].
v®
 = 
cm­
[
i
] - 
cfœ¡vtx
;

427 
	`ASSERT
(
ù¾
, 
rÿnd
[
Äecv
].
v®
>=0 &&„ÿnd[Äecv].v®<
úvtxs
);

428 
Äecv
++;

434 #ifdeà
DEBUG_CONTRACT


435 
	`PrštPaœs
(
ù¾
, 
n£nd
, 
sÿnd
, "scand");

436 
	`PrštPaœs
(
ù¾
, 
Äecv
, 
rÿnd
, "rcand");

443 
rsizes
 = 
w¥aû
->
pv1
;

444 
ssizes
 = 
w¥aû
->
pv2
;

445 
	`idx£t
(
Âbrs
, 0, 
ssizes
);

446 
	`idx£t
(
Âbrs
, 0, 
rsizes
);

447 
¾’s
 = 
g¿ph
->¾’ ğ
	`idxm®loc
(
Âbrs
+1, "CreateCoarseGraph: graph->rlens");

448 
¦’s
 = 
g¿ph
->¦’ ğ
	`idxm®loc
(
Âbrs
+1, "CreateCoarseGraph: graph->slens");

451 
	`ikeyv®sÜt
(
n£nd
, 
sÿnd
);

452 
¦’s
[0] = 0;

453 
k
=
i
=0; i<
Âbrs
; i++) {

454 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

455 ; 
k
<
n£nd
 && 
sÿnd
[k].
key
 < 
Ùh”Ï¡vtx
; k++)

456 
ssizes
[
i
] +ğ(
xadj
[
sÿnd
[
k
].
v®
+1]-xadj[scand[k].val]);

457 
¦’s
[
i
+1] = 
k
;

461 
	`ikeyv®sÜt
(
Äecv
, 
rÿnd
);

462 
¾’s
[0] = 0;

463 
k
=
i
=0; i<
Âbrs
; i++) {

464 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

465 ; 
k
<
Äecv
 && 
rÿnd
[k].
key
 < 
Ùh”Ï¡vtx
; k++);

466 
¾’s
[
i
+1] = 
k
;

469 #ifdeà
DEBUG_CONTRACT


470 
	`PrštVeùÜ
(
ù¾
, 
Âbrs
+1, 0, 
¦’s
, "slens");

471 
	`PrštVeùÜ
(
ù¾
, 
Âbrs
+1, 0, 
¾’s
, "rlens");

478 
i
=0; i<
Âbrs
; i++) {

479 
¾’s
[
i
+1]-rlens[i] > 0)

480 
	`MPI_I»cv
((*)(
rsizes
+
i
), 1, 
IDX_DATATYPE
, 
³šd
[i], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

484 
i
=0; i<
Âbrs
; i++) {

485 
¦’s
[
i
+1]-slens[i] > 0)

486 
	`MPI_I£nd
((*)(
ssizes
+
i
), 1, 
IDX_DATATYPE
, 
³šd
[i], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

490 
i
=0; i<
Âbrs
; i++) {

491 
¾’s
[
i
+1]-rlens[i] > 0)

492 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &ù¾->
¡©us
);

494 
i
=0; i<
Âbrs
; i++) {

495 
¦’s
[
i
+1]-slens[i] > 0)

496 
	`MPI_Wa™
(
ù¾
->
¤eq
+
i
, &ù¾->
¡©us
);

500 #ifdeà
DEBUG_CONTRACT


501 
	`PrštVeùÜ
(
ù¾
, 
Âbrs
, 0, 
rsizes
, "rsizes");

502 
	`PrštVeùÜ
(
ù¾
, 
Âbrs
, 0, 
ssizes
, "ssizes");

511 
Äecvsize
 = 
	`idxsum
(
Âbrs
, 
rsizes
);

512 
n£ndsize
 = 
	`idxsum
(
Âbrs
, 
ssizes
);

513 3*(
Äecv
+
n£nd
è+ 2*(
Äecvsize
+
n£ndsize
è<ğ
w¥aû
->
Æ¬ge
) {

514 
rg¿ph
 = (
idxty³
 *)
w¥aû
->
deg»es
;

515 
sg¿ph
 = 
rg¿ph
 + 3*
Äecv
+2*
Äecvsize
;

518 
rg¿ph
 = 
	`idxm®loc
(3*
Äecv
+2*
Äecvsize
, "CreateCoarseGraph:„graph");

519 
sg¿ph
 = 
	`idxm®loc
(3*
n£nd
+2*
n£ndsize
, "CreateCoarseGraph: sgraph");

524 
l
=
i
=0; i<
Âbrs
; i++) {

525 
¾’s
[
i
+1]-rlens[i] > 0) {

527 
	`MPI_I»cv
((*)(
rg¿ph
+
l
), 3*(
¾’s
[
i
+1]-¾’s[i])+2*
rsizes
[i], 
IDX_DATATYPE
, 
³šd
[i], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

528 
l
 +ğ3*(
¾’s
[
i
+1]-¾’s[i])+2*
rsizes
[i];

534 
Î
=
l
=
i
=0; i<
Âbrs
; i++) {

535 
¦’s
[
i
+1]-slens[i] > 0) {

536 
k
=
¦’s
[
i
]; k<slens[i+1]; k++) {

537 
ii
 = 
sÿnd
[
k
].
v®
;

538 
sg¿ph
[
Î
++] = 
fœ¡vtx
+
ii
;

539 
sg¿ph
[
Î
++] = 
xadj
[
ii
+1]-xadj[ii];

540 
sg¿ph
[
Î
++] = 
vwgt
[
ii
];

541 
jj
=
xadj
[
ii
]; jj<xadj[ii+1]; jj++) {

542 
sg¿ph
[
Î
++] = 
cm­
[
Ïdjncy
[
jj
]];

543 
sg¿ph
[
Î
++] = 
adjwgt
[
jj
];

547 
	`ASSERT
(
ù¾
, 
Î
-
l
 =ğ3*(
¦’s
[
i
+1]-¦’s[i])+2*
ssizes
[i]);

550 
	`MPI_I£nd
((*)(
sg¿ph
+
l
), 
Î
-l, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

551 
l
 = 
Î
;

556 
i
=0; i<
Âbrs
; i++) {

557 
¾’s
[
i
+1]-rlens[i] > 0)

558 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &ù¾->
¡©us
);

560 
i
=0; i<
Âbrs
; i++) {

561 
¦’s
[
i
+1]-slens[i] > 0)

562 
	`MPI_Wa™
(
ù¾
->
¤eq
+
i
, &ù¾->
¡©us
);

566 #ifdeà
DEBUG_CONTRACT


567 
	`½rštf
(
ù¾
, "Graphs were sent!\n");

568 
	`PrštT¿nsã»dG¿phs
(
ù¾
, 
Âbrs
, 
³šd
, 
¦’s
, 
¾’s
, 
sg¿ph
, 
rg¿ph
);

575 
³rm
 = 
	`idxsm®loc
(
»cv±r
[
Âbrs
], -1, "CreateCoarseGraph:…erm");

576 
j
=
i
=0; i<
Äecv
; i++) {

578 
³rm
[
	`BS—rch
(
g¿ph
->
Äecv
, 
»cvšd
, 
rg¿ph
[
j
])] = j+1;

579 
j
 +ğ3+2*
rg¿ph
[j+1];

587 
cxadj
 = 
cg¿ph
->
xadj
 = 
	`idxm®loc
(
úvtxs
+1, "CreateCoarserGraph: cxadj");

588 
cvwgt
 = 
cg¿ph
->
vwgt
 = 
	`idxm®loc
(
úvtxs
, "CreateCoarserGraph: cvwgt");

589 
ÿdjncy
 = 
	`idxm®loc
(2*(
nk“psize
+
Äecvsize
), "CreateCoarserGraph: cadjncy");

590 
ÿdjwgt
 = 
ÿdjncy
 + 
nk“psize
+
Äecvsize
;

592 
	`i£t
(8192, -1, 
hbË
);

594 
cxadj
[0] = 
úvtxs
 = 
úedges
 = 0;

595 
i
=0; i<
nvtxs
; i++) {

596 
m©ch
[
i
] >ğ
KEEP_BIT
) {

597 
v
 = 
fœ¡vtx
+
i
;

598 
u
 = 
m©ch
[
i
]-
KEEP_BIT
;

600 
u
>=
fœ¡vtx
 && u<
Ï¡vtx
 && 
v
 > u)

604 
cvwgt
[
úvtxs
] = 
vwgt
[
i
];

605 
Ãdges
 = 0;

607 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

608 
k
 = 
cm­
[
Ïdjncy
[
j
]];

609 
k
 !ğ
cfœ¡vtx
+
úvtxs
) {

610 
l
 = 
k
&
mask
;

611 
hbË
[
l
] == -1) {

612 
hbË
[
l
] = 
k
;

613 
hbËidx
[
l
] = 
úedges
+
Ãdges
;

614 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

615 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

617 
hbË
[
l
] =ğ
k
) {

618 
ÿdjwgt
[
hbËidx
[
l
]] +ğ
adjwgt
[
j
];

621 
l
=0;†<
Ãdges
;†++) {

622 
ÿdjncy
[
úedges
+
l
] =ğ
k
)

625 
l
 < 
Ãdges
) {

626 
ÿdjwgt
[
úedges
+
l
] +ğ
adjwgt
[
j
];

629 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

630 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

637 
v
 !ğ
u
) {

638 
u
>=
fœ¡vtx
 && u<
Ï¡vtx
) {

639 
u
 -ğ
fœ¡vtx
;

640 
cvwgt
[
úvtxs
] +ğ
vwgt
[
u
];

642 
j
=
xadj
[
u
]; j<xadj[u+1]; j++) {

643 
k
 = 
cm­
[
Ïdjncy
[
j
]];

644 
k
 !ğ
cfœ¡vtx
+
úvtxs
) {

645 
l
 = 
k
&
mask
;

646 
hbË
[
l
] == -1) {

647 
hbË
[
l
] = 
k
;

648 
hbËidx
[
l
] = 
úedges
+
Ãdges
;

649 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

650 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

652 
hbË
[
l
] =ğ
k
) {

653 
ÿdjwgt
[
hbËidx
[
l
]] +ğ
adjwgt
[
j
];

656 
l
=0;†<
Ãdges
;†++) {

657 
ÿdjncy
[
úedges
+
l
] =ğ
k
)

660 
l
 < 
Ãdges
) {

661 
ÿdjwgt
[
úedges
+
l
] +ğ
adjwgt
[
j
];

664 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

665 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

672 
u
 = 
³rm
[
	`BS—rch
(
g¿ph
->
Äecv
, 
»cvšd
, u)];

673 
cvwgt
[
úvtxs
] +ğ
rg¿ph
[
u
+1];

675 
j
=0; j<
rg¿ph
[
u
]; j++) {

676 
k
 = 
rg¿ph
[
u
+2+2*
j
];

677 
k
 !ğ
cfœ¡vtx
+
úvtxs
) {

678 
l
 = 
k
&
mask
;

679 
hbË
[
l
] == -1) {

680 
hbË
[
l
] = 
k
;

681 
hbËidx
[
l
] = 
úedges
+
Ãdges
;

682 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

683 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
rg¿ph
[
u
+2+2*
j
+1];

685 
hbË
[
l
] =ğ
k
) {

686 
ÿdjwgt
[
hbËidx
[
l
]] +ğ
rg¿ph
[
u
+2+2*
j
+1];

689 
l
=0;†<
Ãdges
;†++) {

690 
ÿdjncy
[
úedges
+
l
] =ğ
k
)

693 
l
 < 
Ãdges
) {

694 
ÿdjwgt
[
úedges
+
l
] +ğ
rg¿ph
[
u
+2+2*
j
+1];

697 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

698 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
rg¿ph
[
u
+2+2*
j
+1];

706 
úedges
 +ğ
Ãdges
;

707 
j
=
cxadj
[
úvtxs
]; j<
úedges
; j++)

708 
hbË
[
ÿdjncy
[
j
]&
mask
] = -1;

709 
cxadj
[++
úvtxs
] = 
úedges
;

713 
cg¿ph
->
Ãdges
 = 
úedges
;

715 
cg¿ph
->
adjncy
 = 
	`idxm®loc
(
úedges
, "CreateCoarserGraph: cadjncy");

716 
cg¿ph
->
adjwgt
 = 
	`idxm®loc
(
úedges
, "CreateCoarserGraph: cadjwgt");

717 
	`idxcİy
(
úedges
, 
ÿdjncy
, 
cg¿ph
->
adjncy
);

718 
	`idxcİy
(
úedges
, 
ÿdjwgt
, 
cg¿ph
->
adjwgt
);

719 
	`ä“
(
ÿdjncy
);

721 
	`ä“
(
³rm
);

723 
rg¿ph
 !ğ(
idxty³
 *)
w¥aû
->
deg»es
)

724 
	`GKä“
(&
rg¿ph
, &
sg¿ph
, 
LTERM
);

726 
	}
}

733 
	$LoÿlM©ch_HEM
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

735 
i
, 
ii
, 
j
, 
k
, 
l
, 
nvtxs
, 
úvtxs
, 
fœ¡vtx
, 
maxi
;

736 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

737 
idxty³
 *
³rm
, *
m©ch
;

739 
g¿ph
->
m©ch_ty³
 = 
MATCH_LOCAL
;

741 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

742 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
M©chTmr
));

744 
nvtxs
 = 
g¿ph
->nvtxs;

745 
xadj
 = 
g¿ph
->xadj;

746 
Ïdjncy
 = 
g¿ph
->
adjncy
;

747 
adjwgt
 = 
g¿ph
->adjwgt;

749 
vtxdi¡
 = 
g¿ph
->vtxdist;

750 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

752 
m©ch
 = 
g¿ph
->m©ch = 
	`idxm®loc
(
nvtxs
+g¿ph->
Äecv
, "HEM_Match: match");

753 
	`idx£t
(
nvtxs
, 
UNMATCHED
, 
m©ch
);

754 
	`idx£t
(
g¿ph
->
Äecv
, 0, 
m©ch
+
nvtxs
);

760 
³rm
 = 
w¥aû
->
šdiûs
;

761 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 1);

762 
úvtxs
 = 0;

763 
ii
=0; ii<
nvtxs
; ii++) {

764 
i
 = 
³rm
[
ii
];

765 
m©ch
[
i
] =ğ
UNMATCHED
) {

766 
maxi
 = -1;

769 
g¿ph
->
vwgt
[
i
] < g¿ph->
maxvwgt
) {

770 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

771 
m©ch
[
Ïdjncy
[
j
]] =ğ
UNMATCHED
 && 
g¿ph
->
vwgt
[Ïdjncy[j]] <ğg¿ph->
maxvwgt
 &&

772 (
maxi
 =ğ-1 || 
adjwgt
[maxi] <‡djwgt[
j
]))

773 
maxi
 = 
j
;

777 
maxi
 != -1) {

778 
k
 = 
Ïdjncy
[
maxi
];

779 
i
 <ğ
k
) {

780 
m©ch
[
i
] = 
fœ¡vtx
+
k
 + 
KEEP_BIT
;

781 
m©ch
[
k
] = 
fœ¡vtx
+
i
;

784 
m©ch
[
i
] = 
fœ¡vtx
+
k
;

785 
m©ch
[
k
] = 
fœ¡vtx
+
i
 + 
KEEP_BIT
;

789 
m©ch
[
i
] = (
fœ¡vtx
+iè+ 
KEEP_BIT
;

791 
úvtxs
++;

795 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
m©ch
, 
w¥aû
->
šdiûs
, m©ch+
nvtxs
);

798 #ifdeà
DEBUG_MATCH


799 
	`PrštVeùÜ2
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
m©ch
, "Match1");

803 
ù¾
->
dbglvl
&
DBG_MATCHINFO
) {

804 
	`PrštVeùÜ2
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
m©ch
, "Match");

805 
	`my´štf
(
ù¾
, "Cnvtxs: %d\n", 
úvtxs
);

806 
	`½rštf
(
ù¾
, "Done with matching...\n");

809 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

810 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
M©chTmr
));

813 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
CÚŒaùTmr
));

814 
	`Loÿl_C»©eCßr£G¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
, 
úvtxs
);

815 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
CÚŒaùTmr
));

817 
	}
}

826 
	$Loÿl_C»©eCßr£G¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
úvtxs
)

828 
i
, 
j
, 
k
, 
l
, 
ii
, 
jj
, 
kk
, 
Î
, 
Âbrs
, 
nvtxs
, 
Ãdges
, 
fœ¡vtx
, 
cfœ¡vtx
;

829 
Åes
=
ù¾
->Åes, 
my³
=ctrl->mype;

830 
úedges
, 
v
, 
u
;

831 
idxty³
 *
xadj
, *
vwgt
, *
vsize
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
, *
wh”e
;

832 
idxty³
 *
m©ch
, *
cm­
, *
rcm­
, *
scm­
;

833 
idxty³
 *
cxadj
, *
cvwgt
, *
cvsize
, *
ÿdjncy
, *
ÿdjwgt
, *
cvtxdi¡
, *
cwh”e
;

834 
G¿phTy³
 *
cg¿ph
;

835 
mask
=(1<<13)-1, 
hbË
[8192], 
hbËidx
[8192];

837 
nvtxs
 = 
g¿ph
->nvtxs;

839 
vtxdi¡
 = 
g¿ph
->vtxdist;

840 
xadj
 = 
g¿ph
->xadj;

841 
vwgt
 = 
g¿ph
->vwgt;

842 
vsize
 = 
g¿ph
->vsize;

843 
Ïdjncy
 = 
g¿ph
->
adjncy
;

844 
adjwgt
 = 
g¿ph
->adjwgt;

845 
wh”e
 = 
g¿ph
->where;

847 
m©ch
 = 
g¿ph
->match;

849 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

851 
cm­
 = 
g¿ph
->cm­ = 
	`idxm®loc
(
nvtxs
+g¿ph->
Äecv
, "CreateCoarseGraph: cmap");

854 
cg¿ph
 = 
	`C»©eG¿ph
();

855 
cg¿ph
->
nvtxs
 = 
úvtxs
;

856 
cg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

857 
cg¿ph
->
Ëv–
 = 
g¿ph
->level+1;

859 
cg¿ph
->
fš”
 = 
g¿ph
;

860 
g¿ph
->
cßr£r
 = 
cg¿ph
;

866 
cvtxdi¡
 = 
cg¿ph
->
vtxdi¡
 = 
	`idxm®loc
(
Åes
+1, "CreateCoarseGraph: cvtxdist");

867 
cvtxdi¡
[
Åes
] = 
úvtxs
;

869 
	`MPI_AÎg©h”
((*)(
cvtxdi¡
+
Åes
), 1, 
IDX_DATATYPE
, (*)cvtxdi¡, 1, IDX_DATATYPE, 
ù¾
->
comm
);

871 
	`MAKECSR
(
i
, 
Åes
, 
cvtxdi¡
);

873 
cg¿ph
->
gnvtxs
 = 
cvtxdi¡
[
Åes
];

875 #ifdeà
DEBUG_CONTRACT


876 
	`PrštVeùÜ
(
ù¾
, 
Åes
+1, 0, 
cvtxdi¡
, "cvtxdist");

883 
cfœ¡vtx
 = 
cvtxdi¡
[
my³
];

886 
úvtxs
 = 0;

887 
i
=0; i<
nvtxs
; i++) {

888 
m©ch
[
i
] >ğ
KEEP_BIT
) {

889 
k
 = 
m©ch
[
i
] - 
KEEP_BIT
;

890 
k
<
fœ¡vtx
+
i
)

893 
cm­
[
i
] = 
cfœ¡vtx
 + 
úvtxs
++;

894 
k
 !ğ
fœ¡vtx
+
i
) {

895 
cm­
[
k
-
fœ¡vtx
] = cm­[
i
];

896 
m©ch
[
k
-
fœ¡vtx
] +ğ
KEEP_BIT
;

901 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
cm­
, 
w¥aû
->
šdiûs
, cm­+
nvtxs
);

904 #ifdeà
DEBUG_CONTRACT


905 
	`PrštVeùÜ
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
cm­
, "Cmap");

914 
cxadj
 = 
cg¿ph
->
xadj
 = 
	`idxm®loc
(
úvtxs
+1, "CreateCoarserGraph: cxadj");

915 
cvwgt
 = 
cg¿ph
->
vwgt
 = 
	`idxm®loc
(
úvtxs
, "CreateCoarserGraph: cvwgt");

916 
vsize
 !ğ
NULL
)

917 
cvsize
 = 
cg¿ph
->
vsize
 = 
	`idxm®loc
(
úvtxs
, "CreateCoarserGraph: cvsize");

918 
wh”e
 !ğ
NULL
)

919 
cwh”e
 = 
cg¿ph
->
wh”e
 = 
	`idxm®loc
(
úvtxs
, "CreateCoarserGraph: cwhere");

920 
ÿdjncy
 = 
	`idxm®loc
(2*
g¿ph
->
Ãdges
, "CreateCoarserGraph: cadjncy");

921 
ÿdjwgt
 = 
ÿdjncy
+
g¿ph
->
Ãdges
;

923 
	`i£t
(8192, -1, 
hbË
);

925 
cxadj
[0] = 
úvtxs
 = 
úedges
 = 0;

926 
i
=0; i<
nvtxs
; i++) {

927 
v
 = 
fœ¡vtx
+
i
;

928 
u
 = 
m©ch
[
i
]-
KEEP_BIT
;

930 
v
 > 
u
)

934 
cvwgt
[
úvtxs
] = 
vwgt
[
i
];

935 
vsize
 !ğ
NULL
)

936 
cvsize
[
úvtxs
] = 
vsize
[
i
];

937 
wh”e
 !ğ
NULL
)

938 
cwh”e
[
úvtxs
] = 
wh”e
[
i
];

939 
Ãdges
 = 0;

941 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

942 
k
 = 
cm­
[
Ïdjncy
[
j
]];

943 
k
 !ğ
cfœ¡vtx
+
úvtxs
) {

944 
l
 = 
k
&
mask
;

945 
hbË
[
l
] == -1) {

946 
hbË
[
l
] = 
k
;

947 
hbËidx
[
l
] = 
úedges
+
Ãdges
;

948 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

949 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

951 
hbË
[
l
] =ğ
k
) {

952 
ÿdjwgt
[
hbËidx
[
l
]] +ğ
adjwgt
[
j
];

955 
l
=0;†<
Ãdges
;†++) {

956 
ÿdjncy
[
úedges
+
l
] =ğ
k
)

959 
l
 < 
Ãdges
) {

960 
ÿdjwgt
[
úedges
+
l
] +ğ
adjwgt
[
j
];

963 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

964 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

971 
v
 !ğ
u
) {

972 
u
 -ğ
fœ¡vtx
;

973 
cvwgt
[
úvtxs
] +ğ
vwgt
[
u
];

974 
vsize
 !ğ
NULL
)

975 
cvsize
[
úvtxs
] +ğ
vsize
[
u
];

976 
wh”e
 !ğ
NULL
 && 
cwh”e
[
úvtxs
] !ğwh”e[
u
])

977 
	`my´štf
(
ù¾
, "Som‘hšg w’ˆwrÚg w™hhwh”loÿÈm©chšg! %d %d\n", 
cwh”e
[
úvtxs
], 
wh”e
[
u
]);

979 
j
=
xadj
[
u
]; j<xadj[u+1]; j++) {

980 
k
 = 
cm­
[
Ïdjncy
[
j
]];

981 
k
 !ğ
cfœ¡vtx
+
úvtxs
) {

982 
l
 = 
k
&
mask
;

983 
hbË
[
l
] == -1) {

984 
hbË
[
l
] = 
k
;

985 
hbËidx
[
l
] = 
úedges
+
Ãdges
;

986 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

987 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

989 
hbË
[
l
] =ğ
k
) {

990 
ÿdjwgt
[
hbËidx
[
l
]] +ğ
adjwgt
[
j
];

993 
l
=0;†<
Ãdges
;†++) {

994 
ÿdjncy
[
úedges
+
l
] =ğ
k
)

997 
l
 < 
Ãdges
) {

998 
ÿdjwgt
[
úedges
+
l
] +ğ
adjwgt
[
j
];

1001 
ÿdjncy
[
úedges
+
Ãdges
] = 
k
;

1002 
ÿdjwgt
[
úedges
+
Ãdges
++] = 
adjwgt
[
j
];

1009 
úedges
 +ğ
Ãdges
;

1010 
j
=
cxadj
[
úvtxs
]; j<
úedges
; j++)

1011 
hbË
[
ÿdjncy
[
j
]&
mask
] = -1;

1012 
cxadj
[++
úvtxs
] = 
úedges
;

1015 
cg¿ph
->
Ãdges
 = 
úedges
;

1017 
cg¿ph
->
adjncy
 = 
	`idxm®loc
(
úedges
, "CreateCoarserGraph: cadjncy");

1018 
cg¿ph
->
adjwgt
 = 
	`idxm®loc
(
úedges
, "CreateCoarserGraph: cadjwgt");

1019 
	`idxcİy
(
úedges
, 
ÿdjncy
, 
cg¿ph
->
adjncy
);

1020 
	`idxcİy
(
úedges
, 
ÿdjwgt
, 
cg¿ph
->
adjwgt
);

1021 
	`GKä“
(&
ÿdjncy
, &
g¿ph
->
wh”e
, 
LTERM
);

1023 
	}
}

	@comm.c

11 
	~<·rm‘is.h
>

18 
	$CommIÁ”çûD©a
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
d©a
,

19 
idxty³
 *
£ndveùÜ
, idxty³ *
»cvveùÜ
)

21 
i
, 
j
, 
k
, 
Âbrs
, 
fœ¡vtx
;

22 
idxty³
 *
³šd
, *
£nd±r
, *
£ndšd
, *
»cv±r
, *
»cvšd
;

24 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

25 
Âbrs
 = 
g¿ph
->nnbrs;

26 
³šd
 = 
g¿ph
->peind;

27 
£nd±r
 = 
g¿ph
->sendptr;

28 
£ndšd
 = 
g¿ph
->sendind;

29 
»cv±r
 = 
g¿ph
->recvptr;

30 
»cvšd
 = 
g¿ph
->recvind;

33 
i
=0; i<
Âbrs
; i++) {

34 
	`MPI_I»cv
((*)(
»cvveùÜ
+
»cv±r
[
i
]),„ecv±r[i+1]-»cv±r[i], 
IDX_DATATYPE
,

35 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

39 
k
 = 
£nd±r
[
Âbrs
];

40 
i
=0; i<
k
; i++)

41 
£ndveùÜ
[
i
] = 
d©a
[
£ndšd
[i]-
fœ¡vtx
];

43 
i
=0; i<
Âbrs
; i++) {

44 
	`MPI_I£nd
((*)(
£ndveùÜ
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

45 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

49 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

50 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

52 
	}
}

59 
	$CommChªgedIÁ”çûD©a
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
,

60 
nchªged
, 
idxty³
 *
chªged
, idxty³ *
d©a
,

61 
KeyV®ueTy³
 *
£nd·œs
, KeyV®ueTy³ *
»cv·œs
, 
idxty³
 *
p£nd±r
)

63 
i
, 
j
, 
k
, 
n
, 
³num
, 
Âbrs
, 
fœ¡vtx
, 
Äecv
;

64 
idxty³
 *
³šd
, *
£nd±r
, *
»cv±r
, *
»cvšd
, *
³xadj
, *
³adjncy
, *
³adjloc
;

65 
KeyV®ueTy³
 *
·œs
;

67 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

68 
Âbrs
 = 
g¿ph
->nnbrs;

69 
Äecv
 = 
g¿ph
->nrecv;

70 
³šd
 = 
g¿ph
->peind;

71 
£nd±r
 = 
g¿ph
->sendptr;

72 
»cv±r
 = 
g¿ph
->recvptr;

73 
»cvšd
 = 
g¿ph
->recvind;

74 
³xadj
 = 
g¿ph
->pexadj;

75 
³adjncy
 = 
g¿ph
->peadjncy;

76 
³adjloc
 = 
g¿ph
->peadjloc;

79 
i
=0; i<
Âbrs
; i++) {

80 
	`MPI_I»cv
((*)(
»cv·œs
+
»cv±r
[
i
]), 2*Ôecv±r[i+1]-»cv±r[i]), 
IDX_DATATYPE
,

81 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

84 
nchªged
 != 0) {

85 
	`idxcİy
(
ù¾
->
Åes
, 
£nd±r
, 
p£nd±r
);

88 
i
=0; i<
nchªged
; i++) {

89 
j
 = 
chªged
[
i
];

90 
k
=
³xadj
[
j
]; k<pexadj[j+1]; k++) {

91 
³num
 = 
³adjncy
[
k
];

92 
£nd·œs
[
p£nd±r
[
³num
]].
key
 = 
³adjloc
[
k
];

93 
£nd·œs
[
p£nd±r
[
³num
]].
v®
 = 
d©a
[
j
];

94 
p£nd±r
[
³num
]++;

98 
i
=0; i<
Âbrs
; i++) {

99 
	`MPI_I£nd
((*)(
£nd·œs
+
£nd±r
[
i
]), 2*(
p£nd±r
[i]-£nd±r[i]), 
IDX_DATATYPE
,

100 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

104 
i
=0; i<
Âbrs
; i++)

105 
	`MPI_I£nd
((*)(
£nd·œs
), 0, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

109 
i
=0; i<
Âbrs
; i++) {

110 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &(ù¾->
¡©us
));

111 
	`MPI_G‘_couÁ
(&
ù¾
->
¡©us
, 
IDX_DATATYPE
, &
n
);

112 
n
 != 0) {

113 
n
 =‚/2;

114 
·œs
 = 
»cv·œs
+
g¿ph
->
»cv±r
[
i
];

115 
k
=0; k<
n
; k++)

116 
d©a
[
·œs
[
k
].
key
] =…aœs[k].
v®
;

120 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

121 
	}
}

128 
	$Glob®SEMax
(
CŒlTy³
 *
ù¾
, 
v®ue
)

130 
max
;

132 
	`MPI_AÎ»duû
((*)&
v®ue
, (*)&
max
, 1, 
MPI_INT
, 
MPI_MAX
, 
ù¾
->
comm
);

134  
max
;

135 
	}
}

140 
	$Glob®SEMaxDoubË
(
CŒlTy³
 *
ù¾
, 
v®ue
)

142 
max
;

144 
	`MPI_AÎ»duû
((*)&
v®ue
, (*)&
max
, 1, 
MPI_DOUBLE
, 
MPI_MAX
, 
ù¾
->
comm
);

146  
max
;

147 
	}
}

154 
	$Glob®SEMš
(
CŒlTy³
 *
ù¾
, 
v®ue
)

156 
mš
;

158 
	`MPI_AÎ»duû
((*)&
v®ue
, (*)&
mš
, 1, 
MPI_INT
, 
MPI_MIN
, 
ù¾
->
comm
);

160  
mš
;

161 
	}
}

166 
	$Glob®SESum
(
CŒlTy³
 *
ù¾
, 
v®ue
)

168 
sum
;

170 
	`MPI_AÎ»duû
((*)&
v®ue
, (*)&
sum
, 1, 
MPI_INT
, 
MPI_SUM
, 
ù¾
->
comm
);

172  
sum
;

173 
	}
}

	@debug.c

16 
	~<·rm‘is.h
>

22 
	$PrštVeùÜ
(
CŒlTy³
 *
ù¾
, 
n
, 
fœ¡
, 
idxty³
 *
vec
, *
t™Ë
)

24 
i
, 
³num
;

26 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

27 
ù¾
->
my³
 =ğ
³num
) {

28 
ù¾
->
my³
 == 0)

29 
	`´štf
("%s\n", 
t™Ë
);

30 
	`´štf
("\t%3d. ", 
ù¾
->
my³
);

31 
i
=0; i<
n
; i++)

32 
	`´štf
("[%d %hd] ", 
fœ¡
+
i
, 
vec
[i]);

33 
	`´štf
("\n");

34 
	`fæush
(
¡dout
);

36 
	`MPI_B¬r›r
(
ù¾
->
comm
);

38 
	}
}

44 
	$PrštVeùÜ2
(
CŒlTy³
 *
ù¾
, 
n
, 
fœ¡
, 
idxty³
 *
vec
, *
t™Ë
)

46 
i
, 
³num
;

48 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

49 
ù¾
->
my³
 =ğ
³num
) {

50 
ù¾
->
my³
 == 0)

51 
	`´štf
("%s\n", 
t™Ë
);

52 
	`´štf
("\t%3d. ", 
ù¾
->
my³
);

53 
i
=0; i<
n
; i++)

54 
	`´štf
("[%d %d.%hd] ", 
fœ¡
+
i
, (
vec
[i]>=
KEEP_BIT
 ? 1 : 0), (vec[i]>=KEEP_BIT ? vec[i]-KEEP_BIT : vec[i]));

55 
	`´štf
("\n");

56 
	`fæush
(
¡dout
);

58 
	`MPI_B¬r›r
(
ù¾
->
comm
);

60 
	}
}

66 
	$PrštPaœs
(
CŒlTy³
 *
ù¾
, 
n
, 
KeyV®ueTy³
 *
·œs
, *
t™Ë
)

68 
i
, 
³num
;

70 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

71 
ù¾
->
my³
 =ğ
³num
) {

72 
ù¾
->
my³
 == 0)

73 
	`´štf
("%s\n", 
t™Ë
);

74 
	`´štf
("\t%3d. ", 
ù¾
->
my³
);

75 
i
=0; i<
n
; i++)

76 
	`´štf
("[%d %hd,%hd] ", 
i
, 
·œs
[i].
key
,…aœs[i].
v®
);

77 
	`´štf
("\n");

78 
	`fæush
(
¡dout
);

80 
	`MPI_B¬r›r
(
ù¾
->
comm
);

82 
	}
}

90 
	$PrštG¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

92 
i
, 
j
, 
k
, 
³num
;

93 
fœ¡vtx
;

95 
	`MPI_B¬r›r
(
ù¾
->
comm
);

97 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

99 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

100 
ù¾
->
my³
 =ğ
³num
) {

101 
	`´štf
("\t%d", 
³num
);

102 
i
=0; i<
g¿ph
->
nvtxs
; i++) {

103 
i
==0)

104 
	`´štf
("\t%2d %2d\t", 
fœ¡vtx
+
i
, 
g¿ph
->
vwgt
[i]);

106 
	`´štf
("\t\t%2d %2d\t", 
fœ¡vtx
+
i
, 
g¿ph
->
vwgt
[i]);

107 
j
=
g¿ph
->
xadj
[
i
]; j<graph->xadj[i+1]; j++)

108 
	`´štf
("[%d %d] ", 
g¿ph
->
adjncy
[
j
], g¿ph->
adjwgt
[j]);

109 
	`´štf
("\n");

111 
	`fæush
(
¡dout
);

113 
	`MPI_B¬r›r
(
ù¾
->
comm
);

115 
	}
}

122 
	$PrštG¿ph2
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

124 
i
, 
j
, 
k
, 
³num
;

125 
fœ¡vtx
;

127 
	`MPI_B¬r›r
(
ù¾
->
comm
);

129 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

131 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

132 
ù¾
->
my³
 =ğ
³num
) {

133 
	`´štf
("\t%d", 
³num
);

134 
i
=0; i<
g¿ph
->
nvtxs
; i++) {

135 
i
==0)

136 
	`´štf
("\t%2d %2d [%d %d %d]\t", 
fœ¡vtx
+
i
, 
g¿ph
->
vwgt
[i], g¿ph->
wh”e
[i], g¿ph->
ršfo
[i].
id
, g¿ph->ršfo[i].
ed
);

138 
	`´štf
("\t\t%2d %2d [%d %d %d]\t", 
fœ¡vtx
+
i
, 
g¿ph
->
vwgt
[i], g¿ph->
wh”e
[i], g¿ph->
ršfo
[i].
id
, g¿ph->ršfo[i].
ed
);

139 
j
=
g¿ph
->
xadj
[
i
]; j<graph->xadj[i+1]; j++)

140 
	`´štf
("[%d %d] ", 
g¿ph
->
adjncy
[
j
], g¿ph->
adjwgt
[j]);

141 
	`´štf
("\n");

143 
	`fæush
(
¡dout
);

145 
	`MPI_B¬r›r
(
ù¾
->
comm
);

147 
	}
}

153 
	$PrštS‘UpInfo
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

155 
i
, 
j
, 
k
, 
³num
;

157 
	`MPI_B¬r›r
(
ù¾
->
comm
);

159 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

160 
ù¾
->
my³
 =ğ
³num
) {

161 
	`´štf
("PE: %d,‚nbrs: %d\n", 
ù¾
->
my³
, 
g¿ph
->
Âbrs
);

162 
	`´štf
("\tSending...\n");

163 
i
=0; i<
g¿ph
->
Âbrs
; i++) {

164 
	`´štf
("\t\tTo: %d: ", 
g¿ph
->
³šd
[
i
]);

165 
j
=
g¿ph
->
£nd±r
[
i
]; j<graph->sendptr[i+1]; j++)

166 
	`´štf
("%d ", 
g¿ph
->
£ndšd
[
j
]);

167 
	`´štf
("\n");

169 
	`´štf
("\tReceiving...\n");

170 
i
=0; i<
g¿ph
->
Âbrs
; i++) {

171 
	`´štf
("\t\tFrom: %d: ", 
g¿ph
->
³šd
[
i
]);

172 
j
=
g¿ph
->
»cv±r
[
i
]; j<graph->recvptr[i+1]; j++)

173 
	`´štf
("%d ", 
g¿ph
->
»cvšd
[
j
]);

174 
	`´štf
("\n");

176 
	`´štf
("\n");

178 
	`MPI_B¬r›r
(
ù¾
->
comm
);

181 
	}
}

187 
	$PrštT¿nsã»dG¿phs
(
CŒlTy³
 *
ù¾
, 
Âbrs
, 
idxty³
 *
³šd
, idxty³ *
¦’s
,

188 
idxty³
 *
¾’s
, idxty³ *
sg¿ph
, idxty³ *
rg¿ph
)

190 
i
, 
j
, 
k
, 
ii
, 
jj
, 
Î
, 
³num
;

192 
	`MPI_B¬r›r
(
ù¾
->
comm
);

193 
³num
=0;…’um<
ù¾
->
Åes
;…enum++) {

194 
ù¾
->
my³
 =ğ
³num
) {

195 
	`´štf
("PE: %d,‚nbrs: %d", 
ù¾
->
my³
, 
Âbrs
);

196 
Î
=
i
=0; i<
Âbrs
; i++) {

197 
¦’s
[
i
+1]-slens[i] > 0) {

198 
	`´štf
("\n\tTØ%d\t", 
³šd
[
i
]);

199 
ii
=
¦’s
[
i
]; ii<slens[i+1]; ii++) {

200 
	`´štf
("%d %d %d, ", 
sg¿ph
[
Î
], sgraph[ll+1], sgraph[ll+2]);

201 
jj
=0; jj<
sg¿ph
[
Î
+1]; jj++)

202 
	`´štf
("[%d %d] ", 
sg¿ph
[
Î
+3+2*
jj
], sgraph[ll+3+2*jj+1]);

203 
	`´štf
("\n\t\t");

204 
Î
 +ğ3+2*
sg¿ph
[ll+1];

209 
Î
=
i
=0; i<
Âbrs
; i++) {

210 
¾’s
[
i
+1]-rlens[i] > 0) {

211 
	`´štf
("\n\tFrom %d\t", 
³šd
[
i
]);

212 
ii
=
¾’s
[
i
]; ii<rlens[i+1]; ii++) {

213 
	`´štf
("%d %d %d, ", 
rg¿ph
[
Î
],„graph[ll+1],„graph[ll+2]);

214 
jj
=0; jj<
rg¿ph
[
Î
+1]; jj++)

215 
	`´štf
("[%d %d] ", 
rg¿ph
[
Î
+3+2*
jj
],„graph[ll+3+2*jj+1]);

216 
	`´štf
("\n\t\t");

217 
Î
 +ğ3+2*
rg¿ph
[ll+1];

221 
	`´štf
("\n");

223 
	`MPI_B¬r›r
(
ù¾
->
comm
);

226 
	}
}

232 
	$Wr™eM‘isG¿ph
(
nvtxs
, 
idxty³
 *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
)

234 
i
, 
j
;

235 
FILE
 *
å
;

237 
å
 = 
	`fİ’
("test.graph", "w");

239 
	`årštf
(
å
, "%d %d 11", 
nvtxs
, 
xadj
[nvtxs]/2);

240 
i
=0; i<
nvtxs
; i++) {

241 
	`årštf
(
å
, "\n%d ", 
vwgt
[
i
]);

242 
j
=
xadj
[
i
]; j<xadj[i+1]; j++)

243 
	`årštf
(
å
, " %d %d", 
adjncy
[
j
]+1, 
adjwgt
[j]);

245 
	`fşo£
(
å
);

246 
	}
}

	@defs.h

15  
	#LTERM
 (**è0

	)
17  
	#NGD_PASSES
 20

	)
19  
	#OPTION_IPART
 1

	)
20  
	#OPTION_FOLDF
 2

	)
21  
	#OPTION_DBGLVL
 3

	)
23  
	#XYZ_XCOORD
 1

	)
24  
	#XYZ_SPFILL
 2

	)
27  
	#IPART_SER
 1

	)
28  
	#IPART_RB
 2

	)
31  
	#ISEP_EDGE
 1

	)
32  
	#ISEP_NODE
 2

	)
34  
	#UNMATCHED
 -1

	)
35  
	#MAYBE_MATCHED
 -2

	)
36  
	#TOO_HEAVY
 -3

	)
38  
	#MAX_PES
 8192

	)
39  
	#MAX_INT
 (1<<30)

	)
41  
	#HTABLE_EMPTY
 -1

	)
43  
	#NGR_PASSES
 4

	)
44  
	#NIPARTS
 8

	)
45  
	#NLGR_PASSES
 5

	)
47  
	#IGNORE_FRACTION
 0.9

	)
49  
	#KEEP_BIT
 (
idxty³
)536870912

	)
51  
	#COARSEN_FRACTION
 0.75

	)
52  
	#COARSEN_FRACTION2
 0.55

	)
53  
	#UNBALANCE_FRACTION
 1.05

	)
54  
	#ORDER_UNBALANCE_FRACTION
 1.05

	)
56  
	#MAXVWGT_FACTOR
 1.4

	)
58  
	#MATCH_LOCAL
 1

	)
59  
	#MATCH_GLOBAL
 2

	)
61  
	#EDGE_WEIGHT
 1

	)
62  
	#NOEDGE_WEIGHT
 2

	)
65  
	#DBG_TIME
 1

	)
66  
	#DBG_INFO
 2

	)
67  
	#DBG_PROGRESS
 4

	)
68  
	#DBG_REFINEINFO
 8

	)
69  
	#DBG_MATCHINFO
 16

	)
70  
	#DBG_RMOVEINFO
 32

	)
71  
	#DBG_REMAP
 64

	)
	@diffuse.c

15 
	~<·rm‘is.h
>

24 
	$P¬METIS_R•¬tLDiffusiÚ
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

25 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
,

26 *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

28 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

29 
Åes
, 
my³
;

30 
CŒlTy³
 
ù¾
;

31 
WÜkS·ûTy³
 
w¥aû
;

32 
G¿phTy³
 *
g¿ph
;

33 
nmoved
, 
maxš
, 
maxout
;

35 
	`MPI_Comm_size
(*
comm
, &
Åes
);

36 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

38 
Åes
 == 1) {

39 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

40 *
edgecut
 = 0;

44 *
numæag
 == 1)

45 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

47 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

48 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 70*npes);

50 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

51 
g¿ph
->
vsize
 = 
	`idxsm®loc
(g¿ph->
nvtxs
, 1, "Par_KMetis: vsize");

53 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

55 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

56 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

57 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

59 
	`Ad­tiveUndœeùed_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

60 
	`ReM­G¿ph
(&
ù¾
, 
g¿ph
, 0, &
w¥aû
);

62 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

63 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

65 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

66 *
edgecut
 = 
g¿ph
->
mšcut
;

68 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

69 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

70 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`Compu‹MoveSti¡ics
(&ù¾, 
g¿ph
, &
nmoved
, &
maxš
, &
maxout
));

71 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

72 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f \nNMoved: %d %d %d %d [%d %d %d %d]\n",

73 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

74 
nmoved
, 
maxš
, 
maxout
, maxš+maxout, 
Åes
, 
g¿ph
->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

76 
	`GKä“
(&
g¿ph
->
vsize
, 
LTERM
);

77 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

78 
	`F»eWS·û
(&
w¥aû
);

79 
	`F»eCŒl
(&
ù¾
);

81 *
numæag
 == 1)

82 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

84 
	}
}

93 
	$P¬METIS_R•¬tGDiffusiÚ
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

94 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
,

95 *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

97 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

98 
Åes
, 
my³
;

99 
CŒlTy³
 
ù¾
;

100 
WÜkS·ûTy³
 
w¥aû
;

101 
G¿phTy³
 *
g¿ph
;

102 
nmoved
, 
maxš
, 
maxout
;

104 
	`MPI_Comm_size
(*
comm
, &
Åes
);

105 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

107 
Åes
 == 1) {

108 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

109 *
edgecut
 = 0;

113 *
numæag
 == 1)

114 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

116 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

117 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 50*npes);

119 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

120 
g¿ph
->
vsize
 = 
	`idxsm®loc
(g¿ph->
nvtxs
, 1, "Par_KMetis: vsize");

122 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

124 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

125 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

126 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

128 
	`Ad­tiveDœeùed_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

129 
	`ReM­G¿ph
(&
ù¾
, 
g¿ph
, 0, &
w¥aû
);

131 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

132 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

134 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

135 *
edgecut
 = 
g¿ph
->
mšcut
;

137 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

138 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

139 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`Compu‹MoveSti¡ics
(&ù¾, 
g¿ph
, &
nmoved
, &
maxš
, &
maxout
));

140 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

141 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f \nNMoved: %d %d %d %d [%d %d %d %d]\n",

142 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

143 
nmoved
, 
maxš
, 
maxout
, maxš+maxout, 
Åes
, 
g¿ph
->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

145 
	`GKä“
(&
g¿ph
->
vsize
, 
LTERM
);

146 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

147 
	`F»eWS·û
(&
w¥aû
);

148 
	`F»eCŒl
(&
ù¾
);

150 *
numæag
 == 1)

151 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

153 
	}
}

166 
	$PARUAMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

167 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

169 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

171 
ÃwİtiÚs
[0] = 1;

172 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

173 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

174 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

176 
numæag
 = 
İtiÚs
[3];

177 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

179 
	`P¬METIS_R•¬tLDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
,

180 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

182 
İtiÚs
[0] = 
edgecut
;

184 
	}
}

193 
	$PARDAMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

194 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

196 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

198 
ÃwİtiÚs
[0] = 1;

199 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

200 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

201 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

203 
numæag
 = 
İtiÚs
[3];

204 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

206 
	`P¬METIS_R•¬tGDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
,

207 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

209 
İtiÚs
[0] = 
edgecut
;

211 
	}
}

	@diffutil.c

15 
	~<·rm‘is.h
>

20 
	$Compu‹S”ŸlEdgeCut
(
G¿phTy³
 *
g¿ph
)

22 
i
, 
j
;

23 
cut
 = 0;

25 
i
=0; i<
g¿ph
->
nvtxs
; i++) {

26 
j
=
g¿ph
->
xadj
[
i
]; j<graph->xadj[i+1]; j++)

27 
g¿ph
->
wh”e
[
i
] !ğg¿ph->wh”e[g¿ph->
adjncy
[
j
]])

28 
cut
 +ğ
g¿ph
->
adjwgt
[
j
];

30 
g¿ph
->
mšcut
 = 
cut
/2;

32  
g¿ph
->
mšcut
;

33 
	}
}

38 
	$Compu‹S”ŸlTÙ®V
(
G¿phTy³
 *
g¿ph
, 
idxty³
 *
home
)

40 
i
;

41 
tÙ®v
 = 0;

43 
i
=0; i<
g¿ph
->
nvtxs
; i++)

44 
g¿ph
->
wh”e
[
i
] !ğ
home
[i])

45 
tÙ®v
 +ğ
g¿ph
->
vwgt
[
i
];

47  
tÙ®v
;

48 
	}
}

53 
	$Compu‹P¬®ËlTÙ®V
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
home
)

55 
i
;

56 
tÙ®v
 = 0;

58 
i
=0; i<
g¿ph
->
nvtxs
; i++)

59 
g¿ph
->
wh”e
[
i
] !ğ
home
[i])

60 
tÙ®v
 +ğ
g¿ph
->
vwgt
[
i
];

62  
	`Glob®SESum
(
ù¾
, 
tÙ®v
);

63 
	}
}

69 
	$Compu‹P¬®ËlB®ªû
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

71  1.0*
ù¾
->
Å¬ts
*
g¿ph
->
gpwgts
[
	`idxamax
(ctrl->nparts, graph->gpwgts)]/

72 (1.0*
	`idxsum
(
ù¾
->
Å¬ts
, 
g¿ph
->
gpwgts
));

73 
	}
}

79 
	$G»©”Thª
(cÚ¡ *
fœ¡
, cÚ¡ *
£cÚd
)

81 (*(*)(
fœ¡
)è> (*(*)(
£cÚd
)))

84 (*(*)(
fœ¡
)è< (*(*)(
£cÚd
)))

88 
	}
}

95 
	$CÚjG¿d
(
n
, 
idxty³
 *
row±r
, idxty³ *
cŞšd
, *
v®ues
, *
b
, *
x
, 
tŞ
, *
wÜk¥aû
)

97 
i
, 
j
, 
k
;

98 *
p
, *
r
, *
q
, *
z
, *
M
;

99 
®pha
, 
b‘a
, 
rho
, 
rho_1
, 
”rÜ
, 
bÄm2
;

113 
p
 = 
wÜk¥aû
;

114 
r
 = 
wÜk¥aû
 + 
n
;

115 
q
 = 
wÜk¥aû
 + 2*
n
;

116 
z
 = 
wÜk¥aû
 + 3*
n
;

117 
M
 = 
wÜk¥aû
 + 4*
n
;

119 
i
=0; i<
n
; i++) {

120 
x
[
i
] = 0.0;

121 
v®ues
[
row±r
[
i
]] != 0.0)

122 
M
[
i
] = 1.0/
v®ues
[
row±r
[i]];

124 
M
[
i
] = 0.0;

128 
	`mvMuÉ
(
n
, 
row±r
, 
cŞšd
, 
v®ues
, 
x
, 
r
);

129 
i
=0; i<
n
; i++)

130 
r
[
i
] = 
b
[i]-r[i];

132 
bÄm2
 = 
	`¢Üm2
(
n
, 
b
);

133 
bÄm2
 > 0.0) {

134 
”rÜ
 = 
	`¢Üm2
(
n
, 
r
è/ 
bÄm2
;

136 
”rÜ
 > 
tŞ
) {

138 
k
=0; k<
n
; k++) {

139 
i
=0; i<
n
; i++)

140 
z
[
i
] = 
r
[i]*
M
[i];

142 
rho
 = 
	`sdÙ
(
n
, 
r
, 
z
);

144 
k
 == 0)

145 
	`scİy
(
n
, 
z
, 
p
);

147 
b‘a
 = 
rho
/
rho_1
;

148 
i
=0; i<
n
; i++)

149 
p
[
i
] = 
z
[i] + 
b‘a
*p[i];

152 
	`mvMuÉ
(
n
, 
row±r
, 
cŞšd
, 
v®ues
, 
p
, 
q
);

154 
®pha
 = 
rho
/
	`sdÙ
(
n
, 
p
, 
q
);

155 
	`§xpy
(
n
, 
®pha
, 
p
, 
x
);

156 
	`§xpy
(
n
, -
®pha
, 
q
, 
r
);

157 
”rÜ
 = 
	`¢Üm2
(
n
, 
r
è/ 
bÄm2
;

158 
”rÜ
 < 
tŞ
)

161 
rho_1
 = 
rho
;

169 
	}
}

175 
	$mvMuÉ
(
nvtxs
, 
idxty³
 *
row±r
, idxty³ *
cŞšd
, *
v®ues
, *
x
, *
y
)

177 
i
, 
j
;

179 
i
=0; i<
nvtxs
; i++) {

180 
y
[
i
] = 0.0;

181 
j
=
row±r
[
i
]; j<rowptr[i+1]; j++)

182 
y
[
i
] +ğ
v®ues
[
j
]*
x
[
cŞšd
[j]];

184 
	}
}

	@drivers.c

16 
	~<·rm‘is.h
>

24 
	$Glob®_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

27 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

29 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

30 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

31 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

32 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

34 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

36 
ù¾
->
¬t
) {

37 
IPART_SER
:

38 
	`In™P¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

40 
IPART_RB
:

41 
	`In™P¬t™iÚ_RB
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

44 
	`”»x™
("Unknown IPARType!\n");

47 
g¿ph
->
fš”
 =ğ
NULL
) {

48 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

49 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

53 
	`Glob®M©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

55 
	`Glob®_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

57 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

58 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

59 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

62 
	}
}

70 
	$FldGlob®_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Ëv–
)

72 
G¿phTy³
 *
ædg¿ph
;

73 
MPI_Comm
 
Ãwcomm
, 
Şdcomm
;

74 
gÃdges
;

77 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

78 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

79 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

80 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

82 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

84 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

86 
ù¾
->
¬t
) {

87 
IPART_SER
:

88 
	`In™P¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

90 
IPART_RB
:

91 
	`In™P¬t™iÚ_RB
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

94 
	`”»x™
("Unknown IPARType!\n");

97 
g¿ph
->
fš”
 =ğ
NULL
) {

98 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

99 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

103 
gÃdges
 = 
	`Glob®SESum
(
ù¾
, 
g¿ph
->
Ãdges
)/(ù¾->
Åes
*ctrl->npes);

104 
gÃdges
-
ù¾
->
fŞdf
 < ()(0.3*ù¾->fŞdfè&& 
	`EnoughMemÜy
(ù¾, 
g¿ph
->
Ãdges
, 
w¥aû
->
Æ¬ge
>>1)) {

105 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ù¾, "FŞdšg: %d\n", 
gÃdges
));

106 
ædg¿ph
 = 
	`FŞdG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
);

108 
	`MPI_Comm_¥l™
(
ù¾
->
comm
, cŒl->
my³
%2 =ğ0, 0, &
Ãwcomm
);

110 
ù¾
->
my³
%2 == 0) {

111 
Şdcomm
 = 
ù¾
->
comm
;

112 
ù¾
->
comm
 = 
Ãwcomm
;

113 
ù¾
->
Åes
 = ctrl->npes>>1;

114 
ù¾
->
my³
 = ctrl->mype>>1;

116 
ù¾
->
Åes
%2 == 0 && ctrl->npes > 2)

117 
	`FldGlob®_P¬t™iÚ
(
ù¾
, 
ædg¿ph
, 
w¥aû
, 
Ëv–
+1);

119 
	`Glob®_P¬t™iÚ
(
ù¾
, 
ædg¿ph
, 
w¥aû
);

121 
ù¾
->
comm
 = 
Şdcomm
;

122 
ù¾
->
Åes
 = ctrl->npes<<1;

123 
ù¾
->
my³
 = ctrl->mype<<1;

126 
ù¾
->
¬t
) {

127 
IPART_SER
:

128 
	`In™P¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
, 0);

130 
IPART_RB
:

131 
	`In™P¬t™iÚ_RB
(
ù¾
, 
g¿ph
, 
w¥aû
, 0);

134 
	`”»x™
("Unknown IPARType!\n");

138 
	`MPI_Comm_ä“
(&
Ãwcomm
);

140 
	`UnFŞdG¿ph
(
ù¾
, 
g¿ph
, 
ædg¿ph
, 
w¥aû
);

143 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

145 
	`Glob®M©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

147 
	`FldGlob®_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
, 
Ëv–
);

149 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

150 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

151 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

154 
	}
}

162 
	$Refše_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

164 
i
;

166 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

168 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

169 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

170 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

171 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

173 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

175 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

176 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "Refine_Partition: graph->where");

177 
i
=0; i<
g¿ph
->
nvtxs
; i++)

178 
g¿ph
->
wh”e
[
i
] = 
ù¾
->
my³
;

179 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

181 
g¿ph
->
fš”
 =ğ
NULL
) {

182 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

183 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

187 
	`LoÿlM©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

189 
	`Refše_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

191 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

192 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

193 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

196 
	}
}

202 
	$Ad­tiveUndœeùed_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

204 
i
;

206 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

208 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

209 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

210 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

211 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

213 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

215 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

216 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "Adaptive_Partition: graph->where");

217 
i
=0; i<
g¿ph
->
nvtxs
; i++)

218 
g¿ph
->
wh”e
[
i
] = 
ù¾
->
my³
;

219 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

221 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

222 
	`KWayAd­tiveRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

226 
	`LoÿlM©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

228 
	`Ad­tiveUndœeùed_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

230 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

231 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

232 1.0*
ù¾
->
Å¬ts
*
g¿ph
->
gpwgts
[
	`idxamax
(ù¾->Å¬ts, g¿ph->gpwgts)]/(1.0*
	`idxsum
(ù¾->Å¬ts, g¿ph->gpwgts)è- 
UNBALANCE_FRACTION
 > 0.004)

233 
	`KWayAd­tiveRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

235 
	`KWayRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

237 
	}
}

244 
	$Ad­tiveDœeùed_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

246 
i
;

248 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

250 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

251 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

252 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

253 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

255 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

257 
	`In™DiffusiÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

259 
g¿ph
->
fš”
 =ğ
NULL
)

260 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

263 
	`LoÿlM©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

265 
	`Ad­tiveDœeùed_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

267 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

268 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

269 1.0*
ù¾
->
Å¬ts
*
g¿ph
->
gpwgts
[
	`idxamax
(ù¾->Å¬ts, g¿ph->gpwgts)]/(1.0*
	`idxsum
(ù¾->Å¬ts, g¿ph->gpwgts)è- 
UNBALANCE_FRACTION
 > 0.004)

270 
	`KWayAd­tiveRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

272 
	`KWayRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

274 
	}
}

283 
	$Ad­tiveReM­_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

285 
i
;

287 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

289 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

290 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

291 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

292 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

294 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

296 
ù¾
->
¬t
) {

297 
IPART_SER
:

298 
	`In™P¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

300 
IPART_RB
:

301 
	`In™P¬t™iÚ_RB
(
ù¾
, 
g¿ph
, 
w¥aû
, 1);

304 
	`”»x™
("Unknown IPARType!\n");

307 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

308 
	`KWayRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

309 
	`ReM­G¿ph
(
ù¾
, 
g¿ph
, 1, 
w¥aû
);

310 
	`GKä“
(&
g¿ph
->
ršfo
, &g¿ph->
Íwgts
, &g¿ph->
gpwgts
, 
LTERM
);

312 
g¿ph
->
fš”
 =ğ
NULL
) {

313 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

314 1.0*
ù¾
->
Å¬ts
*
g¿ph
->
gpwgts
[
	`idxamax
(ù¾->Å¬ts, g¿ph->gpwgts)]/(1.0*
	`idxsum
(ù¾->Å¬ts, g¿ph->gpwgts)è- 
UNBALANCE_FRACTION
 > 0.004)

315 
	`KWayAd­tiveRefšeCËª2
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

319 
	`LoÿlM©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

321 
	`Ad­tiveReM­_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

323 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

324 
	`Compu‹P¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

325 1.0*
ù¾
->
Å¬ts
*
g¿ph
->
gpwgts
[
	`idxamax
(ù¾->Å¬ts, g¿ph->gpwgts)]/(1.0*
	`idxsum
(ù¾->Å¬ts, g¿ph->gpwgts)è- 
UNBALANCE_FRACTION
 > 0.004)

326 
	`KWayAd­tiveRefšeCËª2
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

328 
	`KWayRefšeCËª
(
ù¾
, 
g¿ph
, 
w¥aû
, 
NGR_PASSES
, 
UNBALANCE_FRACTION
);

330 
	}
}

337 
	$Ord”_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

339 
i
;

341 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

343 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_PROGRESS
, 
	`½rštf
(ctrl, "[%6d %8d %5d %5d][%d][%d,%d]\n",

344 
g¿ph
->
gnvtxs
, 
	`Glob®SESum
(
ù¾
, g¿ph->
Ãdges
), 
	`Glob®SEMš
(ù¾, g¿ph->
nvtxs
),

345 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
nvtxs
), cŒl->
Cßr£nTo
, g¿ph->
maxvwgt
,

346 
	`Glob®SEMax
(
ù¾
, 
g¿ph
->
vwgt
[
	`idxamax
(g¿ph->
nvtxs
, graph->vwgt)])));

348 
g¿ph
->
gnvtxs
 < 1.3*
ù¾
->
Cßr£nTo
 || (g¿ph->
fš”
 !ğ
NULL
 && g¿ph->gnvtx > g¿ph->fš”->gnvtxs*
COARSEN_FRACTION
)) {

350 
	`In™MuÉi£ùiÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

352 
g¿ph
->
fš”
 =ğ
NULL
) {

353 
	`Compu‹NodeP¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

354 
	`KWayNodeRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 2*
NGR_PASSES
, 
ORDER_UNBALANCE_FRACTION
);

358 
	`LoÿlM©ch_HEM
(
ù¾
, 
g¿ph
, 
w¥aû
);

360 
	`Ord”_P¬t™iÚ
(
ù¾
, 
g¿ph
->
cßr£r
, 
w¥aû
);

362 
	`ProjeùP¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

363 
	`Compu‹NodeP¬t™iÚP¬ams
(
ù¾
, 
g¿ph
, 
w¥aû
);

364 
	`KWayNodeRefše
(
ù¾
, 
g¿ph
, 
w¥aû
, 2*
NGR_PASSES
, 
ORDER_UNBALANCE_FRACTION
);

366 
	}
}

373 
	$Sm®ËrSubG¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

375 
i
, 
mš
;

377 
mš
 = 
g¿ph
->
vtxdi¡
[1]-graph->vtxdist[0];

378 
i
=1; i<
ù¾
->
Åes
; i++) {

379 
mš
 > 
g¿ph
->
vtxdi¡
[
i
+1]-graph->vtxdist[i])

380 
mš
 = 
g¿ph
->
vtxdi¡
[
i
+1]-graph->vtxdist[i];

383  
mš
;

384 
	}
}

	@edge_refine.c

14 
	~<·rm‘is.h
>

16  
	#DEBUG_PROJECT_


	)
17  
	#DEBUG_COMPUTEPPARAM_


	)
20  
	#Prİ”Side
(
c
, 
äom
, 
Ùh”
) \

21 (((
c
è=ğ0 && (
äom
)-(
Ùh”
è< 0è|| ((cè=ğ1 && (äom)-(Ùh”è> 0))

	)
26 
	$ProjeùP¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

28 
i
, 
j
, 
nvtxs
, 
Âbrs
, 
fœ¡vtx
, 
cfœ¡vtx
;

29 
idxty³
 *
m©ch
, *
cm­
, *
wh”e
, *
cwh”e
;

30 
idxty³
 *
³šd
, *
¦’s
, *
¾’s
;

31 
KeyV®ueTy³
 *
rÿnd
, *
sÿnd
;

32 
G¿phTy³
 *
cg¿ph
;

35 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
ProjeùTmr
));

37 
cg¿ph
 = 
g¿ph
->
cßr£r
;

38 
cwh”e
 = 
cg¿ph
->
wh”e
;

39 
cfœ¡vtx
 = 
cg¿ph
->
vtxdi¡
[
ù¾
->
my³
];

41 
nvtxs
 = 
g¿ph
->nvtxs;

42 
m©ch
 = 
g¿ph
->match;

43 
cm­
 = 
g¿ph
->cmap;

44 
wh”e
 = 
g¿ph
->wh”ğ
	`idxm®loc
(
nvtxs
+g¿ph->
Äecv
, "ProjectPartition: graph->where");

45 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

48 
g¿ph
->
m©ch_ty³
 =ğ
MATCH_GLOBAL
) {

52 
sÿnd
 = 
w¥aû
->
·œs
;

53 
Âbrs
 = 
g¿ph
->nnbrs;

54 
³šd
 = 
g¿ph
->peind;

55 
¦’s
 = 
g¿ph
->slens;

56 
¾’s
 = 
g¿ph
->rlens;

57 
rÿnd
 = 
g¿ph
->rcand;

60 
i
=0; i<
Âbrs
; i++) {

61 
¦’s
[
i
+1]-slens[i] > 0)

62 
	`MPI_I»cv
((*)(
sÿnd
+
¦’s
[
i
]), 2*(¦’s[i+1]-¦’s[i]), 
IDX_DATATYPE
, 
³šd
[i], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

65 #ifdeà
DEBUG_PROJECT


66 
	`PrštPaœs
(
ù¾
, 
¾’s
[
Âbrs
], 
rÿnd
, "rcand");

70 
i
=0; i<
¾’s
[
Âbrs
]; i++) {

71 
	`ASSERT
(
ù¾
, 
rÿnd
[
i
].
v®
 >ğ0 &&„ÿnd[i].v® < 
cg¿ph
->
nvtxs
);

72 
rÿnd
[
i
].
v®
 = 
cwh”e
[rcand[i].val];

75 #ifdeà
DEBUG_PROJECT


76 
	`PrštPaœs
(
ù¾
, 
¾’s
[
Âbrs
], 
rÿnd
, "rcand");

77 
	`PrštVeùÜ
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
cm­
, "cmap");

81 
i
=0; i<
Âbrs
; i++) {

82 
¾’s
[
i
+1]-rlens[i] > 0)

83 
	`MPI_I£nd
((*)(
rÿnd
+
¾’s
[
i
]), 2*ÔËns[i+1]-¾’s[i]), 
IDX_DATATYPE
, 
³šd
[i], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

90 
i
=0; i<
nvtxs
; i++) {

91 
m©ch
[
i
] >ğ
KEEP_BIT
) {

92 
	`ASSERT
(
ù¾
, 
cm­
[
i
]-
cfœ¡vtx
>=0 && cm­[i]-cfœ¡vtx<
cg¿ph
->
nvtxs
);

93 
wh”e
[
i
] = 
cwh”e
[
cm­
[i]-
cfœ¡vtx
];

97 
g¿ph
->
m©ch_ty³
 =ğ
MATCH_GLOBAL
) {

101 
i
=0; i<
Âbrs
; i++) {

102 
¾’s
[
i
+1]-rlens[i] > 0)

103 
	`MPI_Wa™
(
ù¾
->
¤eq
+
i
, &ù¾->
¡©us
);

105 
i
=0; i<
Âbrs
; i++) {

106 
¦’s
[
i
+1]-slens[i] > 0)

107 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &ù¾->
¡©us
);

110 #ifdeà
DEBUG_PROJECT


111 
	`PrštPaœs
(
ù¾
, 
¦’s
[
Âbrs
], 
sÿnd
, "scand");

117 
i
=0; i<
¦’s
[
Âbrs
]; i++) {

118 
	`ASSERTP
(
ù¾
, 
sÿnd
[
i
].
key
-
fœ¡vtx
>=0 && sÿnd[i].key-fœ¡vtx<
g¿ph
->
nvtxs
, (ctrl, "%d %d %d\n", scand[i].key, firstvtx, graph->nvtxs));

119 
wh”e
[
sÿnd
[
i
].
key
-
fœ¡vtx
] = sÿnd[i].
v®
;

124 
	`F»eG¿ph
(
g¿ph
->
cßr£r
);

125 
g¿ph
->
cßr£r
 = 
NULL
;

127 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
ProjeùTmr
));

128 
	}
}

135 
	$Compu‹P¬t™iÚP¬ams
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

137 
i
, 
j
, 
k
, 
l
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
;

138 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
, *
Íwgts
, *
gpwgts
;

139 
idxty³
 *
wh”e
, *
swh”e
, *
rwh”e
;

140 
RInfoTy³
 *
ršfo
, *
myršfo
;

141 
EdgeTy³
 *
edeg»es
;

142 
me
, 
Ùh”
;

144 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayIn™Tmr
));

146 
nvtxs
 = 
g¿ph
->nvtxs;

148 
vtxdi¡
 = 
g¿ph
->vtxdist;

149 
xadj
 = 
g¿ph
->xadj;

150 
Ïdjncy
 = 
g¿ph
->
adjncy
;

151 
adjwgt
 = 
g¿ph
->adjwgt;

153 
wh”e
 = 
g¿ph
->where;

154 
ršfo
 = 
g¿ph
->ršfØğ(
RInfoTy³
 *)
	`GKm®loc
((RInfoTy³)*
nvtxs
, "ComputePartitionParams:„info");

155 
Íwgts
 = 
g¿ph
->Íwgt ğ
	`idxsm®loc
(
ù¾
->
Å¬ts
, 0, "ComputePartitionParams:†pwgts");

156 
gpwgts
 = 
g¿ph
->gpwgt ğ
	`idxm®loc
(
ù¾
->
Å¬ts
, "ComputePartitionParams: gpwgts");

158 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

159 
Ï¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
+1];

164 
swh”e
 = 
w¥aû
->
šdiûs
;

165 
rwh”e
 = 
wh”e
 + 
nvtxs
;

167 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
wh”e
, 
swh”e
, 
rwh”e
);

169 #ifdeà
DEBUG_COMPUTEPPARAM


170 
	`PrštVeùÜ
(
ù¾
, 
nvtxs
, 
fœ¡vtx
, 
wh”e
, "where");

173 
	`ASSERT
(
ù¾
, 
w¥aû
->
Æ¬ge
 >ğ
xadj
[
nvtxs
]);

178 
g¿ph
->
lmšcut
 = 0;

179 
i
=0; i<
nvtxs
; i++) {

180 
me
 = 
wh”e
[
i
];

181 
myršfo
 = 
ršfo
+
i
;

183 
Íwgts
[
me
] +ğ
g¿ph
->
vwgt
[
i
];

185 
myršfo
->
deg»es
 = 
w¥aû
->deg»e + 
xadj
[
i
];

186 
myršfo
->
ndeg»es
 = myršfo->
id
 = myršfo->
ed
 = 0;

188 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

189 
me
 =ğ
wh”e
[
Ïdjncy
[
j
]])

190 
myršfo
->
id
 +ğ
adjwgt
[
j
];

192 
myršfo
->
ed
 +ğ
adjwgt
[
j
];

196 
myršfo
->
ed
 > 0) {

197 
g¿ph
->
lmšcut
 +ğ
myršfo
->
ed
;

198 
edeg»es
 = 
myršfo
->
deg»es
;

200 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

201 
Ùh”
 = 
wh”e
[
Ïdjncy
[
j
]];

202 
me
 !ğ
Ùh”
) {

203 
k
=0; k<
myršfo
->
ndeg»es
; k++) {

204 
edeg»es
[
k
].
edge
 =ğ
Ùh”
) {

205 
edeg»es
[
k
].
ewgt
 +ğ
adjwgt
[
j
];

209 
k
 =ğ
myršfo
->
ndeg»es
) {

210 
edeg»es
[
k
].
edge
 = 
Ùh”
;

211 
edeg»es
[
k
].
ewgt
 = 
adjwgt
[
j
];

212 
myršfo
->
ndeg»es
++;

214 
	`ASSERT
(
ù¾
, 
myršfo
->
ndeg»es
 <ğ
xadj
[
i
+1]-xadj[i]);

220 #ifdeà
DEBUG_COMPUTEPPARAM


221 
	`PrštVeùÜ
(
ù¾
, cŒl->
Å¬ts
, 0, 
Íwgts
, "lpwgts");

225 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
ù¾
->
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, cŒl->
comm
);

227 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

229 #ifdeà
DEBUG_COMPUTEPPARAM


230 
	`PrštVeùÜ
(
ù¾
, cŒl->
Å¬ts
, 0, 
gpwgts
, "gpwgts");

233 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayIn™Tmr
));

234 
	}
}

240 
	$Compu‹Cut
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

242 
i
, 
j
, 
k
, 
l
, 
nvtxs
;

243 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

244 
idxty³
 *
wh”e
, *
swh”e
, *
rwh”e
;

245 
me
, 
Ùh”
;

247 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayIn™Tmr
));

249 
nvtxs
 = 
g¿ph
->nvtxs;

251 
vtxdi¡
 = 
g¿ph
->vtxdist;

252 
xadj
 = 
g¿ph
->xadj;

253 
Ïdjncy
 = 
g¿ph
->
adjncy
;

254 
adjwgt
 = 
g¿ph
->adjwgt;

256 
wh”e
 = 
g¿ph
->where;

261 
swh”e
 = 
w¥aû
->
šdiûs
;

262 
rwh”e
 = 
wh”e
 + 
nvtxs
;

264 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
wh”e
, 
swh”e
, 
rwh”e
);

269 
g¿ph
->
lmšcut
 = 0;

270 
i
=0; i<
nvtxs
; i++) {

271 
me
 = 
wh”e
[
i
];

273 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

274 
me
 !ğ
wh”e
[
Ïdjncy
[
j
]])

275 
g¿ph
->
lmšcut
 +ğ
adjwgt
[
j
];

279 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

281 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayIn™Tmr
));

282 
	}
}

289 
	$KWayRefše
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Åas£s
, 
ubäaùiÚ
)

291 
i
, 
ii
, 
j
, 
k
, 
l
, 
·ss
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
Ùh”Ï¡vtx
, 
c
, 
nmoves
,

292 
Æupd
, 
nsupd
, 
Âbrs
, 
nchªged
;

293 
Åes
 = 
ù¾
->Åes, 
my³
 = cŒl->my³, 
Å¬ts
 = ctrl->nparts;

294 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

295 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
;

296 
idxty³
 *
³šd
, *
»cv±r
, *
£nd±r
;

297 
idxty³
 *
upd©e
, *
supd©e
, *
rupd©e
, *
³_upd©es
, *
hbË
;

298 
idxty³
 *
chªged
, *
µ”m
;

299 
KeyV®ueTy³
 *
swchªges
, *
rwchªges
;

300 *
nupds_³
;

301 
RInfoTy³
 *
ršfo
, *
myršfo
;

302 
EdgeTy³
 *
deg»es
;

303 
äom
, 
me
, 
Ùh”
, 
vwgt
, 
badmšpwgt
, 
badmaxpwgt
, 
Şdcut
;

305 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayTmr
));

307 
nvtxs
 = 
g¿ph
->nvtxs;

309 
vtxdi¡
 = 
g¿ph
->vtxdist;

310 
xadj
 = 
g¿ph
->xadj;

311 
Ïdjncy
 = 
g¿ph
->
adjncy
;

312 
adjwgt
 = 
g¿ph
->adjwgt;

314 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

315 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

317 
wh”e
 = 
g¿ph
->where;

318 
ršfo
 = 
g¿ph
->rinfo;

319 
Íwgts
 = 
g¿ph
->lpwgts;

320 
gpwgts
 = 
g¿ph
->gpwgts;

322 
Âbrs
 = 
g¿ph
->nnbrs;

323 
³šd
 = 
g¿ph
->peind;

324 
»cv±r
 = 
g¿ph
->recvptr;

325 
£nd±r
 = 
g¿ph
->sendptr;

327 
chªged
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: changed");

328 
rwchªges
 = 
w¥aû
->
·œs
;

329 
swchªges
 = 
rwchªges
 + 
»cv±r
[
Âbrs
];

331 
upd©e
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: update");

332 
supd©e
 = 
w¥aû
->
šdiûs
;

333 
rupd©e
 = 
supd©e
 + 
»cv±r
[
Âbrs
];

334 
nupds_³
 = 
	`im®loc
(
Åes
, "KWayRefine:‚upds_pe");

336 
hbË
 = 
	`idxsm®loc
(
nvtxs
+
g¿ph
->
Äecv
, 0, "KWayRefine:†htable");

338 
badmšpwgt
 = (1.0/
ubäaùiÚ
)*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

339 
badmaxpwgt
 = 
ubäaùiÚ
*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

341 
µ”m
 = 
	`idxm®loc
(
Å¬ts
, "KWayRefine:…perm");

342 
i
=0; i<
Å¬ts
; i++)

343 
µ”m
[
i
] = i;

345 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "K-way„efinement %2d [%5d, %5d], [%5d, %5d] Cut: %d, \tBalance: %6.3f\n",

346 
g¿ph
->
Ëv–
, 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, g¿ph->
mšcut
,

347 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

349 
·ss
=0;…ass<
Åas£s
;…ass++) {

350 
my³
 == 0)

351 
	`RªdomP”mu‹
(
Å¬ts
, 
µ”m
, 0);

352 
	`MPI_Bÿ¡
((*)
µ”m
, 
Å¬ts
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

354 
Şdcut
 = 
g¿ph
->
mšcut
;

358 
c
=0; c<2; c++) {

359 
Æupd
 = 
nsupd
 = 
nmoves
 = 
nchªged
 = 0;

360 
i
=0; i<
nvtxs
; i++) {

361 
ršfo
[
i
].
ed
 >ğršfo[i].
id
) {

362 
deg»es
 = 
ršfo
[
i
].degrees;

363 
äom
 = 
wh”e
[
i
];

364 
vwgt
 = 
g¿ph
->vwgt[
i
];

366 
gpwgts
[
äom
]-
vwgt
 < 
badmšpwgt
)

369 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

370 
Ùh”
 = 
deg»es
[
k
].
edge
;

371 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <ğ
badmaxpwgt
)

375 
k
 < 
ršfo
[
i
].
ndeg»es
) {

376 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

377 
Ùh”
 = 
deg»es
[
j
].
edge
;

378 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]) &&

379 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğ
badmaxpwgt
) ||

380 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[deg»es[k].
edge
])))

381 
k
 = 
j
;

384 
Ùh”
 = 
deg»es
[
k
].
edge
;

386 
deg»es
[
k
].
ewgt
 > 
ršfo
[
i
].
id
 || (deg»es[k].ewgˆ=ğršfo[i].id && (
gpwgts
[
äom
] - gpwgts[
Ùh”
] >ğ
vwgt
))) {

388 
wh”e
[
i
] = 
Ùh”
;

389 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

390 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

392 
hbË
[
i
] == 0) {

393 
hbË
[
i
] = 1;

394 
upd©e
[
Æupd
++] = 
i
;

398 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

399 
k
 = 
Ïdjncy
[
j
];

400 
hbË
[
k
] == 0) {

401 
hbË
[
k
] = 1;

402 
k
<
nvtxs
)

403 
upd©e
[
Æupd
++] = 
k
;

405 
supd©e
[
nsupd
++] = 
k
;

408 
nmoves
++;

409 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

410 
chªged
[
nchªged
++] = 
i
;

419 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

422 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_RMOVEINFO
, 
	`½rštf
(ctrl, "\t[%d %d], [%5d, %5d], [%d %d %d]\n",

423 
·ss
, 
c
, 
badmšpwgt
, 
badmaxpwgt
,

424 
	`Glob®SESum
(
ù¾
, 
nmoves
), Glob®SESum(ù¾, 
nsupd
), Glob®SESum(ù¾, 
Æupd
)));

432 
i
=0; i<
Âbrs
; i++) {

433 
	`MPI_I»cv
((*)(
rupd©e
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

434 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

438 
i
=0; i<
nsupd
; i++) {

439 
hbË
[
supd©e
[
i
]] = 0;

440 
supd©e
[
i
] = 
g¿ph
->
im­
[supdate[i]];

442 
	`iidxsÜt
(
nsupd
, 
supd©e
);

444 
j
=
i
=0; i<
Âbrs
; i++) {

445 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

446 
k
=
j
; k<
nsupd
 && 
supd©e
[k] < 
Ùh”Ï¡vtx
; k++);

447 
	`MPI_I£nd
((*)(
supd©e
+
j
), 
k
-j, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

448 
j
 = 
k
;

452 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

453 
i
=0; i<
Âbrs
; i++)

454 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
nupds_³
+i);

455 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

461 
i
=0; i<
Âbrs
; i++) {

462 
³_upd©es
 = 
rupd©e
+
£nd±r
[
i
];

463 
j
=0; j<
nupds_³
[
i
]; j++) {

464 
k
 = 
³_upd©es
[
j
];

465 
hbË
[
k
-
fœ¡vtx
] == 0) {

466 
hbË
[
k
-
fœ¡vtx
] = 1;

467 
upd©e
[
Æupd
++] = 
k
-
fœ¡vtx
;

476 
ii
=0; ii<
Æupd
; ii++) {

477 
i
 = 
upd©e
[
ii
];

478 
	`ASSERT
(
ù¾
, 
hbË
[
i
] == 1);

480 
hbË
[
i
] = 0;

482 
me
 = 
wh”e
[
i
];

483 
myršfo
 = 
ršfo
+
i
;

485 
g¿ph
->
lmšcut
 -ğ
myršfo
->
ed
;

487 
myršfo
->
ndeg»es
 = myršfo->
id
 = myršfo->
ed
 = 0;

488 
deg»es
 = 
myršfo
->degrees;

490 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

491 
Ùh”
 = 
wh”e
[
Ïdjncy
[
j
]];

492 
me
 !ğ
Ùh”
) {

493 
myršfo
->
ed
 +ğ
adjwgt
[
j
];

495 
k
=0; k<
myršfo
->
ndeg»es
; k++) {

496 
deg»es
[
k
].
edge
 =ğ
Ùh”
) {

497 
deg»es
[
k
].
ewgt
 +ğ
adjwgt
[
j
];

501 
k
 =ğ
myršfo
->
ndeg»es
) {

502 
deg»es
[
k
].
edge
 = 
Ùh”
;

503 
deg»es
[
k
].
ewgt
 = 
adjwgt
[
j
];

504 
myršfo
->
ndeg»es
++;

506 
	`ASSERT
(
ù¾
, 
myršfo
->
ndeg»es
 <ğ
xadj
[
i
+1]-xadj[i]);

509 
myršfo
->
id
 +ğ
adjwgt
[
j
];

513 
g¿ph
->
lmšcut
 +ğ
myršfo
->
ed
;

518 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

520 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

523 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "\t[%5d, %5d], [%5d, %5d] Cut: %d\n",

524 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, 
g¿ph
->
mšcut
));

526 
g¿ph
->
mšcut
 =ğ
Şdcut
 && 
ubäaùiÚ
 > 1.00)

530 
	`GKä“
(&
upd©e
, &
nupds_³
, &
hbË
, &
chªged
, &
µ”m
, 
LTERM
);

532 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayTmr
));

533 
	}
}

539 
	$KWayRefšeCËª
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Åas£s
, 
ubäaùiÚ
)

541 
i
, 
ii
, 
j
, 
k
, 
l
, 
·ss
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
Ùh”Ï¡vtx
, 
c
, 
nmoves
,

542 
Æupd
, 
nsupd
, 
Âbrs
, 
nchªged
;

543 
Åes
 = 
ù¾
->Åes, 
my³
 = cŒl->my³, 
Å¬ts
 = ctrl->nparts;

544 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

545 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
;

546 
idxty³
 *
³šd
, *
»cv±r
, *
£nd±r
;

547 
idxty³
 *
upd©e
, *
supd©e
, *
rupd©e
, *
³_upd©es
, *
hbË
;

548 
idxty³
 *
chªged
, *
µ”m
, *
³rm
;

549 
KeyV®ueTy³
 *
swchªges
, *
rwchªges
;

550 *
nupds_³
;

551 
RInfoTy³
 *
ršfo
, *
myršfo
;

552 
EdgeTy³
 *
deg»es
;

553 
äom
, 
me
, 
Ùh”
, 
vwgt
, 
badmšpwgt
, 
badmaxpwgt
, 
Şdcut
;

555 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayTmr
));

557 
nvtxs
 = 
g¿ph
->nvtxs;

559 
vtxdi¡
 = 
g¿ph
->vtxdist;

560 
xadj
 = 
g¿ph
->xadj;

561 
Ïdjncy
 = 
g¿ph
->
adjncy
;

562 
adjwgt
 = 
g¿ph
->adjwgt;

564 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

565 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

567 
wh”e
 = 
g¿ph
->where;

568 
ršfo
 = 
g¿ph
->rinfo;

569 
Íwgts
 = 
g¿ph
->lpwgts;

570 
gpwgts
 = 
g¿ph
->gpwgts;

572 
Âbrs
 = 
g¿ph
->nnbrs;

573 
³šd
 = 
g¿ph
->peind;

574 
»cv±r
 = 
g¿ph
->recvptr;

575 
£nd±r
 = 
g¿ph
->sendptr;

577 
chªged
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: changed");

578 
rwchªges
 = 
w¥aû
->
·œs
;

579 
swchªges
 = 
rwchªges
 + 
»cv±r
[
Âbrs
];

581 
upd©e
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: update");

582 
supd©e
 = 
w¥aû
->
šdiûs
;

583 
rupd©e
 = 
supd©e
 + 
»cv±r
[
Âbrs
];

584 
nupds_³
 = 
	`im®loc
(
Åes
, "KWayRefine:‚upds_pe");

586 
hbË
 = 
	`idxsm®loc
(
nvtxs
+
g¿ph
->
Äecv
, 0, "KWayRefine:†htable");

588 
badmšpwgt
 = (1.0/
ubäaùiÚ
)*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

589 
badmaxpwgt
 = 
ubäaùiÚ
*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

591 
³rm
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine:…erm");

592 
i
=0; i<
nvtxs
; i++)

593 
³rm
[
i
] = i;

594 
µ”m
 = 
	`idxm®loc
(
Å¬ts
, "KWayRefine:…perm");

595 
i
=0; i<
Å¬ts
; i++)

596 
µ”m
[
i
] = i;

598 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "K-way„efinement %2d [%5d, %5d], [%5d, %5d] Cut: %d, \tBalance: %6.3f\n",

599 
g¿ph
->
Ëv–
, 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, g¿ph->
mšcut
,

600 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

602 
·ss
=0;…ass<
Åas£s
;…ass++) {

603 
my³
 == 0)

604 
	`RªdomP”mu‹
(
Å¬ts
, 
µ”m
, 0);

605 
	`MPI_Bÿ¡
((*)
µ”m
, 
Å¬ts
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

607 
Şdcut
 = 
g¿ph
->
mšcut
;

611 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 0);

612 
c
=0; c<2; c++) {

613 
Æupd
 = 
nsupd
 = 
nmoves
 = 
nchªged
 = 0;

614 
ii
=0; ii<
nvtxs
; ii++) {

615 
i
 = 
³rm
[
ii
];

616 
ršfo
[
i
].
ed
 >ğršfo[i].
id
) {

617 
deg»es
 = 
ršfo
[
i
].degrees;

618 
äom
 = 
wh”e
[
i
];

619 
vwgt
 = 
g¿ph
->vwgt[
i
];

621 
gpwgts
[
äom
]-
vwgt
 < 
badmšpwgt
)

624 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

625 
Ùh”
 = 
deg»es
[
k
].
edge
;

626 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <ğ
badmaxpwgt
)

630 
k
 < 
ršfo
[
i
].
ndeg»es
) {

631 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

632 
Ùh”
 = 
deg»es
[
j
].
edge
;

633 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]) &&

634 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğ
badmaxpwgt
) ||

635 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[deg»es[k].
edge
])))

636 
k
 = 
j
;

639 
Ùh”
 = 
deg»es
[
k
].
edge
;

641 
deg»es
[
k
].
ewgt
 > 
ršfo
[
i
].
id
 ||

643 (
deg»es
[
k
].
ewgt
 =ğ
ršfo
[
i
].
id
 &&

644 (
Ùh”
 =ğ
my³
 || 
gpwgts
[
äom
] > 
badmaxpwgt
 || gpwgts[Ùh”] < 
badmšpwgt
 || (äom !ğmy³ && (gpwgts[äom] - gpwgts[Ùh”] >ğ
vwgt
))))) {

646 
wh”e
[
i
] = 
Ùh”
;

647 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

648 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

650 
hbË
[
i
] == 0) {

651 
hbË
[
i
] = 1;

652 
upd©e
[
Æupd
++] = 
i
;

656 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

657 
k
 = 
Ïdjncy
[
j
];

658 
hbË
[
k
] == 0) {

659 
hbË
[
k
] = 1;

660 
k
<
nvtxs
)

661 
upd©e
[
Æupd
++] = 
k
;

663 
supd©e
[
nsupd
++] = 
k
;

666 
nmoves
++;

667 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

668 
chªged
[
nchªged
++] = 
i
;

677 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

680 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_RMOVEINFO
, 
	`½rštf
(ctrl, "\t[%d %d], [%5d, %5d], [%d %d %d]\n",

681 
·ss
, 
c
, 
badmšpwgt
, 
badmaxpwgt
,

682 
	`Glob®SESum
(
ù¾
, 
nmoves
), Glob®SESum(ù¾, 
nsupd
), Glob®SESum(ù¾, 
Æupd
)));

690 
i
=0; i<
Âbrs
; i++) {

691 
	`MPI_I»cv
((*)(
rupd©e
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

692 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

696 
i
=0; i<
nsupd
; i++) {

697 
hbË
[
supd©e
[
i
]] = 0;

698 
supd©e
[
i
] = 
g¿ph
->
im­
[supdate[i]];

700 
	`iidxsÜt
(
nsupd
, 
supd©e
);

702 
j
=
i
=0; i<
Âbrs
; i++) {

703 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

704 
k
=
j
; k<
nsupd
 && 
supd©e
[k] < 
Ùh”Ï¡vtx
; k++);

705 
	`MPI_I£nd
((*)(
supd©e
+
j
), 
k
-j, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

706 
j
 = 
k
;

710 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

711 
i
=0; i<
Âbrs
; i++)

712 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
nupds_³
+i);

713 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

719 
i
=0; i<
Âbrs
; i++) {

720 
³_upd©es
 = 
rupd©e
+
£nd±r
[
i
];

721 
j
=0; j<
nupds_³
[
i
]; j++) {

722 
k
 = 
³_upd©es
[
j
];

723 
hbË
[
k
-
fœ¡vtx
] == 0) {

724 
hbË
[
k
-
fœ¡vtx
] = 1;

725 
upd©e
[
Æupd
++] = 
k
-
fœ¡vtx
;

734 
ii
=0; ii<
Æupd
; ii++) {

735 
i
 = 
upd©e
[
ii
];

736 
	`ASSERT
(
ù¾
, 
hbË
[
i
] == 1);

738 
hbË
[
i
] = 0;

740 
me
 = 
wh”e
[
i
];

741 
myršfo
 = 
ršfo
+
i
;

743 
g¿ph
->
lmšcut
 -ğ
myršfo
->
ed
;

745 
myršfo
->
ndeg»es
 = myršfo->
id
 = myršfo->
ed
 = 0;

746 
deg»es
 = 
myršfo
->degrees;

748 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

749 
Ùh”
 = 
wh”e
[
Ïdjncy
[
j
]];

750 
me
 !ğ
Ùh”
) {

751 
myršfo
->
ed
 +ğ
adjwgt
[
j
];

753 
k
=0; k<
myršfo
->
ndeg»es
; k++) {

754 
deg»es
[
k
].
edge
 =ğ
Ùh”
) {

755 
deg»es
[
k
].
ewgt
 +ğ
adjwgt
[
j
];

759 
k
 =ğ
myršfo
->
ndeg»es
) {

760 
deg»es
[
k
].
edge
 = 
Ùh”
;

761 
deg»es
[
k
].
ewgt
 = 
adjwgt
[
j
];

762 
myršfo
->
ndeg»es
++;

764 
	`ASSERT
(
ù¾
, 
myršfo
->
ndeg»es
 <ğ
xadj
[
i
+1]-xadj[i]);

767 
myršfo
->
id
 +ğ
adjwgt
[
j
];

771 
g¿ph
->
lmšcut
 +ğ
myršfo
->
ed
;

776 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

778 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

781 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "\t[%5d, %5d], [%5d, %5d] Cut: %d\n",

782 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, 
g¿ph
->
mšcut
));

784 
g¿ph
->
mšcut
 =ğ
Şdcut
 && 
ubäaùiÚ
 > 1.00)

788 
	`GKä“
(&
upd©e
, &
nupds_³
, &
hbË
, &
chªged
, &
µ”m
, &
³rm
, 
LTERM
);

790 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayTmr
));

791 
	}
}

797 
	$KWayAd­tiveRefšeCËª
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Åas£s
, 
ubäaùiÚ
)

799 
i
, 
ii
, 
j
, 
k
, 
l
, 
·ss
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
Ùh”Ï¡vtx
, 
c
, 
nmoves
,

800 
Æupd
, 
nsupd
, 
Âbrs
, 
nchªged
;

801 
Åes
 = 
ù¾
->Åes, 
my³
 = cŒl->my³, 
Å¬ts
 = ctrl->nparts;

802 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

803 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
;

804 
idxty³
 *
³šd
, *
»cv±r
, *
£nd±r
;

805 
idxty³
 *
upd©e
, *
supd©e
, *
rupd©e
, *
³_upd©es
, *
hbË
;

806 
idxty³
 *
chªged
, *
µ”m
, *
³rm
, *
tocheck
;

807 
KeyV®ueTy³
 *
swchªges
, *
rwchªges
;

808 *
nupds_³
;

809 
RInfoTy³
 *
ršfo
, *
myršfo
;

810 
EdgeTy³
 *
deg»es
;

811 
äom
, 
me
, 
Ùh”
, 
to
, 
vwgt
, 
vsize
, 
badmšpwgt
, 
badmaxpwgt
, 
Şdcut
, 
Áodo
, 
ndÚe
;

813 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayTmr
));

815 
nvtxs
 = 
g¿ph
->nvtxs;

817 
vtxdi¡
 = 
g¿ph
->vtxdist;

818 
xadj
 = 
g¿ph
->xadj;

819 
Ïdjncy
 = 
g¿ph
->
adjncy
;

820 
adjwgt
 = 
g¿ph
->adjwgt;

822 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

823 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

825 
wh”e
 = 
g¿ph
->where;

826 
ršfo
 = 
g¿ph
->rinfo;

827 
Íwgts
 = 
g¿ph
->lpwgts;

828 
gpwgts
 = 
g¿ph
->gpwgts;

830 
Âbrs
 = 
g¿ph
->nnbrs;

831 
³šd
 = 
g¿ph
->peind;

832 
»cv±r
 = 
g¿ph
->recvptr;

833 
£nd±r
 = 
g¿ph
->sendptr;

835 
chªged
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: changed");

836 
rwchªges
 = 
w¥aû
->
·œs
;

837 
swchªges
 = 
rwchªges
 + 
»cv±r
[
Âbrs
];

839 
upd©e
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: update");

840 
supd©e
 = 
w¥aû
->
šdiûs
;

841 
rupd©e
 = 
supd©e
 + 
»cv±r
[
Âbrs
];

842 
nupds_³
 = 
	`im®loc
(
Åes
, "KWayRefine:‚upds_pe");

844 
hbË
 = 
	`idxsm®loc
(
nvtxs
+
g¿ph
->
Äecv
, 0, "KWayRefine:†htable");

846 
tocheck
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine:ocheck");

848 
badmšpwgt
 = (1.0/
ubäaùiÚ
)*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

849 
badmaxpwgt
 = 
ubäaùiÚ
*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

851 
³rm
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine:…erm");

852 
i
=0; i<
nvtxs
; i++)

853 
³rm
[
i
] = i;

854 
µ”m
 = 
	`idxm®loc
(
Å¬ts
, "KWayRefine:…perm");

855 
i
=0; i<
Å¬ts
; i++)

856 
µ”m
[
i
] = i;

858 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "K-way‡daptive„efinement %2d [%5d, %5d], [%5d, %5d] Cut: %d, \tBalance: %6.3f\n",

859 
g¿ph
->
Ëv–
, 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, g¿ph->
mšcut
,

860 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

862 
·ss
=0;…ass<
Åas£s
;…ass++) {

863 
my³
 == 0)

864 
	`RªdomP”mu‹
(
Å¬ts
, 
µ”m
, 0);

865 
	`MPI_Bÿ¡
((*)
µ”m
, 
Å¬ts
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

867 
Şdcut
 = 
g¿ph
->
mšcut
;

869 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 0);

870 
c
=0; c<2; c++) {

871 
Æupd
 = 
nsupd
 = 
nmoves
 = 
nchªged
 = 
Áodo
 = 0;

874 
ii
=0; ii<
nvtxs
; ii++) {

875 
i
 = 
³rm
[
ii
];

876 
ršfo
[
i
].
ed
 >ğršfo[i].
id
) {

877 
deg»es
 = 
ršfo
[
i
].degrees;

878 
äom
 = 
wh”e
[
i
];

879 
vwgt
 = 
g¿ph
->vwgt[
i
];

880 
vsize
 = 
g¿ph
->vsize[
i
];

882 
gpwgts
[
äom
]-
vwgt
 < 
badmšpwgt
)

885 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

886 
Ùh”
 = 
deg»es
[
k
].
edge
;

887 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <ğ
badmaxpwgt
)

891 
k
 < 
ršfo
[
i
].
ndeg»es
) {

892 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

893 
Ùh”
 = 
deg»es
[
j
].
edge
;

894 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]) &&

895 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğ
badmaxpwgt
) ||

896 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[deg»es[k].
edge
])))

897 
k
 = 
j
;

900 
Ùh”
 = 
deg»es
[
k
].
edge
;

902 
deg»es
[
k
].
ewgt
 > 
ršfo
[
i
].
id
 ||

903 (
deg»es
[
k
].
ewgt
-
ršfo
[
i
].
id
 > -
vsize
 && 
gpwgts
[
Ùh”
]+
vwgt
 < 0.8*
badmšpwgt
) ||

904 (
deg»es
[
k
].
ewgt
 =ğ
ršfo
[
i
].
id
 &&

905 (
Ùh”
 =ğ
my³
 || 
gpwgts
[
äom
] > 
badmaxpwgt
 || gpwgts[Ùh”] < 
badmšpwgt
 || (äom !ğmy³ && (gpwgts[äom] - gpwgts[Ùh”] >ğ
vwgt
))))) {

911 
wh”e
[
i
] = 
Ùh”
;

912 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

913 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

915 
hbË
[
i
] == 0) {

916 
hbË
[
i
] = 1;

917 
upd©e
[
Æupd
++] = 
i
;

921 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

922 
k
 = 
Ïdjncy
[
j
];

923 
hbË
[
k
] == 0) {

924 
hbË
[
k
] = 1;

925 
k
<
nvtxs
)

926 
upd©e
[
Æupd
++] = 
k
;

928 
supd©e
[
nsupd
++] = 
k
;

931 
nmoves
++;

932 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

933 
chªged
[
nchªged
++] = 
i
;

937 
gpwgts
[
wh”e
[
i
]] > 
badmaxpwgt
)

938 
tocheck
[
Áodo
++] = 
i
;

941 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

942 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ù¾, "\tLeáodo: \t%d %d\ˆB®ªû: %5.3f\n", 
	`Glob®SESum
(ù¾, 
Áodo
), 
	`Glob®SEMax
(ctrl,‚todo),

943 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

946 
ndÚe
 = 0;

947 
ii
=0; ii<
Áodo
; ii++) {

948 
i
 = 
tocheck
[
ii
];

949 
äom
 = 
wh”e
[
i
];

950 
vwgt
 = 
g¿ph
->vwgt[
i
];

951 
gpwgts
[
äom
] > 
badmaxpwgt
) {

952 
deg»es
 = 
ršfo
[
i
].degrees;

954 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

955 
Ùh”
 = 
deg»es
[
k
].
edge
;

956 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <= gpwgts[from])

960 
k
 < 
ršfo
[
i
].
ndeg»es
) {

961 
ndÚe
 +ğ
vwgt
;

962 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

963 
Ùh”
 = 
deg»es
[
j
].
edge
;

964 
to
 = 
deg»es
[
k
].
edge
;

965 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
])) {

966 
gpwgts
[
Ùh”
] < 
badmšpwgt
 && (gpwgts[
to
] > badmšpwgˆ|| 
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgt))

967 
k
 = 
j
;

968 
gpwgts
[
to
] > 
badmšpwgt
 &&

969 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğgpwgts[
äom
]) ||

970 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[
to
])))

971 
k
 = 
j
;

975 
Ùh”
 = 
deg»es
[
k
].
edge
;

980 
wh”e
[
i
] = 
Ùh”
;

981 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

982 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

984 
hbË
[
i
] == 0) {

985 
hbË
[
i
] = 1;

986 
upd©e
[
Æupd
++] = 
i
;

990 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

991 
k
 = 
Ïdjncy
[
j
];

992 
hbË
[
k
] == 0) {

993 
hbË
[
k
] = 1;

994 
k
<
nvtxs
)

995 
upd©e
[
Æupd
++] = 
k
;

997 
supd©e
[
nsupd
++] = 
k
;

1000 
nmoves
++;

1001 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

1002 
chªged
[
nchªged
++] = 
i
;

1007 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

1008 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ù¾, "\tAùu® dÚe: \t%d %d\ˆB®ªû: %5.3f\n", 
	`Glob®SESum
(ù¾, 
ndÚe
), 
	`Glob®SEMax
(ctrl,‚done),

1009 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

1014 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

1017 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_RMOVEINFO
, 
	`½rštf
(ctrl, "\t[%d %d], [%5d, %5d], [%d %d %d]\n",

1018 
·ss
, 
c
, 
badmšpwgt
, 
badmaxpwgt
,

1019 
	`Glob®SESum
(
ù¾
, 
nmoves
), Glob®SESum(ù¾, 
nsupd
), Glob®SESum(ù¾, 
Æupd
)));

1027 
i
=0; i<
Âbrs
; i++) {

1028 
	`MPI_I»cv
((*)(
rupd©e
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

1029 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

1033 
i
=0; i<
nsupd
; i++) {

1034 
hbË
[
supd©e
[
i
]] = 0;

1035 
supd©e
[
i
] = 
g¿ph
->
im­
[supdate[i]];

1037 
	`iidxsÜt
(
nsupd
, 
supd©e
);

1039 
j
=
i
=0; i<
Âbrs
; i++) {

1040 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

1041 
k
=
j
; k<
nsupd
 && 
supd©e
[k] < 
Ùh”Ï¡vtx
; k++);

1042 
	`MPI_I£nd
((*)(
supd©e
+
j
), 
k
-j, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

1043 
j
 = 
k
;

1047 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

1048 
i
=0; i<
Âbrs
; i++)

1049 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
nupds_³
+i);

1050 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

1056 
i
=0; i<
Âbrs
; i++) {

1057 
³_upd©es
 = 
rupd©e
+
£nd±r
[
i
];

1058 
j
=0; j<
nupds_³
[
i
]; j++) {

1059 
k
 = 
³_upd©es
[
j
];

1060 
hbË
[
k
-
fœ¡vtx
] == 0) {

1061 
hbË
[
k
-
fœ¡vtx
] = 1;

1062 
upd©e
[
Æupd
++] = 
k
-
fœ¡vtx
;

1071 
ii
=0; ii<
Æupd
; ii++) {

1072 
i
 = 
upd©e
[
ii
];

1073 
	`ASSERT
(
ù¾
, 
hbË
[
i
] == 1);

1075 
hbË
[
i
] = 0;

1077 
me
 = 
wh”e
[
i
];

1078 
myršfo
 = 
ršfo
+
i
;

1080 
g¿ph
->
lmšcut
 -ğ
myršfo
->
ed
;

1082 
myršfo
->
ndeg»es
 = myršfo->
id
 = myršfo->
ed
 = 0;

1083 
deg»es
 = 
myršfo
->degrees;

1085 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

1086 
Ùh”
 = 
wh”e
[
Ïdjncy
[
j
]];

1087 
me
 !ğ
Ùh”
) {

1088 
myršfo
->
ed
 +ğ
adjwgt
[
j
];

1090 
k
=0; k<
myršfo
->
ndeg»es
; k++) {

1091 
deg»es
[
k
].
edge
 =ğ
Ùh”
) {

1092 
deg»es
[
k
].
ewgt
 +ğ
adjwgt
[
j
];

1096 
k
 =ğ
myršfo
->
ndeg»es
) {

1097 
deg»es
[
k
].
edge
 = 
Ùh”
;

1098 
deg»es
[
k
].
ewgt
 = 
adjwgt
[
j
];

1099 
myršfo
->
ndeg»es
++;

1101 
	`ASSERT
(
ù¾
, 
myršfo
->
ndeg»es
 <ğ
xadj
[
i
+1]-xadj[i]);

1104 
myršfo
->
id
 +ğ
adjwgt
[
j
];

1107 
g¿ph
->
lmšcut
 +ğ
myršfo
->
ed
;

1111 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

1113 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "\t[%5d, %5d], [%5d, %5d] Cut: %d\n",

1114 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, 
g¿ph
->
mšcut
));

1116 
g¿ph
->
mšcut
 =ğ
Şdcut
)

1120 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

1121 
	`GKä“
(&
upd©e
, &
nupds_³
, &
hbË
, &
chªged
, &
³rm
, &
µ”m
, &
tocheck
, 
LTERM
);

1123 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayTmr
));

1124 
	}
}

1130 
	$KWayAd­tiveRefšeCËª2
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Åas£s
, 
ubäaùiÚ
)

1132 
i
, 
ii
, 
j
, 
k
, 
l
, 
·ss
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
Ùh”Ï¡vtx
, 
c
, 
nmoves
,

1133 
Æupd
, 
nsupd
, 
Âbrs
, 
nchªged
;

1134 
Åes
 = 
ù¾
->Åes, 
my³
 = cŒl->my³, 
Å¬ts
 = ctrl->nparts;

1135 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
;

1136 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
;

1137 
idxty³
 *
³šd
, *
»cv±r
, *
£nd±r
;

1138 
idxty³
 *
upd©e
, *
supd©e
, *
rupd©e
, *
³_upd©es
, *
hbË
;

1139 
idxty³
 *
chªged
, *
µ”m
, *
³rm
, *
tocheck
;

1140 
idxty³
 *
maxpush
;

1141 
KeyV®ueTy³
 *
swchªges
, *
rwchªges
;

1142 *
nupds_³
;

1143 
RInfoTy³
 *
ršfo
, *
myršfo
;

1144 
EdgeTy³
 *
deg»es
;

1145 
äom
, 
me
, 
Ùh”
, 
to
, 
vwgt
, 
vsize
, 
badmšpwgt
, 
badmaxpwgt
, 
Şdcut
, 
Áodo
, 
ndÚe
;

1147 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayTmr
));

1149 
nvtxs
 = 
g¿ph
->nvtxs;

1151 
vtxdi¡
 = 
g¿ph
->vtxdist;

1152 
xadj
 = 
g¿ph
->xadj;

1153 
Ïdjncy
 = 
g¿ph
->
adjncy
;

1154 
adjwgt
 = 
g¿ph
->adjwgt;

1156 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

1157 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

1159 
wh”e
 = 
g¿ph
->where;

1160 
ršfo
 = 
g¿ph
->rinfo;

1161 
Íwgts
 = 
g¿ph
->lpwgts;

1162 
gpwgts
 = 
g¿ph
->gpwgts;

1164 
Âbrs
 = 
g¿ph
->nnbrs;

1165 
³šd
 = 
g¿ph
->peind;

1166 
»cv±r
 = 
g¿ph
->recvptr;

1167 
£nd±r
 = 
g¿ph
->sendptr;

1169 
chªged
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: changed");

1170 
rwchªges
 = 
w¥aû
->
·œs
;

1171 
swchªges
 = 
rwchªges
 + 
»cv±r
[
Âbrs
];

1173 
upd©e
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: update");

1174 
supd©e
 = 
w¥aû
->
šdiûs
;

1175 
rupd©e
 = 
supd©e
 + 
»cv±r
[
Âbrs
];

1176 
nupds_³
 = 
	`im®loc
(
Åes
, "KWayRefine:‚upds_pe");

1178 
hbË
 = 
	`idxsm®loc
(
nvtxs
+
g¿ph
->
Äecv
, 0, "KWayRefine:†htable");

1180 
tocheck
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine:ocheck");

1182 
badmšpwgt
 = (1.0/
ubäaùiÚ
)*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

1183 
badmaxpwgt
 = 
ubäaùiÚ
*
	`idxsum
(
Å¬ts
, 
gpwgts
)/nparts;

1185 
maxpush
 = 
	`idxm®loc
(
Å¬ts
, "maxpush");

1187 
³rm
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine:…erm");

1188 
i
=0; i<
nvtxs
; i++)

1189 
³rm
[
i
] = i;

1190 
µ”m
 = 
	`idxm®loc
(
Å¬ts
, "KWayRefine:…perm");

1191 
i
=0; i<
Å¬ts
; i++)

1192 
µ”m
[
i
] = i;

1194 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "K-way‡daptive„efinement %2d [%5d, %5d], [%5d, %5d] Cut: %d, \tBalance: %6.3f\n",

1195 
g¿ph
->
Ëv–
, 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, g¿ph->
mšcut
,

1196 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

1198 
·ss
=0;…ass<
Åas£s
;…ass++) {

1199 
my³
 == 0)

1200 
	`RªdomP”mu‹
(
Å¬ts
, 
µ”m
, 0);

1201 
	`MPI_Bÿ¡
((*)
µ”m
, 
Å¬ts
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

1203 
Şdcut
 = 
g¿ph
->
mšcut
;

1205 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 0);

1206 
c
=0; c<2; c++) {

1207 
Æupd
 = 
nsupd
 = 
nmoves
 = 
nchªged
 = 
Áodo
 = 0;

1210 
ii
=0; ii<
nvtxs
; ii++) {

1211 
i
 = 
³rm
[
ii
];

1212 
ršfo
[
i
].
ed
 >ğršfo[i].
id
) {

1213 
deg»es
 = 
ršfo
[
i
].degrees;

1214 
äom
 = 
wh”e
[
i
];

1215 
vwgt
 = 
g¿ph
->vwgt[
i
];

1216 
vsize
 = 
g¿ph
->vsize[
i
];

1218 
gpwgts
[
äom
]-
vwgt
 < 
badmšpwgt
)

1221 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

1222 
Ùh”
 = 
deg»es
[
k
].
edge
;

1223 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <ğ
badmaxpwgt
)

1227 
k
 < 
ršfo
[
i
].
ndeg»es
) {

1228 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

1229 
Ùh”
 = 
deg»es
[
j
].
edge
;

1230 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]) &&

1231 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğ
badmaxpwgt
) ||

1232 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[deg»es[k].
edge
])))

1233 
k
 = 
j
;

1236 
Ùh”
 = 
deg»es
[
k
].
edge
;

1238 
deg»es
[
k
].
ewgt
 > 
ršfo
[
i
].
id
 ||

1239 (
deg»es
[
k
].
ewgt
-
ršfo
[
i
].
id
 > -
vsize
 && 
gpwgts
[
Ùh”
]+
vwgt
 < 0.8*
badmšpwgt
) ||

1240 (
deg»es
[
k
].
ewgt
 =ğ
ršfo
[
i
].
id
 &&

1241 (
Ùh”
 =ğ
my³
 || 
gpwgts
[
äom
] > 
badmaxpwgt
 || gpwgts[Ùh”] < 
badmšpwgt
 || (äom !ğmy³ && (gpwgts[äom] - gpwgts[Ùh”] >ğ
vwgt
))))) {

1248 
wh”e
[
i
] = 
Ùh”
;

1249 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

1250 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

1252 
hbË
[
i
] == 0) {

1253 
hbË
[
i
] = 1;

1254 
upd©e
[
Æupd
++] = 
i
;

1258 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

1259 
k
 = 
Ïdjncy
[
j
];

1260 
hbË
[
k
] == 0) {

1261 
hbË
[
k
] = 1;

1262 
k
<
nvtxs
)

1263 
upd©e
[
Æupd
++] = 
k
;

1265 
supd©e
[
nsupd
++] = 
k
;

1268 
nmoves
++;

1269 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

1270 
chªged
[
nchªged
++] = 
i
;

1274 
gpwgts
[
wh”e
[
i
]] > 
badmaxpwgt
)

1275 
tocheck
[
Áodo
++] = 
i
;

1278 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

1279 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ù¾, "\tLeáodo: \t%d %d\ˆB®ªû: %5.3f\n", 
	`Glob®SESum
(ù¾, 
Áodo
), 
	`Glob®SEMax
(ctrl,‚todo),

1280 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

1283 
i
=0; i<
Å¬ts
; i++) {

1284 
gpwgts
[
i
] > 
badmaxpwgt
) {

1285 
maxpush
[
i
] = ((
gpwgts
[i]-
badmaxpwgt
)*
Íwgts
[i])/gpwgts[i];

1286 
Íwgts
[
i
]*
Å¬ts
 > 
gpwgts
[i])

1287 
maxpush
[
i
]++;

1290 
maxpush
[
i
] = 0;

1294 
ndÚe
 = 0;

1295 
ii
=0; ii<
Áodo
; ii++) {

1296 
i
 = 
tocheck
[
ii
];

1297 
äom
 = 
wh”e
[
i
];

1298 
vwgt
 = 
g¿ph
->vwgt[
i
];

1299 
maxpush
[
äom
] >ğ
vwgt
) {

1300 
deg»es
 = 
ršfo
[
i
].degrees;

1302 
k
=0; k<
ršfo
[
i
].
ndeg»es
; k++) {

1303 
Ùh”
 = 
deg»es
[
k
].
edge
;

1304 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
]è&& 
gpwgts
[Ùh”]+
vwgt
 <= gpwgts[from])

1308 
k
 < 
ršfo
[
i
].
ndeg»es
) {

1309 
ndÚe
 +ğ
vwgt
;

1310 
j
=
k
+1; j<
ršfo
[
i
].
ndeg»es
; j++) {

1311 
Ùh”
 = 
deg»es
[
j
].
edge
;

1312 
to
 = 
deg»es
[
k
].
edge
;

1313 
	`Prİ”Side
(
c
, 
µ”m
[
äom
],…³rm[
Ùh”
])) {

1314 
gpwgts
[
Ùh”
] < 
badmšpwgt
 && (gpwgts[
to
] > badmšpwgˆ|| 
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgt))

1315 
k
 = 
j
;

1316 
gpwgts
[
to
] > 
badmšpwgt
 &&

1317 ((
deg»es
[
j
].
ewgt
 > deg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
]+
vwgt
 <ğgpwgts[
äom
]) ||

1318 (
deg»es
[
j
].
ewgt
 =ğdeg»es[
k
].ewgˆ&& 
gpwgts
[
Ùh”
] < gpwgts[
to
])))

1319 
k
 = 
j
;

1323 
Ùh”
 = 
deg»es
[
k
].
edge
;

1330 
wh”e
[
i
] = 
Ùh”
;

1331 
	`INC_DEC
(
Íwgts
[
Ùh”
],†pwgts[
äom
], 
vwgt
);

1332 
	`INC_DEC
(
gpwgts
[
Ùh”
], gpwgts[
äom
], 
vwgt
);

1333 
maxpush
[
äom
] -ğ
vwgt
;

1335 
hbË
[
i
] == 0) {

1336 
hbË
[
i
] = 1;

1337 
upd©e
[
Æupd
++] = 
i
;

1341 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

1342 
k
 = 
Ïdjncy
[
j
];

1343 
hbË
[
k
] == 0) {

1344 
hbË
[
k
] = 1;

1345 
k
<
nvtxs
)

1346 
upd©e
[
Æupd
++] = 
k
;

1348 
supd©e
[
nsupd
++] = 
k
;

1351 
nmoves
++;

1352 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

1353 
chªged
[
nchªged
++] = 
i
;

1358 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

1359 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ù¾, "\tAùu® dÚe: \t%d %d\ˆB®ªû: %5.3f\n", 
	`Glob®SESum
(ù¾, 
ndÚe
), 
	`Glob®SEMax
(ctrl,‚done),

1360 1.0*
Å¬ts
*
gpwgts
[
	`idxamax
Ò·¹s, gpwgts)]/(1.0*
	`idxsum
(nparts, gpwgts))));

1365 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

1368 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_RMOVEINFO
, 
	`½rštf
(ctrl, "\t[%d %d], [%5d, %5d], [%d %d %d]\n",

1369 
·ss
, 
c
, 
badmšpwgt
, 
badmaxpwgt
,

1370 
	`Glob®SESum
(
ù¾
, 
nmoves
), Glob®SESum(ù¾, 
nsupd
), Glob®SESum(ù¾, 
Æupd
)));

1378 
i
=0; i<
Âbrs
; i++) {

1379 
	`MPI_I»cv
((*)(
rupd©e
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

1380 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

1384 
i
=0; i<
nsupd
; i++) {

1385 
hbË
[
supd©e
[
i
]] = 0;

1386 
supd©e
[
i
] = 
g¿ph
->
im­
[supdate[i]];

1388 
	`iidxsÜt
(
nsupd
, 
supd©e
);

1390 
j
=
i
=0; i<
Âbrs
; i++) {

1391 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

1392 
k
=
j
; k<
nsupd
 && 
supd©e
[k] < 
Ùh”Ï¡vtx
; k++);

1393 
	`MPI_I£nd
((*)(
supd©e
+
j
), 
k
-j, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

1394 
j
 = 
k
;

1398 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

1399 
i
=0; i<
Âbrs
; i++)

1400 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
nupds_³
+i);

1401 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

1407 
i
=0; i<
Âbrs
; i++) {

1408 
³_upd©es
 = 
rupd©e
+
£nd±r
[
i
];

1409 
j
=0; j<
nupds_³
[
i
]; j++) {

1410 
k
 = 
³_upd©es
[
j
];

1411 
hbË
[
k
-
fœ¡vtx
] == 0) {

1412 
hbË
[
k
-
fœ¡vtx
] = 1;

1413 
upd©e
[
Æupd
++] = 
k
-
fœ¡vtx
;

1422 
ii
=0; ii<
Æupd
; ii++) {

1423 
i
 = 
upd©e
[
ii
];

1424 
	`ASSERT
(
ù¾
, 
hbË
[
i
] == 1);

1426 
hbË
[
i
] = 0;

1428 
me
 = 
wh”e
[
i
];

1429 
myršfo
 = 
ršfo
+
i
;

1431 
g¿ph
->
lmšcut
 -ğ
myršfo
->
ed
;

1433 
myršfo
->
ndeg»es
 = myršfo->
id
 = myršfo->
ed
 = 0;

1434 
deg»es
 = 
myršfo
->degrees;

1436 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

1437 
Ùh”
 = 
wh”e
[
Ïdjncy
[
j
]];

1438 
me
 !ğ
Ùh”
) {

1439 
myršfo
->
ed
 +ğ
adjwgt
[
j
];

1441 
k
=0; k<
myršfo
->
ndeg»es
; k++) {

1442 
deg»es
[
k
].
edge
 =ğ
Ùh”
) {

1443 
deg»es
[
k
].
ewgt
 +ğ
adjwgt
[
j
];

1447 
k
 =ğ
myršfo
->
ndeg»es
) {

1448 
deg»es
[
k
].
edge
 = 
Ùh”
;

1449 
deg»es
[
k
].
ewgt
 = 
adjwgt
[
j
];

1450 
myršfo
->
ndeg»es
++;

1452 
	`ASSERT
(
ù¾
, 
myršfo
->
ndeg»es
 <ğ
xadj
[
i
+1]-xadj[i]);

1455 
myršfo
->
id
 +ğ
adjwgt
[
j
];

1458 
g¿ph
->
lmšcut
 +ğ
myršfo
->
ed
;

1462 
g¿ph
->
mšcut
 = 
	`Glob®SESum
(
ù¾
, g¿ph->
lmšcut
)/2;

1464 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`½rštf
(ctrl, "\t[%5d, %5d], [%5d, %5d] Cut: %d\n",

1465 
gpwgts
[
	`idxamš
(
Å¬ts
, gpwgts)], gpwgts[
	`idxamax
Ò·¹s, gpwgts)], 
badmšpwgt
, 
badmaxpwgt
, 
g¿ph
->
mšcut
));

1467 
g¿ph
->
mšcut
 =ğ
Şdcut
)

1471 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

1472 
	`GKä“
(&
upd©e
, &
nupds_³
, &
hbË
, &
chªged
, &
³rm
, &
µ”m
, &
tocheck
, &
maxpush
, 
LTERM
);

1474 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayTmr
));

1475 
	}
}

	@fold.c

15 
	~<·rm‘is.h
>

21 
	$EnoughMemÜy
(
CŒlTy³
 *
ù¾
, 
myÃdges
, 
Æ¬ge
)

23 
Ùh”Ãdges
, 
v®
;

25 
ù¾
->
my³
%2 == 0) {

26 
	`MPI_Recv
((*)&
Ùh”Ãdges
, 1, 
MPI_INT
, 
ù¾
->
my³
+1, 1, cŒl->
comm
, &ù¾->
¡©us
);

27 
v®
 = (
myÃdges
+
Ùh”Ãdges
 <ğ
Æ¬ge
 ? 0 : 1);

30 
	`MPI_S’d
((*)&
myÃdges
, 1, 
MPI_INT
, 
ù¾
->
my³
-1, 1, cŒl->
comm
);

31 
v®
 = 0;

34  (
	`Glob®SESum
(
ù¾
, 
v®
) == 0);

35 
	}
}

41 
G¿phTy³
 *
	$FŞdG¿ph
(
CŒlTy³
 *
ù¾
, G¿phTy³ *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

43 
i
, 
j
, 
k
, 
nvtxs
, 
ev’
, 
Åes
=
ù¾
->Åes, 
â³s
ò³s/2, 
âvtxs
, 
âedges
, 
fmy³
;

44 
idxty³
 *
vtxdi¡
, *
ædxadj
, *
ædvwgt
, *
ædvtxdi¡
;

45 
G¿phTy³
 *
ædg¿ph
;

47 
ev’
 = 
ù¾
->
my³
%2 == 0;

48 
fmy³
 = 
ù¾
->
my³
/2;

50 
nvtxs
 = 
g¿ph
->nvtxs;

51 
vtxdi¡
 = 
g¿ph
->vtxdist;

53 
ædg¿ph
 = 
NULL
;

56 
ev’
) {

57 
ædg¿ph
 = 
	`C»©eG¿ph
();

58 
ædg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

60 
ædvtxdi¡
 = 
ædg¿ph
->
vtxdi¡
 = 
	`idxm®loc
(
â³s
+1, "FoldGraph: fldvtxdist");

61 
i
=0; i<=
â³s
; i++)

62 
ædvtxdi¡
[
i
] = 
vtxdi¡
[2*i];

64 
âvtxs
 = 
ædvtxdi¡
[
fmy³
+1]-fldvtxdist[fmype];

66 
ædxadj
 = 
ædg¿ph
->
xadj
 = 
	`idxm®loc
(
âvtxs
+1, "FoldGraph: fldxadj");

67 
ædvwgt
 = 
ædg¿ph
->
vwgt
 = 
	`idxm®loc
(
âvtxs
, "FoldGraph: fldxvwgt");

69 
i
=0; i<
nvtxs
; i++)

70 
ædxadj
[
i
] = 
g¿ph
->
xadj
[i+1]-graph->xadj[i];

71 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
, 
ædvwgt
);

73 
	`MPI_Recv
((*)(
ædxadj
+
g¿ph
->
nvtxs
), 
âvtxs
-nvtxs+1, 
IDX_DATATYPE
, 
ù¾
->
my³
+1, 1,

74 
ù¾
->
comm
, &ù¾->
¡©us
);

75 
	`MPI_Recv
((*)(
ædvwgt
+
g¿ph
->
nvtxs
), 
âvtxs
-nvtxs, 
IDX_DATATYPE
, 
ù¾
->
my³
+1, 1,

76 
ù¾
->
comm
, &ù¾->
¡©us
);

78 
i
=0; i<
âvtxs
-
nvtxs
; i++)

79 
ædxadj
[
nvtxs
+
i
] = fldxadj[nvtxs+i+1]-fldxadj[nvtxs+i];

80 
	`MAKECSR
(
i
, 
âvtxs
, 
ædxadj
);

82 
âedges
 = 
ædxadj
[
âvtxs
];

83 
ædg¿ph
->
adjncy
 = 
	`idxm®loc
(
âedges
, "FoldGraph: fldadjncy");

84 
ædg¿ph
->
adjwgt
 = 
	`idxm®loc
(
âedges
, "FoldGraph: fldadjwgt");

86 
	`idxcİy
(
g¿ph
->
Ãdges
, g¿ph->
adjncy
, 
ædg¿ph
->adjncy);

87 
	`idxcİy
(
g¿ph
->
Ãdges
, g¿ph->
adjwgt
, 
ædg¿ph
->adjwgt);

89 
	`MPI_Recv
((*)(
ædg¿ph
->
adjncy
+
g¿ph
->
Ãdges
), 
âedges
-g¿ph->Ãdges, 
IDX_DATATYPE
,

90 
ù¾
->
my³
+1, 1, cŒl->
comm
, &ù¾->
¡©us
);

91 
	`MPI_Recv
((*)(
ædg¿ph
->
adjwgt
+
g¿ph
->
Ãdges
), 
âedges
-g¿ph->Ãdges, 
IDX_DATATYPE
,

92 
ù¾
->
my³
+1, 1, cŒl->
comm
, &ù¾->
¡©us
);

94 
ædg¿ph
->
Ëv–
 = 
g¿ph
->level + 1;

95 
ædg¿ph
->
nvtxs
 = 
âvtxs
;

96 
ædg¿ph
->
Ãdges
 = 
âedges
;

97 
ædg¿ph
->
gnvtxs
 = 
g¿ph
->gnvtxs;

99 
âedges
 > 
w¥aû
->
Æ¬ge
/2)

100 
	`´štf
("FNEDGES i high”h© origš®! %d %d\n", 
âedges
, 
w¥aû
->
Æ¬ge
/2);

103 
	`MPI_S’d
((*)
g¿ph
->
xadj
, g¿ph->
nvtxs
+1, 
IDX_DATATYPE
, 
ù¾
->
my³
-1, 1, cŒl->
comm
);

104 
	`MPI_S’d
((*)
g¿ph
->
vwgt
, g¿ph->
nvtxs
, 
IDX_DATATYPE
, 
ù¾
->
my³
-1, 1, cŒl->
comm
);

105 
	`MPI_S’d
((*)
g¿ph
->
adjncy
, g¿ph->
Ãdges
, 
IDX_DATATYPE
, 
ù¾
->
my³
-1, 1, cŒl->
comm
);

106 
	`MPI_S’d
((*)
g¿ph
->
adjwgt
, g¿ph->
Ãdges
, 
IDX_DATATYPE
, 
ù¾
->
my³
-1, 1, cŒl->
comm
);

109  
ædg¿ph
;

110 
	}
}

116 
	$UnFŞdG¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, G¿phTy³ *
ædg¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

118 
ev’
;

120 
ev’
 = 
ù¾
->
my³
%2 == 0;

122 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
, "UnFoldGraph: graph->where");

125 
ev’
) {

126 
	`idxcİy
(
g¿ph
->
nvtxs
, 
ædg¿ph
->
wh”e
, graph->where);

127 
	`MPI_S’d
((*)(
ædg¿ph
->
wh”e
+
g¿ph
->
nvtxs
), fldg¿ph->nvtxs-g¿ph->nvtxs, 
IDX_DATATYPE
,

128 
ù¾
->
my³
+1, 1, cŒl->
comm
);

130 
	`F»eG¿ph
(
ædg¿ph
);

133 
	`MPI_Recv
((*)
g¿ph
->
wh”e
, g¿ph->
nvtxs
, 
IDX_DATATYPE
, 
ù¾
->
my³
-1, 1, cŒl->
comm
, &ù¾->
¡©us
);

136 
	}
}

	@frename.c

14 
	~<·rm‘is.h
>

18 
	$PARMETIS_PARTKWAY
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
Å¬ts
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

20 
	`P¬METIS_P¬tKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
Å¬ts
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

21 
	}
}

22 
	$·rm‘is_·¹kway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
Å¬ts
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

24 
	`P¬METIS_P¬tKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
Å¬ts
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

25 
	}
}

26 
	$·rm‘is_·¹kway_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
Å¬ts
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

28 
	`P¬METIS_P¬tKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
Å¬ts
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

29 
	}
}

30 
	$·rm‘is_·¹kway__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
Å¬ts
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

32 
	`P¬METIS_P¬tKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
Å¬ts
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

33 
	}
}

36 
	$PARMETIS_REFINEKWAY
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

38 
	`P¬METIS_RefšeKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

39 
	}
}

40 
	$·rm‘is_»fšekway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

42 
	`P¬METIS_RefšeKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

43 
	}
}

44 
	$·rm‘is_»fšekway_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

46 
	`P¬METIS_RefšeKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

47 
	}
}

48 
	$·rm‘is_»fšekway__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

50 
	`P¬METIS_RefšeKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

51 
	}
}

54 
	$PARMETIS_PARTGEOMKWAY
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

56 
	`P¬METIS_P¬tGeomKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

57 
	}
}

58 
	$·rm‘is_·¹geomkway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

60 
	`P¬METIS_P¬tGeomKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

61 
	}
}

62 
	$·rm‘is_·¹geomkway_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

64 
	`P¬METIS_P¬tGeomKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

65 
	}
}

66 
	$·rm‘is_·¹geomkway__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

68 
	`P¬METIS_P¬tGeomKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

69 
	}
}

72 
	$PARMETIS_PARTGEOMREFINE
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

74 
	`P¬METIS_P¬tGeomRefše
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

75 
	}
}

76 
	$·rm‘is_·¹geom»fše
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

78 
	`P¬METIS_P¬tGeomRefše
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

79 
	}
}

80 
	$·rm‘is_·¹geom»fše_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

82 
	`P¬METIS_P¬tGeomRefše
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

83 
	}
}

84 
	$·rm‘is_·¹geom»fše__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

86 
	`P¬METIS_P¬tGeomRefše
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

87 
	}
}

90 
	$PARMETIS_PARTGEOM
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

92 
	`P¬METIS_P¬tGeom
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

93 
	}
}

94 
	$·rm‘is_·¹geom
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

96 
	`P¬METIS_P¬tGeom
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

97 
	}
}

98 
	$·rm‘is_·¹geom_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

100 
	`P¬METIS_P¬tGeom
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

101 
	}
}

102 
	$·rm‘is_·¹geom__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
ndims
, *
xyz
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

104 
	`P¬METIS_P¬tGeom
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
ndims
, 
xyz
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

105 
	}
}

108 
	$PARMETIS_REPARTLDIFFUSION
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

110 
	`P¬METIS_R•¬tLDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

111 
	}
}

112 
	$·rm‘is_»·¹ldiffusiÚ
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

114 
	`P¬METIS_R•¬tLDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

115 
	}
}

116 
	$·rm‘is_»·¹ldiffusiÚ_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

118 
	`P¬METIS_R•¬tLDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

119 
	}
}

120 
	$·rm‘is_»·¹ldiffusiÚ__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

122 
	`P¬METIS_R•¬tLDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

123 
	}
}

125 
	$PARMETIS_REPARTGDIFFUSION
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

127 
	`P¬METIS_R•¬tGDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

128 
	}
}

129 
	$·rm‘is_»·¹gdiffusiÚ
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

131 
	`P¬METIS_R•¬tGDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

132 
	}
}

133 
	$·rm‘is_»·¹gdiffusiÚ_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

135 
	`P¬METIS_R•¬tGDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

136 
	}
}

137 
	$·rm‘is_»·¹gdiffusiÚ__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

139 
	`P¬METIS_R•¬tGDiffusiÚ
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

140 
	}
}

142 
	$PARMETIS_REPARTREMAP
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

144 
	`P¬METIS_R•¬tRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

145 
	}
}

146 
	$·rm‘is_»·¹»m­
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

148 
	`P¬METIS_R•¬tRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

149 
	}
}

150 
	$·rm‘is_»·¹»m­_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

152 
	`P¬METIS_R•¬tRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

153 
	}
}

154 
	$·rm‘is_»·¹»m­__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

156 
	`P¬METIS_R•¬tRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

157 
	}
}

160 
	$PARMETIS_REPARTMLREMAP
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

162 
	`P¬METIS_R•¬tMLRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

163 
	}
}

164 
	$·rm‘is_»·¹mÌem­
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

166 
	`P¬METIS_R•¬tMLRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

167 
	}
}

168 
	$·rm‘is_»·¹mÌem­_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

170 
	`P¬METIS_R•¬tMLRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

171 
	}
}

172 
	$·rm‘is_»·¹mÌem­__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
, *
edgecut
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

174 
	`P¬METIS_R•¬tMLRem­
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
, 
İtiÚs
, 
edgecut
, 
·¹
, 
comm
);

175 
	}
}

178 
	$PARMETIS_NODEND
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

180 
	`P¬METIS_NodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

181 
	}
}

182 
	$·rm‘is_nod’d
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

184 
	`P¬METIS_NodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

185 
	}
}

186 
	$·rm‘is_nod’d_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

188 
	`P¬METIS_NodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

189 
	}
}

190 
	$·rm‘is_nod’d__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

192 
	`P¬METIS_NodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

193 
	}
}

196 
	$PARMETIS_SERIALNODEND
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

198 
	`P¬METIS_S”ŸlNodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

199 
	}
}

200 
	$·rm‘is_£rŸÊod’d
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

202 
	`P¬METIS_S”ŸlNodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

203 
	}
}

204 
	$·rm‘is_£rŸÊod’d_
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

206 
	`P¬METIS_S”ŸlNodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

207 
	}
}

208 
	$·rm‘is_£rŸÊod’d__
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
, *
İtiÚs
, idxty³ *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

210 
	`P¬METIS_S”ŸlNodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, 
numæag
, 
İtiÚs
, 
Üd”
, 
sizes
, 
comm
);

211 
	}
}

	@gmetis.c

16 
	~<·rm‘is.h
>

25 
	$P¬METIS_P¬tGeomKway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
,

26 
idxty³
 *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
, *
xyz
, *
Å¬ts
,

27 *
İtiÚs
, *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

29 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

30 
Åes
, 
my³
;

31 
CŒlTy³
 
ù¾
;

32 
WÜkS·ûTy³
 
w¥aû
;

33 
G¿phTy³
 *
g¿ph
, *
mg¿ph
;

35 
	`MPI_Comm_size
(*
comm
, &
Åes
);

36 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

38 *
Å¬ts
 == 1) {

39 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

40 *
edgecut
 = 0;

43 
Åes
 =ğ1 && *
Å¬ts
 > 1) {

44 
mİtiÚs
[10];

46 
mİtiÚs
[0] = 0;

47 
	`METIS_P¬tG¿phKway
(&
vtxdi¡
[1], 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
,

48 
Å¬ts
, 
mİtiÚs
, 
edgecut
, 
·¹
);

53 *
numæag
 == 1)

54 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

56 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

57 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*
	`amax
Ò³s, *
Å¬ts
));

59 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

61 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

66 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

67 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

68 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

70 
	`CoÜdš©e_P¬t™iÚ
(&
ù¾
, 
g¿ph
, *
ndims
, 
xyz
, 1, &
w¥aû
);

72 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

73 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

74 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

79 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

80 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
MoveTmr
));

82 
mg¿ph
 = 
	`MoveG¿ph
(&
ù¾
, 
g¿ph
, &
w¥aû
);

84 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

85 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
MoveTmr
));

87 
ù¾
.
dbglvl
&
DBG_INFO
) {

88 
tvwgt
 = 
	`Glob®SESum
(&
ù¾
, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
));

89 
	`Compu‹P¬t™iÚP¬ams
(&
ù¾
, 
g¿ph
, &
w¥aû
);

90 
	`½rštf
(&
ù¾
, "XYZ Cut: %6d \tBalance: %6.3f [%d %d %d][%d %d %d %d]\n",

91 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

92 
g¿ph
->
gpwgts
[
	`idxamax
(
Åes
, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
,

93 
	`Glob®SEMax
(&
ù¾
, 
g¿ph
->
Äecv
), 
	`Glob®SESum
(&ctrl, graph->nrecv),

94 
	`Glob®SEMax
(&
ù¾
, 
g¿ph
->
n£nd
), 
	`Glob®SESum
(&ctrl, graph->nsend));

100 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

101 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

103 
	`F»eWS·û
(&
w¥aû
);

105 
ù¾
.
Å¬ts
 = *nparts;

106 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
mg¿ph
, &
w¥aû
);

108 
mg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

110 
Åes
%2 == 0 &&‚pes > 2)

111 
	`FldGlob®_P¬t™iÚ
(&
ù¾
, 
mg¿ph
, &
w¥aû
, 0);

113 
	`Glob®_P¬t™iÚ
(&
ù¾
, 
mg¿ph
, &
w¥aû
);

115 
ù¾
.
Å¬ts
 = 
Åes
;

118 
	`ProjeùInfoBack
(&
ù¾
, 
g¿ph
, 
·¹
, 
mg¿ph
->
wh”e
, &
w¥aû
);

120 *
edgecut
 = 
mg¿ph
->
mšcut
;

122 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

123 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

124 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

125 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

127 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final %d-way Cut: %6d \tBalance: %6.3f [%d %d %d][%d %d %d %d]\n",

128 *
Å¬ts
, 
mg¿ph
->
mšcut
, 1.0*(*Å¬ts)*mg¿ph->
gpwgts
[
	`idxamax
(*Å¬ts, mg¿ph->gpwgts)]/(1.0*
tvwgt
),

129 
mg¿ph
->
gpwgts
[
	`idxamax
(*
Å¬ts
, mg¿ph->gpwgts)], 
tvwgt
, mg¿ph->
gnvtxs
,

130 
	`Glob®SEMax
(&
ù¾
, 
mg¿ph
->
Äecv
), 
	`Glob®SESum
(&ctrl, mgraph->nrecv),

131 
	`Glob®SEMax
(&
ù¾
, 
mg¿ph
->
n£nd
), 
	`Glob®SESum
(&ctrl, mgraph->nsend)));

133 
	`F»eG¿ph
(
mg¿ph
);

134 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

135 
	`F»eWS·û
(&
w¥aû
);

136 
	`F»eCŒl
(&
ù¾
);

138 *
numæag
 == 1)

139 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

141 
	}
}

150 
	$P¬METIS_P¬tGeomRefše
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

151 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
ndims
,

152 *
xyz
, *
İtiÚs
, *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

154 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

155 
Åes
, 
my³
;

156 
CŒlTy³
 
ù¾
;

157 
WÜkS·ûTy³
 
w¥aû
;

158 
G¿phTy³
 *
g¿ph
, *
mg¿ph
;

160 
	`MPI_Comm_size
(*
comm
, &
Åes
);

161 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

163 
Åes
 == 1) {

164 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

165 *
edgecut
 = 0;

169 *
numæag
 == 1)

170 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

172 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

173 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes);

175 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

177 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

182 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

183 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

184 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

186 
	`CoÜdš©e_P¬t™iÚ
(&
ù¾
, 
g¿ph
, *
ndims
, 
xyz
, 1, &
w¥aû
);

188 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

189 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

190 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

195 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

196 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
MoveTmr
));

198 
mg¿ph
 = 
	`MoveG¿ph
(&
ù¾
, 
g¿ph
, &
w¥aû
);

200 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

201 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
MoveTmr
));

203 
ù¾
.
dbglvl
&
DBG_INFO
) {

204 
tvwgt
 = 
	`Glob®SESum
(&
ù¾
, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
));

205 
	`Compu‹P¬t™iÚP¬ams
(&
ù¾
, 
g¿ph
, &
w¥aû
);

206 
	`½rštf
(&
ù¾
, "XYZ Cut: %6d \tBalance: %6.3f [%d %d %d][%d %d %d %d]\n",

207 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

208 
g¿ph
->
gpwgts
[
	`idxamax
(
Åes
, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
,

209 
	`Glob®SEMax
(&
ù¾
, 
g¿ph
->
Äecv
), 
	`Glob®SESum
(&ctrl, graph->nrecv),

210 
	`Glob®SEMax
(&
ù¾
, 
g¿ph
->
n£nd
), 
	`Glob®SESum
(&ctrl, graph->nsend));

216 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

217 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

219 
	`F»eWS·û
(&
w¥aû
);

220 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
mg¿ph
, &
w¥aû
);

222 
mg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

224 
	`Refše_P¬t™iÚ
(&
ù¾
, 
mg¿ph
, &
w¥aû
);

227 
	`ProjeùInfoBack
(&
ù¾
, 
g¿ph
, 
·¹
, 
mg¿ph
->
wh”e
, &
w¥aû
);

229 *
edgecut
 = 
mg¿ph
->
mšcut
;

231 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

232 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

233 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

234 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

236 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f [%d %d %d][%d %d %d %d]\n",

237 
mg¿ph
->
mšcut
, 1.0*
Åes
*mg¿ph->
gpwgts
[
	`idxamax
Ò³s, mg¿ph->gpwgts)]/(1.0*
tvwgt
),

238 
mg¿ph
->
gpwgts
[
	`idxamax
(
Åes
, mg¿ph->gpwgts)], 
tvwgt
, mg¿ph->
gnvtxs
,

239 
	`Glob®SEMax
(&
ù¾
, 
mg¿ph
->
Äecv
), 
	`Glob®SESum
(&ctrl, mgraph->nrecv),

240 
	`Glob®SEMax
(&
ù¾
, 
mg¿ph
->
n£nd
), 
	`Glob®SESum
(&ctrl, mgraph->nsend)));

242 
	`F»eG¿ph
(
mg¿ph
);

243 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

244 
	`F»eWS·û
(&
w¥aû
);

245 
	`F»eCŒl
(&
ù¾
);

247 *
numæag
 == 1)

248 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

250 
	}
}

260 
	$P¬METIS_P¬tGeom
(
idxty³
 *
vtxdi¡
, *
ndims
, *
xyz
, idxty³ *
·¹
, 
MPI_Comm
 *
comm
)

262 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
, 
Åes
, 
my³
, 
nvtxs
, 
fœ¡vtx
, 
İtiÚs
[10];

263 
idxty³
 *
xadj
, *
adjncy
;

264 
CŒlTy³
 
ù¾
;

265 
WÜkS·ûTy³
 
w¥aû
;

266 
G¿phTy³
 *
g¿ph
;

268 
	`MPI_Comm_size
(*
comm
, &
Åes
);

269 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

271 
Åes
 == 1) {

272 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

277 
İtiÚs
[0] = 0;

279 
nvtxs
 = 
vtxdi¡
[
my³
+1]-vtxdist[mype];

280 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

281 
xadj
 = 
	`idxm®loc
(
nvtxs
+1, "ParMETIS_PartGeom: xadj");

282 
adjncy
 = 
	`idxm®loc
(
nvtxs
, "ParMETIS_PartGeom:‡djncy");

283 
i
=0; i<
nvtxs
; i++) {

284 
xadj
[
i
] = i;

285 
adjncy
[
i
] = 
fœ¡vtx
 + (i+1)%
nvtxs
;

287 
xadj
[
nvtxs
] =‚vtxs;

291 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

292 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes);

294 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
NULL
, 
adjncy
, NULL, 0);

296 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

301 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

302 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

303 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

305 
	`CoÜdš©e_P¬t™iÚ
(&
ù¾
, 
g¿ph
, *
ndims
, 
xyz
, 0, &
w¥aû
);

307 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

309 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

310 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

311 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

313 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, 0);

314 
	`F»eWS·û
(&
w¥aû
);

315 
	`F»eCŒl
(&
ù¾
);

317 
	`GKä“
(&
xadj
, &
adjncy
, 
LTERM
);

318 
	}
}

325 
	$PARGKMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

326 
ndims
, *
xyz
, 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

328 
Åes
, 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

330 
	`MPI_Comm_size
(
comm
, &
Åes
);

332 
ÃwİtiÚs
[0] = 1;

333 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

334 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

335 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

337 
numæag
 = 
İtiÚs
[3];

338 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

340 
	`P¬METIS_P¬tGeomKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
,

341 &
ndims
, 
xyz
, &
Åes
, 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

343 
İtiÚs
[0] = 
edgecut
;

345 
	}
}

352 
	$PARGRMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

353 
ndims
, *
xyz
, 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

355 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

357 
ÃwİtiÚs
[0] = 1;

358 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

359 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

360 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

362 
numæag
 = 
İtiÚs
[3];

363 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

365 
	`P¬METIS_P¬tGeomRefše
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
,

366 &
ndims
, 
xyz
, 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

368 
İtiÚs
[0] = 
edgecut
;

370 
	}
}

377 
	$PARGMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, 
ndims
, *
xyz
,

378 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

381 
	`P¬METIS_P¬tGeom
(
vtxdi¡
, &
ndims
, 
xyz
, 
·¹
, &
comm
);

383 
İtiÚs
[0] = -1;

385 
	}
}

	@grsetup.c

15 
	~<·rm‘is.h
>

22 
G¿phTy³
 *
	$S‘UpG¿ph
(
CŒlTy³
 *
ù¾
, 
idxty³
 *
vtxdi¡
, idxty³ *
xadj
,

23 
idxty³
 *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
, 
wgtæag
)

25 
tvwgt
;

26 
G¿phTy³
 *
g¿ph
;

28 
g¿ph
 = 
	`C»©eG¿ph
();

29 
g¿ph
->
Ëv–
 = 0;

30 
g¿ph
->
gnvtxs
 = 
vtxdi¡
[
ù¾
->
Åes
];

31 
g¿ph
->
nvtxs
 = 
vtxdi¡
[
ù¾
->
my³
+1]-vtxdist[ctrl->mype];

32 
g¿ph
->
Ãdges
 = 
xadj
[g¿ph->
nvtxs
];

33 
g¿ph
->
xadj
 = xadj;

34 
g¿ph
->
vwgt
 = vwgt;

35 
g¿ph
->
adjncy
 =‡djncy;

36 
g¿ph
->
adjwgt
 =‡djwgt;

37 
g¿ph
->
vtxdi¡
 = vtxdist;

39 (
wgtæag
&2) == 0)

40 
g¿ph
->
vwgt
 = 
	`idxsm®loc
(g¿ph->
nvtxs
, 1, "Par_KMetis: vwgt");

41 (
wgtæag
&1) == 0)

42 
g¿ph
->
adjwgt
 = 
	`idxsm®loc
(g¿ph->
Ãdges
, 1, "Par_KMetis: vwgt");

44 
tvwgt
 = 
	`Glob®SESum
(
ù¾
, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
));

45 
g¿ph
->
maxvwgt
 = 
MAXVWGT_FACTOR
*
tvwgt
/
ù¾
->
Cßr£nTo
;

47  
g¿ph
;

48 
	}
}

54 
	$S‘UpCŒl
(
CŒlTy³
 *
ù¾
, 
Å¬ts
, *
İtiÚs
, 
MPI_Comm
 
comm
)

56 
j
;

58 
	`MPI_Comm_dup
(
comm
, &(
ù¾
->
gcomm
));

59 
	`MPI_Comm_¿nk
(
ù¾
->
gcomm
, &ù¾->
my³
);

60 
	`MPI_Comm_size
(
ù¾
->
gcomm
, &ù¾->
Åes
);

62 
İtiÚs
[0] == 1) {

63 
ù¾
->
dbglvl
 = 
İtiÚs
[
OPTION_DBGLVL
];

64 
ù¾
->
fŞdf
 = 
İtiÚs
[
OPTION_FOLDF
];

65 
ù¾
->
¬t
 = 
İtiÚs
[
OPTION_IPART
];

68 
ù¾
->
dbglvl
 = 0;

69 
ù¾
->
fŞdf
 = 0;

70 
ù¾
->
¬t
 = 
IPART_RB
;

73 
ù¾
->
Å¬ts
 =‚parts;

74 
ù¾
->
comm
 = cŒl->
gcomm
;

75 
ù¾
->
xyzty³
 = 
XYZ_SPFILL
;

77 
	`¤ªd
(
ù¾
->
my³
);

78 
	`¤ªd48
(
ù¾
->
my³
);

79 
	}
}

85 
	$ChªgeNumb”šg
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
·¹
, 
Åes
, 
my³
, 
äom
)

87 
i
, 
nvtxs
, 
Ãdges
;

89 
äom
 == 1) {

90 
i
=0; i<
Åes
+1; i++)

91 
vtxdi¡
[
i
]--;

93 
nvtxs
 = 
vtxdi¡
[
my³
+1]-vtxdist[mype];

94 
i
=0; i<
nvtxs
+1; i++)

95 
xadj
[
i
]--;

97 
Ãdges
 = 
xadj
[
nvtxs
];

98 
i
=0; i<
Ãdges
; i++)

99 
adjncy
[
i
]--;

102 
nvtxs
 = 
vtxdi¡
[
my³
+1]-vtxdist[mype];

103 
Ãdges
 = 
xadj
[
nvtxs
];

105 
i
=0; i<
Åes
+1; i++)

106 
vtxdi¡
[
i
]++;

108 
i
=0; i<
nvtxs
+1; i++)

109 
xadj
[
i
]++;

111 
i
=0; i<
Ãdges
; i++)

112 
adjncy
[
i
]++;

114 
i
=0; i<
nvtxs
; i++)

115 
·¹
[
i
]++;

118 
	}
}

125 
	$G¿phRªdomP”mu‹
(
G¿phTy³
 *
g¿ph
)

127 
i
, 
j
, 
k
, 
tmp
;

129 
i
=0; i<
g¿ph
->
nvtxs
; i++) {

130 
j
=
g¿ph
->
xadj
[
i
]; j<graph->xadj[i+1]; j++) {

131 
k
 = 
g¿ph
->
xadj
[
i
] + 
	`RªdomInRªgeFa¡
(graph->xadj[i+1]-graph->xadj[i]);

132 
	`SWAP
(
g¿ph
->
adjncy
[
j
], g¿ph->adjncy[
k
], 
tmp
);

133 
	`SWAP
(
g¿ph
->
adjwgt
[
j
], g¿ph->adjwgt[
k
], 
tmp
);

136 
	}
}

143 
	$Compu‹MoveSti¡ics
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, *
nmoved
, *
maxš
, *
maxout
)

145 
i
, 
j
, 
k
, 
nvtxs
;

146 
idxty³
 *
vwgt
, *
wh”e
;

147 
idxty³
 *
Ívtxs
, *
gpvtxs
;

149 
nvtxs
 = 
g¿ph
->nvtxs;

150 
vwgt
 = 
g¿ph
->vwgt;

151 
wh”e
 = 
g¿ph
->where;

153 
Ívtxs
 = 
	`idxsm®loc
(
ù¾
->
Å¬ts
, 0, "ComputeMoveStatistics:†pvtxs");

154 
gpvtxs
 = 
	`idxsm®loc
(
ù¾
->
Å¬ts
, 0, "ComputeMoveStatistics: gpvtxs");

156 
j
=
i
=0; i<
nvtxs
; i++) {

157 
Ívtxs
[
wh”e
[
i
]]++;

158 
wh”e
[
i
] !ğ
ù¾
->
my³
)

159 
j
++;

164 
	`MPI_AÎ»duû
((*)
Ívtxs
, (*)
gpvtxs
, 
ù¾
->
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, cŒl->
comm
);

166 *
nmoved
 = 
	`Glob®SESum
(
ù¾
, 
j
);

167 *
maxout
 = 
	`Glob®SEMax
(
ù¾
, 
j
);

168 *
maxš
 = 
	`Glob®SEMax
(
ù¾
, 
gpvtxs
[ù¾->
my³
]-(
nvtxs
-
j
));

170 
	`GKä“
(&
Ívtxs
, &
gpvtxs
, 
LTERM
);

171 
	}
}

	@iidxsort.c

1 
	~<·rm‘is.h
>

5  
	#QSSWAP
(
a
, 
b
, 
¡mp
è { stm°ğ×); (aèğ(b); (bèğ¡mp; } 0)

	)
9  
	#MAX_THRESH
 20

	)
12 
	s
{

13 
idxty³
 *
	mlo
;

14 
idxty³
 *
	mhi
;

15 } 
	t¡ack_node
;

19  
	#STACK_SIZE
 (8 * ())

	)
20  
	#PUSH
(
low
, 
high
) ((è((
tİ
->
lo
 = (low)), (tİ->
hi
 = (high)), ++tİ))

	)
21  
	#POP
(
low
, 
high
) ((è(--
tİ
, (low =İ->
lo
), (high =İ->
hi
)))

	)
22  
	#STACK_NOT_EMPTY
 (
¡ack
 < 
tİ
)

	)
25 
	$iidxsÜt
(
tÙ®_–ems
, 
idxty³
 *
pba£
)

27 
idxty³
 
pivÙ
, 
¡mp
;

29 
tÙ®_–ems
 == 0)

33 
tÙ®_–ems
 > 
MAX_THRESH
) {

34 
idxty³
 *
lo
 = 
pba£
;

35 
idxty³
 *
hi
 = &
lo
[
tÙ®_–ems
 - 1];

36 
¡ack_node
 
¡ack
[
STACK_SIZE
];

37 
¡ack_node
 *
tİ
 = 
¡ack
 + 1;

39 
STACK_NOT_EMPTY
) {

40 
idxty³
 *
Ëá_±r
;

41 
idxty³
 *
right_±r
;

42 
idxty³
 *
mid
 = 
lo
 + ((
hi
 -†o) >> 1);

45 *
mid
 < *
lo
)

46 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

47 *
hi
 < *
mid
)

48 
	`QSSWAP
(*
mid
, *
hi
, 
¡mp
);

50 
jump_ov”
;

51 *
mid
 < *
lo
)

52 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

54 
jump_ov”
:;

55 
pivÙ
 = *
mid
;

56 
Ëá_±r
 = 
lo
 + 1;

57 
right_±r
 = 
hi
 - 1;

63 *
Ëá_±r
 < 
pivÙ
)

64 
Ëá_±r
++;

66 
pivÙ
 < *
right_±r
)

67 
right_±r
--;

69 
Ëá_±r
 < 
right_±r
) {

70 
	`QSSWAP
 (*
Ëá_±r
, *
right_±r
, 
¡mp
);

71 
Ëá_±r
++;

72 
right_±r
--;

74 
Ëá_±r
 =ğ
right_±r
) {

75 
Ëá_±r
++;

76 
right_±r
--;

79 } 
Ëá_±r
 <ğ
right_±r
);

86 (
size_t
è(
right_±r
 - 
lo
è<ğ
MAX_THRESH
) {

87 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

89 
	`POP
 (
lo
, 
hi
);

92 
lo
 = 
Ëá_±r
;

94 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

96 
hi
 = 
right_±r
;

97 (
right_±r
 - 
lo
è> (
hi
 - 
Ëá_±r
)) {

99 
	`PUSH
 (
lo
, 
right_±r
);

100 
lo
 = 
Ëá_±r
;

104 
	`PUSH
 (
Ëá_±r
, 
hi
);

105 
hi
 = 
right_±r
;

117 
idxty³
 *
’d_±r
 = &
pba£
[
tÙ®_–ems
 - 1];

118 
idxty³
 *
tmp_±r
 = 
pba£
;

119 
idxty³
 *
th»sh
 = (
’d_±r
 < 
pba£
 + 
MAX_THRESH
 ?ƒnd_ptr :…base + MAX_THRESH);

120 
idxty³
 *
run_±r
;

127 
run_±r
 = 
tmp_±r
 + 1;„un_±¸<ğ
th»sh
;„un_ptr++)

128 *
run_±r
 < *
tmp_±r
)

129 
tmp_±r
 = 
run_±r
;

131 
tmp_±r
 !ğ
pba£
)

132 
	`QSSWAP
(*
tmp_±r
, *
pba£
, 
¡mp
);

135 
run_±r
 = 
pba£
 + 1;

136 ++
run_±r
 <ğ
’d_±r
) {

137 
tmp_±r
 = 
run_±r
 - 1;

138 *
run_±r
 < *
tmp_±r
)

139 
tmp_±r
--;

141 
tmp_±r
++;

142 
tmp_±r
 !ğ
run_±r
) {

143 
idxty³
 
–mÁ
 = *
run_±r
;

144 
idxty³
 *
m±r
;

146 
m±r
=
run_±r
; m±r>
tmp_±r
; mptr--)

147 *
m±r
 = *(mptr-1);

148 *
m±r
 = 
–mÁ
;

152 
	}
}

	@iintsort.c

1 
	~<·rm‘is.h
>

5  
	#QSSWAP
(
a
, 
b
, 
¡mp
è { stm°ğ×); (aèğ(b); (bèğ¡mp; } 0)

	)
9  
	#MAX_THRESH
 20

	)
12 
	s
{

13 *
	mlo
;

14 *
	mhi
;

15 } 
	t¡ack_node
;

19  
	#STACK_SIZE
 (8 * ())

	)
20  
	#PUSH
(
low
, 
high
) ((è((
tİ
->
lo
 = (low)), (tİ->
hi
 = (high)), ++tİ))

	)
21  
	#POP
(
low
, 
high
) ((è(--
tİ
, (low =İ->
lo
), (high =İ->
hi
)))

	)
22  
	#STACK_NOT_EMPTY
 (
¡ack
 < 
tİ
)

	)
25 
	$ištsÜt
(
tÙ®_–ems
, *
pba£
)

27 
pivÙ
, 
¡mp
;

29 
tÙ®_–ems
 == 0)

33 
tÙ®_–ems
 > 
MAX_THRESH
) {

34 *
lo
 = 
pba£
;

35 *
hi
 = &
lo
[
tÙ®_–ems
 - 1];

36 
¡ack_node
 
¡ack
[
STACK_SIZE
];

37 
¡ack_node
 *
tİ
 = 
¡ack
 + 1;

39 
STACK_NOT_EMPTY
) {

40 *
Ëá_±r
;

41 *
right_±r
;

48 *
mid
 = 
lo
 + ((
hi
 -†o) >> 1);

50 *
mid
 < *
lo
)

51 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

52 *
hi
 < *
mid
)

53 
	`QSSWAP
(*
mid
, *
hi
, 
¡mp
);

55 
jump_ov”
;

56 *
mid
 < *
lo
)

57 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

59 
jump_ov”
:;

60 
pivÙ
 = *
mid
;

61 
Ëá_±r
 = 
lo
 + 1;

62 
right_±r
 = 
hi
 - 1;

68 *
Ëá_±r
 < 
pivÙ
)

69 
Ëá_±r
++;

71 
pivÙ
 < *
right_±r
)

72 
right_±r
--;

74 
Ëá_±r
 < 
right_±r
) {

75 
	`QSSWAP
 (*
Ëá_±r
, *
right_±r
, 
¡mp
);

76 
Ëá_±r
++;

77 
right_±r
--;

79 
Ëá_±r
 =ğ
right_±r
) {

80 
Ëá_±r
++;

81 
right_±r
--;

84 } 
Ëá_±r
 <ğ
right_±r
);

91 (
size_t
è(
right_±r
 - 
lo
è<ğ
MAX_THRESH
) {

92 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

94 
	`POP
 (
lo
, 
hi
);

97 
lo
 = 
Ëá_±r
;

99 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

101 
hi
 = 
right_±r
;

102 (
right_±r
 - 
lo
è> (
hi
 - 
Ëá_±r
)) {

104 
	`PUSH
 (
lo
, 
right_±r
);

105 
lo
 = 
Ëá_±r
;

109 
	`PUSH
 (
Ëá_±r
, 
hi
);

110 
hi
 = 
right_±r
;

122 *
’d_±r
 = &
pba£
[
tÙ®_–ems
 - 1];

123 *
tmp_±r
 = 
pba£
;

124 *
th»sh
 = (
’d_±r
 < 
pba£
 + 
MAX_THRESH
 ?ƒnd_ptr :…base + MAX_THRESH);

125 *
run_±r
;

132 
run_±r
 = 
tmp_±r
 + 1;„un_±¸<ğ
th»sh
;„un_ptr++)

133 *
run_±r
 < *
tmp_±r
)

134 
tmp_±r
 = 
run_±r
;

136 
tmp_±r
 !ğ
pba£
)

137 
	`QSSWAP
(*
tmp_±r
, *
pba£
, 
¡mp
);

140 
run_±r
 = 
pba£
 + 1;

141 ++
run_±r
 <ğ
’d_±r
) {

142 
tmp_±r
 = 
run_±r
 - 1;

143 *
run_±r
 < *
tmp_±r
)

144 
tmp_±r
--;

146 
tmp_±r
++;

147 
tmp_±r
 !ğ
run_±r
) {

148 
–mÁ
 = *
run_±r
;

149 *
m±r
;

151 
m±r
=
run_±r
; m±r>
tmp_±r
; mptr--)

152 *
m±r
 = *(mptr-1);

153 *
m±r
 = 
–mÁ
;

157 
	}
}

	@ikeysort.c

1 
	~<·rm‘is.h
>

5  
	#QSSWAP
(
a
, 
b
, 
¡mp
è { stm°ğ×); (aèğ(b); (bèğ¡mp; } 0)

	)
9  
	#MAX_THRESH
 20

	)
12 
	s
{

13 
KeyV®ueTy³
 *
	mlo
;

14 
KeyV®ueTy³
 *
	mhi
;

15 } 
	t¡ack_node
;

19  
	#STACK_SIZE
 (8 * ())

	)
20  
	#PUSH
(
low
, 
high
) ((è((
tİ
->
lo
 = (low)), (tİ->
hi
 = (high)), ++tİ))

	)
21  
	#POP
(
low
, 
high
) ((è(--
tİ
, (low =İ->
lo
), (high =İ->
hi
)))

	)
22  
	#STACK_NOT_EMPTY
 (
¡ack
 < 
tİ
)

	)
25 
	$ikeysÜt
(
tÙ®_–ems
, 
KeyV®ueTy³
 *
pba£
)

27 
KeyV®ueTy³
 
pivÙ
, 
¡mp
;

29 
tÙ®_–ems
 == 0)

33 
tÙ®_–ems
 > 
MAX_THRESH
) {

34 
KeyV®ueTy³
 *
lo
 = 
pba£
;

35 
KeyV®ueTy³
 *
hi
 = &
lo
[
tÙ®_–ems
 - 1];

36 
¡ack_node
 
¡ack
[
STACK_SIZE
];

37 
¡ack_node
 *
tİ
 = 
¡ack
 + 1;

39 
STACK_NOT_EMPTY
) {

40 
KeyV®ueTy³
 *
Ëá_±r
;

41 
KeyV®ueTy³
 *
right_±r
;

42 
KeyV®ueTy³
 *
mid
 = 
lo
 + ((
hi
 -†o) >> 1);

44 
mid
->
key
 < 
lo
->key)

45 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

46 
hi
->
key
 < 
mid
->key)

47 
	`QSSWAP
(*
mid
, *
hi
, 
¡mp
);

49 
jump_ov”
;

50 
mid
->
key
 < 
lo
->key)

51 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

53 
jump_ov”
:;

54 
pivÙ
 = *
mid
;

55 
Ëá_±r
 = 
lo
 + 1;

56 
right_±r
 = 
hi
 - 1;

62 
Ëá_±r
->
key
 < 
pivÙ
.key)

63 
Ëá_±r
++;

65 
pivÙ
.
key
 < 
right_±r
->key)

66 
right_±r
--;

68 
Ëá_±r
 < 
right_±r
) {

69 
	`QSSWAP
 (*
Ëá_±r
, *
right_±r
, 
¡mp
);

70 
Ëá_±r
++;

71 
right_±r
--;

73 
Ëá_±r
 =ğ
right_±r
) {

74 
Ëá_±r
++;

75 
right_±r
--;

78 } 
Ëá_±r
 <ğ
right_±r
);

85 (
size_t
è(
right_±r
 - 
lo
è<ğ
MAX_THRESH
) {

86 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

88 
	`POP
 (
lo
, 
hi
);

91 
lo
 = 
Ëá_±r
;

93 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

95 
hi
 = 
right_±r
;

96 (
right_±r
 - 
lo
è> (
hi
 - 
Ëá_±r
)) {

98 
	`PUSH
 (
lo
, 
right_±r
);

99 
lo
 = 
Ëá_±r
;

103 
	`PUSH
 (
Ëá_±r
, 
hi
);

104 
hi
 = 
right_±r
;

116 
KeyV®ueTy³
 *
’d_±r
 = &
pba£
[
tÙ®_–ems
 - 1];

117 
KeyV®ueTy³
 *
tmp_±r
 = 
pba£
;

118 
KeyV®ueTy³
 *
th»sh
 = (
’d_±r
 < 
pba£
 + 
MAX_THRESH
 ?ƒnd_ptr :…base + MAX_THRESH);

119 
KeyV®ueTy³
 *
run_±r
;

125 
run_±r
 = 
tmp_±r
 + 1;„un_±¸<ğ
th»sh
;„un_ptr++)

126 
run_±r
->
key
 < 
tmp_±r
->key)

127 
tmp_±r
 = 
run_±r
;

129 
tmp_±r
 !ğ
pba£
)

130 
	`QSSWAP
(*
tmp_±r
, *
pba£
, 
¡mp
);

133 
run_±r
 = 
pba£
 + 1;

134 ++
run_±r
 <ğ
’d_±r
) {

135 
tmp_±r
 = 
run_±r
 - 1;

136 
run_±r
->
key
 < 
tmp_±r
->key)

137 
tmp_±r
--;

139 
tmp_±r
++;

140 
tmp_±r
 !ğ
run_±r
) {

141 
KeyV®ueTy³
 
–mÁ
 = *
run_±r
;

142 
KeyV®ueTy³
 *
m±r
;

144 
m±r
=
run_±r
; m±r>
tmp_±r
; mptr--)

145 *
m±r
 = *(mptr-1);

146 *
m±r
 = 
–mÁ
;

150 
	}
}

	@ikeyvalsort.c

1 
	~<·rm‘is.h
>

5  
	#QSSWAP
(
a
, 
b
, 
¡mp
è { stm°ğ×); (aèğ(b); (bèğ¡mp; } 0)

	)
9  
	#MAX_THRESH
 20

	)
12 
	s
{

13 
KeyV®ueTy³
 *
	mlo
;

14 
KeyV®ueTy³
 *
	mhi
;

15 } 
	t¡ack_node
;

19  
	#STACK_SIZE
 (8 * ())

	)
20  
	#PUSH
(
low
, 
high
) ((è((
tİ
->
lo
 = (low)), (tİ->
hi
 = (high)), ++tİ))

	)
21  
	#POP
(
low
, 
high
) ((è(--
tİ
, (low =İ->
lo
), (high =İ->
hi
)))

	)
22  
	#STACK_NOT_EMPTY
 (
¡ack
 < 
tİ
)

	)
25 
	$ikeyv®sÜt
(
tÙ®_–ems
, 
KeyV®ueTy³
 *
pba£
)

27 
KeyV®ueTy³
 
pivÙ
, 
¡mp
;

29 
tÙ®_–ems
 == 0)

33 
tÙ®_–ems
 > 
MAX_THRESH
) {

34 
KeyV®ueTy³
 *
lo
 = 
pba£
;

35 
KeyV®ueTy³
 *
hi
 = &
lo
[
tÙ®_–ems
 - 1];

36 
¡ack_node
 
¡ack
[
STACK_SIZE
];

37 
¡ack_node
 *
tİ
 = 
¡ack
 + 1;

39 
STACK_NOT_EMPTY
) {

40 
KeyV®ueTy³
 *
Ëá_±r
;

41 
KeyV®ueTy³
 *
right_±r
;

42 
KeyV®ueTy³
 *
mid
 = 
lo
 + ((
hi
 -†o) >> 1);

44 
mid
->
key
 < 
lo
->key || (mid->key =ğlo->key && mid->
v®
 <†o->val))

45 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

46 
hi
->
key
 < 
mid
->key || (hi->key =ğmid->key && hi->
v®
 < mid->val))

47 
	`QSSWAP
(*
mid
, *
hi
, 
¡mp
);

49 
jump_ov”
;

50 
mid
->
key
 < 
lo
->key || (mid->key =ğlo->key && mid->
v®
 <†o->val))

51 
	`QSSWAP
(*
mid
, *
lo
, 
¡mp
);

53 
jump_ov”
:;

54 
pivÙ
 = *
mid
;

55 
Ëá_±r
 = 
lo
 + 1;

56 
right_±r
 = 
hi
 - 1;

62 
Ëá_±r
->
key
 < 
pivÙ
.key || (Ëá_±r->key =ğpivÙ.key &&†eá_±r->
v®
 <…ivot.val))

63 
Ëá_±r
++;

65 
pivÙ
.
key
 < 
right_±r
->key || (pivÙ.key =ğright_±r->key &&…ivÙ.
v®
 <„ight_ptr->val))

66 
right_±r
--;

68 
Ëá_±r
 < 
right_±r
) {

69 
	`QSSWAP
 (*
Ëá_±r
, *
right_±r
, 
¡mp
);

70 
Ëá_±r
++;

71 
right_±r
--;

73 
Ëá_±r
 =ğ
right_±r
) {

74 
Ëá_±r
++;

75 
right_±r
--;

78 } 
Ëá_±r
 <ğ
right_±r
);

85 (
size_t
è(
right_±r
 - 
lo
è<ğ
MAX_THRESH
) {

86 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

88 
	`POP
 (
lo
, 
hi
);

91 
lo
 = 
Ëá_±r
;

93 (
size_t
è(
hi
 - 
Ëá_±r
è<ğ
MAX_THRESH
)

95 
hi
 = 
right_±r
;

96 (
right_±r
 - 
lo
è> (
hi
 - 
Ëá_±r
)) {

98 
	`PUSH
 (
lo
, 
right_±r
);

99 
lo
 = 
Ëá_±r
;

103 
	`PUSH
 (
Ëá_±r
, 
hi
);

104 
hi
 = 
right_±r
;

116 
KeyV®ueTy³
 *
’d_±r
 = &
pba£
[
tÙ®_–ems
 - 1];

117 
KeyV®ueTy³
 *
tmp_±r
 = 
pba£
;

118 
KeyV®ueTy³
 *
th»sh
 = (
’d_±r
 < 
pba£
 + 
MAX_THRESH
 ?ƒnd_ptr :…base + MAX_THRESH);

119 
KeyV®ueTy³
 *
run_±r
;

125 
run_±r
 = 
tmp_±r
 + 1;„un_±¸<ğ
th»sh
;„un_ptr++)

126 
run_±r
->
key
 < 
tmp_±r
->key || (run_±r->key =ğtmp_±r->key &&„un_±r->
v®
 <mp_ptr->val))

127 
tmp_±r
 = 
run_±r
;

129 
tmp_±r
 !ğ
pba£
)

130 
	`QSSWAP
(*
tmp_±r
, *
pba£
, 
¡mp
);

133 
run_±r
 = 
pba£
 + 1;

134 ++
run_±r
 <ğ
’d_±r
) {

135 
tmp_±r
 = 
run_±r
 - 1;

136 
run_±r
->
key
 < 
tmp_±r
->key || (run_±r->key =ğtmp_±r->key &&„un_±r->
v®
 <mp_ptr->val))

137 
tmp_±r
--;

139 
tmp_±r
++;

140 
tmp_±r
 !ğ
run_±r
) {

141 
KeyV®ueTy³
 
–mÁ
 = *
run_±r
;

142 
KeyV®ueTy³
 *
m±r
;

144 
m±r
=
run_±r
; m±r>
tmp_±r
; mptr--)

145 *
m±r
 = *(mptr-1);

146 *
m±r
 = 
–mÁ
;

150 
	}
}

	@initdiff.c

15 
	~<·rm‘is.h
>

23 
	$In™DiffusiÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

25 
i
, 
j
, 
Íecut
[2], 
g³cut
[2];

26 
idxty³
 *
vtxdi¡
;

27 
G¿phTy³
 *
ag¿ph
;

28 *
£ndcouÁs
, *
di¥ls
;

29 
¿tšg
;

31 
	`ASSERT
(
ù¾
, cŒl->
Åes
 =ğù¾->
Å¬ts
);

33 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

35 
ag¿ph
 = 
	`As£mbËAd­tiveG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
);

38 
	`MPI_B¬r›r
(
ù¾
->
comm
);

40 
vtxdi¡
 = 
g¿ph
->vtxdist;

42 
ag¿ph
->
wh”e
 = 
	`idxm®loc
×g¿ph->
nvtxs
, "InitDiffusion:‡graph->where");

43 
i
=0; i<
ù¾
->
Åes
; i++) {

44 
j
=
vtxdi¡
[
i
]; j<vtxdist[i+1]; j++)

45 
ag¿ph
->
wh”e
[
j
] = 
i
;

48 
ù¾
->
my³
) {

50 
¿tšg
 = 
	`SÜ‹dKWay_WD
(
ù¾
, 
ag¿ph
, cŒl->
Å¬ts
);

54 
¿tšg
 = 
	`KWay_WaveäÚtDiffu£r
(
ù¾
, 
ag¿ph
, cŒl->
Å¬ts
, .65);

57 
¿tšg
 = 
	`KWay_WaveäÚtDiffu£r
(
ù¾
, 
ag¿ph
, cŒl->
Å¬ts
, .75);

60 
¿tšg
 = 
	`KWay_WaveäÚtDiffu£r
(
ù¾
, 
ag¿ph
, cŒl->
Å¬ts
, .50);

63 
¿tšg
 = 
	`KWay_WaveäÚtDiffu£r
(
ù¾
, 
ag¿ph
, cŒl->
Å¬ts
, .25);

68 
Íecut
[0] = 
¿tšg
;

69 
	`MPI_Comm_¿nk
(
ù¾
->
comm
, 
Íecut
+1);

70 
	`MPI_AÎ»duû
(
Íecut
, 
g³cut
, 1, 
MPI_2INT
, 
MPI_MINLOC
, 
ù¾
->
gcomm
);

74 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "InitPartition: where");

75 
£ndcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: sendcounts");

76 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: displs");

78 
i
=0; i<
ù¾
->
Åes
; i++) {

79 
£ndcouÁs
[
i
] = 
vtxdi¡
[i+1]-vtxdist[i];

80 
di¥ls
[
i
] = 
vtxdi¡
[i];

83 
	`MPI_Sÿ‰”v
((*)
ag¿ph
->
wh”e
, 
£ndcouÁs
, 
di¥ls
, 
IDX_DATATYPE
,

84 (*)
g¿ph
->
wh”e
, g¿ph->
nvtxs
, 
IDX_DATATYPE
, 
g³cut
[1], 
ù¾
->
comm
);

86 
	`GKä“
(&
£ndcouÁs
, &
di¥ls
, 
LTERM
);

88 
	`F»eG¿ph
(
ag¿ph
);

90 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

92 
	}
}

99 
G¿phTy³
 *
	$As£mbËAd­tiveG¿ph
(
CŒlTy³
 *
ù¾
, G¿phTy³ *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

101 
i
, 
j
, 
k
, 
l
, 
gnvtxs
, 
nvtxs
, 
gÃdges
, 
Ãdges
, 
fœ¡vtx
, 
gsize
;

102 
idxty³
 *
xadj
, *
vwgt
, *
vsize
, *
adjncy
, *
adjwgt
, *
vtxdi¡
, *
edgedi¡
, *
im­
;

103 
idxty³
 *
axadj
, *
¯djncy
, *
¯djwgt
, *
avwgt
, *
avsize
, *
®ab–
;

104 
idxty³
 *
myg¿ph
, *
gg¿ph
;

105 *
»cvcouÁs
, *
di¥ls
, 
mysize
;

106 
G¿phTy³
 *
ag¿ph
;

108 
gnvtxs
 = 
g¿ph
->gnvtxs;

109 
nvtxs
 = 
g¿ph
->nvtxs;

110 
Ãdges
 = 
g¿ph
->
xadj
[
nvtxs
];

111 
xadj
 = 
g¿ph
->xadj;

112 
vwgt
 = 
g¿ph
->vwgt;

113 
vsize
 = 
g¿ph
->vsize;

114 
adjncy
 = 
g¿ph
->adjncy;

115 
adjwgt
 = 
g¿ph
->adjwgt;

116 
vtxdi¡
 = 
g¿ph
->vtxdist;

117 
im­
 = 
g¿ph
->imap;

120 
»cvcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "AssembleGraph:„ecvcounts");

121 
mysize
 = 3*
nvtxs
 + 2*
Ãdges
;

122 
	`MPI_AÎg©h”
((*)(&
mysize
), 1, 
MPI_INT
, (*)
»cvcouÁs
, 1, MPI_INT, 
ù¾
->
comm
);

124 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
+1, "AssembleGraph: displs");

125 
di¥ls
[0] = 0;

126 
i
=1; i<
ù¾
->
Åes
+1; i++)

127 
di¥ls
[
i
] = di¥ls[i-1] + 
»cvcouÁs
[i-1];

130 
myg¿ph
 = (
mysize
 <ğ
w¥aû
->
maxcÜe
 ? w¥aû->
cÜe
 : 
	`idxm®loc
(mysize, "AssembleGraph: mygraph"));

131 
k
=
i
=0; i<
nvtxs
; i++) {

132 
myg¿ph
[
k
++] = 
xadj
[
i
+1]-xadj[i];

133 
myg¿ph
[
k
++] = 
vwgt
[
i
];

134 
myg¿ph
[
k
++] = 
vsize
[
i
];

135 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

136 
myg¿ph
[
k
++] = 
im­
[
adjncy
[
j
]];

137 
myg¿ph
[
k
++] = 
adjwgt
[
j
];

140 
	`ASSERT
(
ù¾
, 
mysize
 =ğ
k
);

143 
gsize
 = 
di¥ls
[
ù¾
->
Åes
];

144 
gg¿ph
 = (
gsize
 <ğ
w¥aû
->
maxcÜe
-
mysize
 ? w¥aû->
cÜe
+mysiz: 
	`idxm®loc
(gsize, "AssembleGraph: ggraph"));

145 
	`MPI_AÎg©h”v
((*)
myg¿ph
, 
mysize
, 
IDX_DATATYPE
, (*)
gg¿ph
, 
»cvcouÁs
, 
di¥ls
, IDX_DATATYPE, 
ù¾
->
comm
);

149 
	`GKä“
(&
»cvcouÁs
, &
di¥ls
, 
LTERM
);

150 
mysize
 > 
w¥aû
->
maxcÜe
)

151 
	`ä“
(
myg¿ph
);

153 
ag¿ph
 = 
	`C»©eG¿ph
();

154 
ag¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

155 
ag¿ph
->
nvtxs
 = 
gnvtxs
;

156 
ag¿ph
->
Ãdges
 = 
gÃdges
 = (
gsize
-3*
gnvtxs
)/2;

159 
axadj
 = 
ag¿ph
->
xadj
 = 
	`idxm®loc
(
gnvtxs
+1, "AssembleGraph:‡xadj");

160 
avwgt
 = 
ag¿ph
->
vwgt
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡vwgt");

161 
avsize
 = 
ag¿ph
->
vsize
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡vsize");

162 
¯djncy
 = 
ag¿ph
->
adjncy
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djncy");

163 
¯djwgt
 = 
ag¿ph
->
adjwgt
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djwgt");

164 
®ab–
 = 
ag¿ph
->
Ïb–
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡label");

166 
k
=
j
=
i
=0; i<
gnvtxs
; i++) {

167 
axadj
[
i
] = 
gg¿ph
[
k
++];

168 
avwgt
[
i
] = 
gg¿ph
[
k
++];

169 
avsize
[
i
] = 
gg¿ph
[
k
++];

170 
l
=0;†<
axadj
[
i
];†++) {

171 
¯djncy
[
j
] = 
gg¿ph
[
k
++];

172 
¯djwgt
[
j
] = 
gg¿ph
[
k
++];

173 
j
++;

178 
	`MAKECSR
(
i
, 
gnvtxs
, 
axadj
);

180 
i
=0; i<
gnvtxs
; i++)

181 
®ab–
[
i
] = i;

183 
gsize
 > 
w¥aû
->
maxcÜe
-
mysize
)

184 
	`ä“
(
gg¿ph
);

191  
ag¿ph
;

192 
	}
}

	@initmsection.c

14 
	~<·rm‘is.h
>

17  
	#DEBUG_IPART_


	)
26 
	$In™MuÉi£ùiÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

28 
i
, 
j
, 
Íecut
[2], 
g³cut
[2], 
my·¹
, 
mİtiÚs
[10];

29 
idxty³
 *
vtxdi¡
, *
gwh”e
, *
·¹
, *
Ïb–
;

30 
G¿phTy³
 *
ag¿ph
;

31 *
£ndcouÁs
, *
di¥ls
;

32 
MPI_Comm
 
Ãwcomm
, 
Ïb–comm
;

34 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

37 
ag¿ph
 = 
	`As£mbËMuÉi£ùedG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
);

38 
·¹
 = 
ag¿ph
->
wh”e
;

39 
ag¿ph
->
wh”e
 = 
NULL
;

42 
my·¹
 = 
ù¾
->
my³
%(ù¾->
Å¬ts
/2);

43 
	`MPI_Comm_¥l™
(
ù¾
->
comm
, 
my·¹
, 0, &
Ãwcomm
);

46 
	`K“pP¬t
(
ù¾
, 
ag¿ph
, 
w¥aû
, 
·¹
, 
my·¹
);

47 
Ïb–
 = 
ag¿ph
->label;

48 
ag¿ph
->
Ïb–
 = 
NULL
;

51 
ù¾
->
¬t
) {

52 
ISEP_EDGE
:

53 
mİtiÚs
[0] = 1;

54 
mİtiÚs
[1] = 3;

55 
mİtiÚs
[2] = 1;

56 
mİtiÚs
[3] = 1;

57 
mİtiÚs
[4] = 0;

58 
mİtiÚs
[7] = 
ù¾
->
my³
;

60 
ag¿ph
->
wh”e
 = 
	`idxm®loc
×g¿ph->
nvtxs
, "InitMultisection:‡graph->where");

62 
	`METIS_EdgeCompu‹S•¬©Ü
(&
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
,‡g¿ph->
vwgt
,

63 
ag¿ph
->
adjwgt
, 
mİtiÚs
, &ag¿ph->
mšcut
,‡g¿ph->
wh”e
);

65 
ISEP_NODE
:

66 
mİtiÚs
[0] = 1;

67 
mİtiÚs
[1] = 3;

68 
mİtiÚs
[2] = 1;

69 
mİtiÚs
[3] = 2;

70 
mİtiÚs
[4] = 0;

71 
mİtiÚs
[7] = 
ù¾
->
my³
;

73 
ag¿ph
->
wh”e
 = 
	`idxm®loc
×g¿ph->
nvtxs
, "InitMultisection:‡graph->where");

75 
	`METIS_NodeCompu‹S•¬©Ü
(&
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
,‡g¿ph->
vwgt
,

76 
ag¿ph
->
adjwgt
, 
mİtiÚs
, &ag¿ph->
mšcut
,‡g¿ph->
wh”e
);

79 
	`”»x™
("Unknown ISEPype!\n");

82 
i
=0; i<
ag¿ph
->
nvtxs
; i++) {

83 
	`ASSERT
(
ù¾
, 
ag¿ph
->
wh”e
[
i
]>=0 &&‡graph->where[i]<=2);

84 
ag¿ph
->
wh”e
[
i
] == 2)

85 
ag¿ph
->
wh”e
[
i
] = 
ù¾
->
Å¬ts
+2*
my·¹
;

87 
ag¿ph
->
wh”e
[
i
] +ğ2*
my·¹
;

91 
Íecut
[0] = 
ag¿ph
->
mšcut
;

92 
	`MPI_Comm_¿nk
(
Ãwcomm
, 
Íecut
+1);

93 
	`MPI_AÎ»duû
(
Íecut
, 
g³cut
, 1, 
MPI_2INT
, 
MPI_MINLOC
, 
Ãwcomm
);

98 
Íecut
[1] =ğ
g³cut
[1] && gpecut[1] != 0)

99 
	`MPI_S’d
((*)
ag¿ph
->
wh”e
,‡g¿ph->
nvtxs
, 
IDX_DATATYPE
, 0, 1, 
Ãwcomm
);

100 
Íecut
[1] =ğ0 && 
g³cut
[1] != 0)

101 
	`MPI_Recv
((*)
ag¿ph
->
wh”e
,‡g¿ph->
nvtxs
, 
IDX_DATATYPE
, 
g³cut
[1], 1, 
Ãwcomm
, &
ù¾
->
¡©us
);

104 
	`MPI_Comm_¥l™
(
ù¾
->
comm
, 
Íecut
[1], 0, &
Ïb–comm
);

107 
Íecut
[1] == 0) {

108 
gwh”e
 = 
	`idxsm®loc
(
g¿ph
->
gnvtxs
, 0, "InitMultisection: gwhere");

109 
i
=0; i<
ag¿ph
->
nvtxs
; i++)

110 
gwh”e
[
Ïb–
[
i
]] = 
ag¿ph
->
wh”e
[i];

113 
	`ä“
(
ag¿ph
->
wh”e
);

114 
ag¿ph
->
wh”e
 = 
·¹
;

116 
Íecut
[1] == 0) {

117 
	`MPI_Reduû
((*)
gwh”e
, (*)
ag¿ph
->
wh”e
, 
g¿ph
->
gnvtxs
, 
IDX_DATATYPE
, 
MPI_SUM
, 0, 
Ïb–comm
);

118 
	`ä“
(
gwh”e
);

122 
vtxdi¡
 = 
g¿ph
->vtxdist;

123 
	`ASSERT
(
ù¾
, 
g¿ph
->
wh”e
 !ğ
NULL
);

124 
	`ä“
(
g¿ph
->
wh”e
);

125 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "InitPartition: where");

127 
£ndcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: sendcounts");

128 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: displs");

130 
i
=0; i<
ù¾
->
Åes
; i++) {

131 
£ndcouÁs
[
i
] = 
vtxdi¡
[i+1]-vtxdist[i];

132 
di¥ls
[
i
] = 
vtxdi¡
[i];

135 
	`MPI_Sÿ‰”v
((*)
ag¿ph
->
wh”e
, 
£ndcouÁs
, 
di¥ls
, 
IDX_DATATYPE
,

136 (*)
g¿ph
->
wh”e
, g¿ph->
nvtxs
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

138 
	`GKä“
(&
£ndcouÁs
, &
di¥ls
, &
Ïb–
, 
LTERM
);

140 
	`F»eG¿ph
(
ag¿ph
);

142 
	`MPI_Comm_ä“
(&
Ãwcomm
);

143 
	`MPI_Comm_ä“
(&
Ïb–comm
);

145 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

147 
	}
}

155 
G¿phTy³
 *
	$As£mbËMuÉi£ùedG¿ph
(
CŒlTy³
 *
ù¾
, G¿phTy³ *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

157 
i
, 
j
, 
k
, 
l
, 
gnvtxs
, 
nvtxs
, 
gÃdges
, 
Ãdges
, 
fœ¡vtx
, 
gsize
;

158 
idxty³
 *
xadj
, *
vwgt
, *
wh”e
, *
adjncy
, *
adjwgt
, *
vtxdi¡
, *
edgedi¡
, *
im­
;

159 
idxty³
 *
axadj
, *
¯djncy
, *
¯djwgt
, *
avwgt
, *
awh”e
, *
®ab–
;

160 
idxty³
 *
myg¿ph
, *
gg¿ph
;

161 *
»cvcouÁs
, *
di¥ls
, 
mysize
;

162 
G¿phTy³
 *
ag¿ph
;

164 
gnvtxs
 = 
g¿ph
->gnvtxs;

165 
nvtxs
 = 
g¿ph
->nvtxs;

166 
Ãdges
 = 
g¿ph
->
xadj
[
nvtxs
];

167 
xadj
 = 
g¿ph
->xadj;

168 
vwgt
 = 
g¿ph
->vwgt;

169 
wh”e
 = 
g¿ph
->where;

170 
adjncy
 = 
g¿ph
->adjncy;

171 
adjwgt
 = 
g¿ph
->adjwgt;

172 
vtxdi¡
 = 
g¿ph
->vtxdist;

173 
im­
 = 
g¿ph
->imap;

176 
»cvcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "AssembleGraph:„ecvcounts");

177 
mysize
 = 3*
nvtxs
 + 2*
Ãdges
;

178 
	`MPI_AÎg©h”
((*)(&
mysize
), 1, 
MPI_INT
, (*)
»cvcouÁs
, 1, MPI_INT, 
ù¾
->
comm
);

180 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
+1, "AssembleGraph: displs");

181 
di¥ls
[0] = 0;

182 
i
=1; i<
ù¾
->
Åes
+1; i++)

183 
di¥ls
[
i
] = di¥ls[i-1] + 
»cvcouÁs
[i-1];

186 
myg¿ph
 = (
mysize
 <ğ
w¥aû
->
maxcÜe
 ? w¥aû->
cÜe
 : 
	`idxm®loc
(mysize, "AssembleGraph: mygraph"));

187 
k
=
i
=0; i<
nvtxs
; i++) {

188 
myg¿ph
[
k
++] = 
xadj
[
i
+1]-xadj[i];

189 
myg¿ph
[
k
++] = 
vwgt
[
i
];

190 
myg¿ph
[
k
++] = 
wh”e
[
i
];

191 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

192 
myg¿ph
[
k
++] = 
im­
[
adjncy
[
j
]];

193 
myg¿ph
[
k
++] = 
adjwgt
[
j
];

196 
	`ASSERT
(
ù¾
, 
mysize
 =ğ
k
);

199 
gsize
 = 
di¥ls
[
ù¾
->
Åes
];

200 
gg¿ph
 = (
gsize
 <ğ
w¥aû
->
maxcÜe
-
mysize
 ? w¥aû->
cÜe
+mysiz: 
	`idxm®loc
(gsize, "AssembleGraph: ggraph"));

201 
	`MPI_AÎg©h”v
((*)
myg¿ph
, 
mysize
, 
IDX_DATATYPE
, (*)
gg¿ph
, 
»cvcouÁs
, 
di¥ls
, IDX_DATATYPE, 
ù¾
->
comm
);

203 
	`GKä“
(&
»cvcouÁs
, &
di¥ls
, 
LTERM
);

204 
mysize
 > 
w¥aû
->
maxcÜe
)

205 
	`ä“
(
myg¿ph
);

207 
ag¿ph
 = 
	`C»©eG¿ph
();

208 
ag¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

209 
ag¿ph
->
nvtxs
 = 
gnvtxs
;

210 
ag¿ph
->
Ãdges
 = 
gÃdges
 = (
gsize
-3*
gnvtxs
)/2;

213 
axadj
 = 
ag¿ph
->
xadj
 = 
	`idxm®loc
(
gnvtxs
+1, "AssembleGraph:‡xadj");

214 
avwgt
 = 
ag¿ph
->
vwgt
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡vwgt");

215 
awh”e
 = 
ag¿ph
->
wh”e
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡where");

216 
¯djncy
 = 
ag¿ph
->
adjncy
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djncy");

217 
¯djwgt
 = 
ag¿ph
->
adjwgt
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djwgt");

218 
®ab–
 = 
ag¿ph
->
Ïb–
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡label");

220 
k
=
j
=
i
=0; i<
gnvtxs
; i++) {

221 
axadj
[
i
] = 
gg¿ph
[
k
++];

222 
avwgt
[
i
] = 
gg¿ph
[
k
++];

223 
awh”e
[
i
] = 
gg¿ph
[
k
++];

224 
l
=0;†<
axadj
[
i
];†++) {

225 
¯djncy
[
j
] = 
gg¿ph
[
k
++];

226 
¯djwgt
[
j
] = 
gg¿ph
[
k
++];

227 
j
++;

232 
	`MAKECSR
(
i
, 
gnvtxs
, 
axadj
);

234 
i
=0; i<
gnvtxs
; i++)

235 
®ab–
[
i
] = i;

237 
gsize
 > 
w¥aû
->
maxcÜe
-
mysize
)

238 
	`ä“
(
gg¿ph
);

240  
ag¿ph
;

241 
	}
}

	@initpart.c

15 
	~<·rm‘is.h
>

18  
	#DEBUG_IPART_


	)
27 
	$In™P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
cÚ‹xt
)

29 
i
, 
j
, 
Íecut
[2], 
g³cut
[2];

30 
numæag
=0, 
wgtæag
 = 3, 
mİtiÚs
[10];

31 
idxty³
 *
vtxdi¡
, *
·¹
;

32 
G¿phTy³
 *
ag¿ph
;

33 *
£ndcouÁs
, *
di¥ls
;

35 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

37 
ag¿ph
 = 
	`As£mbËG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
, 
cÚ‹xt
);

38 
·¹
 = 
	`idxm®loc
(
ag¿ph
->
nvtxs
, "InitPartition:…art");

45 
	`MALLOC_CHECK
(
NULL
);

47 
mİtiÚs
[0] = 1;

48 
mİtiÚs
[1] = 3;

49 
mİtiÚs
[2] = 1;

50 
mİtiÚs
[3] = 1;

51 
mİtiÚs
[4] = 0;

52 
mİtiÚs
[7] = 
ù¾
->
my³
;

53 
	`METIS_P¬tG¿phKway2
(&
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
,‡g¿ph->
vwgt
,‡g¿ph->
adjwgt
,

54 &
wgtæag
, &
numæag
, &
ù¾
->
Å¬ts
, 
mİtiÚs
, &
Íecut
[0], 
·¹
);

56 
	`MALLOC_CHECK
(
NULL
);

59 
	`MPI_Comm_¿nk
(
ù¾
->
gcomm
, 
Íecut
+1);

60 
	`MPI_AÎ»duû
(
Íecut
, 
g³cut
, 1, 
MPI_2INT
, 
MPI_MINLOC
, 
ù¾
->
gcomm
);

64 
Íecut
[1] =ğ
g³cut
[1] && gpecut[1] != 0)

65 
	`MPI_S’d
((*)
·¹
, 
ag¿ph
->
nvtxs
, 
IDX_DATATYPE
, 0, 1, 
ù¾
->
gcomm
);

66 
Íecut
[1] =ğ0 && 
g³cut
[1] != 0)

67 
	`MPI_Recv
((*)
·¹
, 
ag¿ph
->
nvtxs
, 
IDX_DATATYPE
, 
g³cut
[1], 1, 
ù¾
->
gcomm
, &ù¾->
¡©us
);

69 
cÚ‹xt
 == 1) {

71 
vtxdi¡
 = 
g¿ph
->vtxdist;

72 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "InitPartition: where");

74 
£ndcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: sendcounts");

75 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
, "InitPartitionNew: displs");

77 
i
=0; i<
ù¾
->
Åes
; i++) {

78 
£ndcouÁs
[
i
] = 
vtxdi¡
[i+1]-vtxdist[i];

79 
di¥ls
[
i
] = 
vtxdi¡
[i];

82 
	`MPI_Sÿ‰”v
((*)
·¹
, 
£ndcouÁs
, 
di¥ls
, 
IDX_DATATYPE
,

83 (*)
g¿ph
->
wh”e
, g¿ph->
nvtxs
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

85 
	`GKä“
(&
£ndcouÁs
, &
di¥ls
, 
LTERM
);

88 
	`ä“
(
·¹
);

89 
	`F»eG¿ph
(
ag¿ph
);

91 
	`MALLOC_CHECK
(
NULL
);

93 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

95 
	}
}

106 
	$In™P¬t™iÚ_RB
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
cÚ‹xt
)

108 
i
, 
j
, 
my³
, 
Åes
, 
gnvtxs
, 
my·¹num
;

109 
idxty³
 *
·¹
, *
gwh”e0
, *
gwh”e1
;

110 
G¿phTy³
 *
ag¿ph
;

111 
Ê·¹s
, 
å¬t
, 
åe
, 
Ê³s
;

112 
dpwgt
, 
twİ¬ts
=2, 
numæag
 = 0, 
wgtæag
 = 3, 
mİtiÚs
[10], 
edgecut
;

113 
wgts
[2];

115 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
In™P¬tTmr
));

117 
ag¿ph
 = 
	`As£mbËG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
, 
cÚ‹xt
);

118 
·¹
 = 
	`idxm®loc
(
ag¿ph
->
nvtxs
, "InitPartition:…art");

120 
	`MPI_Comm_¿nk
(
ù¾
->
gcomm
, &
my³
);

121 
	`MPI_Comm_size
(
ù¾
->
gcomm
, &
Åes
);

123 
gnvtxs
 = 
ag¿ph
->
nvtxs
;

124 
dpwgt
 = 
	`idxsum
(
gnvtxs
, 
ag¿ph
->
vwgt
)/
ù¾
->
Å¬ts
;

126 
gwh”e0
 = 
	`idxsm®loc
(
gnvtxs
, 0, "InitPartition: gwhere0");

127 
gwh”e1
 = 
	`idxm®loc
(
gnvtxs
, "InitPartition: gwhere1");

131 
mİtiÚs
[0] = 0;

132 
Ê·¹s
 = 
ù¾
->
Å¬ts
;

133 
å¬t
 = 
åe
 = 0;

134 
Ê³s
 = 
Åes
;

135 
Ê³s
 > 1 && 
Ê·¹s
 > 1) {

136 
wgts
[0] = (1.0*(
Ê·¹s
>>1))/(1.0*lnparts);

137 
wgts
[1] = 1.0 -pwgts[0];

139 
	`METIS_WP¬tG¿phRecursive
(&
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
,‡g¿ph->
vwgt
,

140 
ag¿ph
->
adjwgt
, &
wgtæag
, &
numæag
, &
twİ¬ts
, 
wgts
, 
mİtiÚs
, &
edgecut
, 
·¹
);

142 
my³
 < 
åe
+
Ê³s
/2) {

143 
	`K“pP¬t
(
ù¾
, 
ag¿ph
, 
w¥aû
, 
·¹
, 0);

144 
Ê³s
 =†npes/2;

145 
Ê·¹s
 =†nparts/2;

148 
	`K“pP¬t
(
ù¾
, 
ag¿ph
, 
w¥aû
, 
·¹
, 1);

149 
å¬t
 = f·¹ + 
Ê·¹s
/2;

150 
åe
 = f³ + 
Ê³s
/2;

151 
Ê³s
 =†npes -†npes/2;

152 
Ê·¹s
 =†nparts -†nparts/2;

156 
Ê·¹s
 == 1) {

157 
my³
 =ğ
åe
) {

158 
i
=0; i<
ag¿ph
->
nvtxs
; i++)

159 
gwh”e0
[
ag¿ph
->
Ïb–
[
i
]] = 
å¬t
;

163 
	`METIS_P¬tG¿phKway
(&
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
,‡g¿ph->
vwgt
,

164 
ag¿ph
->
adjwgt
, &
wgtæag
, &
numæag
, &
Ê·¹s
, 
mİtiÚs
, &
edgecut
, 
·¹
);

166 
i
=0; i<
ag¿ph
->
nvtxs
; i++)

167 
gwh”e0
[
ag¿ph
->
Ïb–
[
i
]] = 
å¬t
 + 
·¹
[i];

171 
	`MPI_AÎ»duû
((*)
gwh”e0
, (*)
gwh”e1
, 
gnvtxs
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
gcomm
);

174 
cÚ‹xt
 == 1) {

175 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "InitPartition: where");

176 
	`idxcİy
(
g¿ph
->
nvtxs
, 
gwh”e1
+g¿ph->
vtxdi¡
[
ù¾
->
my³
], g¿ph->
wh”e
);

179 
	`F»eG¿ph
(
ag¿ph
);

180 
	`GKä“
(&
gwh”e0
, &
gwh”e1
, &
·¹
, 
LTERM
);

182 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
In™P¬tTmr
));

184 
	}
}

191 
G¿phTy³
 *
	$As£mbËG¿ph
(
CŒlTy³
 *
ù¾
, G¿phTy³ *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
cÚ‹xt
)

193 
i
, 
j
, 
k
, 
l
, 
gnvtxs
, 
nvtxs
, 
gÃdges
, 
Ãdges
, 
fœ¡vtx
, 
gsize
;

194 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
vtxdi¡
, *
edgedi¡
, *
im­
;

195 
idxty³
 *
axadj
, *
¯djncy
, *
¯djwgt
, *
avwgt
, *
®ab–
;

196 
idxty³
 *
myg¿ph
, *
gg¿ph
;

197 *
»cvcouÁs
, *
di¥ls
, 
mysize
;

198 
G¿phTy³
 *
ag¿ph
;

200 
cÚ‹xt
 == 1) {

201 
gnvtxs
 = 
g¿ph
->gnvtxs;

202 
nvtxs
 = 
g¿ph
->nvtxs;

203 
Ãdges
 = 
g¿ph
->
xadj
[
nvtxs
];

204 
xadj
 = 
g¿ph
->xadj;

205 
vwgt
 = 
g¿ph
->vwgt;

206 
adjncy
 = 
g¿ph
->adjncy;

207 
adjwgt
 = 
g¿ph
->adjwgt;

208 
vtxdi¡
 = 
g¿ph
->vtxdist;

209 
im­
 = 
g¿ph
->imap;

212 
»cvcouÁs
 = 
	`im®loc
(
ù¾
->
Åes
, "AssembleGraph:„ecvcounts");

213 
mysize
 = 2*
nvtxs
 + 2*
Ãdges
;

214 
	`MPI_AÎg©h”
((*)(&
mysize
), 1, 
MPI_INT
, (*)
»cvcouÁs
, 1, MPI_INT, 
ù¾
->
comm
);

216 
di¥ls
 = 
	`im®loc
(
ù¾
->
Åes
+1, "AssembleGraph: displs");

217 
di¥ls
[0] = 0;

218 
i
=1; i<
ù¾
->
Åes
+1; i++)

219 
di¥ls
[
i
] = di¥ls[i-1] + 
»cvcouÁs
[i-1];

222 
myg¿ph
 = (
mysize
 <ğ
w¥aû
->
maxcÜe
 ? w¥aû->
cÜe
 : 
	`idxm®loc
(mysize, "AssembleGraph: mygraph"));

223 
k
=
i
=0; i<
nvtxs
; i++) {

224 
myg¿ph
[
k
++] = 
xadj
[
i
+1]-xadj[i];

225 
myg¿ph
[
k
++] = 
vwgt
[
i
];

226 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

227 
myg¿ph
[
k
++] = 
im­
[
adjncy
[
j
]];

228 
myg¿ph
[
k
++] = 
adjwgt
[
j
];

231 
	`ASSERT
(
ù¾
, 
mysize
 =ğ
k
);

234 
gsize
 = 
di¥ls
[
ù¾
->
Åes
]+2;

235 
gg¿ph
 = (
gsize
 <ğ
w¥aû
->
maxcÜe
-
mysize
 ? w¥aû->
cÜe
+mysiz: 
	`idxm®loc
(gsize, "AssembleGraph: ggraph"));

236 
gg¿ph
[0] = 
gnvtxs
;

237 
gg¿ph
[1] = (
di¥ls
[
ù¾
->
Åes
] - 2*
gnvtxs
)/2;

238 
	`MPI_G©h”v
((*)
myg¿ph
, 
mysize
, 
IDX_DATATYPE
, (*)(
gg¿ph
+2),

239 
»cvcouÁs
, 
di¥ls
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

241 
	`GKä“
(&
»cvcouÁs
, &
di¥ls
, 
LTERM
);

242 
mysize
 > 
w¥aû
->
maxcÜe
)

243 
	`ä“
(
myg¿ph
);

246 
	`MPI_Bÿ¡
((*)&
gsize
, 1, 
MPI_INT
, 0, 
ù¾
->
gcomm
);

250 
cÚ‹xt
 == 0)

251 
gg¿ph
 = (
gsize
 <ğ
w¥aû
->
maxcÜe
 ? w¥aû->
cÜe
 : 
	`idxm®loc
(gsize, "AssembleGraph: ggraph"));

253 
	`MPI_Bÿ¡
((*)
gg¿ph
, 
gsize
, 
IDX_DATATYPE
, 0, 
ù¾
->
gcomm
);

255 
ag¿ph
 = 
	`C»©eG¿ph
();

256 
ag¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

257 
ag¿ph
->
nvtxs
 = 
gnvtxs
 = 
gg¿ph
[0];

258 
ag¿ph
->
Ãdges
 = 
gÃdges
 = 
gg¿ph
[1];

261 
axadj
 = 
ag¿ph
->
xadj
 = 
	`idxm®loc
(
gnvtxs
+1, "AssembleGraph:‡xadj");

262 
avwgt
 = 
ag¿ph
->
vwgt
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡vwgt");

263 
¯djncy
 = 
ag¿ph
->
adjncy
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djncy");

264 
¯djwgt
 = 
ag¿ph
->
adjwgt
 = 
	`idxm®loc
(
gÃdges
, "AssembleGraph:‡djwgt");

265 
®ab–
 = 
ag¿ph
->
Ïb–
 = 
	`idxm®loc
(
gnvtxs
, "AssembleGraph:‡label");

267 
k
=2, 
j
=
i
=0; i<
gnvtxs
; i++) {

268 
axadj
[
i
] = 
gg¿ph
[
k
++];

269 
avwgt
[
i
] = 
gg¿ph
[
k
++];

270 
l
=0;†<
axadj
[
i
];†++) {

271 
¯djncy
[
j
] = 
gg¿ph
[
k
++];

272 
¯djwgt
[
j
] = 
gg¿ph
[
k
++];

273 
j
++;

278 
	`MAKECSR
(
i
, 
gnvtxs
, 
axadj
);

280 
i
=0; i<
gnvtxs
; i++)

281 
®ab–
[
i
] = i;

283 
cÚ‹xt
 =ğ1 && 
gsize
 > 
w¥aû
->
maxcÜe
-
mysize
)

284 
	`ä“
(
gg¿ph
);

285 
cÚ‹xt
 =ğ0 && 
gsize
 > 
w¥aû
->
maxcÜe
)

286 
	`ä“
(
gg¿ph
);

293  
ag¿ph
;

294 
	}
}

302 
	$K“pP¬t
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
idxty³
 *
·¹
, 
my·¹
)

304 
i
, 
j
, 
k
, 
l
, 
nvtxs
, 
mynvtxs
, 
myÃdges
;

305 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
Ïb–
;

306 
idxty³
 *
»Çme
;

308 
nvtxs
 = 
g¿ph
->nvtxs;

309 
xadj
 = 
g¿ph
->xadj;

310 
vwgt
 = 
g¿ph
->vwgt;

311 
adjncy
 = 
g¿ph
->adjncy;

312 
adjwgt
 = 
g¿ph
->adjwgt;

313 
Ïb–
 = 
g¿ph
->label;

315 
»Çme
 = 
	`idxm®loc
(
nvtxs
, "KeepPart:„ename");

317 
mynvtxs
=0, 
i
=0; i<
nvtxs
; i++) {

318 
·¹
[
i
] =ğ
my·¹
)

319 
»Çme
[
i
] = 
mynvtxs
++;

322 
mynvtxs
=0, 
myÃdges
=0, 
j
=
xadj
[0], 
i
=0; i<
nvtxs
; i++) {

323 
·¹
[
i
] =ğ
my·¹
) {

324 ; 
j
<
xadj
[
i
+1]; j++) {

325 
k
 = 
adjncy
[
j
];

326 
·¹
[
k
] =ğ
my·¹
) {

327 
adjncy
[
myÃdges
] = 
»Çme
[
k
];

328 
adjwgt
[
myÃdges
++] =‡djwgt[
j
];

331 
j
 = 
xadj
[
i
+1];

333 
vwgt
[
mynvtxs
] = vwgt[
i
];

334 
Ïb–
[
mynvtxs
] =†ab–[
i
];

335 
xadj
[++
mynvtxs
] = 
myÃdges
;

339 
j
 = 
xadj
[
i
+1];

343 
g¿ph
->
nvtxs
 = 
mynvtxs
;

344 
g¿ph
->
Ãdges
 = 
myÃdges
;

346 
	`ä“
(
»Çme
);

347 
	}
}

	@kmetis.c

15 
	~<·rm‘is.h
>

23 
	$P¬METIS_P¬tKway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, idxty³ *
vwgt
,

24 
idxty³
 *
adjwgt
, *
wgtæag
, *
numæag
, *
Å¬ts
, *
İtiÚs
, *
edgecut
,

25 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

27 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

28 
Åes
, 
my³
;

29 
CŒlTy³
 
ù¾
;

30 
WÜkS·ûTy³
 
w¥aû
;

31 
G¿phTy³
 *
g¿ph
;

33 
	`MPI_Comm_size
(*
comm
, &
Åes
);

34 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

36 *
Å¬ts
 == 1) {

37 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

38 *
edgecut
 = 0;

41 
Åes
 =ğ1 && *
Å¬ts
 > 1) {

42 
mİtiÚs
[10];

44 
mİtiÚs
[0] = 0;

45 
	`METIS_P¬tG¿phKway
(&
vtxdi¡
[1], 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, 
wgtæag
, 
numæag
,

46 
Å¬ts
, 
mİtiÚs
, 
edgecut
, 
·¹
);

52 *
numæag
 == 1)

53 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

55 
	`S‘UpCŒl
(&
ù¾
, *
Å¬ts
, 
İtiÚs
, *
comm
);

56 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*
	`amax
Ò³s, *
Å¬ts
));

58 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

60 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

62 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

63 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

64 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

66 
Åes
%2 == 0 &&‚pes > 2)

67 
	`FldGlob®_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
, 0);

69 
	`Glob®_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

71 
	`ReM­G¿ph
(&
ù¾
, 
g¿ph
, 0, &
w¥aû
);

73 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

74 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

76 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

77 *
edgecut
 = 
g¿ph
->
mšcut
;

79 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

80 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

81 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

82 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final %d-way Cut: %6d \tBalance: %6.3f [%d %d %d]\n",

83 *
Å¬ts
, 
g¿ph
->
mšcut
, 1.0*(*Å¬ts)*g¿ph->
gpwgts
[
	`idxamax
(*Å¬ts, g¿ph->gpwgts)]/(1.0*
tvwgt
),

84 
g¿ph
->
gpwgts
[
	`idxamax
(*
Å¬ts
, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

86 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

87 
	`F»eWS·û
(&
w¥aû
);

88 
	`F»eCŒl
(&
ù¾
);

90 *
numæag
 == 1)

91 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

93 
	}
}

104 
	$PARKMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

105 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

107 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

108 
Åes
;

110 
	`MPI_Comm_size
(
comm
, &
Åes
);

112 
ÃwİtiÚs
[0] = 1;

113 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

114 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

115 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

117 
numæag
 = 
İtiÚs
[3];

118 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

120 
	`P¬METIS_P¬tKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
, &
Åes
,

121 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

123 
İtiÚs
[0] = 
edgecut
;

125 
	}
}

	@macros.h

19  
	#RªdomInRªge
(
u
è(()(
	`d¿nd48
()*(()(u))))

	)
20  
	#RªdomInRªgeFa¡
(
u
è((
	`¿nd
()>>2)%(u))

	)
22  
	#amax
(
a
, 
b
è(×è>ğ(bè? (aè: (b))

	)
23  
	#amš
(
a
, 
b
è(×è>ğ(bè? (bè: (a))

	)
25  
	#AND
(
a
, 
b
è(×è< 0 ? ((-×))&(b)è: (×)&(b)))

	)
26  
	#OR
(
a
, 
b
è(×è< 0 ? -((-×))|(b)è: (×)|(b)))

	)
27  
	#XOR
(
a
, 
b
è(×è< 0 ? -((-×))^(b)è: (×)^(b)))

	)
29  
	#SWAP
(
a
, 
b
, 
tmp
) \

30  {(
tmp
èğ(
a
); (aèğ(
b
); (bèğÑmp);} 0è

	)
32  
	#INC_DEC
(
a
, 
b
, 
v®
) \

33  {(
a
è+ğ(
v®
); (
b
è-ğ(v®);} 0)

	)
36  
	#scİy
(
n
, 
a
, 
b
è
	`memıy
((b), (a), ()*Ò))

	)
37  
	#idxcİy
(
n
, 
a
, 
b
è
	`memıy
((b), (a), (
idxty³
)*Ò))

	)
39  
	#HASHFCT
(
key
, 
size
è((key)%(size))

	)
45  
	#ş—¹im”
(
tmr
èÑm¸ğ0.0)

	)
46  
	#¡¬‰im”
(
tmr
èÑm¸-ğ
	`MPI_Wtime
())

	)
47  
	#¡İtim”
(
tmr
èÑm¸+ğ
	`MPI_Wtime
())

	)
48  
	#g‘tim”
(
tmr
èÑmr)

	)
54  
	#IFSET
(
a
, 
æag
, 
cmd
è×)&(æag)è(cmd);

	)
59 #ifdeà
DMALLOC


60  
	#im®loc
(
n
, 
msg
è(
	`m®loc
(()*Ò)))

	)
61  
	#fm®loc
(
n
, 
msg
è(
	`m®loc
(()*Ò)))

	)
62  
	#idxm®loc
(
n
, 
msg
è(
	`m®loc
((
idxty³
)*Ò)))

	)
63  
	#ism®loc
(
n
, 
v®
, 
msg
è(
	`i£t
(Ò), (v®), 
	`m®loc
(()*Ò))))

	)
64  
	#idxsm®loc
(
n
, 
v®
, 
msg
è(
	`idx£t
(Ò), (v®), 
	`m®loc
((
idxty³
)*Ò))))

	)
65  
	#GKm®loc
(
a
, 
b
è(
	`m®loc
×))

	)
68 #ifdeà
DMALLOC


69  
	#MALLOC_CHECK
(
±r
) \

70 
	`m®loc_v”ify
((
±r
)è=ğ
DMALLOC_VERIFY_ERROR
) { \

71 
	`´štf
("***MALLOC_CHECK failed on†ine %d of file %s: " #ptr "\n", \

72 
__LINE__
, 
__FILE__
); \

73 
	`abÜt
(); \

74 }

	)
76  
	#MALLOC_CHECK
(
±r
è;

	)
82  
	#MAKECSR
(
i
, 
n
, 
a
) \

84 
i
=1; i<
n
; i++è
a
[i] +=‡[i-1]; \

85 
i
=
n
; i>0; i--è
a
[i] =‡[i-1]; \

86 
a
[0] = 0; \

87 } 0è

	)
92 #ifdeà
DEBUG


93  
	#ASSERT
(
ù¾
, 
ex´
) \

94 !(
ex´
)) { \

95 
	`my´štf
(
ù¾
, "***ASSERTION failed on†ine %d of file %s: " #expr "\n", \

96 
__LINE__
, 
__FILE__
); \

97 
	`abÜt
(); \

98 }

	)
100  
	#ASSERT
(
ù¾
, 
ex´
è;

	)
103 #ifdeà
DEBUG


104  
	#ASSERTP
(
ù¾
, 
ex´
,
msg
) \

105 !(
ex´
)) { \

106 
	`my´štf
(
ù¾
, "***ASSERTION failed on†ine %d of file %s:" #expr "\n", \

107 
__LINE__
, 
__FILE__
); \

108 
my´štf
 
msg
 ; \

109 
	`abÜt
(); \

110 }

	)
112  
	#ASSERTP
(
ù¾
, 
ex´
,
msg
è;

	)
115 #ifdeà
DEBUGS


116  
	#ASSERTS
(
ex´
) \

117 !(
ex´
)) { \

118 
	`´štf
("***ASSERTION failed on†ine %d of file %s: " #expr "\n", \

119 
__LINE__
, 
__FILE__
); \

120 
	`abÜt
(); \

121 }

	)
123  
	#ASSERTS
(
ex´
è;

	)
126 #ifdeà
DEBUGS


127  
	#ASSERTSP
(
ex´
, 
msg
) \

128 !(
ex´
)) { \

129 
	`´štf
("***ASSERTION failed on†ine %d of file %s: " #expr "\n", \

130 
__LINE__
, 
__FILE__
); \

131 
´štf
 
msg
 ; \

132 
	`abÜt
(); \

133 }

	)
135  
	#ASSERTSP
(
ex´
, 
msg
è;

	)
	@memory.c

15 
	~<·rm‘is.h
>

21 
	$P»AÎoÿ‹MemÜy
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

23 
i
;

25 
w¥aû
->
Æ¬ge
 = 2*
g¿ph
->
Ãdges
;

27 
w¥aû
->
maxcÜe
 = 8*
g¿ph
->
Ãdges
;

28 
w¥aû
->
cÜe
 = 
	`idxm®loc
(w¥aû->
maxcÜe
, "PreAllocateMemory: wspace->core");

30 
w¥aû
->
·œs
 = (
KeyV®ueTy³
 *)w¥aû->
cÜe
;

31 
w¥aû
->
šdiûs
 = (
idxty³
 *)(w¥aû->
·œs
 + w¥aû->
Æ¬ge
);

32 
w¥aû
->
deg»es
 = (
EdgeTy³
 *)(w¥aû->
šdiûs
 + w¥aû->
Æ¬ge
);

35 
w¥aû
->
pv1
 = 
	`idxm®loc
(
ù¾
->
Å¬ts
+ù¾->
Åes
+1, "PreAllocateMemory: wspace->pv?");

36 
w¥aû
->
pv2
 = 
	`idxm®loc
(
ù¾
->
Å¬ts
+ù¾->
Åes
+1, "PreAllocateMemory: wspace->pv?");

37 
w¥aû
->
pv3
 = 
	`idxm®loc
(
ù¾
->
Å¬ts
+ù¾->
Åes
+1, "PreAllocateMemory: wspace->pv?");

38 
w¥aû
->
pv4
 = 
	`idxm®loc
(
ù¾
->
Å¬ts
+ù¾->
Åes
+1, "PreAllocateMemory: wspace->pv?");

40 
w¥aû
->
³·œs1
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*(
ù¾
->
Å¬ts
+ù¾->
Åes
+1), "PreAllocateMemory: wspace->pepairs?");

41 
w¥aû
->
³·œs2
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*(
ù¾
->
Å¬ts
+ù¾->
Åes
+1), "PreAllocateMemory: wspace->pepairs?");

43 
	}
}

49 
	$F»eWS·û
(
WÜkS·ûTy³
 *
w¥aû
)

52 
	`GKä“
(&
w¥aû
->
cÜe
,

53 &
w¥aû
->
pv1
,

54 &
w¥aû
->
pv2
,

55 &
w¥aû
->
pv3
,

56 &
w¥aû
->
pv4
,

57 &
w¥aû
->
³·œs1
,

58 &
w¥aû
->
³·œs2
,

59 
LTERM
);

60 
	}
}

66 
	$F»eCŒl
(
CŒlTy³
 *
ù¾
)

68 
	`MPI_Comm_ä“
(&(
ù¾
->
gcomm
));

69 
	}
}

76 
G¿phTy³
 *
	$C»©eG¿ph
()

78 
G¿phTy³
 *
g¿ph
;

80 
g¿ph
 = (
G¿phTy³
 *)
	`GKm®loc
((GraphType), "CreateCoarseGraph: graph");

82 
	`In™G¿ph
(
g¿ph
);

84  
g¿ph
;

85 
	}
}

92 
	$In™G¿ph
(
G¿phTy³
 *
g¿ph
)

94 
g¿ph
->
gnvtxs
 = g¿ph->
nvtxs
 = g¿ph->
Ãdges
 = g¿ph->
n£p
 = -1;

95 
g¿ph
->
Âbrs
 = g¿ph->
Äecv
 = g¿ph->
n£nd
 = g¿ph->
Æoÿl
 = -1;

96 
g¿ph
->
xadj
 = g¿ph->
vwgt
 = g¿ph->
vsize
 = g¿ph->
adjncy
 = g¿ph->
adjwgt
 = 
NULL
;

97 
g¿ph
->
vtxdi¡
 = 
NULL
;

98 
g¿ph
->
m©ch
 = g¿ph->
cm­
 = 
NULL
;

99 
g¿ph
->
Ïb–
 = 
NULL
;

101 
g¿ph
->
³šd
 = 
NULL
;

102 
g¿ph
->
£nd±r
 = g¿ph->
£ndšd
 = g¿ph->
»cv±r
 = g¿ph->
»cvšd
 = 
NULL
;

103 
g¿ph
->
im­
 = 
NULL
;

104 
g¿ph
->
³xadj
 = g¿ph->
³adjncy
 = g¿ph->
³adjloc
 = 
NULL
;

105 
g¿ph
->
Í”m
 = 
NULL
;

107 
g¿ph
->
¦’s
 = g¿ph->
¾’s
 = 
NULL
;

108 
g¿ph
->
rÿnd
 = 
NULL
;

110 
g¿ph
->
wh”e
 = g¿ph->
Íwgts
 = g¿ph->
gpwgts
 = 
NULL
;

111 
g¿ph
->
ršfo
 = 
NULL
;

113 
g¿ph
->
Äšfo
 = 
NULL
;

114 
g¿ph
->
£pšd
 = 
NULL
;

116 
g¿ph
->
cßr£r
 = g¿ph->
fš”
 = 
NULL
;

118 
	}
}

123 
	$F»eG¿ph
(
G¿phTy³
 *
g¿ph
)

126 
	`GKä“
(&
g¿ph
->
xadj
,

127 &
g¿ph
->
vwgt
,

128 &
g¿ph
->
vsize
,

129 &
g¿ph
->
adjncy
,

130 &
g¿ph
->
adjwgt
,

131 &
g¿ph
->
vtxdi¡
,

132 &
g¿ph
->
m©ch
,

133 &
g¿ph
->
cm­
,

134 &
g¿ph
->
Í”m
,

135 &
g¿ph
->
Ïb–
,

136 &
g¿ph
->
wh”e
,

137 &
g¿ph
->
ršfo
,

138 &
g¿ph
->
Äšfo
,

139 &
g¿ph
->
£pšd
,

140 &
g¿ph
->
Íwgts
,

141 &
g¿ph
->
gpwgts
,

142 &
g¿ph
->
³šd
,

143 &
g¿ph
->
£nd±r
,

144 &
g¿ph
->
£ndšd
,

145 &
g¿ph
->
»cv±r
,

146 &
g¿ph
->
»cvšd
,

147 &
g¿ph
->
im­
,

148 &
g¿ph
->
¾’s
,

149 &
g¿ph
->
¦’s
,

150 &
g¿ph
->
rÿnd
,

151 &
g¿ph
->
³xadj
,

152 &
g¿ph
->
³adjncy
,

153 &
g¿ph
->
³adjloc
,

154 
LTERM
);

156 
	`ä“
(
g¿ph
);

157 
	}
}

163 
	$F»eG¿phCÚ‹Á
(
G¿phTy³
 *
g¿ph
)

166 
	`GKä“
(&
g¿ph
->
xadj
,

167 &
g¿ph
->
vwgt
,

168 &
g¿ph
->
vsize
,

169 &
g¿ph
->
adjncy
,

170 &
g¿ph
->
adjwgt
,

171 &
g¿ph
->
vtxdi¡
,

172 &
g¿ph
->
m©ch
,

173 &
g¿ph
->
cm­
,

174 &
g¿ph
->
Í”m
,

175 &
g¿ph
->
wh”e
,

176 &
g¿ph
->
Ïb–
,

177 &
g¿ph
->
ršfo
,

178 &
g¿ph
->
Äšfo
,

179 &
g¿ph
->
Íwgts
,

180 &
g¿ph
->
gpwgts
,

181 &
g¿ph
->
³šd
,

182 &
g¿ph
->
£nd±r
,

183 &
g¿ph
->
£ndšd
,

184 &
g¿ph
->
»cv±r
,

185 &
g¿ph
->
»cvšd
,

186 &
g¿ph
->
im­
,

187 &
g¿ph
->
¾’s
,

188 &
g¿ph
->
¦’s
,

189 &
g¿ph
->
rÿnd
,

190 &
g¿ph
->
³xadj
,

191 &
g¿ph
->
³adjncy
,

192 &
g¿ph
->
³adjloc
,

193 
LTERM
);

195 
	}
}

201 
	$F»eIn™ŸlG¿phAndRem­
(
G¿phTy³
 *
g¿ph
, 
wgtæag
)

203 
i
, 
j
, 
k
, 
nvtxs
, 
Ãdges
;

204 
idxty³
 *
adjncy
, *
im­
;

206 
Ãdges
 = 
g¿ph
->nedges;

207 
adjncy
 = 
g¿ph
->adjncy;

208 
im­
 = 
g¿ph
->imap;

210 
im­
 !ğ
NULL
) {

211 
i
=0; i<
Ãdges
; i++)

212 
adjncy
[
i
] = 
im­
[adjncy[i]];

216 
	`GKä“
(&
g¿ph
->
m©ch
,

217 &
g¿ph
->
cm­
,

218 &
g¿ph
->
Í”m
,

219 &
g¿ph
->
wh”e
,

220 &
g¿ph
->
Ïb–
,

221 &
g¿ph
->
ršfo
,

222 &
g¿ph
->
Äšfo
,

223 &
g¿ph
->
Íwgts
,

224 &
g¿ph
->
gpwgts
,

225 &
g¿ph
->
£pšd
,

226 &
g¿ph
->
³šd
,

227 &
g¿ph
->
£nd±r
,

228 &
g¿ph
->
£ndšd
,

229 &
g¿ph
->
»cv±r
,

230 &
g¿ph
->
»cvšd
,

231 &
g¿ph
->
im­
,

232 &
g¿ph
->
¾’s
,

233 &
g¿ph
->
¦’s
,

234 &
g¿ph
->
rÿnd
,

235 &
g¿ph
->
³xadj
,

236 &
g¿ph
->
³adjncy
,

237 &
g¿ph
->
³adjloc
,

238 
LTERM
);

240 (
wgtæag
&2) == 0)

241 
	`GKä“
(&
g¿ph
->
vwgt
, &g¿ph->
vsize
, 
LTERM
);

242 (
wgtæag
&1) == 0)

243 
	`GKä“
(&
g¿ph
->
adjwgt
, 
LTERM
);

245 
	`ä“
(
g¿ph
);

246 
	}
}

	@move.c

15 
	~<·rm‘is.h
>

22 
G¿phTy³
 *
	$MoveG¿ph
(
CŒlTy³
 *
ù¾
, G¿phTy³ *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

24 
i
, 
ii
, 
j
, 
jj
, 
k
, 
nvtxs
, 
Å¬ts
;

25 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
mvtxdi¡
;

26 
idxty³
 *
wh”e
, *
ÃwÏb–
, *
Íwgts
, *
gpwgts
;

27 
idxty³
 *
sg¿ph
, *
rg¿ph
;

28 
KeyV®ueTy³
 *
sšfo
, *
ršfo
;

29 
G¿phTy³
 *
mg¿ph
;

31 
Å¬ts
 = 
ù¾
->nparts;

32 
	`ASSERT
(
ù¾
, 
Å¬ts
 =ğù¾->
Åes
);

34 
nvtxs
 = 
g¿ph
->nvtxs;

35 
xadj
 = 
g¿ph
->xadj;

36 
vwgt
 = 
g¿ph
->vwgt;

37 
adjncy
 = 
g¿ph
->adjncy;

38 
adjwgt
 = 
g¿ph
->adjwgt;

39 
wh”e
 = 
g¿ph
->where;

41 
mvtxdi¡
 = 
	`idxm®loc
(
Å¬ts
+1, "MoveGraph: mvtxdist");

44 
Íwgts
 = 
w¥aû
->
pv1
;

45 
gpwgts
 = 
w¥aû
->
pv2
;

46 
sšfo
 = 
w¥aû
->
³·œs1
;

47 
ršfo
 = 
w¥aû
->
³·œs2
;

48 
i
=0; i<
Å¬ts
; i++)

49 
sšfo
[
i
].
key
 = sšfo[i].
v®
 = 0;

52 
i
=0; i<
nvtxs
; i++) {

53 
	`ASSERTP
(
ù¾
, 
wh”e
[
i
] >ğ0 && wh”e[i] < cŒl->
Åes
, (ctrl, "%d %d %d\n", i, where[i], ctrl->npes) );

54 
sšfo
[
wh”e
[
i
]].
key
++;

55 
sšfo
[
wh”e
[
i
]].
v®
 +ğ
xadj
[i+1]-xadj[i];

57 
i
=0; i<
Å¬ts
; i++)

58 
Íwgts
[
i
] = 
sšfo
[i].
key
;

60 
	`MPI_Sÿn
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

61 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
mvtxdi¡
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

69 
	`MAKECSR
(
i
, 
Å¬ts
, 
mvtxdi¡
);

72 
i
=0; i<
Å¬ts
; i++)

73 
gpwgts
[
i
] = 
mvtxdi¡
[i] + gpwgts[i] - 
Íwgts
[i];

75 
ÃwÏb–
 = 
	`idxm®loc
(
nvtxs
+
g¿ph
->
Äecv
, "MoveGraph:‚ewlabel");

77 
i
=0; i<
nvtxs
; i++)

78 
ÃwÏb–
[
i
] = 
gpwgts
[
wh”e
[i]]++;

81 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
ÃwÏb–
, 
w¥aû
->
šdiûs
,‚ewÏb–+
nvtxs
);

84 
	`MPI_AÎtßÎ
((*)
sšfo
, 2, 
IDX_DATATYPE
, (*)
ršfo
, 2, IDX_DATATYPE, 
ù¾
->
comm
);

92 
Íwgts
[0] = 0;

93 
gpwgts
[0] = 0;

94 
i
=0; i<
Å¬ts
; i++) {

95 
Íwgts
[
i
+1] =†pwgts[i] + 2*(
sšfo
[i].
key
 + sšfo[i].
v®
);

96 
gpwgts
[
i
+1] = gpwgts[i] + 2*(
ršfo
[i].
key
 +„šfo[i].
v®
);

100 
Íwgts
[
Å¬ts
]+
gpwgts
[Å¬ts] > 
w¥aû
->
maxcÜe
) {

102 
	`ä“
(
w¥aû
->
cÜe
);

103 
w¥aû
->
maxcÜe
 = 
Íwgts
[
Å¬ts
]+4*
gpwgts
[nparts];

104 
w¥aû
->
cÜe
 = 
	`idxm®loc
(w¥aû->
maxcÜe
, "MoveGraph: wspace->core");

107 
sg¿ph
 = 
w¥aû
->
cÜe
;

108 
rg¿ph
 = 
w¥aû
->
cÜe
 + 
Íwgts
[
Å¬ts
];

111 
i
=0; i<
Å¬ts
; i++) {

112 
ršfo
[
i
].
key
 > 0)

113 
	`MPI_I»cv
((*)(
rg¿ph
+
gpwgts
[
i
]), gpwgts[i+1]-gpwgts[i], 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

115 
	`ASSERT
(
ù¾
, 
gpwgts
[
i
+1]-gpwgts[i] == 0);

121 
i
=0; i<
nvtxs
; i++) {

122 
ii
 = 
Íwgts
[
wh”e
[
i
]];

123 
sg¿ph
[
ii
++] = 
xadj
[
i
+1]-xadj[i];

124 
sg¿ph
[
ii
++] = 
vwgt
[
i
];

125 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

126 
sg¿ph
[
ii
++] = 
ÃwÏb–
[
adjncy
[
j
]];

127 
sg¿ph
[
ii
++] = 
adjwgt
[
j
];

129 
Íwgts
[
wh”e
[
i
]] = 
ii
;

131 
i
=
Å¬ts
; i>0; i--)

132 
Íwgts
[
i
] =†pwgts[i-1];

133 
Íwgts
[0] = 0;

137 
i
=0; i<
Å¬ts
; i++) {

138 
sšfo
[
i
].
key
 > 0)

139 
	`MPI_I£nd
((*)(
sg¿ph
+
Íwgts
[
i
]),†pwgts[i+1]-Íwgts[i], 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

141 
	`ASSERT
(
ù¾
, 
Íwgts
[
i
+1]-lpwgts[i] == 0);

144 #ifdeà
DMALLOC


145 
	`ASSERT
(
ù¾
, 
	`dm®loc_v”ify
(
NULL
è=ğ
DMALLOC_VERIFY_NOERROR
);

149 
i
=0; i<
Å¬ts
; i++) {

150 
sšfo
[
i
].
key
 > 0)

151 
	`MPI_Wa™
(
ù¾
->
¤eq
+
i
, &ù¾->
¡©us
);

153 
i
=0; i<
Å¬ts
; i++) {

154 
ršfo
[
i
].
key
 > 0)

155 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &ù¾->
¡©us
);

159 
mg¿ph
 = 
	`C»©eG¿ph
();

160 
mg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

161 
mg¿ph
->
gnvtxs
 = 
g¿ph
->gnvtxs;

162 
mg¿ph
->
Ëv–
 = 0;

163 
mg¿ph
->
nvtxs
 = mg¿ph->
Ãdges
 = 0;

164 
i
=0; i<
Å¬ts
; i++) {

165 
mg¿ph
->
nvtxs
 +ğ
ršfo
[
i
].
key
;

166 
mg¿ph
->
Ãdges
 +ğ
ršfo
[
i
].
v®
;

168 
nvtxs
 = 
mg¿ph
->nvtxs;

169 
xadj
 = 
mg¿ph
->xadj = 
	`idxm®loc
(
nvtxs
+1, "MoveGraph: mgraph->xadj");

170 
vwgt
 = 
mg¿ph
->vwgˆğ
	`idxm®loc
(
nvtxs
, "MoveGraph: mgraph->vwgt");

171 
adjncy
 = 
mg¿ph
->adjncy = 
	`idxm®loc
(mg¿ph->
Ãdges
, "MoveGraph: mgraph->adjncy");

172 
adjwgt
 = 
mg¿ph
->adjwgˆğ
	`idxm®loc
(mg¿ph->
Ãdges
, "MoveGraph: mgraph->adjwgt");

173 
mg¿ph
->
vtxdi¡
 = 
mvtxdi¡
;

175 
jj
=
ii
=
i
=0; i<
nvtxs
; i++) {

176 
xadj
[
i
] = 
rg¿ph
[
ii
++];

177 
vwgt
[
i
] = 
rg¿ph
[
ii
++];

178 
j
=0; j<
xadj
[
i
]; j++) {

179 
adjncy
[
jj
] = 
rg¿ph
[
ii
++];

180 
adjwgt
[
jj
++] = 
rg¿ph
[
ii
++];

183 
	`MAKECSR
(
i
, 
nvtxs
, 
xadj
);

185 
	`ASSERTP
(
ù¾
, 
jj
 =ğ
mg¿ph
->
Ãdges
, (ctrl, "%d %d\n", jj, mgraph->nedges));

186 
	`ASSERTP
(
ù¾
, 
ii
 =ğ
gpwgts
[
Å¬ts
], (ù¾, "%d %d %d %d %d\n", ii, gpwgts[Å¬ts], 
jj
, 
mg¿ph
->
Ãdges
, 
nvtxs
));

188 
	`ä“
(
ÃwÏb–
);

192  
mg¿ph
;

193 
	}
}

204 
	$ProjeùInfoBack
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
šfo
, idxty³ *
mšfo
, 
WÜkS·ûTy³
 *
w¥aû
)

206 
i
, 
ii
, 
j
, 
jj
, 
k
, 
nvtxs
, 
Å¬ts
;

207 
idxty³
 *
wh”e
, *
auxšfo
, *
sšfo
, *
ršfo
;

209 
Å¬ts
 = 
ù¾
->
Åes
;

211 
nvtxs
 = 
g¿ph
->nvtxs;

212 
wh”e
 = 
g¿ph
->where;

214 
sšfo
 = 
w¥aû
->
pv1
;

215 
ršfo
 = 
w¥aû
->
pv2
;

216 
auxšfo
 = 
w¥aû
->
cÜe
;

219 
	`idx£t
(
Å¬ts
, 0, 
ršfo
);

220 
i
=0; i<
nvtxs
; i++)

221 
ršfo
[
wh”e
[
i
]]++;

224 
	`MPI_AÎtßÎ
((*)
ršfo
, 1, 
IDX_DATATYPE
, (*)
sšfo
, 1, IDX_DATATYPE, 
ù¾
->
comm
);

226 
	`MAKECSR
(
i
, 
Å¬ts
, 
sšfo
);

227 
	`MAKECSR
(
i
, 
Å¬ts
, 
ršfo
);

232 
i
=0; i<
Å¬ts
; i++) {

233 
ršfo
[
i
+1]-rinfo[i] > 0)

234 
	`MPI_I»cv
((*)(
auxšfo
+
ršfo
[
i
]),„šfo[i+1]-ršfo[i], 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

237 
i
=0; i<
Å¬ts
; i++) {

238 
sšfo
[
i
+1]-sinfo[i] > 0)

239 
	`MPI_I£nd
((*)(
mšfo
+
sšfo
[
i
]), sšfo[i+1]-sšfo[i], 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

243 
i
=0; i<
Å¬ts
; i++) {

244 
ršfo
[
i
+1]-rinfo[i] > 0)

245 
	`MPI_Wa™
(
ù¾
->
¼eq
+
i
, &ù¾->
¡©us
);

247 
i
=0; i<
Å¬ts
; i++) {

248 
sšfo
[
i
+1]-sinfo[i] > 0)

249 
	`MPI_Wa™
(
ù¾
->
¤eq
+
i
, &ù¾->
¡©us
);

253 
i
=0; i<
nvtxs
; i++)

254 
šfo
[
i
] = 
auxšfo
[
ršfo
[
wh”e
[i]]++];

256 
	}
}

267 
	$FšdVtxP”m
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
³rm
, 
WÜkS·ûTy³
 *
w¥aû
)

269 
i
, 
ii
, 
j
, 
jj
, 
k
, 
nvtxs
, 
Å¬ts
;

270 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
mvtxdi¡
;

271 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
;

273 
Å¬ts
 = 
ù¾
->nparts;

275 
nvtxs
 = 
g¿ph
->nvtxs;

276 
xadj
 = 
g¿ph
->xadj;

277 
vwgt
 = 
g¿ph
->vwgt;

278 
adjncy
 = 
g¿ph
->adjncy;

279 
adjwgt
 = 
g¿ph
->adjwgt;

280 
wh”e
 = 
g¿ph
->where;

282 
mvtxdi¡
 = 
	`idxm®loc
(
Å¬ts
+1, "MoveGraph: mvtxdist");

285 
Íwgts
 = 
w¥aû
->
pv1
;

286 
gpwgts
 = 
w¥aû
->
pv2
;

289 
	`idx£t
(
Å¬ts
, 0, 
Íwgts
);

290 
i
=0; i<
nvtxs
; i++)

291 
Íwgts
[
wh”e
[
i
]]++;

293 
	`MPI_Sÿn
((*)
Íwgts
, (*)
gpwgts
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

294 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
mvtxdi¡
, 
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

296 
	`MAKECSR
(
i
, 
Å¬ts
, 
mvtxdi¡
);

298 
i
=0; i<
Å¬ts
; i++)

299 
gpwgts
[
i
] = 
mvtxdi¡
[i] + gpwgts[i] - 
Íwgts
[i];

301 
i
=0; i<
nvtxs
; i++)

302 
³rm
[
i
] = 
gpwgts
[
wh”e
[i]]++;

304 
	`ä“
(
mvtxdi¡
);

306 
	}
}

311 
	$CheckMG¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
)

313 
i
, 
j
, 
jj
, 
k
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
;

314 
idxty³
 *
xadj
, *
adjncy
, *
vtxdi¡
;

317 
nvtxs
 = 
g¿ph
->nvtxs;

318 
xadj
 = 
g¿ph
->xadj;

319 
adjncy
 = 
g¿ph
->adjncy;

320 
vtxdi¡
 = 
g¿ph
->vtxdist;

322 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

323 
Ï¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
+1];

325 
i
=0; i<
nvtxs
; i++) {

326 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

327 
	`ASSERT
(
ù¾
, 
fœ¡vtx
+
i
 !ğ
adjncy
[
j
]);

328 
adjncy
[
j
] >ğ
fœ¡vtx
 &&‡djncy[j] < 
Ï¡vtx
) {

329 
k
 = 
adjncy
[
j
]-
fœ¡vtx
;

330 
jj
=
xadj
[
k
]; jj<xadj[k+1]; jj++) {

331 
adjncy
[
jj
] =ğ
fœ¡vtx
+
i
)

334 
jj
 =ğ
xadj
[
k
+1])

335 
	`my´štf
(
ù¾
, "(%d %dèbuˆnÙ (%d %d)\n", 
fœ¡vtx
+
i
, 
k
, k, firstvtx+i);

339 
	}
}

	@node_refine.c

14 
	~<·rm‘is.h
>

16  
	#PackWeightWh”eInfo
(
a
, 
b
è((×)<<10è+ (b))

	)
17  
	#S–eùWh”e
(
a
è(×)%1024)

	)
18  
	#S–eùWeight
(
a
è((×)>>10))

	)
25 
	$Compu‹NodeP¬t™iÚP¬ams
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

27 
i
, 
j
, 
k
, 
l
, 
Å¬ts
, 
nvtxs
, 
n£p
, 
fœ¡vtx
, 
Ï¡vtx
;

28 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
, *
vwgt
, *
Íwgts
, *
gpwgts
, *
£pšd
;

29 
idxty³
 *
wh”e
, *
swh”e
, *
rwh”e
;

30 
NRInfoTy³
 *
ršfo
, *
myršfo
;

31 
me
, 
Ùh”
, 
Ùh”wgt
;

33 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayIn™Tmr
));

35 
nvtxs
 = 
g¿ph
->nvtxs;

36 
Å¬ts
 = 
ù¾
->nparts;

38 
vtxdi¡
 = 
g¿ph
->vtxdist;

39 
xadj
 = 
g¿ph
->xadj;

40 
Ïdjncy
 = 
g¿ph
->
adjncy
;

41 
adjwgt
 = 
g¿ph
->adjwgt;

42 
vwgt
 = 
g¿ph
->vwgt;

44 
wh”e
 = 
g¿ph
->where;

45 
ršfo
 = 
g¿ph
->
Äšfo
 = (
NRInfoTy³
 *)
	`GKm®loc
((NRInfoTy³)*
nvtxs
, "ComputeNodePartitionParams:„info");

46 
Íwgts
 = 
g¿ph
->Íwgt ğ
	`idxsm®loc
(2*
Å¬ts
, 0, "ComputePartitionParams:†pwgts");

47 
gpwgts
 = 
g¿ph
->gpwgt ğ
	`idxm®loc
(2*
Å¬ts
, "ComputePartitionParams: gpwgts");

48 
£pšd
 = 
g¿ph
->£pšd = 
	`idxm®loc
(
nvtxs
, "ComputePartitionParams: sepind");

50 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

51 
Ï¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
+1];

58 
swh”e
 = 
w¥aû
->
šdiûs
;

59 
rwh”e
 = 
wh”e
 + 
nvtxs
;

61 
i
=0; i<
nvtxs
; i++) {

62 
	`ASSERTP
(
ù¾
, 
wh”e
[
i
] >ğ0 && wh”e[i] < 2*
Å¬ts
, (ctrl, "%d\n", where[i]) );

63 
wh”e
[
i
] = 
	`PackWeightWh”eInfo
(
vwgt
[i], where[i]);

66 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
wh”e
, 
swh”e
, 
rwh”e
);

71 
n£p
=
i
=0; i<
nvtxs
; i++) {

72 
me
 = 
	`S–eùWh”e
(
wh”e
[
i
]);

73 
	`ASSERT
(
ù¾
, 
me
 >ğ0 && m< 2*
Å¬ts
);

74 
Íwgts
[
me
] +ğ
vwgt
[
i
];

76 
me
 >ğ
Å¬ts
) {

77 
£pšd
[
n£p
++] = 
i
;

78 
Íwgts
[2*
Å¬ts
-1] +ğ
vwgt
[
i
];

80 
myršfo
 = 
ršfo
+
i
;

81 
myršfo
->
edeg»es
[0] = myrinfo->edegrees[1] = 0;

83 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

84 
Ùh”
 = 
	`S–eùWh”e
(
wh”e
[
Ïdjncy
[
j
]]);

85 
Ùh”wgt
 = 
	`S–eùWeight
(
wh”e
[
Ïdjncy
[
j
]]);

86 
me
 !ğ
Ùh”
)

87 
myršfo
->
edeg»es
[
Ùh”
%2] +ğ
Ùh”wgt
;

91 
g¿ph
->
n£p
 =‚sep;

94 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 2*
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

95 
g¿ph
->
mšcut
 = 
gpwgts
[2*
Å¬ts
-1];

97 #ifdeà
XX


99 
ù¾
->
my³
 == 0) {

100 
i
=0; i<
Å¬ts
; i+=2)

101 
	`´štf
("[%5d %5d %5d] ", 
gpwgts
[
i
], gpwgts[i+1], gpwgts[
Å¬ts
+i]);

102 
	`´štf
("\n");

106 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayIn™Tmr
));

107 
	}
}

114 
	$KWayNodeRefše
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
, 
Åas£s
, 
ubäaùiÚ
)

116 
i
, 
ii
, 
j
, 
k
, 
l
, 
·ss
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
Ùh”Ï¡vtx
, 
c
, 
nmoves
,

117 
Æupd
, 
nsupd
, 
Âbrs
, 
nchªged
, 
n£p
;

118 
Åes
 = 
ù¾
->Åes, 
my³
 = cŒl->my³, 
Å¬ts
 = ctrl->nparts;

119 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
, *
vwgt
;

120 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
, *
£pšd
;

121 
idxty³
 *
³šd
, *
»cv±r
, *
£nd±r
;

122 
idxty³
 *
upd©e
, *
supd©e
, *
rupd©e
, *
³_upd©es
, *
hbË
, *
chªged
;

123 
idxty³
 *
badmšpwgt
, *
badmaxpwgt
;

124 
KeyV®ueTy³
 *
swchªges
, *
rwchªges
;

125 *
nupds_³
;

126 
NRInfoTy³
 *
ršfo
, *
myršfo
;

127 
äom
, 
me
, 
Ùh”
, 
Ùh”wgt
, 
Şdcut
;

129 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
KWayTmr
));

131 
nvtxs
 = 
g¿ph
->nvtxs;

133 
vtxdi¡
 = 
g¿ph
->vtxdist;

134 
xadj
 = 
g¿ph
->xadj;

135 
Ïdjncy
 = 
g¿ph
->
adjncy
;

136 
adjwgt
 = 
g¿ph
->adjwgt;

137 
vwgt
 = 
g¿ph
->vwgt;

139 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

140 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

142 
wh”e
 = 
g¿ph
->where;

143 
ršfo
 = 
g¿ph
->
Äšfo
;

144 
Íwgts
 = 
g¿ph
->lpwgts;

145 
gpwgts
 = 
g¿ph
->gpwgts;

147 
n£p
 = 
g¿ph
->nsep;

148 
£pšd
 = 
g¿ph
->sepind;

150 
Âbrs
 = 
g¿ph
->nnbrs;

151 
³šd
 = 
g¿ph
->peind;

152 
»cv±r
 = 
g¿ph
->recvptr;

153 
£nd±r
 = 
g¿ph
->sendptr;

155 
chªged
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: changed");

156 
rwchªges
 = 
w¥aû
->
·œs
;

157 
swchªges
 = 
rwchªges
 + 
»cv±r
[
Âbrs
];

159 
upd©e
 = 
	`idxm®loc
(
nvtxs
, "KWayRefine: update");

160 
supd©e
 = 
w¥aû
->
šdiûs
;

161 
rupd©e
 = 
supd©e
 + 
»cv±r
[
Âbrs
];

162 
nupds_³
 = 
	`im®loc
(
Åes
, "KWayRefine:‚upds_pe");

164 
hbË
 = 
	`idxsm®loc
(
nvtxs
+
g¿ph
->
Äecv
, 0, "KWayRefine:†htable");

166 
badmšpwgt
 = 
w¥aû
->
pv1
;

167 
badmaxpwgt
 = 
w¥aû
->
pv2
;

169 
i
=0; i<
Å¬ts
; i+=2) {

170 
badmšpwgt
[
i
] = badmšpwgt[i+1] = (1.0/
ubäaùiÚ
)*(
gpwgts
[i]+gpwgts[i+1])/2;

171 
badmaxpwgt
[
i
] = badmaxpwgt[i+1] = 
ubäaùiÚ
*(
gpwgts
[i]+gpwgts[i+1])/2;

174 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`PrštNodeB®ªûInfo
(ù¾, 
Å¬ts
, 
gpwgts
, 
badmšpwgt
, 
badmaxpwgt
, 1));

176 
·ss
=0;…ass<
Åas£s
;…ass++) {

177 
Şdcut
 = 
g¿ph
->
mšcut
;

179 
c
=0; c<2; c++) {

180 
i
=0; i<
Å¬ts
; i+=2) {

181 
badmšpwgt
[
i
] = badmšpwgt[i+1] = (1.0/
ubäaùiÚ
)*(
gpwgts
[i]+gpwgts[i+1])/2;

182 
badmaxpwgt
[
i
] = badmaxpwgt[i+1] = 
ubäaùiÚ
*(
gpwgts
[i]+gpwgts[i+1])/2;

185 
Æupd
 = 
nsupd
 = 
nmoves
 = 
nchªged
 = 0;

186 
ii
=0; ii<
n£p
; ii++) {

187 
i
 = 
£pšd
[
ii
];

188 
äom
 = 
	`S–eùWh”e
(
wh”e
[
i
]);

190 
	`ASSERT
(
ù¾
, 
äom
 >ğ
Å¬ts
);

193 
ršfo
[
i
].
edeg»es
[(
c
+1)%2] <ğ
vwgt
[i]) {

194 
Ùh”
 = 
äom
%
Å¬ts
+
c
;

196 
gpwgts
[
Ùh”
]+
vwgt
[
i
] > 
badmaxpwgt
[other]) {

202 
wh”e
[
i
] = 
	`PackWeightWh”eInfo
(
vwgt
[i], 
Ùh”
);

205 
£pšd
[
ii
--] = s•šd[--
n£p
];

209 
Íwgts
[
äom
] -ğ
vwgt
[
i
];

210 
Íwgts
[2*
Å¬ts
-1] -ğ
vwgt
[
i
];

211 
Íwgts
[
Ùh”
] +ğ
vwgt
[
i
];

212 
gpwgts
[
Ùh”
] +ğ
vwgt
[
i
];

218 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

219 
k
 = 
Ïdjncy
[
j
];

220 
hbË
[
k
] =ğ0 && 
	`S–eùWh”e
(
wh”e
[k]è!ğ
Ùh”
) {

221 
hbË
[
k
] = 1;

222 
k
<
nvtxs
)

223 
upd©e
[
Æupd
++] = 
k
;

225 
supd©e
[
nsupd
++] = 
k
;

228 
nmoves
++;

229 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

230 
chªged
[
nchªged
++] = 
i
;

237 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

240 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_RMOVEINFO
, 
	`½rštf
(ctrl, "\t[%d %d], [%d %d %d]\n",

241 
·ss
, 
c
, 
	`Glob®SESum
(
ù¾
, 
nmoves
), Glob®SESum(ù¾, 
nsupd
), Glob®SESum(ù¾, 
Æupd
)));

249 
i
=0; i<
Âbrs
; i++) {

250 
	`MPI_I»cv
((*)(
rupd©e
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

251 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

255 
i
=0; i<
nsupd
; i++) {

256 
hbË
[
supd©e
[
i
]] = 0;

257 
supd©e
[
i
] = 
g¿ph
->
im­
[supdate[i]];

259 
	`iidxsÜt
(
nsupd
, 
supd©e
);

261 
j
=
i
=0; i<
Âbrs
; i++) {

262 
Ùh”Ï¡vtx
 = 
vtxdi¡
[
³šd
[
i
]+1];

263 
k
=
j
; k<
nsupd
 && 
supd©e
[k] < 
Ùh”Ï¡vtx
; k++);

264 
	`MPI_I£nd
((*)(
supd©e
+
j
), 
k
-j, 
IDX_DATATYPE
, 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

265 
j
 = 
k
;

269 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

270 
i
=0; i<
Âbrs
; i++)

271 
	`MPI_G‘_couÁ
(
ù¾
->
¡©u£s
+
i
, 
IDX_DATATYPE
, 
nupds_³
+i);

272 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

278 
i
=0; i<
Âbrs
; i++) {

279 
³_upd©es
 = 
rupd©e
+
£nd±r
[
i
];

280 
j
=0; j<
nupds_³
[
i
]; j++) {

281 
k
 = 
³_upd©es
[
j
];

282 
hbË
[
k
-
fœ¡vtx
] == 0) {

283 
hbË
[
k
-
fœ¡vtx
] = 1;

284 
upd©e
[
Æupd
++] = 
k
-
fœ¡vtx
;

294 
nchªged
 = 0;

295 
ii
=0; ii<
Æupd
; ii++) {

296 
i
 = 
upd©e
[
ii
];

297 
me
 = 
	`S–eùWh”e
(
wh”e
[
i
]);

298 
me
 < 
Å¬ts
 && me%2 =ğ(
c
+1)%2) {

299 
Íwgts
[
me
] -ğ
vwgt
[
i
];

300 
wh”e
[
i
] = 
	`PackWeightWh”eInfo
(
vwgt
[i], 
Å¬ts
+
me
-(me%2));

301 
£pšd
[
n£p
++] = 
i
;

302 
g¿ph
->
³xadj
[
i
+1]-graph->pexadj[i] > 0)

303 
chªged
[
nchªged
++] = 
i
;

305 
Íwgts
[
	`S–eùWh”e
(
wh”e
[
i
])] +ğ
vwgt
[i];

306 
Íwgts
[2*
Å¬ts
-1] +ğ
vwgt
[
i
];

312 
	`CommChªgedIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
nchªged
, 
chªged
, 
wh”e
, 
swchªges
, 
rwchªges
, 
w¥aû
->
pv4
);

318 
ii
=0; ii<
Æupd
; ii++) {

319 
i
 = 
upd©e
[
ii
];

320 
	`ASSERT
(
ù¾
, 
hbË
[
i
] == 1);

322 
hbË
[
i
] = 0;

324 
me
 = 
	`S–eùWh”e
(
wh”e
[
i
]);

325 
me
 >ğ
Å¬ts
) {

328 
myršfo
 = 
ršfo
+
i
;

329 
myršfo
->
edeg»es
[0] = myrinfo->edegrees[1] = 0;

331 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

332 
Ùh”
 = 
	`S–eùWh”e
(
wh”e
[
Ïdjncy
[
j
]]);

333 
Ùh”wgt
 = 
	`S–eùWeight
(
wh”e
[
Ïdjncy
[
j
]]);

334 
me
 !ğ
Ùh”
)

335 
myršfo
->
edeg»es
[
Ùh”
%2] +ğ
Ùh”wgt
;

341 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 2*
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

342 
g¿ph
->
mšcut
 = 
gpwgts
[2*
Å¬ts
-1];

344 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_REFINEINFO
, 
	`PrštNodeB®ªûInfo
(ù¾, 
Å¬ts
, 
gpwgts
, 
badmšpwgt
, 
badmaxpwgt
, 0));

347 
g¿ph
->
mšcut
 =ğ
Şdcut
)

352 
i
=0; i<
nvtxs
+
g¿ph
->
Äecv
; i++)

353 
wh”e
[
i
] = 
	`S–eùWh”e
(where[i]);

355 
	`GKä“
(&
upd©e
, &
nupds_³
, &
hbË
, &
chªged
, 
LTERM
);

357 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
KWayTmr
));

358 
	}
}

367 
	$PrštNodeB®ªûInfo
(
CŒlTy³
 *
ù¾
, 
Å¬ts
, 
idxty³
 *
gpwgts
, idxty³ *
badmšpwgt
, idxty³ *
badmaxpwgt
, 
t™Ë
)

369 
i
, 
j
;

371 
ù¾
->
my³
 == 0) {

372 
t™Ë
)

373 
	`´štf
("K-way s•-»fšem’t: TÙ®S•: %d, ", 
gpwgts
[2*
Å¬ts
-1]);

375 
	`´štf
("\tTÙ®S•: %d, ", 
gpwgts
[2*
Å¬ts
-1]);

377 
i
=0; i<
Å¬ts
; i+=2)

378 
	`´štf
(" [%5d %5d %5d %5d %5d]", 
gpwgts
[
i
], gpwgts[i+1], gpwgts[
Å¬ts
+i], 
badmšpwgt
[i], 
badmaxpwgt
[i]);

379 
	`´štf
("\n");

381 
	`MPI_B¬r›r
(
ù¾
->
comm
);

382 
	}
}

	@ometis.c

15 
	~<·rm‘is.h
>

25 
	$P¬METIS_NodeND
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
,

26 *
İtiÚs
, 
idxty³
 *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

28 
i
, 
j
, 
k
, 
mš
, 
max
, 
Å¬ts
;

29 
Åes
, 
my³
;

30 
CŒlTy³
 
ù¾
;

31 
WÜkS·ûTy³
 
w¥aû
;

32 
G¿phTy³
 *
g¿ph
, *
mg¿ph
;

33 
idxty³
 *
mÜd”
;

35 
	`MPI_Comm_size
(*
comm
, &
Åes
);

36 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

38 !
	`i¥ow2
(
Åes
)) {

39 
my³
 == 0)

40 
	`´štf
("Error: The‚umber of…rocessors must be‡…ower of 2!\n");

44 *
numæag
 == 1)

45 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
Üd”
, 
Åes
, 
my³
, 1);

47 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

48 
ù¾
.
¬t
 = 
IPART_RB
;

49 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes);

51 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
NULL
, 
adjncy
, NULL, 0);

53 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

58 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

59 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

60 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

62 
Åes
 > 2)

63 
	`FldGlob®_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
, 0);

65 
	`Glob®_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

67 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

68 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

69 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

74 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

75 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
MoveTmr
));

77 
	`MALLOC_CHECK
(
NULL
);

78 
mg¿ph
 = 
	`MoveG¿ph
(&
ù¾
, 
g¿ph
, &
w¥aû
);

79 
	`MALLOC_CHECK
(
NULL
);

81 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

82 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
MoveTmr
));

87 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

88 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

90 
	`F»eWS·û
(&
w¥aû
);

91 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
mg¿ph
, &
w¥aû
);

93 
ù¾
.
¬t
 = 
İtiÚs
[
OPTION_IPART
];

94 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 
	`amax
(20*npes, 1000));

95 
mg¿ph
->
maxvwgt
 = 
g¿ph
->maxvwgt;

97 
mÜd”
 = 
	`idxm®loc
(
mg¿ph
->
nvtxs
, "PAROMETIS: morder");

98 
	`MuÉev–Ord”
(&
ù¾
, 
mg¿ph
, 
mÜd”
, 
sizes
, &
w¥aû
);

100 
	`MALLOC_CHECK
(
NULL
);

103 
	`ProjeùInfoBack
(&
ù¾
, 
g¿ph
, 
Üd”
, 
mÜd”
, &
w¥aû
);

105 
	`MALLOC_CHECK
(
NULL
);

107 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

108 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

109 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

110 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

112 
	`ä“
(
mÜd”
);

113 
	`F»eG¿ph
(
mg¿ph
);

114 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, 0);

115 
	`F»eWS·û
(&
w¥aû
);

116 
	`F»eCŒl
(&
ù¾
);

118 *
numæag
 == 1)

119 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
Üd”
, 
Åes
, 
my³
, 0);

121 
	`MALLOC_CHECK
(
NULL
);

122 
	}
}

130 
	$PAROMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

131 
idxty³
 *
Üd”
, idxty³ *
sizes
, *
İtiÚs
, 
MPI_Comm
 
comm
)

133 
numæag
, 
ÃwİtiÚs
[5];

135 
ÃwİtiÚs
[0] = 1;

136 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

137 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

138 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

140 
numæag
 = 
İtiÚs
[3];

142 
	`P¬METIS_NodeND
(
vtxdi¡
, 
xadj
, 
adjncy
, &
numæag
, 
ÃwİtiÚs
, 
Üd”
, 
sizes
, &
comm
);

144 
İtiÚs
[0] = -1;

146 
	}
}

	@order.c

15  
	#DEBUG_ORDER_


	)
17 
	~<·rm‘is.h
>

22 
	$MuÉev–Ord”
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
Üd”
, idxty³ *
sizes
, 
WÜkS·ûTy³
 *
w¥aû
)

24 
i
, 
j
, 
k
, 
Å¬ts
, 
nvtxs
, 
Åes
;

25 
idxty³
 *
³rm
, *
Ï¡node
, *
mÜd”
, *
pÜd”
;

26 
G¿phTy³
 *
mg¿ph
;

28 
Åes
 = 
ù¾
->npes;

29 
nvtxs
 = 
g¿ph
->nvtxs;

31 
³rm
 = 
	`idxm®loc
(
nvtxs
, "MultilevelOrder:…erm");

32 
Ï¡node
 = 
	`idxsm®loc
(4*
Åes
, -1, "MultilevelOrder:†astnode");

34 
i
=0; i<
nvtxs
; i++)

35 
³rm
[
i
] = i;

36 
Ï¡node
[2] = 
g¿ph
->
gnvtxs
;

38 
	`idx£t
(
nvtxs
, -1, 
Üd”
);

40 
sizes
[0] = 2*
Åes
-1;

42 
g¿ph
->
wh”e
 = 
	`idxsm®loc
(
nvtxs
, 0, "MultilevelOrder: graph->where");

44 
Å¬ts
=2;‚·¹s<=
ù¾
->
Åes
;‚parts*=2) {

45 
ù¾
->
Å¬ts
 =‚parts;

47 
	`Ord”_P¬t™iÚ
(
ù¾
, 
g¿ph
, 
w¥aû
);

49 
	`Lab–S•¬©Üs
(
ù¾
, 
g¿ph
, 
Ï¡node
, 
³rm
, 
Üd”
, 
sizes
, 
w¥aû
);

51 
	`Com·ùG¿ph
(
ù¾
, 
g¿ph
, 
³rm
, 
w¥aû
);

53 
ù¾
->
Cßr£nTo
 < 100*
Å¬ts
) {

54 
ù¾
->
Cßr£nTo
 = 1.5*ctrl->CoarsenTo;

55 
g¿ph
->
maxvwgt
 = 2*graph->maxvwgt/3;

57 
ù¾
->
Cßr£nTo
 = 
	`amš
(ù¾->Cßr£nTo, 
g¿ph
->
gnvtxs
-1);

63 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

64 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
MoveTmr
));

66 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

67 
mg¿ph
 = 
	`MoveG¿ph
(
ù¾
, 
g¿ph
, 
w¥aû
);

70 
i
=0; i<
Åes
; i++)

71 
sizes
[
i
] = 
mg¿ph
->
vtxdi¡
[i+1]-mgraph->vtxdist[i];

73 
pÜd”
 = 
	`idxm®loc
(
g¿ph
->
nvtxs
, "MultilevelOrder:…order");

74 
mÜd”
 = 
	`idxm®loc
(
mg¿ph
->
nvtxs
, "MultilevelOrder: morder");

76 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

77 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
MoveTmr
));

80 
	`LoÿlNDOrd”
(
ù¾
, 
mg¿ph
, 
mÜd”
, 
Ï¡node
[2*(ù¾->
Åes
+ù¾->
my³
)]-mg¿ph->
nvtxs
, 
w¥aû
);

83 
	`ProjeùInfoBack
(
ù¾
, 
g¿ph
, 
pÜd”
, 
mÜd”
, 
w¥aû
);

86 
i
=0; i<
g¿ph
->
nvtxs
; i++) {

87 
	`ASSERT
(
ù¾
, 
Üd”
[
³rm
[
i
]] == -1);

88 
Üd”
[
³rm
[
i
]] = 
pÜd”
[i];

91 
	`F»eG¿ph
(
mg¿ph
);

92 
	`GKä“
(&
³rm
, &
Ï¡node
, &
pÜd”
, &
mÜd”
, 
LTERM
);

95 
	}
}

103 
	$Lab–S•¬©Üs
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
Ï¡node
, idxty³ *
³rm
, idxty³ *
Üd”
, idxty³ *
sizes
, 
WÜkS·ûTy³
 *
w¥aû
)

105 
i
, 
j
, 
k
, 
nvtxs
, 
Å¬ts
, 
fœ¡Ïb–
, 
sid
;

106 
idxty³
 *
wh”e
, *
Íwgts
, *
gpwgts
, *
sizesÿn
;

108 
Å¬ts
 = 
ù¾
->nparts;

110 
nvtxs
 = 
g¿ph
->nvtxs;

111 
wh”e
 = 
g¿ph
->where;

112 
Íwgts
 = 
g¿ph
->lpwgts;

113 
gpwgts
 = 
g¿ph
->gpwgts;

117 
	`idx£t
(2*
Å¬ts
, 0, 
Íwgts
);

118 
i
=0; i<
nvtxs
; i++)

119 
Íwgts
[
wh”e
[
i
]]++;

121 
sizesÿn
 = 
	`idxm®loc
(2*
Å¬ts
, "LabelSeparators: sizescan");

124 
	`MPI_Sÿn
((*)
Íwgts
, (*)
sizesÿn
, 2*
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

125 
	`MPI_AÎ»duû
((*)
Íwgts
, (*)
gpwgts
, 2*
Å¬ts
, 
IDX_DATATYPE
, 
MPI_SUM
, 
ù¾
->
comm
);

127 #ifdeà
DEBUG_ORDER


128 
	`PrštVeùÜ
(
ù¾
, 2*
Å¬ts
, 0, 
Íwgts
, "Lpwgts");

129 
	`PrštVeùÜ
(
ù¾
, 2*
Å¬ts
, 0, 
sizesÿn
, "SizeScan");

130 
	`PrštVeùÜ
(
ù¾
, 2*
Å¬ts
, 0, 
Ï¡node
, "LastNode");

134 
i
=
Å¬ts
-2; i>=0; i-=2)

135 
sizes
[--sizes[0]] = 
gpwgts
[
Å¬ts
+
i
];

137 
ù¾
->
dbglvl
&
DBG_INFO
) {

138 
ù¾
->
my³
 == 0) {

139 
	`´štf
("SepSizes: ");

140 
i
=0; i<
Å¬ts
; i+=2)

141 
	`´štf
(" %d [%d %d]", 
gpwgts
[
Å¬ts
+
i
], gpwgts[i], gpwgts[i+1]);

142 
	`´štf
("\n");

144 
	`MPI_B¬r›r
(
ù¾
->
comm
);

147 
i
=0; i<2*
Å¬ts
; i++)

148 
sizesÿn
[
i
] -ğ
Íwgts
[i];

150 
i
=0; i<
nvtxs
; i++) {

151 
wh”e
[
i
] >ğ
Å¬ts
) {

152 
sid
 = 
wh”e
[
i
];

153 
sizesÿn
[
sid
]++;

154 
	`ASSERT
(
ù¾
, 
Üd”
[
³rm
[
i
]] == -1);

155 
Üd”
[
³rm
[
i
]] = 
Ï¡node
[
sid
] - 
sizesÿn
[sid];

161 
	`idxcİy
(2*
Å¬ts
, 
Ï¡node
, 
sizesÿn
);

162 
i
=0; i<
Å¬ts
; i+=2) {

163 
Ï¡node
[2*
Å¬ts
+2*
i
] = 
sizesÿn
[Å¬ts+i]-
gpwgts
[nparts+i]-gpwgts[i+1];

164 
Ï¡node
[2*
Å¬ts
+2*(
i
+1)] = 
sizesÿn
[Å¬ts+i]-
gpwgts
[nparts+i];

167 
	`ä“
(
sizesÿn
);

168 
	}
}

176 
	$Com·ùG¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
³rm
, 
WÜkS·ûTy³
 *
w¥aû
)

178 
i
, 
ii
, 
j
, 
k
, 
l
, 
nvtxs
, 
úvtxs
, 
cfœ¡vtx
, 
Å¬ts
, 
Åes
;

179 
idxty³
 *
xadj
, *
Ïdjncy
, *
adjwgt
, *
vtxdi¡
, *
wh”e
;

180 
idxty³
 *
cm­
, *
cvtxdi¡
, *
Ãwwh”e
;

182 
Å¬ts
 = 
ù¾
->nparts;

183 
Åes
 = 
ù¾
->npes;

185 
nvtxs
 = 
g¿ph
->nvtxs;

186 
xadj
 = 
g¿ph
->xadj;

187 
Ïdjncy
 = 
g¿ph
->
adjncy
;

188 
adjwgt
 = 
g¿ph
->adjwgt;

189 
wh”e
 = 
g¿ph
->where;

190 
cm­
 = 
g¿ph
->cmap;

192 
vtxdi¡
 = 
g¿ph
->vtxdist;

198 
cvtxdi¡
 = 
w¥aû
->
pv1
;

199 
úvtxs
 = 
cvtxdi¡
[
Åes
] = 
	`idxsum
(
Å¬ts
, 
g¿ph
->
Íwgts
);

201 
	`MPI_AÎg©h”
((*)(
cvtxdi¡
+
Åes
), 1, 
IDX_DATATYPE
, (*)cvtxdi¡, 1, IDX_DATATYPE, 
ù¾
->
comm
);

202 
	`MAKECSR
(
i
, 
Åes
, 
cvtxdi¡
);

204 #ifdeà
DEBUG_ORDER


205 
	`PrštVeùÜ
(
ù¾
, 
Åes
+1, 0, 
cvtxdi¡
, "cvtxdist");

212 
cfœ¡vtx
 = 
cvtxdi¡
[
ù¾
->
my³
];

215 
úvtxs
 = 0;

216 
i
=0; i<
nvtxs
; i++) {

217 
wh”e
[
i
] < 
Å¬ts
) {

218 
³rm
[
úvtxs
] =…”m[
i
];

219 
cm­
[
i
] = 
cfœ¡vtx
 + 
úvtxs
++;

223 
	`CommIÁ”çûD©a
(
ù¾
, 
g¿ph
, 
cm­
, 
w¥aû
->
šdiûs
, cm­+
nvtxs
);

229 
Ãwwh”e
 = 
	`idxm®loc
(
úvtxs
, "CompactGraph:‚ewwhere");

230 
úvtxs
 = 
l
 = 0;

231 
i
=0; i<
nvtxs
; i++) {

232 
wh”e
[
i
] < 
Å¬ts
) {

233 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

234 
wh”e
[
i
] =ğwh”e[
Ïdjncy
[
j
]]) {

235 
Ïdjncy
[
l
] = 
cm­
[Ïdjncy[
j
]];

236 
adjwgt
[
l
++] =‡djwgt[
j
];

238 #ifdeà
DEBUG_ORDER


239 
wh”e
[
Ïdjncy
[
j
]] < 
Å¬ts
)

240 
	`´štf
("Iˆ£em th©h£·¿tiÚ ha çed: %d %d\n", 
wh”e
[
i
], wh”e[
Ïdjncy
[
j
]]);

244 
xadj
[
úvtxs
] = 
l
;

245 
g¿ph
->
vwgt
[
úvtxs
] = g¿ph->vwgt[
i
];

246 
Ãwwh”e
[
úvtxs
] = 
wh”e
[
i
];

247 
úvtxs
++;

250 
i
=
úvtxs
; i>0; i--)

251 
xadj
[
i
] = xadj[i-1];

252 
xadj
[0] = 0;

254 
	`GKä“
(&
g¿ph
->
m©ch
, &g¿ph->
cm­
, &g¿ph->
Í”m
, &g¿ph->
wh”e
, &g¿ph->
Ïb–
, &g¿ph->
ršfo
,

255 &
g¿ph
->
Äšfo
, &g¿ph->
Íwgts
, &g¿ph->
gpwgts
, &g¿ph->
£pšd
, &g¿ph->
³šd
,

256 &
g¿ph
->
£nd±r
, &g¿ph->
£ndšd
, &g¿ph->
»cv±r
, &g¿ph->
»cvšd
,

257 &
g¿ph
->
im­
, &g¿ph->
¾’s
, &g¿ph->
¦’s
, &g¿ph->
rÿnd
, &g¿ph->
³xadj
,

258 &
g¿ph
->
³adjncy
, &g¿ph->
³adjloc
, 
LTERM
);

260 
g¿ph
->
nvtxs
 = 
úvtxs
;

261 
g¿ph
->
Ãdges
 = 
l
;

262 
g¿ph
->
gnvtxs
 = 
cvtxdi¡
[
Åes
];

263 
	`idxcİy
(
Åes
+1, 
cvtxdi¡
, 
g¿ph
->
vtxdi¡
);

264 
g¿ph
->
wh”e
 = 
Ãwwh”e
;

266 
	}
}

273 
	$LoÿlNDOrd”
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
idxty³
 *
Üd”
, 
fœ¡node
, 
WÜkS·ûTy³
 *
w¥aû
)

275 
i
, 
j
, 
k
, 
nvtxs
, 
fœ¡vtx
, 
Ï¡vtx
, 
nofsub
;

276 
idxty³
 *
xadj
, *
adjncy
;

277 
idxty³
 *
³rm
, *
”m
;

278 
numæag
=0, 
İtiÚs
[10];

280 
nvtxs
 = 
g¿ph
->nvtxs;

281 
xadj
 = 
g¿ph
->xadj;

282 
adjncy
 = 
g¿ph
->adjncy;

284 
fœ¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
];

285 
Ï¡vtx
 = 
g¿ph
->
vtxdi¡
[
ù¾
->
my³
+1];

288 
i
=0; i<
nvtxs
; i++) {

289 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

290 
	`ASSERT
(
ù¾
, 
adjncy
[
j
]>=
fœ¡vtx
 &&‡djncy[j]<
Ï¡vtx
);

291 
adjncy
[
j
] -ğ
fœ¡vtx
;

295 
	`ASSERT
(
ù¾
, 2*(
nvtxs
+5è< 
w¥aû
->
maxcÜe
);

297 
³rm
 = 
w¥aû
->
cÜe
;

298 
”m
 = 
³rm
 + 
nvtxs
 + 5;

300 
İtiÚs
[0] = 0;

301 
	`METIS_NodeND
(&
nvtxs
, 
xadj
, 
adjncy
, &
numæag
, 
İtiÚs
, 
³rm
, 
”m
);

303 
i
=0; i<
nvtxs
; i++) {

304 
	`ASSERT
(
ù¾
, 
”m
[
i
]>=0 && i³rm[i]<
nvtxs
);

305 
Üd”
[
i
] = 
fœ¡node
+
”m
[i];

308 
	}
}

	@parmetis.h

15 
	~<¡dio.h
>

16 
	~<¡dlib.h
>

17 
	~<m®loc.h
>

18 
	~<¡ršgs.h
>

19 
	~<¡ršg.h
>

20 
	~<ùy³.h
>

21 
	~<m©h.h
>

22 
	~<¡d¬g.h
>

23 
	~<time.h
>

24 
	~<mpi.h
>

26 #ifdeà
DMALLOC


27 
	~<dm®loc.h
>

30 
	~<»Çme.h
>

31 
	~<defs.h
>

32 
	~<¡ruù.h
>

33 
	~<defs.h
>

34 
	~<maüos.h
>

35 
	~<´Ùo.h
>

	@pqueue.c

15 
	~"·rm‘is.h
"

21 
	$PQueueIn™
(
PQueueTy³
 *
queue
, 
maxÂodes
)

23 
queue
->
Âodes
 = 0;

24 
queue
->
maxÂodes
 = maxnnodes;

26 
queue
->
”m
 = 
	`idxsm®loc
(
maxÂodes
, -1, "PQueueInit: iperm");

27 
queue
->
³rm
 = 
	`idxm®loc
(
maxÂodes
, "PQueueInit:…erm");

28 
queue
->
v®ues
 = 
	`idxm®loc
(
maxÂodes
, "PQueueInit: values");

30 
	}
}

36 
	$PQueueRe£t
(
PQueueTy³
 *
queue
)

38 
queue
->
Âodes
 = 0;

39 
	`idx£t
(
queue
->
maxÂodes
, -1, queue->
”m
);

40 
	}
}

46 
	$PQueueF»e
(
PQueueTy³
 *
queue
)

48 
queue
->
maxÂodes
 = 0;

50 
	`GKä“
(&
queue
->
”m
, &queue->
³rm
, &queue->
v®ues
, 
LTERM
);

51 
	}
}

57 
	$PQueueIn£¹
(
PQueueTy³
 *
queue
, 
node
, 
gaš
)

59 
i
, 
j
;

60 
idxty³
 *
”m
, *
³rm
, *
v®ues
;

62 
”m
 = 
queue
->iperm;

63 
³rm
 = 
queue
->perm;

64 
v®ues
 = 
queue
->values;

66 
	`ASSERTSP
(
”m
[
node
] == -1, ("\t%d %d\n",‚ode, iperm[node]));

68 
i
 = 
queue
->
Âodes
++;

69 
i
 > 0) {

70 
j
 = (
i
-1)/2;

71 
v®ues
[
j
] < 
gaš
) {

72 
v®ues
[
i
] = v®ues[
j
];

73 
³rm
[
i
] =…”m[
j
];

74 
”m
[
³rm
[
i
]] = i;

75 
i
 = 
j
;

80 
	`ASSERTS
(
i
 >= 0);

81 
v®ues
[
i
] = 
gaš
;

82 
³rm
[
i
] = 
node
;

83 
”m
[
node
] = 
i
;

85 
	`ASSERTS
(
	`PQueueCheck
(
queue
));

88 
	}
}

95 
	$PQueueUpd©e
(
PQueueTy³
 *
queue
, 
node
, 
Şdgaš
, 
Ãwgaš
)

97 
¢ode
, 
tmp
, 
i
, 
j
;

98 
idxty³
 *
”m
, *
³rm
, *
v®ues
;

100 
Şdgaš
 =ğ
Ãwgaš
)

103 
”m
 = 
queue
->iperm;

104 
³rm
 = 
queue
->perm;

105 
v®ues
 = 
queue
->values;

107 
i
 = 
”m
[
node
];

108 
	`ASSERTSP
(
³rm
[
i
] =ğ
node
, ("\t%d %d %d\n",‚ode, 
”m
[node],…erm[iperm[node]]));

110 
Şdgaš
 < 
Ãwgaš
) {

111 
i
 > 0) {

112 
j
 = (
i
-1)/2;

113 
v®ues
[
j
] < 
Ãwgaš
) {

114 
v®ues
[
i
] = v®ues[
j
];

115 
³rm
[
i
] =…”m[
j
];

116 
”m
[
³rm
[
i
]] = i;

117 
i
 = 
j
;

124 (
j
=2*
i
+1è< 
queue
->
Âodes
) {

125 
v®ues
[
j
] > 
Ãwgaš
) {

126 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > values[j])

127 
j
 = j+1;

128 
v®ues
[
i
] = v®ues[
j
];

129 
³rm
[
i
] =…”m[
j
];

130 
”m
[
³rm
[
i
]] = i;

131 
i
 = 
j
;

133 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > 
Ãwgaš
) {

134 
j
 = j+1;

135 
v®ues
[
i
] = v®ues[
j
];

136 
³rm
[
i
] =…”m[
j
];

137 
”m
[
³rm
[
i
]] = i;

138 
i
 = 
j
;

145 
v®ues
[
i
] = 
Ãwgaš
;

146 
³rm
[
i
] = 
node
;

147 
”m
[
node
] = 
i
;

149 
	`ASSERTS
(
	`PQueueCheck
(
queue
));

152 
	}
}

159 
	$PQueueD–‘e
(
PQueueTy³
 *
queue
, 
node
)

161 
¢ode
, 
tmp
, 
i
, 
j
, 
Ãwgaš
, 
Şdgaš
;

162 
idxty³
 *
”m
, *
³rm
, *
v®ues
;

164 
queue
->
Âodes
 == 0)

167 
”m
 = 
queue
->iperm;

168 
³rm
 = 
queue
->perm;

169 
v®ues
 = 
queue
->values;

171 
i
 = 
”m
[
node
];

172 
”m
[
node
] = -1;

173 
	`ASSERTS
(
³rm
[
i
] =ğ
node
);

175 
queue
->
Âodes
--;

176 
node
 = 
³rm
[
queue
->
Âodes
];

177 
Ãwgaš
 = 
v®ues
[
queue
->
Âodes
];

178 
Şdgaš
 = 
v®ues
[
i
];

180 
queue
->
Âodes
 > 0) {

181 
Şdgaš
 < 
Ãwgaš
) {

182 
i
 > 0) {

183 
j
 = (
i
-1)/2;

184 
v®ues
[
j
] < 
Ãwgaš
) {

185 
v®ues
[
i
] = v®ues[
j
];

186 
³rm
[
i
] =…”m[
j
];

187 
”m
[
³rm
[
i
]] = i;

188 
i
 = 
j
;

195 (
j
=2*
i
+1è< 
queue
->
Âodes
) {

196 
v®ues
[
j
] > 
Ãwgaš
) {

197 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > values[j])

198 
j
 = j+1;

199 
v®ues
[
i
] = v®ues[
j
];

200 
³rm
[
i
] =…”m[
j
];

201 
”m
[
³rm
[
i
]] = i;

202 
i
 = 
j
;

204 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > 
Ãwgaš
) {

205 
j
 = j+1;

206 
v®ues
[
i
] = v®ues[
j
];

207 
³rm
[
i
] =…”m[
j
];

208 
”m
[
³rm
[
i
]] = i;

209 
i
 = 
j
;

216 
v®ues
[
i
] = 
Ãwgaš
;

217 
³rm
[
i
] = 
node
;

218 
”m
[
node
] = 
i
;

221 
	`ASSERTS
(
	`PQueueCheck
(
queue
));

224 
	}
}

231 
	$PQueueG‘Max
(
PQueueTy³
 *
queue
)

233 
vtx
, 
i
, 
j
, 
gaš
, 
node
;

234 
idxty³
 *
”m
, *
³rm
, *
v®ues
;

236 
queue
->
Âodes
 == 0)

239 
”m
 = 
queue
->iperm;

240 
³rm
 = 
queue
->perm;

241 
v®ues
 = 
queue
->values;

243 
queue
->
Âodes
--;

244 
vtx
 = 
³rm
[0];

245 
”m
[
vtx
] = -1;

247 (
i
 = 
queue
->
Âodes
) > 0) {

248 
gaš
 = 
v®ues
[
i
];

249 
node
 = 
³rm
[
i
];

250 
i
 = 0;

251 (
j
=2*
i
+1è< 
queue
->
Âodes
) {

252 
v®ues
[
j
] > 
gaš
) {

253 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > values[j])

254 
j
 = j+1;

255 
v®ues
[
i
] = v®ues[
j
];

256 
³rm
[
i
] =…”m[
j
];

257 
”m
[
³rm
[
i
]] = i;

258 
i
 = 
j
;

260 
j
+1 < 
queue
->
Âodes
 && 
v®ues
[j+1] > 
gaš
) {

261 
j
 = j+1;

262 
v®ues
[
i
] = v®ues[
j
];

263 
³rm
[
i
] =…”m[
j
];

264 
”m
[
³rm
[
i
]] = i;

265 
i
 = 
j
;

271 
v®ues
[
i
] = 
gaš
;

272 
³rm
[
i
] = 
node
;

273 
”m
[
node
] = 
i
;

276 
	`ASSERTS
(
	`PQueueCheck
(
queue
));

278  
vtx
;

279 
	}
}

285 
	$PQueueS“Max
(
PQueueTy³
 *
queue
)

288 
queue
->
Âodes
 == 0)

291  
queue
->
³rm
[0];

293 
	}
}

300 
	$PQueueCheck
(
PQueueTy³
 *
queue
)

302 
i
, 
j
, 
Âodes
;

304 
Âodes
 = 
queue
->nnodes;

305 
Âodes
 == 0)

308 
	`ASSERTSP
(
queue
->
”m
[queue->
³rm
[0]] == 0, ("%d %d\n", queue->perm[0], queue->iperm[queue->perm[0]]));

310 
i
=1; i<
Âodes
; i++) {

312 
	`ASSERTSP
(
queue
->
”m
[queue->
³rm
[
i
]] =ği, ("%d %d %d %d\n", 
Âodes
, i, queue->perm[i], queue->iperm[queue->perm[i]]));

313 
	`ASSERTS
(
queue
->
v®ues
[
i
] <= queue->values[(i-1)/2]);

315 
i
=1; i<
Âodes
; i++)

316 
	`ASSERTS
(
queue
->
v®ues
[
i
] <= queue->values[0]);

319 
	}
}

	@proto.h

16 
P¬METIS_P¬tKway
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

17 
PARKMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

21 
P¬METIS_RefšeKway
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

22 
PARRMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

26 
P¬METIS_R•¬tLDiffusiÚ
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

27 
P¬METIS_R•¬tGDiffusiÚ
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

28 
PARUAMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

29 
PARDAMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

33 
P¬METIS_R•¬tRem­
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

34 
P¬METIS_R•¬tMLRem­
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

38 
P¬METIS_NodeND
(
idxty³
 *, idxty³ *, idxty³ *, *, *, idxty³ *, idxty³ *, 
MPI_Comm
 *);

39 
PAROMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

43 
P¬METIS_P¬tG¿phGeomKway
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

44 
P¬METIS_P¬tG¿phGeomRefše
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, *, *, *, *, *, *, idxty³ *, 
MPI_Comm
 *);

45 
P¬METIS_P¬tG¿phGeom
(
idxty³
 *, *, *, idxty³ *, 
MPI_Comm
 *);

46 
PARGKMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, , *, idxty³ *, *, 
MPI_Comm
);

47 
PARGRMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, idxty³ *, , *, idxty³ *, *, 
MPI_Comm
);

48 
PARGMETIS
(
idxty³
 *, idxty³ *, idxty³ *, , *, idxty³ *, *, 
MPI_Comm
);

52 
P¬METIS_S”ŸlNodeND
(
idxty³
 *, idxty³ *, idxty³ *, *, *, idxty³ *, idxty³ *, 
MPI_Comm
 *);

53 
G¿phTy³
 *
As£mbËEÁœeG¿ph
(
CŒlTy³
 *, 
idxty³
 *, idxtype *, idxtype *);

57 
PrštVeùÜ
(
CŒlTy³
 *, , , 
idxty³
 *, *);

58 
PrštVeùÜ2
(
CŒlTy³
 *, , , 
idxty³
 *, *);

59 
PrštPaœs
(
CŒlTy³
 *, , 
KeyV®ueTy³
 *, *);

60 
PrštG¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *);

61 
PrštG¿ph2
(
CŒlTy³
 *, 
G¿phTy³
 *);

62 
PrštS‘UpInfo
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
);

63 
PrštT¿nsã»dG¿phs
(
CŒlTy³
 *, , 
idxty³
 *, idxtype *, idxtype *, idxtype *, idxtype *);

64 
Wr™eM‘isG¿ph
(, 
idxty³
 *, idxtype *, idxtype *, idxtype *);

68 
CommIÁ”çûD©a
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, idxtype *, idxtype *);

69 
CommChªgedIÁ”çûD©a
(
CŒlTy³
 *, 
G¿phTy³
 *, , 
idxty³
 *, idxty³ *, 
KeyV®ueTy³
 *, KeyValueType *, idxtype *);

70 
Glob®SEMax
(
CŒlTy³
 *, );

71 
Glob®SEMaxDoubË
(
CŒlTy³
 *, );

72 
Glob®SEMš
(
CŒlTy³
 *, );

73 
Glob®SESum
(
CŒlTy³
 *, );

77 
R—dG¿ph
(
G¿phTy³
 *, *, 
MPI_Comm
);

78 
R—dG¿ph3
(
G¿phTy³
 *, 
MPI_Comm
);

79 
R—dP¬t™iÚedG¿ph
(
G¿phTy³
 *, *, 
MPI_Comm
);

80 *
R—dCoÜdš©es
(
G¿phTy³
 *, *, , 
MPI_Comm
);

81 
Wr™ePVeùÜ
(*, 
idxty³
 *, idxty³ *, 
MPI_Comm
);

85 
”»x™
(*,...);

86 
my´štf
(
CŒlTy³
 *, *
f_¡r
,...);

87 
½rštf
(
CŒlTy³
 *, *
f_¡r
,...);

88 #iâdeà
DMALLOC


89 *
im®loc
(, *);

90 
idxty³
 *
idxm®loc
(, *);

91 *
fm®loc
(, *);

92 *
ism®loc
(, , *);

93 
idxty³
 *
idxsm®loc
(, idxtype, *);

94 *
GKm®loc
(, *);

97 *
i£t
(
n
, 
v®
, *
x
);

98 
idxty³
 * 
idx£t
(
n
, idxty³ 
v®
, idxty³ *
x
);

99 
idxamax
(
n
, 
idxty³
 *
x
);

100 
idxamš
(
n
, 
idxty³
 *
x
);

101 
idxasum
(
n
, 
idxty³
 *
x
);

102 
¢Üm2
(, *);

103 
sdÙ
(
n
, *, *);

104 
§xpy
(, , *, *);

105 
ikeyv®sÜt_Üg
(, 
KeyV®ueTy³
 *);

106 
IncKeyV®ueCmp
(const *, const *);

107 
dkeyv®sÜt
(, 
KeyV®ueTy³
 *);

108 
DecKeyV®ueCmp
(const *, const *);

109 
BS—rch
(, 
idxty³
 *, );

110 
RªdomP”mu‹
(, 
idxty³
 *, );

111 
Fa¡RªdomP”mu‹
(, 
idxty³
 *, );

112 
d¿nd48
();

113 
¤ªd48
();

114 
i¥ow2
();

115 
log2
();

116 
Buck‘SÜtKeysDec
(, , 
idxty³
 *, idxtype *);

120 
iidxsÜt
(, 
idxty³
 *);

121 
ištsÜt
(, *);

122 
ikeysÜt
(, 
KeyV®ueTy³
 *);

123 
ikeyv®sÜt
(, 
KeyV®ueTy³
 *);

127 
P»AÎoÿ‹MemÜy
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

128 
F»eWS·û
(
WÜkS·ûTy³
 *);

129 
F»eCŒl
(
CŒlTy³
 *);

130 
G¿phTy³
 *
C»©eG¿ph
();

131 
In™G¿ph
(
G¿phTy³
 *);

132 
F»eG¿ph
(
G¿phTy³
 *);

133 
F»eIn™ŸlG¿phAndRem­
(
G¿phTy³
 *, );

137 
G¿phTy³
 *
S‘UpG¿ph
(
CŒlTy³
 *, 
idxty³
 *, idxtype *, idxtype *, idxtype *, idxtype *, );

138 
S‘UpCŒl
(
CŒlTy³
 *
ù¾
, , *, 
MPI_Comm
);

139 
ChªgeNumb”šg
(
idxty³
 *, idxtype *, idxtype *, idxtype *, , , );

140 
G¿phRªdomP”mu‹
(
G¿phTy³
 *);

141 
Compu‹MoveSti¡ics
(
CŒlTy³
 *, 
G¿phTy³
 *, *, *, *);

145 
In™Tim”s
(
CŒlTy³
 *);

146 
PrštTimšgInfo
(
CŒlTy³
 *);

147 
PrštTim”
(
CŒlTy³
 *, 
tim”
, *);

151 
S‘Up
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

152 
Home_PE
(, , 
idxty³
 *, );

156 
Glob®M©ch_HEM
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

157 
Glob®_C»©eCßr£G¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, );

158 
LoÿlM©ch_HEM
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

159 
Loÿl_C»©eCßr£G¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, );

163 
ProjeùP¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

164 
Compu‹P¬t™iÚP¬ams
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

165 
Compu‹Cut
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

166 
KWayRefše
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

167 
KWayRefšeCËª
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

168 
KWayAd­tiveRefšeCËª
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

169 
KWayAd­tiveRefšeCËª2
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

173 
Compu‹NodeP¬t™iÚP¬ams0
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

174 
Compu‹NodeP¬t™iÚP¬ams
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

175 
KWayNodeRefše0
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

176 
KWayNodeRefše
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

177 
KWayNodeRefše2
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, , );

178 
PrštNodeB®ªûInfo
(
CŒlTy³
 *, , 
idxty³
 *, idxtype *, idxtype *, );

182 
In™P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, );

183 
In™P¬t™iÚ_RB
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, );

184 
G¿phTy³
 *
As£mbËG¿ph
(
CŒlTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *, );

185 
K“pP¬t
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, 
idxty³
 *, );

189 
In™MuÉi£ùiÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

190 
G¿phTy³
 *
As£mbËMuÉi£ùedG¿ph
(
CŒlTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *);

194 
Glob®_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

195 
FldGlob®_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *, );

196 
Refše_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

197 
Ad­tiveUndœeùed_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

198 
Ad­tiveDœeùed_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

199 
Ad­tiveReM­_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

200 
Ord”_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

201 
Sm®ËrSubG¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *);

205 
EnoughMemÜy
(
CŒlTy³
 *, , );

206 
G¿phTy³
 *
FŞdG¿ph
(
CŒlTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *);

207 
UnFŞdG¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *);

212 
G¿phTy³
 *
MoveG¿ph
(
CŒlTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *);

213 
ProjeùInfoBack
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, idxty³ *, 
WÜkS·ûTy³
 *);

214 
FšdVtxP”m
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, 
WÜkS·ûTy³
 *);

218 
In™DiffusiÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, 
WÜkS·ûTy³
 *);

219 
G¿phTy³
 *
As£mbËAd­tiveG¿ph
(
CŒlTy³
 *, G¿phTy³ *, 
WÜkS·ûTy³
 *);

223 
Te¡P¬M‘is
(*, 
MPI_Comm
);

224 
Te¡Ad­tiveMETIS
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, *, , 
MPI_Comm
);

225 
Ad­tG¿ph
(
G¿phTy³
 *, , 
MPI_Comm
);

226 
Ad­tG¿ph2
(
G¿phTy³
 *, , 
MPI_Comm
);

227 
Compu‹R—lCut
(
idxty³
 *, idxty³ *, *, 
MPI_Comm
);

228 
Compu‹R—lCut2
(
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, *, 
MPI_Comm
);

229 
Te¡MoveG¿ph
(
G¿phTy³
 *, G¿phTy³ *, 
idxty³
 *, 
MPI_Comm
);

233 
MuÉev–Ord”
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, idxty³ *, 
WÜkS·ûTy³
 *);

234 
Lab–S•¬©Üs
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, idxty³ *, idxty³ *, idxty³ *, 
WÜkS·ûTy³
 *);

235 
Com·ùG¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, 
WÜkS·ûTy³
 *);

236 
LoÿlOrd”
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, , 
WÜkS·ûTy³
 *);

237 
LoÿlNDOrd”
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *, , 
WÜkS·ûTy³
 *);

241 
PQueueIn™
(
PQueueTy³
 *, );

242 
PQueueRe£t
(
PQueueTy³
 *);

243 
PQueueF»e
(
PQueueTy³
 *);

244 
PQueueIn£¹
(
PQueueTy³
 *, , );

245 
PQueueUpd©e
(
PQueueTy³
 *, , , );

246 
PQueueD–‘e
(
PQueueTy³
 *, );

247 
PQueueG‘Max
(
PQueueTy³
 *);

248 
PQueueS“Max
(
PQueueTy³
 *);

249 
PQueueCheck
(
PQueueTy³
 *);

253 
CoÜdš©e_P¬t™iÚ
(
CŒlTy³
 *, 
G¿phTy³
 *, , *, , 
WÜkS·ûTy³
 *);

254 
P¬tSÜt
(
CŒlTy³
 *, 
G¿phTy³
 *, 
KeyV®ueTy³
 *, 
WÜkS·ûTy³
 *);

258 
ReM­G¿ph
(
CŒlTy³
 *, 
G¿phTy³
 *, , 
WÜkS·ûTy³
 *);

259 
Compu‹TÙ®VReM­
(
CŒlTy³
 *, 
idxty³
 *, idxty³ *, 
WÜkS·ûTy³
 *);

260 
Compu‹TÙ®VReM­1
(
CŒlTy³
 *, 
idxty³
 *, idxty³ *, 
WÜkS·ûTy³
 *);

264 
KWay_WaveäÚtDiffu£r
(
CŒlTy³
 *, 
G¿phTy³
 *, , );

265 
SÜ‹dKWay_WD
(
CŒlTy³
 *, 
G¿phTy³
 *, );

266 
SŞveDiffusiÚEqu©iÚ
(
G¿phTy³
 *, 
M©rixTy³
 *, , *, 
idxty³
 *, idxtype *);

267 
S‘UpL­Ïû
(
G¿phTy³
 *, , , 
idxty³
 *, idxtype *, *, idxtype *);

268 
CÚjG¿d
(, 
idxty³
 *, idxtype *, *, *, *, , *);

269 
mvMuÉ
(, 
idxty³
 *, idxtype *, *, *, *);

273 
Compu‹S”ŸlEdgeCut
(
G¿phTy³
 *);

274 
Compu‹S”ŸlTÙ®V
(
G¿phTy³
 *, 
idxty³
 *);

275 
Compu‹P¬®ËlTÙ®V
(
CŒlTy³
 *, 
G¿phTy³
 *, 
idxty³
 *);

276 
Compu‹P¬®ËlB®ªû
(
CŒlTy³
 *, 
G¿phTy³
 *);

277 
G»©”Thª
(const *, const *);

280 
R—dTe¡G¿ph
(
G¿phTy³
 *, *, 
MPI_Comm
);

281 *
R—dTe¡CoÜdš©es
(
G¿phTy³
 *, *, , 
MPI_Comm
);

282 
R—dM‘isG¿ph
(*, *, 
idxty³
 **, idxtype **);

	@pspases.c

14 
	~<·rm‘is.h
>

20 
	$P¬METIS_S”ŸlNodeND
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
, *
numæag
,

21 *
İtiÚs
, 
idxty³
 *
Üd”
, idxty³ *
sizes
, 
MPI_Comm
 *
comm
)

23 
i
, 
j
, 
k
, 
Åes
, 
my³
, 
£rİtiÚs
[10];

24 
CŒlTy³
 
ù¾
;

25 
G¿phTy³
 *
ag¿ph
;

26 
idxty³
 *
³rm
=
NULL
, *
”m
=NULL;

27 *
£ndcouÁ
, *
di¥ls
;

29 
	`MPI_Comm_size
(*
comm
, &
Åes
);

30 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

32 !
	`i¥ow2
(
Åes
)) {

33 
my³
 == 0)

34 
	`´štf
("Error: The‚umber of…rocessors must be‡…ower of 2!\n");

38 *
numæag
 == 1)

39 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
Üd”
, 
Åes
, 
my³
, 1);

41 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

43 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

44 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

45 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

47 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

48 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
MoveTmr
));

50 
ag¿ph
 = 
	`As£mbËEÁœeG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
adjncy
);

52 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

53 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
MoveTmr
));

56 
my³
 == 0) {

57 
³rm
 = 
	`idxm®loc
(
ag¿ph
->
nvtxs
, "PAROMETISS:…erm");

58 
”m
 = 
	`idxm®loc
(
ag¿ph
->
nvtxs
, "PAROMETISS: iperm");

60 
£rİtiÚs
[0] = 0;

71 
	`METIS_NodeNDP
(
ag¿ph
->
nvtxs
,‡g¿ph->
xadj
,‡g¿ph->
adjncy
, 
Åes
, 
£rİtiÚs
, 
³rm
, 
”m
, 
sizes
);

74 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

75 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
MoveTmr
));

78 
	`MPI_Bÿ¡
((*)
sizes
, 2*
Åes
, 
IDX_DATATYPE
, 0, 
ù¾
.
gcomm
);

81 
£ndcouÁ
 = 
	`im®loc
(
Åes
, "PAROMETISS: sendcount");

82 
di¥ls
 = 
	`im®loc
(
Åes
, "PAROMETISS: displs");

83 
i
=0; i<
Åes
; i++) {

84 
£ndcouÁ
[
i
] = 
vtxdi¡
[i+1]-vtxdist[i];

85 
di¥ls
[
i
] = 
vtxdi¡
[i];

88 
	`MPI_Sÿ‰”v
((*)
”m
, 
£ndcouÁ
, 
di¥ls
, 
IDX_DATATYPE
, (*)
Üd”
, 
vtxdi¡
[
my³
+1]-vtxdi¡[my³], IDX_DATATYPE, 0, 
ù¾
.
gcomm
);

90 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

91 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
MoveTmr
));

93 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

94 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

95 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

96 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

98 
	`GKä“
(&
ag¿ph
->
xadj
, &ag¿ph->
adjncy
, &
³rm
, &
”m
, &
£ndcouÁ
, &
di¥ls
, 
LTERM
);

99 
	`ä“
(
ag¿ph
);

100 
	`F»eCŒl
(&
ù¾
);

102 *
numæag
 == 1)

103 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
Üd”
, 
Åes
, 
my³
, 0);

105 
	}
}

112 
G¿phTy³
 *
	$As£mbËEÁœeG¿ph
(
CŒlTy³
 *
ù¾
, 
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
)

114 
i
, 
j
, 
k
, 
l
, 
gnvtxs
, 
nvtxs
, 
gÃdges
, 
Ãdges
;

115 
Åes
 = 
ù¾
->Åes, 
my³
 = ctrl->mype;

116 
idxty³
 *
axadj
, *
¯djncy
;

117 *
»cvcouÁs
, *
di¥ls
;

118 
G¿phTy³
 *
ag¿ph
;

120 
gnvtxs
 = 
vtxdi¡
[
Åes
];

121 
nvtxs
 = 
vtxdi¡
[
my³
+1]-vtxdist[mype];

122 
Ãdges
 = 
xadj
[
nvtxs
];

124 
»cvcouÁs
 = 
	`im®loc
(
Åes
, "AssembleGraph:„ecvcounts");

125 
di¥ls
 = 
	`im®loc
(
Åes
+1, "AssembleGraph: displs");

128 
i
=0; i<
nvtxs
; i++)

129 
xadj
[
i
] = xadj[i+1]-xadj[i];

131 
axadj
 = 
	`idxm®loc
(
gnvtxs
+1, "AssembleEntireGraph:‡xadj");

133 
i
=0; i<
Åes
; i++) {

134 
»cvcouÁs
[
i
] = 
vtxdi¡
[i+1]-vtxdist[i];

135 
di¥ls
[
i
] = 
vtxdi¡
[i];

139 
	`MPI_G©h”v
((*)
xadj
, 
nvtxs
, 
IDX_DATATYPE
, 
axadj
, 
»cvcouÁs
, 
di¥ls
, IDX_DATATYPE, 0, 
ù¾
->
comm
);

141 
	`MAKECSR
(
i
, 
nvtxs
, 
xadj
);

142 
	`MAKECSR
(
i
, 
gnvtxs
, 
axadj
);

146 
	`MPI_AÎg©h”
((*)(&
Ãdges
), 1, 
MPI_INT
, (*)
»cvcouÁs
, 1, MPI_INT, 
ù¾
->
comm
);

148 
di¥ls
[0] = 0;

149 
i
=1; i<
Åes
+1; i++)

150 
di¥ls
[
i
] = di¥ls[i-1] + 
»cvcouÁs
[i-1];

151 
gÃdges
 = 
di¥ls
[
Åes
];

153 
¯djncy
 = 
	`idxm®loc
(
gÃdges
, "AssembleEntireGraph:‡adjncy");

156 
	`MPI_G©h”v
((*)
adjncy
, 
Ãdges
, 
IDX_DATATYPE
, 
¯djncy
, 
»cvcouÁs
, 
di¥ls
, IDX_DATATYPE, 0, 
ù¾
->
comm
);

160 
ag¿ph
 = 
	`C»©eG¿ph
();

161 
ag¿ph
->
nvtxs
 = 
gnvtxs
;

162 
ag¿ph
->
Ãdges
 = 
gÃdges
;

163 
ag¿ph
->
xadj
 = 
axadj
;

164 
ag¿ph
->
adjncy
 = 
¯djncy
;

166  
ag¿ph
;

167 
	}
}

	@remap.c

14 
	~<·rm‘is.h
>

20 
	$ReM­G¿ph
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
¹y³
, 
WÜkS·ûTy³
 *
w¥aû
)

22 
i
, 
j
, 
nvtxs
;

23 
idxty³
 *
wh”e
, *
vsize
, *
m­
, *
Íwgts
;

25 
ù¾
->
Åes
 !ğù¾->
Å¬ts
)

28 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

29 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
Rem­Tmr
));

31 
nvtxs
 = 
g¿ph
->nvtxs;

32 
wh”e
 = 
g¿ph
->where;

33 
vsize
 = 
g¿ph
->vsize;

35 
m­
 = 
w¥aû
->
pv1
;

36 
Íwgts
 = 
	`idx£t
(
ù¾
->
Åes
, 0, 
w¥aû
->
pv2
);

38 
vsize
 =ğ
NULL
) {

39 
i
=0; i<
nvtxs
; i++)

40 
Íwgts
[
wh”e
[
i
]]++;

43 
i
=0; i<
nvtxs
; i++)

44 
Íwgts
[
wh”e
[
i
]] +ğ
vsize
[i];

47 
	`Compu‹TÙ®VReM­1
(
ù¾
, 
Íwgts
, 
m­
, 
w¥aû
);

49 
i
=0; i<
nvtxs
; i++)

50 
wh”e
[
i
] = 
m­
[where[i]];

52 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

53 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
Rem­Tmr
));

54 
	}
}

61 
	$Compu‹TÙ®VReM­
(
CŒlTy³
 *
ù¾
, 
idxty³
 *
Íwgts
, idxty³ *
m­
, 
WÜkS·ûTy³
 *
w¥aû
)

63 
i
, 
j
, 
k
, 
Åes
, 
my³
, 
nkeys
, 
nm­³d
, 
n§ved
;

64 
idxty³
 *
mvm©
, *
rowm­
;

65 
KeyV®ueTy³
 *
Üd”
;

67 
my³
 = 
ù¾
->mype;

68 
Åes
 = 
ù¾
->npes;

71 
my³
 == 0)

72 
mvm©
 = 
	`idxm®loc
(
Åes
*npes, "ComputeTotalVReMap: mvmat");

75 
	`MPI_G©h”
(
Íwgts
, 
Åes
, 
IDX_DATATYPE
, 
mvm©
,‚³s, IDX_DATATYPE, 0, 
ù¾
->
comm
);

77 
my³
 == 0) {

78 
Üd”
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*
Åes
*npes, "ComputeTotalVReMap: order");

80 
nkeys
=
i
=0; i<
Åes
; i++) {

81 
j
=0; j<
Åes
; j++) {

82 
mvm©
[
i
*
Åes
+
j
] > 0) {

83 
Üd”
[
nkeys
].
key
 = -
mvm©
[
i
*
Åes
+
j
];

84 
Üd”
[
nkeys
++].
v®
 = 
i
*
Åes
+
j
;

90 
	`ikeysÜt
(
nkeys
, 
Üd”
);

92 
rowm­
 = 
	`idx£t
(
Åes
, -1, 
w¥aû
->
pv3
);

93 
	`idx£t
(
Åes
, -1, 
m­
);

95 
n§ved
 = 0;

96 
nm­³d
=
k
=0; k<
nkeys
 &&‚m­³d<
Åes
; k++) {

97 
i
 = 
Üd”
[
k
].
v®
/
Åes
;

98 
j
 = 
Üd”
[
k
].
v®
%
Åes
;

99 
m­
[
j
] =ğ-1 && 
rowm­
[
i
] == -1) {

100 
m­
[
j
] = 
i
;

101 
rowm­
[
i
] = 
j
;

102 
nm­³d
++;

103 
n§ved
 +ğ(-
Üd”
[
k
].
key
 - 
mvm©
[
i
*
Åes
+i]);

108 
nm­³d
 < 
Åes
) {

109 
i
=
j
=0; j<
Åes
 && 
nm­³d
<npes; j++) {

110 
m­
[
j
] == -1) {

111 ; 
i
<
Åes
; i++) {

112 
rowm­
[
i
] == -1) {

113 
m­
[
j
] = 
i
;

114 
rowm­
[
i
] = 
j
;

115 
nm­³d
++;

116 
n§ved
 +ğ- 
mvm©
[
i
*
Åes
+i];

124 
	`ASSERT
(
ù¾
, 
nm­³d
 =ğ
Åes
);

126 
n§ved
 <= 0) {

127 
i
=0; i<
Åes
; i++)

128 
m­
[
i
] = i;

131 
	`GKä“
(&
mvm©
, &
Üd”
, 
LTERM
);

134 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_INFO
, 
	`½rštf
(ù¾, "Savšg äom„em­pšg: %d\n", 
n§ved
));

137 
	`MPI_Bÿ¡
(
m­
, 
Åes
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

139 
	}
}

147 
	$Compu‹TÙ®VReM­1
(
CŒlTy³
 *
ù¾
, 
idxty³
 *
Íwgts
, idxty³ *
m­
, 
WÜkS·ûTy³
 *
w¥aû
)

149 
i
, 
j
, 
k
, 
Åes
, 
my³
, 
nkeys
, 
nm­³d
, 
n§ved
;

150 
idxty³
 
mywgt
, *
rowm­
, *
Ügwgt
;

151 
KeyV®ueTy³
 *
Üd”
;

152 
MPI_Stus
 
¡©us
;

154 
my³
 = 
ù¾
->mype;

155 
Åes
 = 
ù¾
->npes;

158 
my³
 == 0) {

159 
Üd”
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*
Åes
*npes, "ComputeTotalVReMap: order");

160 
Ügwgt
 = 
	`idxm®loc
(
Åes
, "ComputeTotalVReMap1: orgwgt");

163 
Üd”
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*
Åes
, "ComputeTotalVReMap: order");

165 
nkeys
=0, 
i
=0; i<
Åes
; i++) {

166 
Íwgts
[
i
] > 0) {

167 
Üd”
[
nkeys
].
key
 = -
Íwgts
[
i
];

168 
Üd”
[
nkeys
++].
v®
 = 
my³
*
Åes
+
i
;

173 
mywgt
 = 
Íwgts
[
my³
];

174 
	`MPI_G©h”
(&
mywgt
, 1, 
IDX_DATATYPE
, 
Ügwgt
, 1, IDX_DATATYPE, 0, 
ù¾
->
comm
);

177 
my³
 != 0) {

178 
	`MPI_S’d
((*)
Üd”
, 2*
nkeys
, 
IDX_DATATYPE
, 0, 1, 
ù¾
->
comm
);

181 
i
=1; i<
Åes
; i++) {

182 
	`MPI_Recv
((*)(
Üd”
+
nkeys
), 2*
Åes
, 
IDX_DATATYPE
, 
i
, 1, 
ù¾
->
comm
, &
¡©us
);

183 
	`MPI_G‘_couÁ
(&
¡©us
, 
IDX_DATATYPE
, &
k
);

184 
nkeys
 +ğ
k
/2;

188 
	`ikeysÜt
(
nkeys
, 
Üd”
);

190 
rowm­
 = 
	`idx£t
(
Åes
, -1, 
w¥aû
->
pv3
);

191 
	`idx£t
(
Åes
, -1, 
m­
);

193 
n§ved
 = 0;

194 
nm­³d
=
k
=0; k<
nkeys
 &&‚m­³d<
Åes
; k++) {

195 
i
 = 
Üd”
[
k
].
v®
/
Åes
;

196 
j
 = 
Üd”
[
k
].
v®
%
Åes
;

197 
m­
[
j
] =ğ-1 && 
rowm­
[
i
] == -1) {

198 
m­
[
j
] = 
i
;

199 
rowm­
[
i
] = 
j
;

200 
nm­³d
++;

201 
n§ved
 +ğ(-
Üd”
[
k
].
key
 - 
Ügwgt
[
i
]);

206 
nm­³d
 < 
Åes
) {

207 
i
=
j
=0; j<
Åes
 && 
nm­³d
<npes; j++) {

208 
m­
[
j
] == -1) {

209 ; 
i
<
Åes
; i++) {

210 
rowm­
[
i
] == -1) {

211 
m­
[
j
] = 
i
;

212 
rowm­
[
i
] = 
j
;

213 
nm­³d
++;

214 
n§ved
 +ğ- 
Ügwgt
[
i
];

222 
	`ASSERT
(
ù¾
, 
nm­³d
 =ğ
Åes
);

224 
n§ved
 <= 0) {

225 
i
=0; i<
Åes
; i++)

226 
m­
[
i
] = i;

229 
	`ä“
(
Ügwgt
);

232 
	`GKä“
(&
Üd”
, 
LTERM
);

234 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_INFO
, 
	`½rštf
(ù¾, "Savšg äom„em­pšg: %d\n", 
n§ved
));

237 
	`MPI_Bÿ¡
(
m­
, 
Åes
, 
IDX_DATATYPE
, 0, 
ù¾
->
comm
);

239 
	}
}

	@rename.h

16  
	#Glob®M©ch_HEM
 
Glob®M©ch_HEM__


	)
17  
	#Glob®_C»©eCßr£G¿ph
 
Glob®_C»©eCßr£G¿ph__


	)
18  
	#LoÿlM©ch_HEM
 
LoÿlM©ch_HEM__


	)
19  
	#Loÿl_C»©eCßr£G¿ph
 
Loÿl_C»©eCßr£G¿ph__


	)
22  
	#CommIÁ”çûD©a
 
CommIÁ”çûD©a__


	)
23  
	#CommChªgedIÁ”çûD©a
 
CommChªgedIÁ”çûD©a__


	)
24  
	#Glob®SEMax
 
Glob®SEMax__


	)
25  
	#Glob®SEMaxDoubË
 
Glob®SEMaxDoubË__


	)
26  
	#Glob®SEMš
 
Glob®SEMš__


	)
27  
	#Glob®SESum
 
Glob®SESum__


	)
30  
	#PrštVeùÜ
 
PrštVeùÜ__


	)
31  
	#PrštVeùÜ2
 
PrštVeùÜ2__


	)
32  
	#PrštPaœs
 
PrštPaœs__


	)
33  
	#PrštG¿ph
 
PrštG¿ph__


	)
34  
	#PrštG¿ph2
 
PrštG¿ph2__


	)
35  
	#PrštS‘UpInfo
 
PrštS‘UpInfo__


	)
36  
	#PrštT¿nsã»dG¿phs
 
PrštT¿nsã»dG¿phs__


	)
41  
	#Compu‹S”ŸlEdgeCut
 
Compu‹S”ŸlEdgeCut__


	)
42  
	#Compu‹S”ŸlTÙ®V
 
Compu‹S”ŸlTÙ®V__


	)
43  
	#Compu‹P¬®ËlTÙ®V
 
Compu‹P¬®ËlTÙ®V__


	)
44  
	#Compu‹P¬®ËlB®ªû
 
Compu‹P¬®ËlB®ªû__


	)
45  
	#G»©”Thª
 
G»©”Thª__


	)
46  
	#CÚjG¿d
 
CÚjG¿d__


	)
47  
	#mvMuÉ
 
mvMuÉ__


	)
50  
	#Glob®_P¬t™iÚ
 
Glob®_P¬t™iÚ__


	)
51  
	#FldGlob®_P¬t™iÚ
 
FldGlob®_P¬t™iÚ__


	)
52  
	#Refše_P¬t™iÚ
 
Refše_P¬t™iÚ__


	)
53  
	#Ad­tiveUndœeùed_P¬t™iÚ
 
Ad­tiveUndœeùed_P¬t™iÚ__


	)
54  
	#Ad­tiveDœeùed_P¬t™iÚ
 
Ad­tiveDœeùed_P¬t™iÚ__


	)
55  
	#Ad­tiveReM­_P¬t™iÚ
 
Ad­tiveReM­_P¬t™iÚ__


	)
56  
	#Ord”_P¬t™iÚ
 
Ord”_P¬t™iÚ__


	)
57  
	#Sm®ËrSubG¿ph
 
Sm®ËrSubG¿ph__


	)
60  
	#ProjeùP¬t™iÚ
 
ProjeùP¬t™iÚ__


	)
61  
	#Compu‹P¬t™iÚP¬ams
 
Compu‹P¬t™iÚP¬ams__


	)
62  
	#Compu‹Cut
 
Compu‹Cut__


	)
63  
	#KWayRefše
 
KWayRefše__


	)
64  
	#KWayRefšeCËª
 
KWayRefšeCËª__


	)
65  
	#KWayAd­tiveRefšeCËª
 
KWayAd­tiveRefšeCËª__


	)
66  
	#KWayAd­tiveRefšeCËª2
 
KWayAd­tiveRefšeCËª2__


	)
69  
	#EnoughMemÜy
 
EnoughMemÜy__


	)
70  
	#FŞdG¿ph
 
FŞdG¿ph__


	)
71  
	#UnFŞdG¿ph
 
UnFŞdG¿ph__


	)
78  
	#S‘UpG¿ph
 
S‘UpG¿ph__


	)
79  
	#S‘UpCŒl
 
S‘UpCŒl__


	)
80  
	#ChªgeNumb”šg
 
ChªgeNumb”šg__


	)
81  
	#G¿phRªdomP”mu‹
 
G¿phRªdomP”mu‹__


	)
82  
	#Compu‹MoveSti¡ics
 
Compu‹MoveSti¡ics__


	)
85  
	#iidxsÜt
 
iidxsÜt__


	)
88  
	#ištsÜt
 
ištsÜt__


	)
91  
	#ikeysÜt
 
ikeysÜt__


	)
94  
	#ikeyv®sÜt
 
ikeyv®sÜt__


	)
97  
	#In™DiffusiÚ
 
In™DiffusiÚ__


	)
98  
	#As£mbËAd­tiveG¿ph
 
As£mbËAd­tiveG¿ph__


	)
102  
	#In™MuÉi£ùiÚ
 
In™MuÉi£ùiÚ__


	)
103  
	#As£mbËMuÉi£ùedG¿ph
 
As£mbËMuÉi£ùedG¿ph__


	)
106  
	#In™P¬t™iÚ
 
In™P¬t™iÚ__


	)
107  
	#In™P¬t™iÚ_RB
 
In™P¬t™iÚ_RB__


	)
108  
	#As£mbËG¿ph
 
As£mbËG¿ph__


	)
109  
	#K“pP¬t
 
K“pP¬t__


	)
114  
	#P»AÎoÿ‹MemÜy
 
P»AÎoÿ‹MemÜy__


	)
115  
	#F»eWS·û
 
F»eWS·û__


	)
116  
	#F»eCŒl
 
F»eCŒl__


	)
117  
	#C»©eG¿ph
 
C»©eG¿ph__


	)
118  
	#In™G¿ph
 
In™G¿ph__


	)
119  
	#F»eG¿ph
 
F»eG¿ph__


	)
120  
	#F»eG¿phCÚ‹Á
 
F»eG¿phCÚ‹Á__


	)
121  
	#F»eIn™ŸlG¿phAndRem­
 
F»eIn™ŸlG¿phAndRem­__


	)
124  
	#MoveG¿ph
 
MoveG¿ph__


	)
125  
	#ProjeùInfoBack
 
ProjeùInfoBack__


	)
126  
	#FšdVtxP”m
 
FšdVtxP”m__


	)
130  
	#Compu‹NodeP¬t™iÚP¬ams
 
Compu‹NodeP¬t™iÚP¬ams__


	)
131  
	#KWayNodeRefše
 
KWayNodeRefše__


	)
132  
	#PrštNodeB®ªûInfo
 
PrštNodeB®ªûInfo__


	)
137  
	#MuÉev–Ord”
 
MuÉev–Ord”__


	)
138  
	#Lab–S•¬©Üs
 
Lab–S•¬©Üs__


	)
139  
	#Com·ùG¿ph
 
Com·ùG¿ph__


	)
140  
	#LoÿlNDOrd”
 
LoÿlNDOrd”__


	)
143  
	#PQueueIn™
 
PQueueIn™__


	)
144  
	#PQueueRe£t
 
PQueueRe£t__


	)
145  
	#PQueueF»e
 
PQueueF»e__


	)
146  
	#PQueueIn£¹
 
PQueueIn£¹__


	)
147  
	#PQueueUpd©e
 
PQueueUpd©e__


	)
148  
	#PQueueD–‘e
 
PQueueD–‘e__


	)
149  
	#PQueueG‘Max
 
PQueueG‘Max__


	)
150  
	#PQueueS“Max
 
PQueueS“Max__


	)
151  
	#PQueueCheck
 
PQueueCheck__


	)
154  
	#As£mbËEÁœeG¿ph
 
As£mbËEÁœeG¿ph__


	)
157  
	#ReM­G¿ph
 
ReM­G¿ph__


	)
158  
	#Compu‹TÙ®VReM­
 
Compu‹TÙ®VReM­__


	)
159  
	#Compu‹TÙ®VReM­1
 
Compu‹TÙ®VReM­1__


	)
167  
	#S‘Up
 
S‘Up__


	)
170  
	#In™Tim”s
 
In™Tim”s__


	)
171  
	#PrštTimšgInfo
 
PrštTimšgInfo__


	)
172  
	#PrštTim”
 
PrštTim”__


	)
175  
	#”»x™
 
”»x™__


	)
176  
	#my´štf
 
my´štf__


	)
177  
	#½rštf
 
½rštf__


	)
178 #iâdeà
DMALLOC


179  
	#im®loc
 
im®loc__


	)
180  
	#idxm®loc
 
idxm®loc__


	)
181  
	#fm®loc
 
fm®loc__


	)
182  
	#ism®loc
 
ism®loc__


	)
183  
	#idxsm®loc
 
idxsm®loc__


	)
184  
	#GKm®loc
 
GKm®loc__


	)
186  
	#GKä“
 
GKä“__


	)
187  
	#i£t
 
i£t__


	)
188  
	#idx£t
 
idx£t__


	)
189  
	#idxamax
 
idxamax__


	)
190  
	#idxamš
 
idxamš__


	)
191  
	#idxasum
 
idxasum__


	)
192  
	#ch¬sum
 
ch¬sum__


	)
193  
	#isum
 
isum__


	)
194  
	#¢Üm2
 
¢Üm2__


	)
195  
	#sdÙ
 
sdÙ__


	)
196  
	#§xpy
 
§xpy__


	)
197  
	#ikeyv®sÜt_Üg
 
ikeyv®sÜt_Üg__


	)
198  
	#IncKeyV®ueCmp
 
IncKeyV®ueCmp__


	)
199  
	#dkeyv®sÜt
 
dkeyv®sÜt__


	)
200  
	#DecKeyV®ueCmp
 
DecKeyV®ueCmp__


	)
201  
	#BS—rch
 
BS—rch__


	)
202  
	#RªdomP”mu‹
 
RªdomP”mu‹__


	)
203  
	#Fa¡RªdomP”mu‹
 
Fa¡RªdomP”mu‹__


	)
204  
	#i¥ow2
 
i¥ow2__


	)
205  
	#log2
 
log2_


	)
208  
	#KWay_WaveäÚtDiffu£r
 
KWay_WaveäÚtDiffu£r__


	)
209  
	#SÜ‹dKWay_WD
 
SÜ‹dKWay_WD__


	)
210  
	#SŞveDiffusiÚEqu©iÚ
 
SŞveDiffusiÚEqu©iÚ__


	)
213  
	#CoÜdš©e_P¬t™iÚ
 
CoÜdš©e_P¬t™iÚ__


	)
214  
	#P¬tSÜt
 
P¬tSÜt__


	)
	@rmetis.c

15 
	~<·rm‘is.h
>

22 
	$P¬METIS_RefšeKway
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

23 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
,

24 *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

26 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

27 
Åes
, 
my³
;

28 
CŒlTy³
 
ù¾
;

29 
WÜkS·ûTy³
 
w¥aû
;

30 
G¿phTy³
 *
g¿ph
;

32 
	`MPI_Comm_size
(*
comm
, &
Åes
);

33 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

35 
Åes
 == 1) {

36 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

37 *
edgecut
 = 0;

41 *
numæag
 == 1)

42 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

44 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

45 
ù¾
.
Cßr£nTo
 = 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes);

47 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

49 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

51 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

52 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

53 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

55 
	`Refše_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

57 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

58 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

60 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

61 *
edgecut
 = 
g¿ph
->
mšcut
;

63 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

64 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

65 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

66 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f [%d %d %d]\n",

67 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

68 
g¿ph
->
gpwgts
[
	`idxamax
(
Åes
, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

70 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

71 
	`F»eWS·û
(&
w¥aû
);

72 
	`F»eCŒl
(&
ù¾
);

74 *
numæag
 == 1)

75 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

77 
	}
}

88 
	$PARRMETIS
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
vwgt
, idxty³ *
adjncy
, idxty³ *
adjwgt
,

89 
idxty³
 *
·¹
, *
İtiÚs
, 
MPI_Comm
 
comm
)

91 
wgtæag
, 
numæag
, 
edgecut
, 
ÃwİtiÚs
[5];

93 
ÃwİtiÚs
[0] = 1;

94 
ÃwİtiÚs
[
OPTION_IPART
] = 
İtiÚs
[2];

95 
ÃwİtiÚs
[
OPTION_FOLDF
] = 
İtiÚs
[1];

96 
ÃwİtiÚs
[
OPTION_DBGLVL
] = 
İtiÚs
[4];

98 
numæag
 = 
İtiÚs
[3];

99 
wgtæag
 = (
vwgt
 =ğ
NULL
 ? 0 : 2è+ (
adjwgt
 == NULL ? 0 : 1);

101 
	`P¬METIS_RefšeKway
(
vtxdi¡
, 
xadj
, 
adjncy
, 
vwgt
, 
adjwgt
, &
wgtæag
, &
numæag
,

102 
ÃwİtiÚs
, &
edgecut
, 
·¹
, &
comm
);

104 
İtiÚs
[0] = 
edgecut
;

106 
	}
}

	@scremap.c

15 
	~<·rm‘is.h
>

24 
	$P¬METIS_R•¬tRem­
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

25 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
,

26 *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

28 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

29 
Åes
, 
my³
;

30 
CŒlTy³
 
ù¾
;

31 
WÜkS·ûTy³
 
w¥aû
;

32 
G¿phTy³
 *
g¿ph
;

33 
nmoved
, 
maxš
, 
maxout
;

35 
	`MPI_Comm_size
(*
comm
, &
Åes
);

36 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

39 
Åes
 == 1) {

40 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

41 *
edgecut
 = 0;

45 *
numæag
 == 1)

46 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

48 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

49 
ù¾
.
Cßr£nTo
 = 
	`amax
(1000, 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes));

50 
ù¾
.
¬t
 = 
IPART_RB
;

52 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

53 
g¿ph
->
vsize
 = 
	`idxsm®loc
(g¿ph->
nvtxs
, 1, "Par_KMetis: vsize");

55 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

57 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

58 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

59 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

61 
	`Glob®_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

62 
	`ReM­G¿ph
(&
ù¾
, 
g¿ph
, 0, &
w¥aû
);

64 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

65 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

67 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

68 *
edgecut
 = 
g¿ph
->
mšcut
;

70 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

71 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

72 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`Compu‹MoveSti¡ics
(&ù¾, 
g¿ph
, &
nmoved
, &
maxš
, &
maxout
));

73 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

74 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f \nNMoved: %d %d %d %d [%d %d %d %d]\n",

75 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

76 
nmoved
, 
maxš
, 
maxout
, maxš+maxout, 
Åes
, 
g¿ph
->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

78 
	`GKä“
(&
g¿ph
->
vsize
, 
LTERM
);

79 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

80 
	`F»eWS·û
(&
w¥aû
);

81 
	`F»eCŒl
(&
ù¾
);

83 *
numæag
 == 1)

84 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

86 
	}
}

95 
	$P¬METIS_R•¬tMLRem­
(
idxty³
 *
vtxdi¡
, idxty³ *
xadj
, idxty³ *
adjncy
,

96 
idxty³
 *
vwgt
, idxty³ *
adjwgt
, *
wgtæag
, *
numæag
, *
İtiÚs
,

97 *
edgecut
, 
idxty³
 *
·¹
, 
MPI_Comm
 *
comm
)

99 
i
, 
j
, 
k
, 
mš
, 
max
, 
tvwgt
;

100 
Åes
, 
my³
;

101 
CŒlTy³
 
ù¾
;

102 
WÜkS·ûTy³
 
w¥aû
;

103 
G¿phTy³
 *
g¿ph
;

104 
nmoved
, 
maxš
, 
maxout
;

106 
	`MPI_Comm_size
(*
comm
, &
Åes
);

107 
	`MPI_Comm_¿nk
(*
comm
, &
my³
);

110 
Åes
 == 1) {

111 
	`idx£t
(
vtxdi¡
[1], 0, 
·¹
);

112 *
edgecut
 = 0;

116 *
numæag
 == 1)

117 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 1);

119 
	`S‘UpCŒl
(&
ù¾
, 
Åes
, 
İtiÚs
, *
comm
);

120 
ù¾
.
¬t
 = 
IPART_RB
;

121 
ù¾
.
Cßr£nTo
 = 
	`amax
(1000, 
	`amš
(
vtxdi¡
[
Åes
]+1, 25*npes));

123 
g¿ph
 = 
	`S‘UpG¿ph
(&
ù¾
, 
vtxdi¡
, 
xadj
, 
vwgt
, 
adjncy
, 
adjwgt
, *
wgtæag
);

124 
g¿ph
->
vsize
 = 
	`idxsm®loc
(g¿ph->
nvtxs
, 1, "Par_KMetis: vsize");

126 
	`P»AÎoÿ‹MemÜy
(&
ù¾
, 
g¿ph
, &
w¥aû
);

128 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`In™Tim”s
(&ctrl));

129 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

130 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾.
TÙ®Tmr
));

132 
	`Ad­tiveReM­_P¬t™iÚ
(&
ù¾
, 
g¿ph
, &
w¥aû
);

133 
	`ReM­G¿ph
(&
ù¾
, 
g¿ph
, 0, &
w¥aû
);

135 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

136 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾.
TÙ®Tmr
));

138 
	`idxcİy
(
g¿ph
->
nvtxs
, g¿ph->
wh”e
, 
·¹
);

139 *
edgecut
 = 
g¿ph
->
mšcut
;

141 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`PrštTimšgInfo
(&ctrl));

142 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾.
gcomm
));

143 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`Compu‹MoveSti¡ics
(&ù¾, 
g¿ph
, &
nmoved
, &
maxš
, &
maxout
));

144 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
tvwgt
 = 
	`Glob®SESum
(&ù¾, 
	`idxsum
(
g¿ph
->
nvtxs
, g¿ph->
vwgt
)));

145 
	`IFSET
(
ù¾
.
dbglvl
, 
DBG_INFO
, 
	`½rštf
(&ctrl, "Final Cut: %6d \tBalance: %6.3f \nNMoved: %d %d %d %d [%d %d %d %d]\n",

146 
g¿ph
->
mšcut
, 1.0*
Åes
*g¿ph->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)]/(1.0*
tvwgt
),

147 
nmoved
, 
maxš
, 
maxout
, maxš+maxout, 
Åes
, 
g¿ph
->
gpwgts
[
	`idxamax
Ò³s, g¿ph->gpwgts)], 
tvwgt
, g¿ph->
gnvtxs
));

149 
	`GKä“
(&
g¿ph
->
vsize
, 
LTERM
);

150 
	`F»eIn™ŸlG¿phAndRem­
(
g¿ph
, *
wgtæag
);

151 
	`F»eWS·û
(&
w¥aû
);

152 
	`F»eCŒl
(&
ù¾
);

154 *
numæag
 == 1)

155 
	`ChªgeNumb”šg
(
vtxdi¡
, 
xadj
, 
adjncy
, 
·¹
, 
Åes
, 
my³
, 0);

157 
	}
}

	@setup.c

17 
	~<·rm‘is.h
>

19  
	#DEBUG_SETUPINFO_


	)
25 
	$S‘Up
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
WÜkS·ûTy³
 *
w¥aû
)

27 
i
, 
j
, 
k
, 
l
, 
i¦oÿl
, 
³num
, 
gnvtxs
, 
nvtxs
, 
Æoÿl
, 
fœ¡vtx
, 
Ï¡vtx
, 
n£nd
, 
Äecv
, 
Âbrs
, 
Çdj
;

28 
Åes
=
ù¾
->Åes, 
my³
=ctrl->mype;

29 
idxty³
 *
vtxdi¡
, *
xadj
, *
adjncy
;

30 
idxty³
 *
³šd
, *
»cv±r
, *
»cvšd
, *
£nd±r
, *
£ndšd
;

31 
idxty³
 *
»ûive
, *
³m­
, *
im­
, *
Í”m
;

32 
idxty³
 *
³xadj
, *
³adjncy
, *
³adjloc
, *
¡¬tsšd
;

33 
KeyV®ueTy³
 *
»cv»que¡s
, *
£nd»que¡s
, *
adj·œs
;

35 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`MPI_B¬r›r
(ù¾->
comm
));

36 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡¬‰im”
(ù¾->
S‘upTmr
));

38 
gnvtxs
 = 
g¿ph
->gnvtxs;

39 
nvtxs
 = 
g¿ph
->nvtxs;

40 
vtxdi¡
 = 
g¿ph
->vtxdist;

41 
xadj
 = 
g¿ph
->xadj;

42 
adjncy
 = 
g¿ph
->adjncy;

44 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

45 
Ï¡vtx
 = 
vtxdi¡
[
my³
+1];

47 
³m­
 = 
w¥aû
->
pv1
;

48 
	`idx£t
(
Åes
, -1, 
³m­
);

50 
Í”m
 = 
g¿ph
->Í”m = 
	`idxm®loc
(
nvtxs
, "SetUp: graph->lperm");

51 
i
=0; i<
nvtxs
; i++)

52 
Í”m
[
i
] = i;

57 
»ûive
 = 
w¥aû
->
šdiûs
;

58 
adj·œs
 = 
w¥aû
->
·œs
;

60 
Æoÿl
 = 
Çdj
 = 
i
 = 0; i<
nvtxs
; i++) {

61 
i¦oÿl
 = 1;

62 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

63 
k
 = 
adjncy
[
j
];

64 
k
 >ğ
fœ¡vtx
 && k < 
Ï¡vtx
) {

65 
adjncy
[
j
] = 
k
-
fœ¡vtx
;

68 
adj·œs
[
Çdj
].
key
 = 
k
;

69 
adj·œs
[
Çdj
++].
v®
 = 
j
;

70 
i¦oÿl
 = 0;

72 
i¦oÿl
) {

73 
Í”m
[
i
] =†³rm[
Æoÿl
];

74 
Í”m
[
Æoÿl
++] = 
i
;

79 
	`ikeysÜt
(
Çdj
, 
adj·œs
);

80 
adj·œs
[
Çdj
].
key
 = 
gnvtxs
+1;

81 
Äecv
=
i
=0; i<
Çdj
; i++) {

82 
adjncy
[
adj·œs
[
i
].
v®
] = 
nvtxs
+
Äecv
;

83 
adj·œs
[
i
].
key
 !=‡djpairs[i+1].key)

84 
»ûive
[
Äecv
++] = 
adj·œs
[
i
].
key
;

89 
³šd
 = 
g¿ph
->³šd = 
	`idxm®loc
(
Åes
, "SetUp:…eind");

90 
»cv±r
 = 
g¿ph
->»cv±¸ğ
	`idxm®loc
(
Åes
+1, "SetUp:„ecvptr");

91 
»cvšd
 = 
g¿ph
->»cvšd = 
	`idxm®loc
(
Äecv
, "SetUp:„ecvind");

94 
	`idxcİy
(
Äecv
, 
»ûive
, 
»cvšd
);

96 
i
 = 
Âbrs
 = 
»cv±r
[0] = 0;

97 
³num
=0;…’um<
Åes
;…enum++) {

98 
j
=
i
; j<
Äecv
; j++) {

99 
»cvšd
[
j
] >ğ
vtxdi¡
[
³num
+1])

102 
j
 > 
i
) {

103 
³šd
[
Âbrs
] = 
³num
;

104 
»cv±r
[++
Âbrs
] = 
j
;

105 
i
 = 
j
;

114 
»cv»que¡s
 = 
w¥aû
->
³·œs1
;

115 
£nd»que¡s
 = 
w¥aû
->
³·œs2
;

116 
i
=0; i<
Åes
; i++)

117 
»cv»que¡s
[
i
].
key
 = 0;

118 
i
=0; i<
Âbrs
; i++) {

119 
»cv»que¡s
[
³šd
[
i
]].
key
 = 
»cv±r
[i+1]-recvptr[i];

120 
»cv»que¡s
[
³šd
[
i
]].
v®
 = 
nvtxs
+
»cv±r
[i];

122 
	`MPI_AÎtßÎ
((*)
»cv»que¡s
, 2, 
IDX_DATATYPE
, (*)
£nd»que¡s
, 2, IDX_DATATYPE, 
ù¾
->
comm
);

125 
£nd±r
 = 
g¿ph
->£nd±¸ğ
	`idxm®loc
(
Åes
+1, "SetUp: sendptr");

126 
¡¬tsšd
 = 
w¥aû
->
pv2
;

127 
j
=
i
=0; i<
Åes
; i++) {

128 
£nd»que¡s
[
i
].
key
 > 0) {

129 
£nd±r
[
j
] = 
£nd»que¡s
[
i
].
key
;

130 
¡¬tsšd
[
j
] = 
£nd»que¡s
[
i
].
v®
;

131 
j
++;

134 
	`ASSERT
(
ù¾
, 
Âbrs
 =ğ
j
);

135 
	`MAKECSR
(
i
, 
j
, 
£nd±r
);

137 
n£nd
 = 
£nd±r
[
Âbrs
];

138 
£ndšd
 = 
g¿ph
->£ndšd = 
	`idxm®loc
(
n£nd
, "SetUp: sendind");

142 
i
=0; i<
Âbrs
; i++) {

143 
	`MPI_I»cv
((*)(
£ndšd
+
£nd±r
[
i
]), s’d±r[i+1]-£nd±r[i], 
IDX_DATATYPE
,

144 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

148 
i
=0; i<
Âbrs
; i++) {

149 
	`MPI_I£nd
((*)(
»cvšd
+
»cv±r
[
i
]),„ecv±r[i+1]-»cv±r[i], 
IDX_DATATYPE
,

150 
³šd
[
i
], 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

153 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

154 
	`MPI_Wa™®l
(
Âbrs
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

159 
³xadj
 = 
g¿ph
->³xadj = 
	`idxsm®loc
(
nvtxs
+1, 0, "SetUp:…exadj");

160 
³adjncy
 = 
g¿ph
->³adjncy = 
	`idxm®loc
(
n£nd
, "SetUp:…eadjncy");

161 
³adjloc
 = 
g¿ph
->³adjloøğ
	`idxm®loc
(
n£nd
, "SetUp:…eadjloc");

163 
i
=0; i<
n£nd
; i++) {

164 
	`ASSERTP
(
ù¾
, 
£ndšd
[
i
] >ğ
fœ¡vtx
 && s’dšd[i] < 
Ï¡vtx
, (ctrl, "%d %d %d\n", sendind[i], firstvtx,†astvtx));

165 
³xadj
[
£ndšd
[
i
]-
fœ¡vtx
]++;

167 
	`MAKECSR
(
i
, 
nvtxs
, 
³xadj
);

169 
i
=0; i<
Âbrs
; i++) {

170 
j
=
£nd±r
[
i
]; j<sendptr[i+1]; j++) {

171 
k
 = 
³xadj
[
£ndšd
[
j
]-
fœ¡vtx
]++;

172 
³adjncy
[
k
] = 
i
;

173 
³adjloc
[
k
] = 
¡¬tsšd
[
i
]++;

176 
	`ASSERT
(
ù¾
, 
³xadj
[
nvtxs
] =ğ
n£nd
);

178 
i
=
nvtxs
; i>0; i--)

179 
³xadj
[
i
] =…exadj[i-1];

180 
³xadj
[0] = 0;

183 
g¿ph
->
Âbrs
 =‚nbrs;

184 
g¿ph
->
Äecv
 =‚recv;

185 
g¿ph
->
n£nd
 =‚send;

186 
g¿ph
->
Æoÿl
 =‚local;

190 
im­
 = 
g¿ph
->im­ = 
	`idxm®loc
(
nvtxs
+
Äecv
, "SetUp: imap");

191 
i
=0; i<
nvtxs
; i++)

192 
im­
[
i
] = 
fœ¡vtx
+i;

193 
i
=0; i<
Äecv
; i++)

194 
im­
[
nvtxs
+
i
] = 
»cvšd
[i];

198 
w¥aû
->
Æ¬ge
 < 
Äecv
+
n£nd
) {

199 
	`ä“
(
w¥aû
->
šdiûs
);

200 
	`ä“
(
w¥aû
->
·œs
);

201 
w¥aû
->
Æ¬ge
 = 
Äecv
+
n£nd
;

202 
w¥aû
->
šdiûs
 = 
	`idxm®loc
(w¥aû->
Æ¬ge
, "SetUp: wspace->indices");

203 
w¥aû
->
·œs
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*w¥aû->
Æ¬ge
, "SetUp: wspace->pairs");

206 
	`IFSET
(
ù¾
->
dbglvl
, 
DBG_TIME
, 
	`¡İtim”
(ù¾->
S‘upTmr
));

208 #ifdeà
DEBUG_SETUPINFO


209 
	`½rštf
(
ù¾
, "[%5d %5d] \tl:[%5d %5d] \ts:[%5d, %5d] \tr:[%5d, %5d]\n",

210 
	`Glob®SEMš
(
ù¾
, 
nvtxs
), 
	`Glob®SEMax
(ctrl,‚vtxs),

211 
	`Glob®SEMš
(
ù¾
, 
Æoÿl
), 
	`Glob®SEMax
(ctrl,‚local),

212 
	`Glob®SEMš
(
ù¾
, 
n£nd
), 
	`Glob®SEMax
(ctrl,‚send),

213 
	`Glob®SEMš
(
ù¾
, 
Äecv
), 
	`Glob®SEMax
(ctrl,‚recv));

215 
	`PrštS‘UpInfo
(
ù¾
, 
g¿ph
);

217 
	}
}

	@struct.h

15  
	#IDXTYPE_INT


	)
18 #ifdeà
IDXTYPE_INT


19 
	tidxty³
;

20  
	#IDX_DATATYPE
 
MPI_INT


	)
22 
	tidxty³
;

23  
	#IDX_DATATYPE
 
MPI_SHORT


	)
30 
	sKeyV®ueTy³
 {

31 
idxty³
 
	mkey
;

32 
idxty³
 
	mv®
;

35 
KeyV®ueTy³
 
	tKeyV®ueTy³
;

42 
	sPQueueTy³
 {

43 
	mÂodes
;

44 
	mmaxÂodes
;

45 
idxty³
 *
	m³rm
, *
	m”m
, *
	mv®ues
;

50 
PQueueTy³
 
	tPQueueTy³
;

56 
	sedgedef
 {

57 
idxty³
 
	medge
;

58 
idxty³
 
	mewgt
;

60 
edgedef
 
	tEdgeTy³
;

66 
	swÜk¥aûdef
 {

67 
idxty³
 *
	mcÜe
;

68 
	mmaxcÜe
;

70 
	mÆ¬ge
;

72 
KeyV®ueTy³
 *
	m·œs
;

73 
idxty³
 *
	mšdiûs
;

76 
idxty³
 *
	mpv1
, *
	mpv2
, *
	mpv3
, *
	mpv4
;

77 
KeyV®ueTy³
 *
	m³·œs1
, *
	m³·œs2
;

79 
EdgeTy³
 *
	mdeg»es
;

82 
wÜk¥aûdef
 
	tWÜkS·ûTy³
;

89 
	sršfodef
 {

90 
	mid
, 
	med
;

91 
	mndeg»es
;

92 
EdgeTy³
 *
	mdeg»es
;

95 
ršfodef
 
	tRInfoTy³
;

102 
	sÄšfodef
 {

103 
	medeg»es
[2];

106 
Äšfodef
 
	tNRInfoTy³
;

112 
	sg¿phdef
 {

113 
	mgnvtxs
, 
	mnvtxs
, 
	mÃdges
, 
	mmaxvwgt
;

114 
idxty³
 *
	mxadj
;

115 
idxty³
 *
	mvwgt
;

116 
idxty³
 *
	mvsize
;

117 
idxty³
 *
	madjncy
;

118 
idxty³
 *
	madjwgt
;

119 
idxty³
 *
	mvtxdi¡
;

121 
idxty³
 *
	mm©ch
;

122 
idxty³
 *
	mcm­
;

124 
idxty³
 *
	mÏb–
;

127 
	mÂbrs
, 
	mÄecv
, 
	mn£nd
;

128 
idxty³
 *
	m³šd
;

129 
idxty³
 *
	m£nd±r
, *
	m£ndšd
;

130 
idxty³
 *
	m»cv±r
, *
	m»cvšd
;

131 
idxty³
 *
	mim­
;

132 
idxty³
 *
	m³xadj
, *
	m³adjncy
,

133 *
	m³adjloc
;

135 
	mÆoÿl
;

136 
idxty³
 *
	mÍ”m
;

141 
idxty³
 *
	m¾’s
, *
	m¦’s
;

142 
KeyV®ueTy³
 *
	mrÿnd
;

146 
idxty³
 *
	mwh”e
;

147 
idxty³
 *
	mÍwgts
, *
	mgpwgts
;

148 
RInfoTy³
 *
	mršfo
;

151 
NRInfoTy³
 *
	mÄšfo
;

152 
	mn£p
;

153 
idxty³
 *
	m£pšd
;

155 
	mlmšcut
, 
	mmšcut
;

157 
	mËv–
;

158 
	mm©ch_ty³
;

159 
	medgewgt_ty³
;

161 
g¿phdef
 *
	mcßr£r
, *
	mfš”
;

164 
g¿phdef
 
	tG¿phTy³
;

170 
	ttim”
;

176 
	scÚŒŞdef
 {

177 
	mmy³
, 
	mÅes
;

178 
	mCßr£nTo
;

179 
	mdbglvl
;

180 
	mÅ¬ts
;

181 
	mfŞdf
;

182 
	m¬t
;

183 
	mxyzty³
;

185 
MPI_Comm
 
	mgcomm
;

186 
MPI_Comm
 
	mcomm
;

187 
MPI_Reque¡
 
	m¤eq
[
MAX_PES
],

188 
	m¼eq
[
MAX_PES
];

189 
MPI_Stus
 
	m¡©u£s
[
MAX_PES
];

190 
MPI_Stus
 
	m¡©us
;

193 
tim”
 
	mTÙ®Tmr
, 
	mIn™P¬tTmr
, 
	mM©chTmr
, 
	mCÚŒaùTmr
, 
	mCßr£nTmr
, 
	mRefTmr
,

194 
	mS‘upTmr
, 
	mCŞÜTmr
, 
	mProjeùTmr
, 
	mKWayIn™Tmr
, 
	mKWayTmr
, 
	mMoveTmr
,

195 
	mRem­Tmr
, 
	mAuxTmr1
, 
	mAuxTmr2
, 
	mAuxTmr3
, 
	mAuxTmr4
, 
	mAuxTmr5
, 
	mAuxTmr6
;

198 
cÚŒŞdef
 
	tCŒlTy³
;

205 
	sm©rixdef
 {

206 
	mÄows
;

207 
idxty³
 *
	mrow±r
;

208 
idxty³
 *
	mcŞšd
;

209 *
	mv®ues
;

210 
idxty³
 *
	mŒªsãr
;

213 
m©rixdef
 
	tM©rixTy³
;

	@timer.c

15 
	~<·rm‘is.h
>

23 
	$In™Tim”s
(
CŒlTy³
 *
ù¾
)

25 
	`ş—¹im”
(
ù¾
->
TÙ®Tmr
);

26 
	`ş—¹im”
(
ù¾
->
In™P¬tTmr
);

27 
	`ş—¹im”
(
ù¾
->
M©chTmr
);

28 
	`ş—¹im”
(
ù¾
->
CÚŒaùTmr
);

29 
	`ş—¹im”
(
ù¾
->
Cßr£nTmr
);

30 
	`ş—¹im”
(
ù¾
->
RefTmr
);

31 
	`ş—¹im”
(
ù¾
->
S‘upTmr
);

32 
	`ş—¹im”
(
ù¾
->
ProjeùTmr
);

33 
	`ş—¹im”
(
ù¾
->
KWayIn™Tmr
);

34 
	`ş—¹im”
(
ù¾
->
KWayTmr
);

35 
	`ş—¹im”
(
ù¾
->
MoveTmr
);

36 
	`ş—¹im”
(
ù¾
->
Rem­Tmr
);

38 
	`ş—¹im”
(
ù¾
->
AuxTmr1
);

39 
	`ş—¹im”
(
ù¾
->
AuxTmr2
);

40 
	`ş—¹im”
(
ù¾
->
AuxTmr3
);

41 
	`ş—¹im”
(
ù¾
->
AuxTmr4
);

42 
	`ş—¹im”
(
ù¾
->
AuxTmr5
);

43 
	`ş—¹im”
(
ù¾
->
AuxTmr6
);

44 
	}
}

50 
	$PrštTimšgInfo
(
CŒlTy³
 *
ù¾
)

53 
	`PrštTim”
(
ù¾
, cŒl->
S‘upTmr
, " Setup");

54 
	`PrštTim”
(
ù¾
, cŒl->
M©chTmr
, " Matching");

55 
	`PrštTim”
(
ù¾
, cŒl->
CÚŒaùTmr
, "Contraction");

56 
	`PrštTim”
(
ù¾
, cŒl->
In™P¬tTmr
, " InitPart");

58 
	`PrštTim”
(
ù¾
, cŒl->
ProjeùTmr
, " Project");

59 
	`PrštTim”
(
ù¾
, cŒl->
KWayIn™Tmr
, " Initialize");

60 
	`PrštTim”
(
ù¾
, cŒl->
KWayTmr
, " K-way");

61 
	`PrštTim”
(
ù¾
, cŒl->
MoveTmr
, " Move");

62 
	`PrštTim”
(
ù¾
, cŒl->
Rem­Tmr
, " Remap");

63 
	`PrštTim”
(
ù¾
, cŒl->
TÙ®Tmr
, " Total");

71 
	`PrštTim”
(
ù¾
, cŒl->
AuxTmr6
, " Aux6");

72 
	}
}

78 
	$PrštTim”
(
CŒlTy³
 *
ù¾
, 
tim”
 
tmr
, *
msg
)

80 
sum
, 
max
, 
t£c
;

82 
t£c
 = 
	`g‘tim”
(
tmr
);

83 
	`MPI_Reduû
((*)&
t£c
, (*)&
sum
, 1, 
MPI_DOUBLE
, 
MPI_SUM
, 0, 
ù¾
->
comm
);

85 
t£c
 = 
	`g‘tim”
(
tmr
);

86 
	`MPI_Reduû
((*)&
t£c
, (*)&
max
, 1, 
MPI_DOUBLE
, 
MPI_MAX
, 0, 
ù¾
->
comm
);

88 
ù¾
->
my³
 =ğ0 && 
sum
 != 0.0)

89 
	`´štf
("%s: Max: %7.3lf, Sum: %7.3lf, Balance: %7.3lf\n",

90 
msg
, 
max
, 
sum
, max*
ù¾
->
Åes
/sum);

91 
	}
}

	@util.c

14 
	~<·rm‘is.h
>

20 
	$”»x™
(*
f_¡r
,...)

22 
va_li¡
 
¬gp
;

23 
out1
[256], 
out2
[256];

25 
	`va_¡¬t
(
¬gp
, 
f_¡r
);

26 
	`v¥rštf
(
out1
, 
f_¡r
, 
¬gp
);

27 
	`va_’d
(
¬gp
);

29 
	`¥rštf
(
out2
, "E¼Ü! %s", 
out1
);

31 
	`årštf
(
¡dout
, 
out2
);

32 
	`fæush
(
¡dout
);

34 
	`abÜt
();

35 
	}
}

41 
	$my´štf
(
CŒlTy³
 *
ù¾
, *
f_¡r
,...)

43 
va_li¡
 
¬gp
;

44 
out1
[256], 
out2
[256];

46 
	`va_¡¬t
(
¬gp
, 
f_¡r
);

47 
	`v¥rštf
(
out1
, 
f_¡r
, 
¬gp
);

48 
	`va_’d
(
¬gp
);

50 
	`¥rštf
(
out2
, "[%2d] %s", 
ù¾
->
my³
, 
out1
);

52 
	`årštf
(
¡dout
, 
out2
);

53 
	`fæush
(
¡dout
);

55 
	}
}

62 
	$½rštf
(
CŒlTy³
 *
ù¾
, *
f_¡r
,...)

64 
va_li¡
 
¬gp
;

66 
ù¾
->
my³
 == 0) {

67 
	`va_¡¬t
(
¬gp
, 
f_¡r
);

68 
	`vårštf
(
¡dout
, 
f_¡r
, 
¬gp
);

69 
	`va_’d
(
¬gp
);

72 
	`fæush
(
¡dout
);

74 
	`MPI_B¬r›r
(
ù¾
->
comm
);

76 
	}
}

79 #iâdeà
DMALLOC


83 *
	$im®loc
(
n
, *
msg
)

85 
n
 == 0)

86  
NULL
;

88  (*)
	`GKm®loc
(()*
n
, 
msg
);

89 
	}
}

95 
idxty³
 *
	$idxm®loc
(
n
, *
msg
)

97 
n
 == 0)

98  
NULL
;

100  (
idxty³
 *)
	`GKm®loc
((idxty³)*
n
, 
msg
);

101 
	}
}

107 *
	$fm®loc
(
n
, *
msg
)

109 
n
 == 0)

110  
NULL
;

112  (*)
	`GKm®loc
(()*
n
, 
msg
);

113 
	}
}

119 *
	$ism®loc
(
n
, 
iv®
, *
msg
)

121 
n
 == 0)

122  
NULL
;

124  
	`i£t
(
n
, 
iv®
, (*)
	`GKm®loc
(()*n, 
msg
));

125 
	}
}

132 
idxty³
 *
	$idxsm®loc
(
n
, idxty³ 
iv®
, *
msg
)

134 
n
 == 0)

135  
NULL
;

137  
	`idx£t
(
n
, 
iv®
, (
idxty³
 *)
	`GKm®loc
((idxty³)*n, 
msg
));

138 
	}
}

144 *
	$GKm®loc
(
nby‹s
, *
msg
)

146 *
±r
;

148 
nby‹s
 == 0)

149  
NULL
;

151 
±r
 = (*)
	`m®loc
(
nby‹s
);

152 
±r
 =ğ
NULL
)

153 
	`”»x™
("***MemÜy‡ÎoÿtiÚ faed fÜ %s. Reque¡ed size: %d by‹s", 
msg
, 
nby‹s
);

155  
±r
;

156 
	}
}

162 
	$GKä“
(**
±r1
,...)

164 
va_li¡
 
¶i¡
;

165 **
±r
;

167 *
±r1
 !ğ
NULL
)

168 
	`ä“
(*
±r1
);

169 *
±r1
 = 
NULL
;

171 
	`va_¡¬t
(
¶i¡
, 
±r1
);

173 (
±r
 = 
	`va_¬g
(
¶i¡
, **)è!ğ
LTERM
) {

174 *
±r
 !ğ
NULL
)

175 
	`ä“
(*
±r
);

176 *
±r
 = 
NULL
;

179 
	`va_’d
(
¶i¡
);

180 
	}
}

186 *
	$i£t
(
n
, 
v®
, *
x
)

188 
i
;

190 
i
=0; i<
n
; i++)

191 
x
[
i
] = 
v®
;

193  
x
;

194 
	}
}

200 
idxty³
 *
	$idx£t
(
n
, idxty³ 
v®
, idxty³ *
x
)

202 
i
;

204 
i
=0; i<
n
; i++)

205 
x
[
i
] = 
v®
;

207  
x
;

208 
	}
}

215 
	$idxamax
(
n
, 
idxty³
 *
x
)

217 
i
, 
max
=0;

219 
i
=1; i<
n
; i++)

220 
max
 = (
x
[
i
] > x[max] ? i : max);

222  
max
;

223 
	}
}

229 
	$idxamš
(
n
, 
idxty³
 *
x
)

231 
i
, 
mš
=0;

233 
i
=1; i<
n
; i++)

234 
mš
 = (
x
[
i
] < x[min] ? i : min);

236  
mš
;

237 
	}
}

243 
	$idxsum
(
n
, 
idxty³
 *
x
)

245 
i
, 
sum
 = 0;

247 
i
=0; i<
n
; i++)

248 
sum
 +ğ
x
[
i
];

250  
sum
;

251 
	}
}

257 
	$ch¬sum
(
n
, *
x
)

259 
i
, 
sum
 = 0;

261 
i
=0; i<
n
; i++)

262 
sum
 +ğ
x
[
i
];

264  
sum
;

265 
	}
}

270 
	$isum
(
n
, *
x
)

272 
i
, 
sum
 = 0;

274 
i
=0; i<
n
; i++)

275 
sum
 +ğ
x
[
i
];

277  
sum
;

278 
	}
}

284 
	$¢Üm2
(
n
, *
v
)

286 
i
;

287 
·¹Ÿl
 = 0;

289 
i
 = 0; i<
n
; i++)

290 
·¹Ÿl
 +ğ
v
[
i
] * v[i];

292  
	`sq¹
(
·¹Ÿl
);

293 
	}
}

300 
	$sdÙ
(
n
, *
x
, *
y
)

302 
i
;

303 
·¹Ÿl
 = 0;

305 
i
 = 0; i<
n
; i++)

306 
·¹Ÿl
 +ğ
x
[
i
] * 
y
[i];

308  
·¹Ÿl
;

309 
	}
}

315 
	$§xpy
(
n
, 
®pha
, *
x
, *
y
)

317 
i
;

319 
i
=0; i<
n
; i++)

320 
y
[
i
] +ğ
®pha
*
x
[i];

321 
	}
}

331 
	$ikeyv®sÜt_Üg
(
n
, 
KeyV®ueTy³
 *
nodes
)

333 
	`qsÜt
((*)
nodes
, (
size_t
)
n
, (size_t)(
KeyV®ueTy³
), 
IncKeyV®ueCmp
);

334 
	}
}

340 
	$IncKeyV®ueCmp
(cÚ¡ *
v1
, cÚ¡ *
v2
)

342 
KeyV®ueTy³
 *
n1
, *
n2
;

344 
n1
 = (
KeyV®ueTy³
 *)
v1
;

345 
n2
 = (
KeyV®ueTy³
 *)
v2
;

347  (
n1
->
key
 !ğ
n2
->key ?‚1->key -‚2->key :‚1->
v®
 -‚2->val);

348 
	}
}

355 
	$dkeyv®sÜt
(
n
, 
KeyV®ueTy³
 *
nodes
)

357 
	`qsÜt
((*)
nodes
, (
size_t
)
n
, (size_t)(
KeyV®ueTy³
), 
DecKeyV®ueCmp
);

358 
	}
}

364 
	$DecKeyV®ueCmp
(cÚ¡ *
v1
, cÚ¡ *
v2
)

366 
KeyV®ueTy³
 *
n1
, *
n2
;

368 
n1
 = (
KeyV®ueTy³
 *)
v1
;

369 
n2
 = (
KeyV®ueTy³
 *)
v2
;

371  
n2
->
key
 - 
n1
->key;

373 
	}
}

381 
	$BS—rch
(
n
, 
idxty³
 *
¬¿y
, 
key
)

383 
a
=0, 
b
=
n
, 
c
;

385 
b
-
a
 > 8) {

386 
c
 = (
a
+
b
)>>1;

387 
¬¿y
[
c
] > 
key
)

388 
b
 = 
c
;

390 
a
 = 
c
;

393 
c
=
a
; c<
b
; c++) {

394 
¬¿y
[
c
] =ğ
key
)

395  
c
;

398 
	`”»x™
("Key %d‚Ù found!\n", 
key
);

399 
	}
}

408 
	$RªdomP”mu‹
(
n
, 
idxty³
 *
p
, 
æag
)

410 
i
, 
u
, 
v
;

411 
idxty³
 
tmp
;

413 
æag
 == 1) {

414 
i
=0; i<
n
; i++)

415 
p
[
i
] = i;

418 
i
=0; i<
n
; i++) {

419 
v
 = 
	`RªdomInRªge
(
n
);

420 
u
 = 
	`RªdomInRªge
(
n
);

421 
	`SWAP
(
p
[
v
],…[
u
], 
tmp
);

423 
	}
}

431 
	$Fa¡RªdomP”mu‹
(
n
, 
idxty³
 *
p
, 
æag
)

433 
i
, 
u
, 
v
;

434 
idxty³
 
tmp
;

436 
æag
 == 1) {

437 
i
=0; i<
n
; i++)

438 
p
[
i
] = i;

441 
i
=0; i<
n
; i+=8) {

442 
v
 = 
	`RªdomInRªge
(
n
-4);

443 
u
 = 
	`RªdomInRªge
(
n
-4);

444 
	`SWAP
(
p
[
v
],…[
u
], 
tmp
);

445 
	`SWAP
(
p
[
v
+1],…[
u
+1], 
tmp
);

446 
	`SWAP
(
p
[
v
+2],…[
u
+2], 
tmp
);

447 
	`SWAP
(
p
[
v
+3],…[
u
+3], 
tmp
);

449 
	}
}

454 
	$i¥ow2
(
a
)

456 ; 
a
%2 != 1;‡ =‡>>1);

457  (
a
 > 1 ? 0 : 1);

458 
	}
}

463 
	$log2
(
a
)

465 
i
;

467 
i
=1; 
a
 > 1; i++,‡ =‡>>1);

468  
i
-1;

469 
	}
}

	@wave.c

15 
	~<·rm‘is.h
>

20 
	$KWay_WaveäÚtDiffu£r
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
Å¬ts
, 
æowFaùÜ
)

22 
ii
, 
i
, 
j
, 
k
, 
l
, 
nvtxs
, 
äom
, 
to
, 
dÚe
, 
tÙ®v
;

23 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
vsize
, *
wh”e
, *
home
, *
pwgts
, *
³rm
;

24 
idxty³
 *
Œªsãr
, *
tmpvec
, *
Œvec
, *
w¥aû
, *
row±r
, *
cŞšd
;

25 
sw­s
, 
fœ¡
, 
£cÚd
, 
thœd
, 
äomæow
, 
toæow
;

26 
b®ªû
, 
m—n
, *
lßd
, *
v®ues
;

27 
PQueueTy³
 
q
;

28 
M©rixTy³
 
lm©
;

30 
nvtxs
 = 
g¿ph
->nvtxs;

31 
xadj
 = 
g¿ph
->xadj;

32 
vwgt
 = 
g¿ph
->vwgt;

33 
vsize
 = 
g¿ph
->vsize;

34 
adjncy
 = 
g¿ph
->adjncy;

35 
adjwgt
 = 
g¿ph
->adjwgt;

36 
wh”e
 = 
g¿ph
->where;

38 
	`¤ªd
(
ù¾
->
my³
);

39 
	`¤ªd48
(
ù¾
->
my³
);

40 
	`PQueueIn™
(&
q
, 
Å¬ts
);

42 
home
 = 
	`idxm®loc
(
nvtxs
, "KWay_WavefrontDiffuser: home");

43 
pwgts
 = 
	`idxsm®loc
(
Å¬ts
, 0, "KWay_WavefrontDiffuser:…wgts");

44 
Œvec
 = 
	`idxm®loc
(
Å¬ts
, "KWay_WavefrontDiffuser:rvec");

45 
lßd
 = 
	`fm®loc
(
Å¬ts
, "KWay_WavefrontDiffuser:†oad");

46 
³rm
 = 
	`idxm®loc
(
nvtxs
, "KWay_WavefrontDiffuser:…erm");

48 
row±r
 = 
lm©
.row±¸ğ
	`idxm®loc
(
Å¬ts
+1, "KWay_WavefrontDiffuser:†mat.rowptr");

49 
cŞšd
 = 
lm©
.cŞšd = 
	`idxm®loc
(
g¿ph
->
Ãdges
, "KWay_WavefrontDiffuser:†mat.colind");

50 
Œªsãr
 = 
lm©
.Œªsã¸ğ
	`idxm®loc
(
	`amax
(
g¿ph
->
Ãdges
, g¿ph->Ãdges*()/(
idxty³
)), "KWay_WavefrontDiffuser:†mat.transfer");

51 
v®ues
 = 
lm©
.v®ue ğ(*îm©.
Œªsãr
;

52 
w¥aû
 = 
	`idxm®loc
(
	`amax
(2*
Å¬ts
+1+
nvtxs
,6*Å¬ts*()/(
idxty³
)), "KWay_WavefrontDiffuser: wspace");

53 
tmpvec
 = 
	`idxm®loc
(
Å¬ts
, "KWay_WavefrontDiffuser:ransfer");

55 
i
=0; i<
nvtxs
; i++) {

56 
pwgts
[
wh”e
[
i
]] +ğ
vwgt
[i];

57 
home
[
i
] = 
wh”e
[i];

58 
³rm
[
i
] = i;

60 
m—n
 = 
	`idxsum
(
Å¬ts
, 
pwgts
)/nparts;

62 
dÚe
=0, 
l
=
	`amš
(
Å¬ts
/2, 
NGD_PASSES
);†>0;†--) {

64 
	`PQueueRe£t
(&
q
);

65 
j
=0; j<
Å¬ts
; j++)

66 
lßd
[
j
] = ()(
pwgts
[j]è- 
m—n
;

68 
	`SŞveDiffusiÚEqu©iÚ
(
g¿ph
, &
lm©
, 
Å¬ts
, 
lßd
, 
Œvec
, 
w¥aû
);

70 
i
=0; i<
Å¬ts
; i++)

71 
	`PQueueIn£¹
(&
q
, 
i
, 
Œvec
[i]);

73 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 0);

75 
ii
=0; ii<
nvtxs
; ii++) {

76 
i
 = 
³rm
[
ii
];

77 
äom
 = 
wh”e
[
i
];

79 
pwgts
[
äom
] =ğ
vwgt
[
i
] || (äom !ğ
q
.
³rm
[0] && from !ğq.³rm[1] && from !ğq.³rm[2] && from =ğ
home
[i]))

83 
j
=
row±r
[
äom
]+1; j<rowptr[from+1]; j++)

84 
tmpvec
[
cŞšd
[
j
]] = 
Œªsãr
[j];

86 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

87 
to
 = 
wh”e
[
adjncy
[
j
]];

88 
äom
 !ğ
to
) {

89 
tmpvec
[
to
] > (
æowFaùÜ
 * 
vwgt
[
i
])) {

90 
tmpvec
[
to
] -ğ
vwgt
[
i
];

91 
wh”e
[
i
] = 
to
;

92 
	`INC_DEC
(
pwgts
[
to
],…wgts[
äom
], 
vwgt
[
i
]);

93 
	`INC_DEC
(
Œvec
[
to
],rvec[
äom
], 
vwgt
[
i
]);

94 
	`PQueueUpd©e
(&
q
, 
äom
, 
Œvec
[äom]+
vwgt
[
i
],rvec[from]);

95 
	`PQueueUpd©e
(&
q
, 
to
, 
Œvec
[to]-
vwgt
[
i
],rvec[to]);

102 
j
=
row±r
[
äom
]+1; j<rowptr[from+1]; j++)

103 
Œªsãr
[
j
] = 
tmpvec
[
cŞšd
[j]];

107 
b®ªû
 = (1.0*
pwgts
[
	`idxamax
(
Å¬ts
,…wgts)])/(1.0*
m—n
);

109 
b®ªû
 < 
UNBALANCE_FRACTION
 + .05)

110 
dÚe
 = 1;

112 
	`Glob®SESum
(
ù¾
, 
dÚe
) > 0)

116 
g¿ph
->
mšcut
 = 
	`Compu‹S”ŸlEdgeCut
(graph);

117 
tÙ®v
 = 
	`Compu‹S”ŸlTÙ®V
(
g¿ph
, 
home
);

121 
	`GKä“
(&
home
, &
pwgts
, &
Œvec
, &
lßd
, &
³rm
, &
row±r
, &
cŞšd
, &
Œªsãr
, &
w¥aû
, &
tmpvec
, 
LTERM
);

123  ()(
b®ªû
 * ()(
Å¬ts
*
m—n
)è+ 
tÙ®v
;

124 
	}
}

130 
	$SÜ‹dKWay_WD
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
Å¬ts
)

132 
ii
, 
i
, 
j
, 
k
, 
l
, 
nvtxs
, 
äom
, 
to
, 
edge
, 
ewgt
, 
dÚe
, 
max1
, 
max2
, 
max3
, 
tÙ®v
;

133 
idxty³
 *
xadj
, *
vwgt
, *
adjncy
, *
adjwgt
, *
vsize
;

134 
idxty³
 *
wh”e
, *
home
, *
pwgts
, *
ed
, *
³rm
;

135 
idxty³
 *
Œªsãr
, *
tmpvec
, *
Œvec
, *
w¥aû
;

136 
sum
, 
m—n
, *
lßd
, *
wÜk¥aû
;

137 
idxty³
 *
row±r
, *
cŞšd
;

138 
b®ªû
, *
v®ues
;

139 
M©rixTy³
 
lm©
;

140 
KeyV®ueTy³
 *
ÿnd
;

142 
nvtxs
 = 
g¿ph
->nvtxs;

143 
xadj
 = 
g¿ph
->xadj;

144 
vwgt
 = 
g¿ph
->vwgt;

145 
vsize
 = 
g¿ph
->vsize;

146 
adjncy
 = 
g¿ph
->adjncy;

147 
adjwgt
 = 
g¿ph
->adjwgt;

148 
wh”e
 = 
g¿ph
->where;

150 
	`¤ªd
(
ù¾
->
my³
);

151 
	`¤ªd48
(
ù¾
->
my³
);

153 
home
 = 
	`idxm®loc
(
nvtxs
, "SortedDiffuser: home");

154 
³rm
 = 
	`idxm®loc
(
nvtxs
, "SortedDiffuser:…erm");

155 
ed
 = 
	`idxsm®loc
(
nvtxs
, 0, "SortedDiffuser:ƒd");

156 
pwgts
 = 
	`idxsm®loc
(
Å¬ts
, 0, "SortedDiffuser:…wgts");

157 
Œvec
 = 
	`idxm®loc
(
Å¬ts
, "SortedDiffuser:rvec");

158 
lßd
 = 
	`fm®loc
(
Å¬ts
, "SortedDiffuser:†oad");

159 
ÿnd
 = (
KeyV®ueTy³
 *)
	`GKm®loc
(
nvtxs
*(KeyValueType), "SortedKWay_WD: cand");

161 
row±r
 = 
lm©
.row±¸ğ
	`idxm®loc
(
Å¬ts
+1, "KWay_WavefrontDiffuser:†mat.rowptr");

162 
cŞšd
 = 
lm©
.cŞšd = 
	`idxm®loc
(
g¿ph
->
Ãdges
, "KWay_WavefrontDiffuser:†mat.colind");

163 
Œªsãr
 = 
lm©
.Œªsã¸ğ
	`idxm®loc
(
	`amax
(
g¿ph
->
Ãdges
, g¿ph->Ãdges*()/(
idxty³
)), "KWay_WavefrontDiffuser:†mat.transfer");

164 
v®ues
 = 
lm©
.v®ue ğ(*îm©.
Œªsãr
;

165 
w¥aû
 = 
	`idxm®loc
(
	`amax
(2*
Å¬ts
+1+
nvtxs
,6*Å¬ts*()/(
idxty³
)), "KWay_WavefrontDiffuser: wspace");

166 
tmpvec
 = 
	`idxm®loc
(
Å¬ts
, "SortedDiffuser:mpvec");

169 
i
=0; i<
nvtxs
; i++) {

170 
pwgts
[
wh”e
[
i
]] +ğ
vwgt
[i];

171 
home
[
i
] = 
wh”e
[i];

174 
j
=
xadj
[
i
]; j<xadj[i+1]; j++)

175 
ed
[
i
] +ğ(
wh”e
[i] !ğwh”e[
adjncy
[
j
]] ? 
adjwgt
[j] : 0);

177 
m—n
 = 
	`idxsum
(
Å¬ts
, 
pwgts
)/nparts;

183 
dÚe
=0, 
l
=
	`amš
(
Å¬ts
/2, 
NGD_PASSES
);†>0;†--) {

184 
	`Fa¡RªdomP”mu‹
(
nvtxs
, 
³rm
, 1);

185 
j
=
nvtxs
, 
k
=0, 
ii
=0; ii<nvtxs; ii++) {

186 
i
 = 
³rm
[
ii
];

187 
ed
[
i
] != 0) {

188 
ÿnd
[
k
].
key
 = -
ed
[
i
];

189 
ÿnd
[
k
++].
v®
 = 
i
;

192 
ÿnd
[--
j
].
key
 = 0;

193 
ÿnd
[
j
].
v®
 = 
i
;

196 
	`ikeysÜt
(
k
, 
ÿnd
);

199 
i
=0; i<
Å¬ts
; i++)

200 
lßd
[
i
] = ()(
pwgts
[i]è- 
m—n
;

202 
	`SŞveDiffusiÚEqu©iÚ
(
g¿ph
, &
lm©
, 
Å¬ts
, 
lßd
, 
Œvec
, 
w¥aû
);

205 
max1
 = 
max2
 = 
max3
 = 0, 
i
=1; i<
Å¬ts
; i++) {

206 
Œvec
[
max1
] <rvec[
i
]) {

207 
max3
 = 
max2
;

208 
max2
 = 
max1
;

209 
max1
 = 
i
;

211 
Œvec
[
max2
] <rvec[
i
]) {

212 
max3
 = 
max2
;

213 
max2
 = 
i
;

215 
Œvec
[
max3
] <rvec[
i
]) {

216 
max3
 = 
i
;

221 
ii
=0; ii<
nvtxs
; ii++) {

222 
i
 = 
ÿnd
[
ii
].
v®
;

223 
äom
 = 
wh”e
[
i
];

225 
pwgts
[
äom
] =ğ
vwgt
[
i
] || (äom !ğ
max1
 && from !ğ
max2
 && from !ğ
max3
 && from =ğ
home
[i]))

229 
j
=
row±r
[
äom
]+1; j<rowptr[from+1]; j++)

230 
tmpvec
[
cŞšd
[
j
]] = 
Œªsãr
[j];

232 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

233 
to
 = 
wh”e
[
adjncy
[
j
]];

234 
äom
 !ğ
to
) {

235 
tmpvec
[
to
] > .25*
vwgt
[
i
]) {

236 
tmpvec
[
to
] -ğ
vwgt
[
i
];

237 
	`INC_DEC
(
pwgts
[
to
],…wgts[
äom
], 
vwgt
[
i
]);

238 
wh”e
[
i
] = 
to
;

241 
ed
[
i
] = 0;

242 
k
=
xadj
[
i
]; k<xadj[i+1]; k++) {

243 
edge
 = 
adjncy
[
k
];

244 
ed
[
i
] +ğ(
to
 !ğ
wh”e
[
edge
] ? 
adjwgt
[
k
] : 0);

246 
wh”e
[
edge
] =ğ
äom
)

247 
ed
[
edge
] +ğ
adjwgt
[
k
];

248 
wh”e
[
edge
] =ğ
to
)

249 
ed
[
edge
] -ğ
adjwgt
[
k
];

257 
j
=
row±r
[
äom
]+1; j<rowptr[from+1]; j++)

258 
Œªsãr
[
j
] = 
tmpvec
[
cŞšd
[j]];

262 
b®ªû
 = (1.0*
pwgts
[
	`idxamax
(
Å¬ts
,…wgts)])/(1.0*
m—n
);

264 
b®ªû
 < 
UNBALANCE_FRACTION
 + .05)

265 
dÚe
 = 1;

267 
	`Glob®SESum
(
ù¾
, 
dÚe
) > 0)

271 
g¿ph
->
mšcut
 = 
	`Compu‹S”ŸlEdgeCut
(graph);

272 
tÙ®v
 = 
	`Compu‹S”ŸlTÙ®V
(
g¿ph
, 
home
);

276 
	`GKä“
(&
home
, &
³rm
, &
ed
, &
pwgts
, &
Œvec
, &
lßd
, &
ÿnd
, &
row±r
, &
cŞšd
, &
Œªsãr
, &
w¥aû
, &
tmpvec
, 
LTERM
);

278  ()(
b®ªû
 * ()(
Å¬ts
*
m—n
)è+ 
tÙ®v
;

279 
	}
}

287 
	$SŞveDiffusiÚEqu©iÚ
(
G¿phTy³
 *
g¿ph
, 
M©rixTy³
 *
lm©
, 
Å¬ts
, *
lßd
,

288 
idxty³
 *
Œvec
, idxty³ *
w¥aû
)

290 
i
, 
ii
, 
j
, 
jj
, 
k
, 
l
, 
nvtxs
;

291 
idxty³
 *
xadj
, *
adjncy
, *
wh”e
;

292 
idxty³
 *
pcouÁs
, *
³rm
, *
m¬k”
;

293 
idxty³
 *
row±r
, *
cŞšd
, *
Œªsãr
;

294 *
v®ues
, *
fw¥aû
, *
sŞutiÚ
;

296 
nvtxs
 = 
g¿ph
->nvtxs;

297 
xadj
 = 
g¿ph
->xadj;

298 
adjncy
 = 
g¿ph
->adjncy;

299 
wh”e
 = 
g¿ph
->where;

301 
row±r
 = 
lm©
->rowptr;

302 
cŞšd
 = 
lm©
->colind;

303 
v®ues
 = 
lm©
->values;

304 
Œªsãr
 = 
lm©
->transfer;

306 
pcouÁs
 = 
	`idx£t
(
Å¬ts
, 0, 
w¥aû
);

307 
m¬k”
 = 
	`idx£t
(
Å¬ts
, -1, 
w¥aû
+nparts+1);

308 
³rm
 = 
w¥aû
+2*
Å¬ts
+1;

310 
i
=0; i<
nvtxs
; i++)

311 
pcouÁs
[
wh”e
[
i
]]++;

312 
	`MAKECSR
(
i
, 
Å¬ts
, 
pcouÁs
);

314 
i
=0; i<
nvtxs
; i++)

315 
³rm
[
pcouÁs
[
wh”e
[
i
]]++] = i;

317 
i
=
Å¬ts
; i>0; i--)

318 
pcouÁs
[
i
] =…counts[i-1];

319 
pcouÁs
[0] = 0;

323 
row±r
[0] = 
k
 = 0;

324 
ii
=0; ii<
Å¬ts
; ii++) {

325 
cŞšd
[
k
++] = 
ii
;

326 
m¬k”
[
ii
] = ii;

328 
jj
=
pcouÁs
[
ii
]; jj<pcounts[ii+1]; jj++) {

329 
i
 = 
³rm
[
jj
];

330 
j
=
xadj
[
i
]; j<xadj[i+1]; j++) {

331 
l
 = 
wh”e
[
adjncy
[
j
]];

332 
m¬k”
[
l
] !ğ
ii
) {

333 
cŞšd
[
k
] = 
l
;

334 
v®ues
[
k
++] = -1;

335 
m¬k”
[
l
] = 
ii
;

339 
v®ues
[
row±r
[
ii
]] = 
k
-rowptr[ii]-1;

340 
row±r
[
ii
+1] = 
k
;

343 
fw¥aû
 = (*)
w¥aû
;

344 
sŞutiÚ
 = 
fw¥aû
;

345 
	`CÚjG¿d
(
Å¬ts
, 
row±r
, 
cŞšd
, 
v®ues
, 
lßd
, 
sŞutiÚ
, .001, 
fw¥aû
+nparts);

348 
	`idx£t
(
Å¬ts
, 0, 
Œvec
);

349 
j
=0; j<
Å¬ts
; j++) {

350 
k
=
row±r
[
j
]+1; k<rowptr[j+1]; k++) {

351 
sŞutiÚ
[
j
] > sŞutiÚ[
cŞšd
[
k
]]) {

352 
Œªsãr
[
k
] = (è(
sŞutiÚ
[
j
] - sŞutiÚ[
cŞšd
[k]]);

353 
Œvec
[
j
] +ğ
Œªsãr
[
k
];

354 
Œvec
[
cŞšd
[
k
]] -ğ
Œªsãr
[k];

359 
	}
}

	@xyzpart.c

15 
	~<·rm‘is.h
>

21 
	$CoÜdš©e_P¬t™iÚ
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
ndims
, *
xyz
, 
£tup
, 
WÜkS·ûTy³
 *
w¥aû
)

23 
i
, 
j
, 
k
, 
nvtxs
, 
fœ¡vtx
, 
icoÜd
, 
coÜds
[3];

24 
idxty³
 *
vtxdi¡
;

25 
max
[3], 
mš
[3], 
gmš
[3], 
gmax
[3], 
shiá
[3], 
sÿË
[3];

26 
KeyV®ueTy³
 *
ÿnd
;

28 
£tup
)

29 
	`S‘Up
(
ù¾
, 
g¿ph
, 
w¥aû
);

31 
g¿ph
->
Äecv
 = 0;

33 
nvtxs
 = 
g¿ph
->nvtxs;

34 
vtxdi¡
 = 
g¿ph
->vtxdist;

36 
fœ¡vtx
 = 
vtxdi¡
[
ù¾
->
my³
];

38 
ÿnd
 = (
KeyV®ueTy³
 *)
	`GKm®loc
(
nvtxs
*(KeyValueType), "Coordinate_Partition: cand");

41 
k
=0; k<
ndims
; k++) {

42 
mš
[
k
] = +10000000;

43 
max
[
k
] = -10000000;

45 
i
=0; i<
nvtxs
; i++) {

46 
k
=0; k<
ndims
; k++) {

47 
xyz
[
i
*
ndims
+
k
] < 
mš
[k])

48 
mš
[
k
] = 
xyz
[
i
*
ndims
+k];

49 
xyz
[
i
*
ndims
+
k
] > 
max
[k])

50 
max
[
k
] = 
xyz
[
i
*
ndims
+k];

55 
	`MPI_AÎ»duû
((*)
mš
, (*)
gmš
, 
ndims
, 
MPI_FLOAT
, 
MPI_MIN
, 
ù¾
->
comm
);

56 
	`MPI_AÎ»duû
((*)
max
, (*)
gmax
, 
ndims
, 
MPI_FLOAT
, 
MPI_MAX
, 
ù¾
->
comm
);

60 
k
=0; k<
ndims
; k++) {

62 
shiá
[
k
] = -
gmš
[k];

63 
sÿË
[
k
] = 1.0/(
gmax
[k]-
gmš
[k]);

66 
ù¾
->
xyzty³
) {

67 
XYZ_XCOORD
:

68 
i
=0; i<
nvtxs
; i++) {

69 
ÿnd
[
i
].
key
 = 1000000*((
xyz
[i*
ndims
]+
shiá
[0])*
sÿË
[0]);

70 
	`ASSERT
(
ù¾
, 
ÿnd
[
i
].
key
>=0 && cand[i].key<=1000000);

71 
ÿnd
[
i
].
v®
 = 
fœ¡vtx
+i;

74 
XYZ_SPFILL
:

75 
i
=0; i<
nvtxs
; i++) {

76 
k
=0; k<
ndims
; k++)

77 
coÜds
[
k
] = 1024*((
xyz
[
i
*
ndims
+k]+
shiá
[k])*
sÿË
[k]);

78 
icoÜd
=0, 
j
=9; j>=0; j--) {

79 
k
=0; k<
ndims
; k++)

80 
icoÜd
 = (icoÜd<<1è+ (
coÜds
[
k
]&(1<<
j
) ? 1 : 0);

82 
ÿnd
[
i
].
key
 = 
icoÜd
;

83 
ÿnd
[
i
].
v®
 = 
fœ¡vtx
+i;

87 
	`”»x™
("Unknown XYZ_Typeype!\n");

92 
	`P¬tSÜt
(
ù¾
, 
g¿ph
, 
ÿnd
, 
w¥aû
);

94 
	`ä“
(
ÿnd
);

96 
	}
}

104 
	$P¬tSÜt
(
CŒlTy³
 *
ù¾
, 
G¿phTy³
 *
g¿ph
, 
KeyV®ueTy³
 *
–mÁs
, 
WÜkS·ûTy³
 *
w¥aû
)

106 
i
, 
j
, 
k
, 
nvtxs
, 
Äecv
, 
Åes
=
ù¾
->Åes, 
my³
=ù¾->my³, 
fœ¡vtx
, 
Ï¡vtx
;

107 
idxty³
 *
scouÁs
, *
rcouÁs
, *
vtxdi¡
, *
³rm
;

108 
KeyV®ueTy³
 *
»lmÁs
, *
mypicks
, *
®Íicks
;

110 
nvtxs
 = 
g¿ph
->nvtxs;

111 
vtxdi¡
 = 
g¿ph
->vtxdist;

113 
scouÁs
 = 
w¥aû
->
pv1
;

114 
rcouÁs
 = 
w¥aû
->
pv2
;

117 
mypicks
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*(
Åes
+1), "ParSort: mypicks");

118 
®Íicks
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*
Åes
*npes, "ParSort:‡llpicks");

121 
	`ikeysÜt
(
nvtxs
, 
–mÁs
);

124 
i
=1; i<
Åes
; i++)

125 
mypicks
[
i
-1] = 
–mÁs
[i*(
nvtxs
/
Åes
)];

130 
	`MPI_AÎg©h”
((*)
mypicks
, 2*(
Åes
-1), 
IDX_DATATYPE
, (*)
®Íicks
, 2*Ò³s-1), IDX_DATATYPE, 
ù¾
->
comm
);

135 
	`ikeysÜt
(
Åes
*Ò³s-1), 
®Íicks
);

140 
i
=1; i<
Åes
; i++)

141 
mypicks
[
i
] = 
®Íicks
[i*(
Åes
-1)];

142 
mypicks
[0].
key
 = -
MAX_INT
;

143 
mypicks
[
Åes
].
key
 = 
MAX_INT
;

148 
	`idx£t
(
Åes
, 0, 
scouÁs
);

149 
j
=
i
=0; i<
nvtxs
; i++) {

150 
–mÁs
[
i
].
key
 < 
mypicks
[
j
+1].key || (–mÁs[i].key =ğmypicks[j+1].key &&ƒlmÁs[i].
v®
 < mypicks[j+1].val))

151 
scouÁs
[
j
]++;

153 
scouÁs
[++
j
]++;

155 
	`MPI_AÎtßÎ
(
scouÁs
, 1, 
IDX_DATATYPE
, 
rcouÁs
, 1, IDX_DATATYPE, 
ù¾
->
comm
);

163 
	`MAKECSR
(
i
, 
Åes
, 
scouÁs
);

164 
	`MAKECSR
(
i
, 
Åes
, 
rcouÁs
);

165 
Äecv
 = 
rcouÁs
[
Åes
];

166 
w¥aû
->
Æ¬ge
 <ğ
Äecv
)

167 
»lmÁs
 = (
KeyV®ueTy³
 *)
w¥aû
->
·œs
;

169 
»lmÁs
 = (
KeyV®ueTy³
 *)
	`GKm®loc
((KeyV®ueTy³)*
Äecv
, "ParSort:„elmnts");

172 
i
=0; i<
Åes
; i++)

173 
	`MPI_I»cv
((*)(
»lmÁs
+
rcouÁs
[
i
]), 2*ÔcouÁs[i+1]-rcouÁs[i]), 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

176 
i
=0; i<
Åes
; i++)

177 
	`MPI_I£nd
((*)(
–mÁs
+
scouÁs
[
i
]), 2*(scouÁs[i+1]-scouÁs[i]), 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

179 
	`MPI_Wa™®l
(
Åes
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

180 
	`MPI_Wa™®l
(
Åes
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

184 
³rm
 = 
w¥aû
->
šdiûs
;

185 
i
=0; i<
Äecv
; i++) {

186 
³rm
[
i
] = 
»lmÁs
[i].
v®
;

187 
»lmÁs
[
i
].
v®
 = i;

189 
	`ikeysÜt
(
Äecv
, 
»lmÁs
);

193 
	`MPI_Sÿn
((*)(&
Äecv
), (*)(&
Ï¡vtx
), 1, 
MPI_INT
, 
MPI_SUM
, 
ù¾
->
comm
);

194 
fœ¡vtx
 = 
Ï¡vtx
-
Äecv
;

198 
j
=0, 
i
=0; i<
Åes
; i++) {

199 
vtxdi¡
[
i
+1] > 
fœ¡vtx
) {

200 
vtxdi¡
[
i
+1] >ğ
Ï¡vtx
) {

202 
k
=0; k<
Ï¡vtx
-
fœ¡vtx
; k++, 
j
++)

203 
»lmÁs
[»lmÁs[
j
].
v®
].
key
 = 
i
;

207 
k
=0; k<
vtxdi¡
[
i
+1]-
fœ¡vtx
; k++, 
j
++)

208 
»lmÁs
[»lmÁs[
j
].
v®
].
key
 = 
i
;

210 
fœ¡vtx
 = 
vtxdi¡
[
i
+1];

213 
vtxdi¡
[
i
+1] >ğ
Ï¡vtx
)

218 
i
=0; i<
Äecv
; i++) {

219 
	`ASSERTP
(
ù¾
, 
»lmÁs
[
i
].
key
>=0 &&„–mÁs[i].key<
Åes
, (ctrl, "%d %d\n", i,„elmnts[i].key));

220 
»lmÁs
[
i
].
v®
 = 
³rm
[i];

226 
i
=0; i<
Åes
; i++)

227 
	`MPI_I»cv
((*)(
–mÁs
+
scouÁs
[
i
]), 2*(scouÁs[i+1]-scouÁs[i]), 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¼eq
+i);

230 
i
=0; i<
Åes
; i++)

231 
	`MPI_I£nd
((*)(
»lmÁs
+
rcouÁs
[
i
]), 2*ÔcouÁs[i+1]-rcouÁs[i]), 
IDX_DATATYPE
, i, 1, 
ù¾
->
comm
, cŒl->
¤eq
+i);

233 
	`MPI_Wa™®l
(
Åes
, 
ù¾
->
¼eq
, cŒl->
¡©u£s
);

234 
	`MPI_Wa™®l
(
Åes
, 
ù¾
->
¤eq
, cŒl->
¡©u£s
);

238 
g¿ph
->
wh”e
 = 
	`idxm®loc
(g¿ph->
nvtxs
+g¿ph->
Äecv
, "PartSort: graph->where");

239 
fœ¡vtx
 = 
vtxdi¡
[
my³
];

240 
i
=0; i<
nvtxs
; i++) {

241 
	`ASSERTP
(
ù¾
, 
–mÁs
[
i
].
key
>=0 &&ƒlmÁs[i].key<
Åes
, (ctrl, "%d %d\n", i,ƒlmnts[i].key));

242 
	`ASSERTP
(
ù¾
, 
–mÁs
[
i
].
v®
>=
vtxdi¡
[
my³
] &&ƒlmnts[i].val<vtxdist[mype+1], (ctrl, "%d %d %d %d\n", i, vtxdist[mype], vtxdist[mype+1],ƒlmnts[i].val));

243 
g¿ph
->
wh”e
[
–mÁs
[
i
].
v®
-
fœ¡vtx
] =ƒlmÁs[i].
key
;

247 
	`GKä“
(&
mypicks
, &
®Íicks
, 
LTERM
);

248 
w¥aû
->
Æ¬ge
 >ğ
Äecv
)

249 
	`ä“
(
»lmÁs
);

251 
	}
}

	@/usr/include/ctype.h

8 #iâdeà
_CTYPE_H


9  
	#_CTYPE_H


	)
11 #´agm¨
id’t
 "@(#)ctype.h 1.28 96/08/21 SMI"

13 
	~<sys/ã©u»_‹¡s.h
>

15 #ifdef 
__ılu¥lus


19  
	#_U
 0x00000001

	)
20  
	#_L
 0x00000002

	)
21  
	#_N
 0x00000004

	)
22  
	#_S
 0x00000008

	)
23  
	#_P
 0x00000010

	)
24  
	#_C
 0x00000020

	)
25  
	#_B
 0x00000040

	)
26  
	#_X
 0x00000080

	)
28  
	#_ISUPPER
 
_U


	)
29  
	#_ISLOWER
 
_L


	)
30  
	#_ISDIGIT
 
_N


	)
31  
	#_ISSPACE
 
_S


	)
32  
	#_ISPUNCT
 
_P


	)
33  
	#_ISCNTRL
 
_C


	)
34  
	#_ISBLANK
 
_B


	)
35  
	#_ISXDIGIT
 
_X


	)
36  
	#_ISGRAPH
 0x00002000

	)
37  
	#_ISALPHA
 0x00004000

	)
38  
	#_ISPRINT
 0x00008000

	)
39  
	#_ISALNUM
 (
_ISALPHA
 | 
_ISDIGIT
)

	)
41 #ià
defšed
(
__STDC__
)

43 
i§Êum
();

44 
i§Íha
();

45 
isúŒl
();

46 
isdig™
();

47 
isg¿ph
();

48 
i¦ow”
();

49 
i¥ršt
();

50 
i¥unù
();

51 
is¥aû
();

52 
isuµ”
();

53 
isxdig™
();

54 
tŞow”
();

55 
touµ”
();

57 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 == 0 && \

58 !
defšed
(
_POSIX_C_SOURCE
)è|| defšed(
_XOPEN_SOURCE
))

60 
i§scii
();

61 
tßscii
();

62 
_tŞow”
();

63 
_touµ”
();

67 
__ùy³
[];

68 *
__ùy³_mask
;

69 *
__Œªs_uµ”
;

70 *
__Œªs_low”
;

81 #ià!#lšt(
Ú
è&& !
defšed
(
__lšt
)

83 #ià
defšed
(
__XPG4_CHAR_CLASS__
è|| defšed(
_XPG4_2
) || \

84 (
defšed
(
_XOPEN_SOURCE
è&& (
	g_XOPEN_VERSION
 - 0 == 4))

85  
	#i§Íha
(
c
) (
__ùy³_mask
[c] & 
_ISALPHA
)

	)
86  
	#isuµ”
(
c
) (
__ùy³_mask
[c] & 
_ISUPPER
)

	)
87  
	#i¦ow”
(
c
) (
__ùy³_mask
[c] & 
_ISLOWER
)

	)
88  
	#isdig™
(
c
) (
__ùy³_mask
[c] & 
_ISDIGIT
)

	)
89  
	#isxdig™
(
c
) (
__ùy³_mask
[c] & 
_ISXDIGIT
)

	)
90  
	#i§Êum
(
c
) (
__ùy³_mask
[c] & 
_ISALNUM
)

	)
91  
	#is¥aû
(
c
) (
__ùy³_mask
[c] & 
_ISSPACE
)

	)
92  
	#i¥unù
(
c
) (
__ùy³_mask
[c] & 
_ISPUNCT
)

	)
93  
	#i¥ršt
(
c
) (
__ùy³_mask
[c] & 
_ISPRINT
)

	)
94  
	#isg¿ph
(
c
) (
__ùy³_mask
[c] & 
_ISGRAPH
)

	)
95  
	#isúŒl
(
c
) (
__ùy³_mask
[c] & 
_ISCNTRL
)

	)
97  
	#i§Íha
(
c
) ((
__ùy³
 + 1)[c] & (
_U
 | 
_L
))

	)
98  
	#isuµ”
(
c
) ((
__ùy³
 + 1)[c] & 
_U
)

	)
99  
	#i¦ow”
(
c
) ((
__ùy³
 + 1)[c] & 
_L
)

	)
100  
	#isdig™
(
c
) ((
__ùy³
 + 1)[c] & 
_N
)

	)
101  
	#isxdig™
(
c
) ((
__ùy³
 + 1)[c] & 
_X
)

	)
102  
	#i§Êum
(
c
) ((
__ùy³
 + 1)[c] & (
_U
 | 
_L
 | 
_N
))

	)
103  
	#is¥aû
(
c
) ((
__ùy³
 + 1)[c] & 
_S
)

	)
104  
	#i¥unù
(
c
) ((
__ùy³
 + 1)[c] & 
_P
)

	)
105  
	#i¥ršt
(
c
) ((
__ùy³
 + 1)[c] & (
_P
 | 
_U
 | 
_L
 | 
_N
 | 
_B
))

	)
106  
	#isg¿ph
(
c
) ((
__ùy³
 + 1)[c] & (
_P
 | 
_U
 | 
_L
 | 
_N
))

	)
107  
	#isúŒl
(
c
) ((
__ùy³
 + 1)[c] & 
_C
)

	)
110 #ià
defšed
(
__EXTENSIONS__
) || \

111 ((
__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
)) || \

112 
defšed
(
_XOPEN_SOURCE
)è|| defšed(
__XPG4_CHAR_CLASS__
)

113  
	#i§scii
(
c
) (!((cè& ~0177))

	)
114  
	#tßscii
(
c
) ((cè& 0177)

	)
115 #ià
defšed
(
__XPG4_CHAR_CLASS__
è|| defšed(
_XPG4_2
) || \

116 (
defšed
(
_XOPEN_SOURCE
è&& (
_XOPEN_VERSION
 - 0 == 4))

117  
	#_touµ”
(
c
) (()(
__Œªs_uµ”
[c]))

	)
118  
	#_tŞow”
(
c
) (()(
__Œªs_low”
[c]))

	)
120  
	#_touµ”
(
c
) ((
__ùy³
 + 258)[c])

	)
121  
	#_tŞow”
(
c
) ((
__ùy³
 + 258)[c])

	)
133 
_ùy³
[];

135 #ià!
defšed
(
lšt
è&& !defšed(
__lšt
)

137  
	#i§Íha
(
c
) ((
_ùy³
 + 1)[c] & (
_U
 | 
_L
))

	)
138  
	#isuµ”
(
c
) ((
_ùy³
 + 1)[c] & 
_U
)

	)
139  
	#i¦ow”
(
c
) ((
_ùy³
 + 1)[c] & 
_L
)

	)
140  
	#isdig™
(
c
) ((
_ùy³
 + 1)[c] & 
_N
)

	)
141  
	#isxdig™
(
c
) ((
_ùy³
 + 1)[c] & 
_X
)

	)
142  
	#i§Êum
(
c
) ((
_ùy³
 + 1)[c] & (
_U
 | 
_L
 | 
_N
))

	)
143  
	#is¥aû
(
c
) ((
_ùy³
 + 1)[c] & 
_S
)

	)
144  
	#i¥unù
(
c
) ((
_ùy³
 + 1)[c] & 
_P
)

	)
145  
	#i¥ršt
(
c
) ((
_ùy³
 + 1)[c] & (
_P
 | 
_U
 | 
_L
 | 
_N
 | 
_B
))

	)
146  
	#isg¿ph
(
c
) ((
_ùy³
 + 1)[c] & (
_P
 | 
_U
 | 
_L
 | 
_N
))

	)
147  
	#isúŒl
(
c
) ((
_ùy³
 + 1)[c] & 
_C
)

	)
148  
	#i§scii
(
c
) (!((cè& ~0177))

	)
149  
	#_touµ”
(
c
) ((
_ùy³
 + 258)[c])

	)
150  
	#_tŞow”
(
c
) ((
_ùy³
 + 258)[c])

	)
151  
	#tßscii
(
c
) ((cè& 0177)

	)
157 #ifdef 
__ılu¥lus


	@/usr/include/malloc.h

8 #iâdeà
_MALLOC_H


9  
	#_MALLOC_H


	)
11 #´agm¨
id’t
 "@(#)malloc.h 1.8 92/07/14 SMI"

13 #ifdef 
__ılu¥lus


20  
	#M_MXFAST
 1

	)
21  
	#M_NLBLKS
 2

	)
22  
	#M_GRAIN
 3

	)
24  
	#M_KEEP
 4

	)
29 
	sm®lšfo
 {

30 
¬’a
;

31 
Üdblks
;

32 
smblks
;

33 
hblks
;

34 
hblkhd
;

35 
usmblks
;

36 
fsmblks
;

37 
uÜdblks
;

38 
fÜdblks
;

39 
k“pco¡
;

42 #iâdeà
_SIZE_T


43  
	#_SIZE_T


	)
44 
	tsize_t
;

47 #ià
defšed
(
__STDC__
)

49 *
m®loc
(
size_t
);

50 
ä“
(*);

51 *
»®loc
(*, 
size_t
);

52 
m®lİt
(, );

53 
m®lšfo
 mallinfo();

54 *
ÿÎoc
(
size_t
, size_t);

58 *
m®loc
();

59 
ä“
();

60 *
»®loc
();

61 
m®lİt
();

62 
m®lšfo
 mallinfo();

63 *
ÿÎoc
();

67 #ifdef 
__ılu¥lus


	@/usr/include/math.h

5 #iâdeà
_MATH_H


6  
	#_MATH_H


	)
8 #ifdeà
__ılu¥lus


12 #´agm¨
id’t
 "@(#)math.h 2.6 97/06/05"

14 #ià
defšed
(
_POSIX_SOURCE
è&& !defšed(
_POSIX_C_SOURCE
)

15  
	#_POSIX_C_SOURCE
 1

	)
18 #ifdeà
__STDC__


19  
	#__P
(
p
) 
	)
p

21  
	#__P
(
p
) ()

	)
27 
	u_h_v®
 {

28 
_i
[() / ()];

29 
_d
;

30 } 
	t_h_v®
;

32 #ifdeà
__STDC__


33 cÚ¡ 
_h_v®
 
__huge_v®
;

35 
_h_v®
 
__huge_v®
;

38  
	#HUGE_VAL
 
__huge_v®
.
_d


	)
40 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 - 0 == 0 && \

41 !
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

45  
	#M_E
 2.7182818284590452354

	)
46  
	#M_LOG2E
 1.4426950408889634074

	)
47  
	#M_LOG10E
 0.43429448190325182765

	)
48  
	#M_LN2
 0.69314718055994530942

	)
49  
	#M_LN10
 2.30258509299404568402

	)
50  
	#M_PI
 3.14159265358979323846

	)
51  
	#M_PI_2
 1.57079632679489661923

	)
52  
	#M_PI_4
 0.78539816339744830962

	)
53  
	#M_1_PI
 0.31830988618379067154

	)
54  
	#M_2_PI
 0.63661977236758134308

	)
55  
	#M_2_SQRTPI
 1.12837916709551257390

	)
56  
	#M_SQRT2
 1.41421356237309504880

	)
57  
	#M_SQRT1_2
 0.70710678118654752440

	)
59 
signgam
;

61  
	#MAXFLOAT
 (()3.40282346638528860e+38)

	)
63 #ià
defšed
(
__EXTENSIONS__
è|| !defšed(
_XOPEN_SOURCE
)

67 
	ev”siÚ
 {
	glibm_›“
 = -1, 
	gc_issue_4
, 
	gªsi_1
, 
	g¡riù_ªsi
};

69 #ifdeà
__STDC__


70 cÚ¡ 
v”siÚ
 
_lib_v”siÚ
;

72 
v”siÚ
 
_lib_v”siÚ
;

75 
	sexû±iÚ
 {

76 
	gty³
;

77 *
	gÇme
;

78 
	g¬g1
;

79 
	g¬g2
;

80 
	g»tv®
;

83  
	#HUGE
 
MAXFLOAT


	)
85  
	#_ABS
(
x
) ((xè< 0 ? -(xè: (x))

	)
87  
	#_REDUCE
(
TYPE
, 
X
, 
XN
, 
C1
, 
C2
) { \

88 
x1
 = ()(
TYPE
)
X
, 
x2
 = X - x1; \

89 
X
 = 
x1
 - (
XN
è* (
C1
); X +ğ
x2
; X -ğ(XNè* (
C2
); }

	)
91  
	#DOMAIN
 1

	)
92  
	#SING
 2

	)
93  
	#OVERFLOW
 3

	)
94  
	#UNDERFLOW
 4

	)
95  
	#TLOSS
 5

	)
96  
	#PLOSS
 6

	)
98  
	#_POLY1
(
x
, 
c
) ((c)[0] * (xè+ (c)[1])

	)
99  
	#_POLY2
(
x
, 
c
) (
	`_POLY1
((x), (c)è* (xè+ (c)[2])

	)
100  
	#_POLY3
(
x
, 
c
) (
	`_POLY2
((x), (c)è* (xè+ (c)[3])

	)
101  
	#_POLY4
(
x
, 
c
) (
	`_POLY3
((x), (c)è* (xè+ (c)[4])

	)
102  
	#_POLY5
(
x
, 
c
) (
	`_POLY4
((x), (c)è* (xè+ (c)[5])

	)
103  
	#_POLY6
(
x
, 
c
) (
	`_POLY5
((x), (c)è* (xè+ (c)[6])

	)
104  
	#_POLY7
(
x
, 
c
) (
	`_POLY6
((x), (c)è* (xè+ (c)[7])

	)
105  
	#_POLY8
(
x
, 
c
) (
	`_POLY7
((x), (c)è* (xè+ (c)[8])

	)
106  
	#_POLY9
(
x
, 
c
) (
	`_POLY8
((x), (c)è* (xè+ (c)[9])

	)
113 
acos
 
__P
(());

114 
asš
 
__P
(());

115 
©ª
 
__P
(());

116 
©ª2
 
__P
((, ));

117 
cos
 
__P
(());

118 
sš
 
__P
(());

119 
n
 
__P
(());

121 
cosh
 
__P
(());

122 
sšh
 
__P
(());

123 
nh
 
__P
(());

125 
exp
 
__P
(());

126 
äexp
 
__P
((, *));

127 
ldexp
 
__P
((, ));

128 
log
 
__P
(());

129 
log10
 
__P
(());

130 
modf
 
__P
((, *));

132 
pow
 
__P
((, ));

133 
sq¹
 
__P
(());

135 
û
 
__P
(());

136 
çbs
 
__P
(());

137 
æoÜ
 
__P
(());

138 
fmod
 
__P
((, ));

140 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 - 0 == 0 && \

141 !
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

145 
”f
 
__P
(());

146 
”fc
 
__P
(());

147 
gamma
 
__P
(());

148 
hypÙ
 
__P
((, ));

149 
i¢ª
 
__P
(());

150 
j0
 
__P
(());

151 
j1
 
__P
(());

152 
jn
 
__P
((, ));

153 
lgamma
 
__P
(());

154 
y0
 
__P
(());

155 
y1
 
__P
(());

156 
yn
 
__P
((, ));

158 #ià
defšed
(
__EXTENSIONS__
è|| !defšed(
_XOPEN_SOURCE
) || \

159 
defšed
(
_XOPEN_SOURCE
è&& 
	g_XOPEN_SOURCE_EXTENDED
 - 0 == 1

163 
acosh
 
__P
(());

164 
asšh
 
__P
(());

165 
©ªh
 
__P
(());

166 
cb¹
 
__P
(());

167 
logb
 
__P
(());

168 
Ãxá”
 
__P
((, ));

169 
»mašd”
 
__P
((, ));

170 
sÿlb
 
__P
((, ));

175 
expm1
 
__P
(());

176 
ogb
 
__P
(());

177 
log1p
 
__P
(());

178 
ršt
 
__P
(());

181 #ià
defšed
(
__EXTENSIONS__
è|| !defšed(
_XOPEN_SOURCE
)

185 
m©h”r
 
__P
((
exû±iÚ
 *));

190 
signifiÿnd
 
__P
(());

195 
cİysign
 
__P
((, ));

196 
sÿlbn
 
__P
((, ));

202 #ifdeà
_REENTRANT


203 
gamma_r
 
__P
((, *));

204 
lgamma_r
 
__P
((, *));

210 
modff
 
__P
((, *));

212 
	~<æßtšgpošt.h
>

216 #ifdeà
__ılu¥lus


	@/usr/include/stdarg.h

13 #iâdeà
_STDARG_H


14  
	#_STDARG_H


	)
16 #´agm¨
id’t
 "@(#)stdarg.h 1.38 96/01/26 SMI"

18 #ià
defšed
(
__STDC__
)

20 
	~<sys/va_li¡.h
>

22 #ifdef 
__ılu¥lus


32 #iâdef 
_VA_LIST


33  
	#_VA_LIST


	)
34 
__va_li¡
 
	tva_li¡
;

54 #ià(
defšed
(
__BUILTIN_VA_ARG_INCR
è|| defšed(
¥¬c
è|| defšed(
__¥¬c
) || \

55 
defšed
(
i386
è|| defšed(
__i386
)è&& !(defšed(
lšt
è|| 
	$defšed
(
__lšt
))

57 #ià
	`defšed
(
__µc
)

64 
	`__butš_va_šfo
(
va_li¡
);

65 *
	`__va_¬g
(
va_li¡
, ...);

66  
	#va_¡¬t
(
li¡
, 
Çme
) 
	`__butš_va_šfo
Öi¡)

	)
67  
	#va_¬g
(
li¡
, 
mode
) ((mod*)
	`__va_¬g
Öi¡, (mod*è0))[0]

	)
75  
	#va_¡¬t
(
li¡
, 
Çme
) (èÖi¡ = (
va_li¡
è&
__butš_va_®i¡
)

	)
76  
	#va_¬g
(
li¡
, 
mode
) ((mod*)
	`__butš_va_¬g_šü
((mod*îi¡))[0]

	)
82 #ià
	`defšed
(
__µc
)

91  
	#va_¡¬t
(
li¡
, 
Çme
) (li¡[0].
__»g_§ve_¬—
 = (*)&Çme)

	)
92  
	#va_¬g
(
li¡
, 
mode
) ((mod*)&Öi¡))[0]

	)
102 #ià
__STDC__
 != 0

103  
	#va_¡¬t
(
li¡
, 
Çme
) () (list = (*)((*)&name + \

104 (( (
Çme
è+ ( (è- 1)è& ~( (è- 1))))

	)
106  
	#va_¡¬t
(
li¡
, 
Çme
è(èÖi¡ = (*)((*)&...))

	)
108  
	#va_¬g
(
li¡
, 
mode
) \

109 ((
mode
 *)(
li¡
 = (*)((*îi¡ +  (mode))))[-1]

	)
115 
	`va_’d
(
va_li¡
);

116  
	#va_’d
(
li¡
è()0

	)
122 #ià
	`defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

123 !
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
))

125 #ià
	`defšed
(
__µc
)

126  
	#va_cİy
(
to
, 
äom
) (Ño)[0] = (äom)[0])

	)
128  
	#va_cİy
(
to
, 
äom
) (Ñoèğ(äom))

	)
133 #ifdef 
__ılu¥lus


134 
	}
}

139 
	~<v¬¬gs.h
>

	@/usr/include/stdio.h

12 #iâdeà
_STDIO_H


13  
	#_STDIO_H


	)
15 #´agm¨
id’t
 "@(#)stdio.h 1.49 97/05/09 SMI"

17 
	~<sys/ã©u»_‹¡s.h
>

18 
	~<sys/va_li¡.h
>

28 #ifdef 
__ılu¥lus


32 #iâdeà
_SIZE_T


33  
	#_SIZE_T


	)
34 
	tsize_t
;

37 #ià
_FILE_OFFSET_BITS
 =ğ64 || 
defšed
(
_LARGEFILE64_SOURCE
)

43 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

44 
	t__lÚglÚg_t
;

47 
	u
{

48 
	m_d
;

49 
	m_l
[2];

50 } 
	t__lÚglÚg_t
;

54 #ifdef 
_LARGEFILE_SOURCE


55 #iâdef 
_OFF_T


56  
	#_OFF_T


	)
57 #ià
_FILE_OFFSET_BITS
 == 32

58 
	toff_t
;

60 
__lÚglÚg_t
 
	toff_t
;

62 #ifdef 
_LARGEFILE64_SOURCE


63 
__lÚglÚg_t
 
	toff64_t
;

68 #ià
_FILE_OFFSET_BITS
 == 32

69 
	tåos_t
;

71 
__lÚglÚg_t
 
	tåos_t
;

73 #ifdef 
_LARGEFILE64_SOURCE


74 
__lÚglÚg_t
 
	tåos64_t
;

77 #iâdeà
NULL


78  
	#NULL
 0

	)
81  
	#BUFSIZ
 1024

	)
88 #ià
defšed
(
_XOPEN_SOURCE
è&& (
_XOPEN_VERSION
 - 0 =ğ4è&& !defšed(
_VA_LIST
)

89  
	#_VA_LIST


	)
90 
__va_li¡
 
	tva_li¡
;

93 #ifdef 
__STDC__


107 #ià#machše(
i386
è|| 
defšed
(
__i386
)

108  
	#_NFILE
 60

	)
109 #–ià#machše(
µc
è|| 
defšed
(
__µc
)

110  
	#_NFILE
 20

	)
112  
	#_NFILE
 20

	)
115 #ià
defšed
(
i386
è|| defšed(
__i386
)

116  
	#_NFILE
 60

	)
117 #–ià
defšed
(
__µc
)

118  
	#_NFILE
 20

	)
120  
	#_NFILE
 20

	)
124  
	#_SBFSIZ
 8

	)
126  
	#_IOFBF
 0000

	)
127  
	#_IOLBF
 0100

	)
128  
	#_IONBF
 0004

	)
129  
	#_IOEOF
 0020

	)
130  
	#_IOERR
 0040

	)
132  
	#_IOREAD
 0001

	)
133  
	#_IOWRT
 0002

	)
134  
	#_IORW
 0200

	)
135  
	#_IOMYBUF
 0010

	)
137 #iâdeà
EOF


138  
	#EOF
 (-1)

	)
141  
	#FOPEN_MAX
 
_NFILE


	)
142  
	#FILENAME_MAX
 1024

	)
144  
	#SEEK_SET
 0

	)
145  
	#SEEK_CUR
 1

	)
146  
	#SEEK_END
 2

	)
147  
	#TMP_MAX
 17576

	)
149 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 - 0 == 0 || \

150 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

152  
	#L_ù”mid
 9

	)
153  
	#L_cu£rid
 9

	)
156 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0 && \

157 !
defšed
(
_POSIX_C_SOURCE
))è|| defšed(
_XOPEN_SOURCE
)

159  
	#P_tmpdœ
 "/v¬/tmp/"

	)
162  
	#L_tm²am
 25

	)
164 #ià
defšed
(
__STDC__
)

165  
	#¡dš
 (&
__iob
[0])

	)
166  
	#¡dout
 (&
__iob
[1])

	)
167  
	#¡d”r
 (&
__iob
[2])

	)
169  
	#¡dš
 (&
_iob
[0])

	)
170  
	#¡dout
 (&
_iob
[1])

	)
171  
	#¡d”r
 (&
_iob
[2])

	)
175 
	s
{

176 #ifdeà
_STDIO_REVERSE


177 *
	g_±r
;

178 
	g_út
;

180 
	g_út
;

181 *
	g_±r
;

183 *
	g_ba£
;

184 
	g_æag
;

185 
	g_fe
;

186 } 
	tFILE
;

188 #ià
defšed
(
__STDC__
)

189 
FILE
 
__iob
[
_NFILE
];

191 
FILE
 
_iob
[
_NFILE
];

193 
FILE
 *
_Ï¡buf
;

194 *
_buãndb
[];

195 #iâdeà
_STDIO_ALLOCATE


196 
_sibuf
[], 
_sobuf
[];

200 #ià
_FILE_OFFSET_BITS
 == 64

201 #ifdeà
__PRAGMA_REDEFINE_EXTNAME


202 #´agm¨
»defše_exŠame
 
fİ’
 
fİ’64


203 #´agm¨
»defše_exŠame
 
äeİ’
 
äeİ’64


204 #´agm¨
»defše_exŠame
 
tmpfe
 
tmpfe64


205 #´agm¨
»defše_exŠame
 
fg‘pos
 
fg‘pos64


206 #´agm¨
»defše_exŠame
 
f£os
 
f£os64


207 #ifdef 
_LARGEFILE_SOURCE


208 #´agm¨
»defše_exŠame
 
f£eko
 
f£eko64


209 #´agm¨
»defše_exŠame
 
á–lo
 
á–lo64


212  
	#fİ’
 
fİ’64


	)
213  
	#äeİ’
 
äeİ’64


	)
214  
	#tmpfe
 
tmpfe64


	)
215  
	#fg‘pos
 
fg‘pos64


	)
216  
	#f£os
 
f£os64


	)
217 #ifdef 
_LARGEFILE_SOURCE


218  
	#f£eko
 
f£eko64


	)
219  
	#á–lo
 
á–lo64


	)
224 #ià
defšed
(
__STDC__
)

226 
»move
(const *);

227 
»Çme
(const *, const *);

228 
FILE
 *
tmpfe
();

229 *
tm²am
(*);

230 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
)

231 *
tm²am_r
(*);

233 
fşo£
(
FILE
 *);

234 
fæush
(
FILE
 *);

235 
FILE
 *
fİ’
(const *, const *);

236 
FILE
 *
äeİ’
(const *, const *, FILE *);

237 
£tbuf
(
FILE
 *, *);

238 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

239 (!
defšed
(
_XOPEN_SOURCE
è&& !defšed(
_POSIX_C_SOURCE
))

240 
£tbufãr
(
FILE
 *, *, 
size_t
);

241 
£šebuf
(
FILE
 *);

243 
£tvbuf
(
FILE
 *, *, , 
size_t
);

245 
årštf
(
FILE
 *, const *, ...);

247 
fsÿnf
(
FILE
 *, const *, ...);

249 
´štf
(const *, ...);

251 
sÿnf
(const *, ...);

252 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

253 (!
defšed
(
_XOPEN_SOURCE
è&& !defšed(
_POSIX_C_SOURCE
))

255 
¢´štf
(*, 
size_t
, const *, ...);

258 
¥rštf
(*, const *, ...);

260 
ssÿnf
(const *, const *, ...);

261 
vårštf
(
FILE
 *, cÚ¡ *, 
__va_li¡
);

262 
v´štf
(cÚ¡ *, 
__va_li¡
);

263 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

264 (!
defšed
(
_XOPEN_SOURCE
è&& !defšed(
_POSIX_C_SOURCE
))

265 
v¢´štf
(*, 
size_t
, cÚ¡ *, 
__va_li¡
);

267 
v¥rštf
(*, cÚ¡ *, 
__va_li¡
);

268 
fg‘c
(
FILE
 *);

269 *
fg‘s
(*, , 
FILE
 *);

270 
åutc
(, 
FILE
 *);

271 
åuts
(cÚ¡ *, 
FILE
 *);

272 
g‘c
(
FILE
 *);

273 
g‘ch¬
();

274 *
g‘s
(*);

275 
putc
(, 
FILE
 *);

276 
putch¬
();

277 
puts
(const *);

278 
ung‘c
(, 
FILE
 *);

279 
size_t
 
ä—d
(*, size_t, size_t, 
FILE
 *);

280 
size_t
 
fwr™e
(cÚ¡ *, size_t, size_t, 
FILE
 *);

281 
fg‘pos
(
FILE
 *, 
åos_t
 *);

282 
f£ek
(
FILE
 *, , );

283 
f£os
(
FILE
 *, cÚ¡ 
åos_t
 *);

284 
á–l
(
FILE
 *);

285 
»wšd
(
FILE
 *);

286 
ş—»¼
(
FILE
 *);

287 
ãof
(
FILE
 *);

288 
ã¼Ü
(
FILE
 *);

289 
³¼Ü
(const *);

291 
__fbuf
(
FILE
 *);

292 
__æsbuf
(, 
FILE
 *);

297 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

298 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

300 
FILE
 *
fdİ’
(, const *);

301 *
ù”mid
(*);

302 
f’o
(
FILE
 *);

309 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

310 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

311 
æockfe
(
FILE
 *);

312 
árylockfe
(
FILE
 *);

313 
fuÆockfe
(
FILE
 *);

314 
g‘c_uÆocked
(
FILE
 *);

315 
g‘ch¬_uÆocked
();

316 
putc_uÆocked
(, 
FILE
 *);

317 
putch¬_uÆocked
();

324 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 =ğ0 || defšed(
_XOPEN_SOURCE
)

326 
FILE
 *
pİ’
(const *, const *);

327 *
cu£rid
(*);

328 *
‹m²am
(const *, const *);

329 
g‘İt
(, *const *, const *);

330 #ià!
defšed
(
_XOPEN_SOURCE
)

331 
g‘subİt
(**, *const *, **);

333 *
İrg
;

334 
İtšd
, 
İ‹¼
, 
İtİt
;

335 
g‘w
(
FILE
 *);

336 
putw
(, 
FILE
 *);

337 
pşo£
(
FILE
 *);

344 #if 
defšed
(
_LARGEFILE_SOURCE
)

345 
f£eko
(
FILE
 *, 
off_t
, );

346 
off_t
 
á–lo
(
FILE
 *);

353 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

354 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

355 
FILE
 *
fİ’64
(const *, const *);

356 
FILE
 *
äeİ’64
(const *, const *, FILE *);

357 
FILE
 *
tmpfe64
();

358 
fg‘pos64
(
FILE
 *, 
åos64_t
 *);

359 
f£os64
(
FILE
 *, cÚ¡ 
åos64_t
 *);

360 
f£eko64
(
FILE
 *, 
off64_t
, );

361 
off64_t
 
á–lo64
(
FILE
 *);

366  
	#_buãnd
(
p
) ((
	`f’o
Õè< 
_NFILE
è? 
_buãndb
[Õ)->
_fe
] : \

367 (*)
	`_»®buãnd
(
p
))

	)
368  
	#_bufsiz
(
p
) (
	`_buãnd
Õè- (p)->
_ba£
)

	)
370 
»move
();

371 
»Çme
();

372 
FILE
 *
tmpfe
();

373 *
tm²am
();

374 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
)

375 *
tm²am_r
();

377 
fşo£
();

378 
fæush
();

379 
FILE
 *
fİ’
();

380 
FILE
 *
äeİ’
();

381 
£tbuf
();

382 
£tvbuf
();

383 
årštf
();

384 
fsÿnf
();

385 
´štf
();

386 
sÿnf
();

387 
¥rštf
();

388 
ssÿnf
();

389 
vårštf
();

390 
v´štf
();

391 
v¥rštf
();

392 
fg‘c
();

393 *
fg‘s
();

394 
åutc
();

395 
åuts
();

396 
g‘c
();

397 
g‘ch¬
();

398 *
g‘s
();

399 
putc
();

400 
putch¬
();

401 
puts
();

402 
ung‘c
();

403 
size_t
 
ä—d
();

404 
size_t
 
fwr™e
();

405 
fg‘pos
();

406 
f£ek
();

407 
f£os
();

408 
á–l
();

409 
»wšd
();

410 
ş—»¼
();

411 
ãof
();

412 
ã¼Ü
();

413 
³¼Ü
();

415 
_fbuf
();

416 
_æsbuf
();

418 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

419 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

420 
FILE
 *
fdİ’
();

421 *
ù”mid
();

422 
f’o
();

425 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

426 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

427 
æockfe
();

428 
árylockfe
();

429 
fuÆockfe
();

430 
g‘c_uÆocked
();

431 
g‘ch¬_uÆocked
();

432 
putc_uÆocked
();

433 
putch¬_uÆocked
();

436 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 =ğ0 || defšed(
_XOPEN_SOURCE
)

437 
FILE
 *
pİ’
();

438 *
cu£rid
();

439 *
‹m²am
();

440 
g‘İt
();

441 #ià!
defšed
(
_XOPEN_SOURCE
)

442 
g‘subİt
();

444 *
İrg
;

445 
İtšd
, 
İ‹¼
, 
İtİt
;

446 
g‘w
();

447 
putw
();

448 
pşo£
();

451 #if 
defšed
(
_LARGEFILE_SOURCE
)

452 
f£eko
();

453 
off_t
 
á–lo
();

456 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

457 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

458 
FILE
 *
fİ’64
();

459 
FILE
 *
äeİ’64
();

460 
FILE
 *
tmpfe64
();

461 
fg‘pos64
();

462 
f£os64
();

463 
f£eko64
();

464 
off64_t
 
á–lo64
();

469 #ià!
defšed
(
lšt
è&& !defšed(
__lšt
)

471 #iâdef 
_REENTRANT


472 #ifdef 
__STDC__


473  
	#g‘c
(
p
) (--Õ)->
_út
 < 0 ? 
	`__fbuf
Õè: ()*Õ)->
_±r
++)

	)
474  
	#putc
(
x
, 
p
) (--Õ)->
_út
 < 0 ? 
	`__æsbuf
((x), (p)) \

475 : ()(*(
p
)->
_±r
++ = (è(
x
)))

	)
477  
	#g‘c
(
p
) (--Õ)->
_út
 < 0 ? 
	`_fbuf
Õè: (è*Õ)->
_±r
++)

	)
478  
	#putc
(
x
, 
p
) (--Õ)->
_út
 < 0 ? \

479 
	`_æsbuf
((
x
), (
p
)) : \

480 (è(*(
p
)->
_±r
++ = (è(
x
)))

	)
482  
	#g‘ch¬
() 
	`g‘c
(
¡dš
)

	)
483  
	#putch¬
(
x
) 
	`putc
((x), 
¡dout
)

	)
484  
	#ş—»¼
(
p
) (()(Õ)->
_æag
 &ğ~(
_IOERR
 | 
_IOEOF
)))

	)
485  
	#ãof
(
p
) (Õ)->
_æag
 & 
_IOEOF
)

	)
486  
	#ã¼Ü
(
p
) (Õ)->
_æag
 & 
_IOERR
)

	)
489 #ià
defšed
(
__EXTENSIONS__
è|| (
__STDC__
 -0 == 0) || \

490 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

491  
	#f’o
(
p
) (Õ)->
_fe
)

	)
494 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

495 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

496 #ifdef 
__STDC__


497  
	#g‘c_uÆocked
(
p
) (--Õ)->
_út
 < 0 \

498 ? 
	`__fbuf
(
p
) \

499 : ()*(
p
)->
_±r
++)

	)
500  
	#putc_uÆocked
(
x
, 
p
) (--Õ)->
_út
 < 0 \

501 ? 
	`__æsbuf
((
x
), (
p
)) \

502 : ()(*(
p
)->
_±r
++ = \

503 (è(
x
)))

	)
505  
	#g‘c_uÆocked
(
p
) (--Õ)->
_út
 < 0 \

506 ? 
	`_fbuf
(
p
) \

507 : ()*(
p
)->
_±r
++)

	)
508  
	#putc_uÆocked
(
x
, 
p
) (--Õ)->
_út
 < 0 \

509 ? 
	`_æsbuf
((
x
), (
p
)) \

510 : ()(*(
p
)->
_±r
++ = \

511 (è(
x
)))

	)
513  
	#g‘ch¬_uÆocked
() 
	`g‘c_uÆocked
(
¡dš
)

	)
514  
	#putch¬_uÆocked
(
x
) 
	`putc_uÆocked
((x), 
¡dout
)

	)
519 #ifdef 
__ılu¥lus


	@/usr/include/stdlib.h

13 #iâdeà
_STDLIB_H


14  
	#_STDLIB_H


	)
16 #´agm¨
id’t
 "@(#)stdlib.h 1.40 97/06/30 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

20 #ià
defšed
(
__EXTENSIONS__
) || \

21 (
defšed
(
_XOPEN_SOURCE
è&& (
	g_XOPEN_VERSION
 - 0 == 4))

22 
	~<sys/wa™.h
>

25 #ifdef 
__ılu¥lus


29 
	s
{

30 
quÙ
;

31 
»m
;

32 } 
	tdiv_t
;

34 
	s
{

35 
quÙ
;

36 
»m
;

37 } 
	tldiv_t
;

39 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

40 
	s
{

41 
quÙ
;

42 
»m
;

43 } 
	tÎdiv_t
;

46 #iâdeà
_SIZE_T


47  
	#_SIZE_T


	)
48 
	tsize_t
;

51 #iâdeà
_UID_T


52  
	#_UID_T


	)
53 
	tuid_t
;

56 #iâdef 
NULL


57  
	#NULL
 0

	)
60  
	#EXIT_FAILURE
 1

	)
61  
	#EXIT_SUCCESS
 0

	)
62  
	#RAND_MAX
 32767

	)
64 #iâdeà
_WCHAR_T


65  
	#_WCHAR_T


	)
66 
	twch¬_t
;

69 #ià
defšed
(
__STDC__
)

72 #ià
_FILE_OFFSET_BITS
 == 64

75 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

76 (
_POSIX_C_SOURCE
 > 2è|| 
defšed
(
__EXTENSIONS__
)

78 #ifdef 
__PRAGMA_REDEFINE_EXTNAME


79 #´agm¨
»defše_exŠame
 
mk¡emp
 
mk¡emp64


81  
	#mk¡emp
 
mk¡emp64


	)
88 
__ùy³
[];

90  
	#MB_CUR_MAX
 
__ùy³
[520]

	)
92 
©of
(const *);

93 
©oi
(const *);

94 
©Ş
(const *);

95 
¡¹od
(const *, **);

96 
¡¹Ş
(const *, **, );

97 
¡¹oul
(const *, **, );

99 
¿nd
();

100 
¤ªd
();

101 #ià
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

102 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

103 
¿nd_r
(*);

106 *
ÿÎoc
(
size_t
, size_t);

107 
ä“
(*);

108 *
m®loc
(
size_t
);

109 *
»®loc
(*, 
size_t
);

111 
abÜt
();

112 
©ex™
((*)());

113 
ex™
();

114 
_ex™hªdË
();

115 *
g‘’v
(const *);

116 
sy¡em
(const *);

118 *
b£¬ch
(cÚ¡ *, cÚ¡ *, 
size_t
, size_t,

120 
qsÜt
(*, 
size_t
, size_t,

123 
abs
();

124 
div_t
 
div
(, );

125 
Ïbs
();

126 
ldiv_t
 
ldiv
(, );

128 
mbtowc
(
wch¬_t
 *, cÚ¡ *, 
size_t
);

129 
mbËn
(cÚ¡ *, 
size_t
);

130 
wùomb
(*, 
wch¬_t
);

132 
size_t
 
mb¡owcs
(
wch¬_t
 *, const *, size_t);

133 
size_t
 
wc¡ombs
(*, cÚ¡ 
wch¬_t
 *, size_t);

135 #ià
defšed
(
__EXTENSIONS__
) || \

136 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
)) || \

137 (
defšed
(
_XOPEN_SOURCE
è&& (
_XOPEN_VERSION
 - 0 == 4))

138 
d¿nd48
();

139 
”ªd48
(*);

140 
j¿nd48
(*);

141 
lcÚg48
(*);

142 
Ìªd48
();

143 
m¿nd48
();

144 
Äªd48
(*);

145 *
£ed48
(*);

146 
¤ªd48
();

147 
pu‹nv
(const *);

148 
£tkey
(const *);

151 #ià(
defšed
(
__EXTENSIONS__
) || \

152 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
))) && \

153 ((
_XOPEN_VERSION
 - 0 < 4è&& (
_XOPEN_SOURCE_EXTENDED
 - 0 < 1))

154 
swab
(const *, *, );

157 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

158 
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

159 
mk¡emp
(*);

160 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

161 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

162 
mk¡emp64
(*);

166 #ià
defšed
(
__EXTENSIONS__
) || \

167 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
) && \

168 !
defšed
(
_XOPEN_SOURCE
)è|| defšed(
_XPG4_2
)

169 
a64l
(const *);

170 *
ecvt
(, , *, *);

171 *
fcvt
(, , *, *);

172 *
gcvt
(, , *);

173 
g‘subİt
(**, *const *, **);

174 
g¿Á±
();

175 *
š™¡©e
(, *, 
size_t
);

176 *
l64a
();

177 *
mk‹mp
(*);

178 *
±¢ame
();

179 
¿ndom
();

180 *
»®·th
(const *, *);

181 *
£t¡©e
(const *);

182 
¤ªdom
();

183 
‰y¦Ù
();

184 
uÆock±
();

185 *
v®loc
(
size_t
);

188 #ià
defšed
(
__EXTENSIONS__
) || \

189 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
))

190 
dup2
(, );

191 *
qecvt
(, , *, *);

192 *
qfcvt
(, , *, *);

193 *
qgcvt
(, , *);

194 *
g‘cwd
(*, 
size_t
);

195 cÚ¡ *
g‘exeúame
();

196 *
g‘logš
();

197 
g‘İt
(, *const *, const *);

198 *
İrg
;

199 
İtšd
, 
İ‹¼
, 
İtİt
;

200 *
g‘·ss
(const *);

201 *
g‘·s¥h¿£
(const *);

202 
g‘pw
(
uid_t
, *);

203 
i§‰y
();

204 *
mem®ign
(
size_t
, size_t);

205 *
‰yÇme
();

207 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

208 
©Şl
(const *);

209 
Îabs
();

210 
Îdiv_t
 
Îdiv
(, );

211 *
Îto¡r
(, *);

212 
¡¹Şl
(const *, **, );

213 
¡¹ouÎ
(const *, **, );

214 *
uÎto¡r
(, *);

221 
_ùy³
[];

223  
	#MB_CUR_MAX
 
_ùy³
[520]

	)
225 
©of
();

226 
©oi
();

227 
©Ş
();

228 
¡¹od
();

229 
¡¹Ş
();

230 
¡¹oul
();

232 
¿nd
();

233 
¤ªd
();

234 #ià
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

235 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

236 
¿nd_r
();

239 *
ÿÎoc
();

240 
ä“
();

241 *
m®loc
();

242 *
»®loc
();

244 
abÜt
();

245 
©ex™
();

246 
ex™
();

247 
_ex™hªdË
();

248 *
g‘’v
();

249 
sy¡em
();

251 *
b£¬ch
();

252 
qsÜt
();

254 
abs
();

255 
div_t
 
div
();

256 
Ïbs
();

257 
ldiv_t
 
ldiv
();

259 
mbtowc
();

260 
mbËn
();

261 
wùomb
();

263 
size_t
 
mb¡owcs
();

264 
size_t
 
wc¡ombs
();

266 #ià
defšed
(
__EXTENSIONS__
) || \

267 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
)) || \

268 (
defšed
(
_XOPEN_SOURCE
è&& (
_XOPEN_VERSION
 - 0 == 4))

269 
d¿nd48
();

270 
”ªd48
();

271 
j¿nd48
();

272 
lcÚg48
();

273 
Ìªd48
();

274 
m¿nd48
();

275 
Äªd48
();

276 *
£ed48
();

277 
¤ªd48
();

278 
pu‹nv
();

279 
£tkey
();

282 #ià(
defšed
(
__EXTENSIONS__
) || \

283 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
))) && \

284 ((
_XOPEN_VERSION
 - 0 < 4è&& (
_XOPEN_SOURCE_EXTENDED
 - 0 < 1))

285 
swab
();

288 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

289 
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

290 
mk¡emp
();

291 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

292 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

293 
mk¡emp64
();

297 #ià
defšed
(
__EXTENSIONS__
) || \

298 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
) && \

299 !
defšed
(
_XOPEN_SOURCE
)è|| defšed(
_XPG4_2
)

300 
a64l
();

301 *
ecvt
();

302 *
fcvt
();

303 *
gcvt
();

304 
g‘subİt
();

305 
g¿Á±
();

306 *
š™¡©e
();

307 *
l64a
();

308 *
mk‹mp
();

309 *
±¢ame
();

310 
¿ndom
();

311 *
»®·th
();

312 *
£t¡©e
();

313 
¤ªdom
();

314 
‰y¦Ù
();

315 *
v®loc
();

316 
uÆock±
();

319 #ià
defšed
(
__EXTENSIONS__
) || \

320 (
	g__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
))

321 
dup2
();

322 *
qecvt
();

323 *
qfcvt
();

324 *
qgcvt
();

325 *
g‘cwd
();

326 *
g‘exeúame
();

327 *
g‘logš
();

328 
g‘İt
();

329 *
İrg
;

330 
İtšd
, 
İ‹¼
, 
İtİt
;

331 *
g‘·ss
();

332 *
g‘·s¥h¿£
();

333 
g‘pw
();

334 
i§‰y
();

335 *
mem®ign
();

336 *
‰yÇme
();

338 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

339 
©Şl
();

340 
Îabs
();

341 
Îdiv_t
 
Îdiv
();

342 *
Îto¡r
();

343 
¡¹Şl
();

344 
¡¹ouÎ
();

345 *
uÎto¡r
();

351 #ifdef 
__ılu¥lus


	@/usr/include/string.h

14 #iâdeà
_STRING_H


15  
	#_STRING_H


	)
17 #´agm¨
id’t
 "@(#)string.h 1.19 96/03/12 SMI"

19 
	~<sys/ã©u»_‹¡s.h
>

21 #ifdef 
__ılu¥lus


25 #iâdeà
_SIZE_T


26  
	#_SIZE_T


	)
27 
	tsize_t
;

30 #iâdeà
NULL


31  
	#NULL
 0

	)
34 #ià
defšed
(
__STDC__
)

36 *
memıy
(*, cÚ¡ *, 
size_t
);

37 *
memmove
(*, cÚ¡ *, 
size_t
);

38 *
¡rıy
(*, const *);

39 *
¡ºıy
(*, cÚ¡ *, 
size_t
);

41 *
¡rÿt
(*, const *);

42 *
¡ºÿt
(*, cÚ¡ *, 
size_t
);

44 
memcmp
(cÚ¡ *, cÚ¡ *, 
size_t
);

45 
¡rcmp
(const *, const *);

46 
¡rcŞl
(const *, const *);

47 
¡ºcmp
(cÚ¡ *, cÚ¡ *, 
size_t
);

48 
size_t
 
¡rxäm
(*, const *, size_t);

50 *
memchr
(cÚ¡ *, , 
size_t
);

51 *
¡rchr
(const *, );

52 
size_t
 
¡rc¥n
(const *, const *);

53 *
¡½brk
(const *, const *);

54 *
¡¼chr
(const *, );

55 
size_t
 
¡r¥n
(const *, const *);

56 *
¡r¡r
(const *, const *);

57 *
¡¹ok
(*, const *);

58 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

59 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

60 *
¡¹ok_r
(*, const *, **);

62 *
mem£t
(*, , 
size_t
);

63 *
¡»¼Ü
();

64 
size_t
 
¡¾’
(const *);

66 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

67 
defšed
(
_POSIX_C_SOURCE
è|| 
	$defšed
(
_XOPEN_SOURCE
)

68 *
	`memcıy
(*, cÚ¡ *, , 
size_t
);

71 #ià
	`defšed
(
__EXTENSIONS__
è|| (
__STDC__
 == 0 && \

72 !
	`defšed
(
_POSIX_C_SOURCE
è&& !
	$defšed
(
_XOPEN_SOURCE
))

73 *
	`¡rsigÇl
();

74 
	`ffs
();

75 
	`¡rÿ£cmp
(const *, const *);

76 
	`¡ºÿ£cmp
(cÚ¡ *, cÚ¡ *, 
size_t
);

79 #ià
	`defšed
(
__EXTENSIONS__
è|| (
__STDC__
 == 0 && \

80 !
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

81 
	$defšed
(
_XPG4_2
)

82 *
	`¡rdup
(const *);

87 *
	`memıy
();

88 *
	`memmove
();

89 *
	`¡rıy
();

90 *
	`¡ºıy
();

92 *
	`¡rÿt
();

93 *
	`¡ºÿt
();

95 
	`memcmp
();

96 
	`¡rcmp
();

97 
	`¡rcŞl
();

98 
	`¡ºcmp
();

99 
size_t
 
	`¡rxäm
();

101 *
	`memchr
();

102 *
	`¡rchr
();

103 
size_t
 
	`¡rc¥n
();

104 *
	`¡½brk
();

105 *
	`¡¼chr
();

106 
size_t
 
	`¡r¥n
();

107 *
	`¡r¡r
();

108 *
	`¡¹ok
();

109 #ià
	`defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

110 (
_POSIX_C_SOURCE
 - 0 >= 199506L)

111 *
	`¡¹ok_r
();

113 *
	`mem£t
();

114 *
	`¡»¼Ü
();

115 
size_t
 
	`¡¾’
();

117 #ià
	`defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

118 
	`defšed
(
_POSIX_C_SOURCE
è|| 
	$defšed
(
_XOPEN_SOURCE
)

119 *
	`memcıy
();

122 #ià
	`defšed
(
__EXTENSIONS__
) || \

123 !
	`defšed
(
_POSIX_C_SOURCE
è&& !
	$defšed
(
_XOPEN_SOURCE
)

124 *
	`¡rsigÇl
();

125 
	`ffs
();

126 
	`¡rÿ£cmp
();

127 
	`¡ºÿ£cmp
();

130 #ià
	`defšed
(
__EXTENSIONS__
) || \

131 !
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
) || \

132 
	$defšed
(
_XPG4_2
)

133 *
	`¡rdup
();

138 #ifdef 
__ılu¥lus


139 
	}
}

	@/usr/include/strings.h

6 #iâdef 
_STRINGS_H


7  
	#_STRINGS_H


	)
9 #´agm¨
id’t
 "@(#)strings.h 1.3 96/03/12 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/ã©u»_‹¡s.h
>

14 #ià!
defšed
(
_XOPEN_SOURCE
è|| defšed(
__EXTENSIONS__
)

15 
	~<¡ršg.h
>

18 #ifdef 
__ılu¥lus


22 #ià
defšed
(
__STDC__
)

24 
bcmp
(cÚ¡ *, cÚ¡ *, 
size_t
);

25 
bcİy
(cÚ¡ *, *, 
size_t
);

26 
bz”o
(*, 
size_t
);

28 *
šdex
(const *, );

29 *
ršdex
(const *, );

41 #ià
defšed
(
_XPG4_2
è&& !defšed(
__EXTENSIONS__
)

42 
ffs
();

43 
¡rÿ£cmp
(const *, const *);

44 
¡ºÿ£cmp
(cÚ¡ *, cÚ¡ *, 
size_t
);

49 
bcmp
();

50 
bcİy
();

51 
bz”o
();

53 *
šdex
();

54 *
ršdex
();

56 #ià
defšed
(
_XPG4_2
è&& !defšed(
__EXTENSIONS__
)

57 
ffs
();

58 
¡rÿ£cmp
();

59 
¡ºÿ£cmp
();

64 #ifdef 
__ılu¥lus


	@/usr/include/time.h

15 #iâdeà
_TIME_H


16  
	#_TIME_H


	)
18 #´agm¨
id’t
 "@(#)time.h 1.25 96/03/12 SMI"

20 
	~<sys/ã©u»_‹¡s.h
>

22 #ifdef 
__ılu¥lus


26 #iâdeà
NULL


27  
	#NULL
 0

	)
30 #iâdeà
_SIZE_T


31  
	#_SIZE_T


	)
32 
	tsize_t
;

34 #iâdeà
_CLOCK_T


35  
	#_CLOCK_T


	)
36 
	tşock_t
;

38 #iâdeà
_TIME_T


39  
	#_TIME_T


	)
40 
	ttime_t
;

42 #iâdeà
_CLOCKID_T


43  
	#_CLOCKID_T


	)
44 
	tşockid_t
;

46 #iâdeà
_TIMER_T


47  
	#_TIMER_T


	)
48 
	ttim”_t
;

51  
	#CLOCKS_PER_SEC
 1000000

	)
53 
	stm
 {

54 
	gtm_£c
;

55 
	gtm_mš
;

56 
	gtm_hour
;

57 
	gtm_mday
;

58 
	gtm_mÚ
;

59 
	gtm_y—r
;

60 
	gtm_wday
;

61 
	gtm_yday
;

62 
	gtm_isd¡
;

65 #ià
defšed
(
__STDC__
)

67 
şock_t
 
şock
();

68 
difáime
(
time_t
,ime_t);

69 
time_t
 
mktime
(
tm
 *);

70 
time_t
 
time
(time_t *);

71 *
asùime
(cÚ¡ 
tm
 *);

72 *
ùime
(cÚ¡ 
time_t
 *);

73 
tm
 *
gmtime
(cÚ¡ 
time_t
 *);

74 
tm
 *
loÿÉime
(cÚ¡ 
time_t
 *);

75 
size_t
 
¡ráime
(*, size_t, cÚ¡ *, cÚ¡ 
tm
 *);

77 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

78 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

79 
tm
 *
gmtime_r
(cÚ¡ 
time_t
 *, tm *);

80 
tm
 *
loÿÉime_r
(cÚ¡ 
time_t
 *, tm *);

83 #ià(
__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

84 (
defšed
(
_XOPEN_SOURCE
è&& 
	g_XOPEN_VERSION
 - 0 == 4) || \

85 
defšed
(
__EXTENSIONS__
)

86 *
¡½time
(cÚ¡ *, cÚ¡ *, 
tm
 *);

89 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

90 !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

91 (
	g_POSIX_C_SOURCE
 > 2)

93 
	~<sys/time.h
>

94 
	~<sys/sigšfo.h
>

95 
şock_g‘»s
(
şockid_t
, 
time¥ec
 *);

96 
şock_g‘time
(
şockid_t
, 
time¥ec
 *);

97 
şock_£‰ime
(
şockid_t
, cÚ¡ 
time¥ec
 *);

99 
tim”_ü—‹
(
şockid_t
, 
sigev’t
 *, 
tim”_t
 *);

100 
tim”_d–‘e
(
tim”_t
);

101 
tim”_g‘ov”run
(
tim”_t
);

102 
tim”_g‘time
(
tim”_t
, 
™im”¥ec
 *);

103 
tim”_£‰ime
(
tim”_t
, , cÚ¡ 
™im”¥ec
 *,

104 
™im”¥ec
 *);

105 
Çno¦“p
(cÚ¡ 
time¥ec
 *, timespec *);

109 #ià
defšed
(
__EXTENSIONS__
è|| 
__STDC__
 == 0 || \

110 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

111 
tz£t
();

113 *
tzÇme
[2];

115 #iâdeà
CLK_TCK


116 
_syscÚf
();

117  
	#CLK_TCK
 
	`_syscÚf
(3)

	)
121 #ià
defšed
(
__EXTENSIONS__
è|| (
__STDC__
 == 0 && \

122 !
defšed
(
_POSIX_C_SOURCE
)è|| defšed(
_XOPEN_SOURCE
)

123 
timezÚe
;

124 
daylight
;

129 #ià
__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)

130 
cáime
(*, *, cÚ¡ 
time_t
 *);

131 
ascáime
(*, cÚ¡ *, cÚ¡ 
tm
 *);

132 
®tzÚe
;

135 #ià(
__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

136 
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

137 
tm
 *
g‘d©e
(const *);

139 #ifdef 
_REENTRANT


140 #undeà
g‘d©e_”r


141  
	#g‘d©e_”r
 *(*)
	`_g‘d©e_”r_addr
()

	)
142 *
_g‘d©e_”r_addr
();

144 
g‘d©e_”r
;

150 
şock
();

151 
difáime
();

152 
time_t
 
mktime
();

153 
time_t
 
time
();

154 
size_t
 
¡ráime
();

155 
tm
 *
gmtime
(), *
loÿÉime
();

156 *
ùime
(), *
asùime
(), *
¡½time
();

157 
cáime
(), 
ascáime
();

158 
tz£t
();

160 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

161 (
	g_POSIX_C_SOURCE
 - 0 >= 199506L)

162 
tm
 *
gmtime_r
();

163 
tm
 *
loÿÉime_r
();

166 
timezÚe
, 
®tzÚe
;

167 
daylight
;

168 *
tzÇme
[2];

170 #ià(
__STDC__
 =ğ0 && !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

171 
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

172 
tm
 *
g‘d©e
();

173 #ifdef 
_REENTRANT


174 #undeà
g‘d©e_”r


175  
	#g‘d©e_”r
 *(*)
	`_g‘d©e_”r_addr
()

	)
176 *
_g‘d©e_”r_addr
();

178 
g‘d©e_”r
;

219 #if 
defšed
(
__EXTENSIONS__
è|| defšed(
_REENTRANT
) || \

220 (
	g_POSIX_C_SOURCE
 - 0 >ğ199506Lè|| 
defšed
(
_POSIX_PTHREAD_SEMANTICS
)

222 #if 
defšed
(
__STDC__
)

224 #if (
_POSIX_C_SOURCE
 - 0 >ğ199506Lè|| 
defšed
(
_POSIX_PTHREAD_SEMANTICS
)

226 #ifdeà
__PRAGMA_REDEFINE_EXTNAME


227 *
asùime_r
(cÚ¡ 
tm
 *, *);

228 *
ùime_r
(cÚ¡ 
time_t
 *, *);

229 #´agm¨
»defše_exŠame
 
ùime_r
 
__posix_ùime_r


230 #´agm¨
»defše_exŠame
 
asùime_r
 
__posix_asùime_r


234 
asùime_r
(cÚ¡ 
tm
 *
__tm
, *
__buf
)

236 *
__posix_asùime_r
(cÚ¡ 
tm
 *, *);

237  (
__posix_asùime_r
(
__tm
, 
__buf
));

240 
ùime_r
(cÚ¡ 
time_t
 *
__time
, *
__buf
)

242 *
__posix_ùime_r
(cÚ¡ 
time_t
 *, *);

243  (
__posix_ùime_r
(
__time
, 
__buf
));

249 *
asùime_r
(cÚ¡ 
tm
 *, *, );

250 *
ùime_r
(cÚ¡ 
time_t
 *, *, );

256 #if (
_POSIX_C_SOURCE
 - 0 >ğ199506Lè|| 
defšed
(
_POSIX_PTHREAD_SEMANTICS
)

258 #ifdeà
__PRAGMA_REDEFINE_EXTNAME


259 *
asùime_r
();

260 *
ùime_r
();

261 #´agm¨
»defše_exŠame
 
asùime_r
 
__posix_asùime_r


262 #´agm¨
»defše_exŠame
 
ùime_r
 
__posix_ùime_r


266 
asùime_r
(
__tm
, 
__buf
)

267 
tm
 *
	g__tm
;

268 *
	g__buf
;

270 *
__posix_asùime_r
();

271  (
__posix_asùime_r
(
__tm
, 
__buf
));

274 
ùime_r
(
__time
, 
__buf
)

275 
time_t
 *
	g__time
;

276 *
	g__buf
;

278 *
__posix_ùime_r
();

279  (
__posix_ùime_r
(
__time
, 
__buf
));

285 *
asùime_r
();

286 *
ùime_r
();

294 #ifdef 
__ılu¥lus


	@/usr/include/floatingpoint.h

8 #iâdeà
_FLOATINGPOINT_H


9  
	#_FLOATINGPOINT_H


	)
11 #ifdeà 
__ılu¥lus


15 #´agm¨
id’t
 "@(#)floatingpoint.h 2.4 94/06/09"

32 #ifdeà
__STDC__


33 
	~<¡dio.h
>

35 
	~<sys/›“å.h
>

37 #ifdeà
__STDC__


38  
	#__P
(
p
) 
	)
p

40  
	#__P
(
p
) ()

	)
43  
	#N_IEEE_EXCEPTION
 5

	)
45 
	tsigåe_code_ty³
;

47 (*
sigåe_hªdËr_ty³
)();

49  
	#SIGFPE_DEFAULT
 ((*)())0

	)
50  
	#SIGFPE_IGNORE
 ((*)())1

	)
51  
	#SIGFPE_ABORT
 ((*)())2

	)
53 
sigåe_hªdËr_ty³
 
sigåe
 
__P
((
sigåe_code_ty³
, sigfpe_handler_type));

58 
	tsšgË
;

60 #iâdeà
_EXTENDED


61  
	#_EXTENDED


	)
62 
	tex‹nded
[3];

65 
	tquadru¶e
;

67 
	tå_exû±iÚ_f›ld_ty³
;

75  
	#DECIMAL_STRING_LENGTH
 512

	)
77 
	tdecim®_¡ršg
[
DECIMAL_STRING_LENGTH
];

80 
	s
{

81 
å_şass_ty³
 
	gåşass
;

82 
	gsign
;

83 
	gexpÚ’t
;

84 
decim®_¡ršg
 
	gds
;

87 
	gmÜe
;

90 
	gndig™s
;

93 } 
	tdecim®_»cÜd
;

95 
	edecim®_fÜm
 {

96 
	gfixed_fÜm
,

99 
	gæßtšg_fÜm


103 
	s
{

104 
å_dœeùiÚ_ty³
 
	grd
;

106 
decim®_fÜm
 
	gdf
;

108 
	gndig™s
;

109 } 
	tdecim®_mode
;

111 
	edecim®_¡ršg_fÜm
 {

112 
	gšv®id_fÜm
,

113 
	gwh™e¥aû_fÜm
,

114 
	gfixed_št_fÜm
,

115 
	gfixed_štdÙ_fÜm
,

116 
	gfixed_dÙäac_fÜm
,

117 
	gfixed_štdÙäac_fÜm
,

118 
	gæßtšg_št_fÜm
,

119 
	gæßtšg_štdÙ_fÜm
,

120 
	gæßtšg_dÙäac_fÜm
,

121 
	gæßtšg_štdÙäac_fÜm
,

122 
	gšf_fÜm
,

123 
	gšfš™y_fÜm
,

124 
	gÇn_fÜm
,

125 
	gÇn¡ršg_fÜm


128 
sšgË_to_decim®
 
__P
((
sšgË
 *, 
decim®_mode
 *, 
decim®_»cÜd
 *,

129 
å_exû±iÚ_f›ld_ty³
 *));

130 
doubË_to_decim®
 
__P
((*, 
decim®_mode
 *, 
decim®_»cÜd
 *,

131 
å_exû±iÚ_f›ld_ty³
 *));

132 
ex‹nded_to_decim®
 
__P
((
ex‹nded
 *, 
decim®_mode
 *,

133 
decim®_»cÜd
 *, 
å_exû±iÚ_f›ld_ty³
 *));

134 
quadru¶e_to_decim®
 
__P
((
quadru¶e
 *, 
decim®_mode
 *,

135 
decim®_»cÜd
 *, 
å_exû±iÚ_f›ld_ty³
 *));

137 
decim®_to_sšgË
 
__P
((
sšgË
 *, 
decim®_mode
 *, 
decim®_»cÜd
 *,

138 
å_exû±iÚ_f›ld_ty³
 *));

139 
decim®_to_doubË
 
__P
((*, 
decim®_mode
 *, 
decim®_»cÜd
 *,

140 
å_exû±iÚ_f›ld_ty³
 *));

141 
decim®_to_ex‹nded
 
__P
((
ex‹nded
 *, 
decim®_mode
 *,

142 
decim®_»cÜd
 *, 
å_exû±iÚ_f›ld_ty³
 *));

143 
decim®_to_quadru¶e
 
__P
((
quadru¶e
 *, 
decim®_mode
 *,

144 
decim®_»cÜd
 *, 
å_exû±iÚ_f›ld_ty³
 *));

146 
¡ršg_to_decim®
 
__P
((**, , , 
decim®_»cÜd
 *,

147 
decim®_¡ršg_fÜm
 *, **));

148 
func_to_decim®
 
__P
((**, , , 
decim®_»cÜd
 *,

149 
decim®_¡ršg_fÜm
 *, **,

151 
fe_to_decim®
 
__P
((**, , , 
decim®_»cÜd
 *,

152 
decim®_¡ršg_fÜm
 *, **,

153 
FILE
 *, *));

155 *
£cÚv”t
 
__P
((
sšgË
 *, , *, *, *));

156 *
sfcÚv”t
 
__P
((
sšgË
 *, , *, *, *));

157 *
sgcÚv”t
 
__P
((
sšgË
 *, , , *));

158 *
ecÚv”t
 
__P
((, , *, *, *));

159 *
fcÚv”t
 
__P
((, , *, *, *));

160 *
gcÚv”t
 
__P
((, , , *));

161 *
qecÚv”t
 
__P
((
quadru¶e
 *, , *, *, *));

162 *
qfcÚv”t
 
__P
((
quadru¶e
 *, , *, *, *));

163 *
qgcÚv”t
 
__P
((
quadru¶e
 *, , , *));

165 *
ecvt
 
__P
((, , *, *));

166 *
fcvt
 
__P
((, , *, *));

167 *
gcvt
 
__P
((, , *));

173 
©of
 
__P
((const *));

174 
¡¹od
 
__P
((const *, **));

176 #ifdeà 
__ılu¥lus


	@/usr/include/sys/feature_tests.h

8 #iâdeà
_SYS_FEATURE_TESTS_H


9  
	#_SYS_FEATURE_TESTS_H


	)
11 #´agm¨
id’t
 "@(#)feature_tests.h 1.13 97/06/26 SMI"

13 #ifdef 
__ılu¥lus


25 #if 
defšed
(
_POSIX_SOURCE
è&& !defšed(
_POSIX_C_SOURCE
)

26  
	#_POSIX_C_SOURCE
 1

	)
58 #if !(
defšed
(
_POSIX_SOURCE
è|| defšed(
_XOPEN_SOURCE
) || \

59 
__STDC__
 - 0 == 1) || \

60 
defšed
(
_EXTENSIONS
è|| defšed(
_KERNEL
è|| 
	$defšed
(
_KMEMUSER
)

61 #undef 
_LARGEFILE64_SOURCE


62  
	#_LARGEFILE64_SOURCE
 1

	)
64 #if 
_LARGEFILE64_SOURCE
 - 0 == 1

65 #undef 
_LARGEFILE_SOURCE


66  
	#_LARGEFILE_SOURCE
 1

	)
79 #iâdef 
_FILE_OFFSET_BITS


80  
	#_FILE_OFFSET_BITS
 32

	)
82 #if 
_FILE_OFFSET_BITS
 - 0 != 32 && _FILE_OFFSET_BITS - 0 != 64

100 #ià(
	`defšed
(
_XOPEN_SOURCE
è&& 
_XOPEN_SOURCE_EXTENDED
 - 0 == 1)

101  
	#_XPG4_2


	)
117 #iâdef 
_XOPEN_VERSION


118 #ifdef 
_XPG4_2


119  
	#_XOPEN_VERSION
 4

	)
121  
	#_XOPEN_VERSION
 3

	)
125 #ifdef 
__ılu¥lus


126 
	}
}

	@/usr/include/sys/siginfo.h

12 #iâdeà
_SYS_SIGINFO_H


13  
	#_SYS_SIGINFO_H


	)
15 #´agm¨
id’t
 "@(#)siginfo.h 1.39 96/06/28 SMI"

17 
	~<sys/ã©u»_‹¡s.h
>

19 #ifdef 
__ılu¥lus


23 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XPG4_2
)) || \

24 (
_POSIX_C_SOURCE
 > 2è|| 
	$defšed
(
__EXTENSIONS__
)

26 
	usigv®
 {

27 
siv®_št
;

28 *
siv®_±r
;

33 
	u__sigv®
 {

34 
__siv®_št
;

35 *
__siv®_±r
;

40 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XPG4_2
)) || \

41 (
_POSIX_C_SOURCE
 > 2è|| 
	`defšed
(
__EXTENSIONS__
)

43 
	ssigev’t
 {

44 
sigev_nÙify
;

45 
	u
{

46 
_sigev_signo
;

47 (*
_sigev_nÙify_funùiÚ
)(
sigv®
);

48 } 
_sigev_un
;

49 
sigv®
 
sigev_v®ue
;

50 
_sigev_·d1
;

51 *
_sigev_nÙify_©Œibu‹s
;

52 
_sigev_·d2
;

54  
	#sigev_signo
 
_sigev_un
.
_sigev_signo


	)
57  
	#SIGEV_NONE
 1

	)
58  
	#SIGEV_SIGNAL
 2

	)
59  
	#SIGEV_THREAD
 3

	)
63 #ià!
	`defšed
(
_POSIX_C_SOURCE
) || (_POSIX_C_SOURCE > 2) || \

64 
	`defšed
(
__EXTENSIONS__
)

70  
	#SI_FROMUSER
(
s
) ((s)->
si_code
 <ğ0)

	)
71  
	#SI_FROMKERNEL
(
s
) ((s)->
si_code
 > 0)

	)
73  
	#SI_NOINFO
 32767

	)
74  
	#SI_USER
 0

	)
75  
	#SI_LWP
 (-1)

	)
76  
	#SI_QUEUE
 (-2)

	)
77  
	#SI_TIMER
 (-3)

	)
78  
	#SI_ASYNCIO
 (-4)

	)
79  
	#SI_MESGQ
 (-5)

	)
82 #ià!
	`defšed
(
_POSIX_C_SOURCE
è|| defšed(
__XPG4_2
è|| defšed(
__EXTENSIONS__
)

88 
	~<sys/machsig.h
>

94  
	#TRAP_BRKPT
 1

	)
95  
	#TRAP_TRACE
 2

	)
96  
	#TRAP_RWATCH
 3

	)
97  
	#TRAP_WWATCH
 4

	)
98  
	#TRAP_XWATCH
 5

	)
99 #ià!
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

100  
	#NSIGTRAP
 5

	)
107  
	#CLD_EXITED
 1

	)
108  
	#CLD_KILLED
 2

	)
109  
	#CLD_DUMPED
 3

	)
110  
	#CLD_TRAPPED
 4

	)
111  
	#CLD_STOPPED
 5

	)
112  
	#CLD_CONTINUED
 6

	)
114 #ià!
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

115  
	#NSIGCLD
 6

	)
122  
	#POLL_IN
 1

	)
123  
	#POLL_OUT
 2

	)
124  
	#POLL_MSG
 3

	)
125  
	#POLL_ERR
 4

	)
126  
	#POLL_PRI
 5

	)
127  
	#POLL_HUP
 6

	)
129 #ià!
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

130  
	#NSIGPOLL
 6

	)
135 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XPG4_2
)è|| defšed(
__EXTENSIONS__
)

140  
	#PROF_SIG
 1

	)
141  
	#NSIGPROF
 1

	)
145 #ià!
	`defšed
(
_POSIX_C_SOURCE
) || (_POSIX_C_SOURCE > 2) || \

146 
	`defšed
(
__EXTENSIONS__
)

148  
	#SI_MAXSZ
 128

	)
149  
	#SI_PAD
 ((
SI_MAXSZ
 /  ()è- 3)

	)
158 #ià!
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

160 
	~<sys/time.h
>

163 #iâdef 
_TIME_T


164  
	#_TIME_T


	)
165 
	ttime_t
;

168 #iâdef 
_TIMESPEC_T


169  
	#_TIMESPEC_T


	)
170 
	s_time¥ec
 {

171 
time_t
 
_tv_£c
;

172 
_tv_n£c
;

173 } 
	ttime¥ec_t
;

176 #iâdef 
_TIMESTRUC_T


177  
	#_TIMESTRUC_T


	)
178 
_time¥ec
 
	ttime¡ruc_t
;

183 #ià!
	`defšed
(
_XPG4_2
è&& !defšed(
_POSIX_C_SOURCE
è|| defšed(
__EXTENSIONS__
)

184 
	ssigšfo
 {

186 
	s
{

188 
si_signo
;

189 
si_code
;

190 
si_”ºo
;

192 
	u
{

194 
__·d
[
SI_PAD
];

196 
	s
{

197 
pid_t
 
__pid
;

198 
	u
{

199 
	s
{

200 
uid_t
 
__uid
;

201 #ià!
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

202 
sigv®
 
__v®ue
;

204 
__sigv®
 
__v®ue
;

206 } 
__kl
;

207 
	s
{

208 
şock_t
 
__utime
;

209 
__¡©us
;

210 
şock_t
 
__¡ime
;

211 } 
__şd
;

212 } 
__pd©a
;

213 } 
__´oc
;

215 
	s
{

216 *
__addr
;

217 
__Œ­no
;

218 
ÿddr_t
 
__pc
;

219 } 
__çuÉ
;

221 
	s
{

223 
__fd
;

224 
__bªd
;

225 } 
__fe
;

227 
	s
{

228 
ÿddr_t
 
__çddr
;

229 
time¡ruc_t
 
__t¡amp
;

230 
__sysÿÎ
;

231 
__nsy§rg
;

232 
__çuÉ
;

233 
__sy§rg
[8];

234 
__m¡©e
[17];

235 } 
__´of
;

237 } 
__d©a
;

239 } 
	tsigšfo_t
;

246 #ià!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

248 
	sk_sigšfo
 {

250 
si_signo
;

251 
si_code
;

252 
si_”ºo
;

254 
	u
{

255 
	s
{

256 
pid_t
 
__pid
;

257 
	u
{

258 
	s
{

259 
uid_t
 
__uid
;

260 
sigv®
 
__v®ue
;

261 } 
__kl
;

262 
	s
{

263 
şock_t
 
__utime
;

264 
__¡©us
;

265 
şock_t
 
__¡ime
;

266 } 
__şd
;

267 } 
__pd©a
;

268 } 
__´oc
;

270 
	s
{

271 *
__addr
;

272 
__Œ­no
;

273 
ÿddr_t
 
__pc
;

274 } 
__çuÉ
;

276 
	s
{

278 
__fd
;

279 
__bªd
;

280 } 
__fe
;

282 
	s
{

283 
ÿddr_t
 
__çddr
;

284 
time¡ruc_t
 
__t¡amp
;

285 
__sysÿÎ
;

286 
__nsy§rg
;

287 
__çuÉ
;

291 } 
__´of
;

293 } 
__d©a
;

295 } 
	tk_sigšfo_t
;

297 
	ssigqueue
 {

298 
sigqueue
 *
sq_Ãxt
;

299 
k_sigšfo_t
 
sq_šfo
;

300 (*
sq_func
)(
sigqueue
 *);

301 *
sq_back±r
;

303 } 
	tsigqueue_t
;

306  
	#SI_CANQUEUE
(
c
) ((cè<ğ
SI_QUEUE
)

	)
310  
	#si_pid
 
__d©a
.
__´oc
.
__pid


	)
311  
	#si_¡©us
 
__d©a
.
__´oc
.
__pd©a
.
__şd
.
__¡©us


	)
312  
	#si_¡ime
 
__d©a
.
__´oc
.
__pd©a
.
__şd
.
__¡ime


	)
313  
	#si_utime
 
__d©a
.
__´oc
.
__pd©a
.
__şd
.
__utime


	)
314  
	#si_uid
 
__d©a
.
__´oc
.
__pd©a
.
__kl
.
__uid


	)
315  
	#si_v®ue
 
__d©a
.
__´oc
.
__pd©a
.
__kl
.
__v®ue


	)
316  
	#si_addr
 
__d©a
.
__çuÉ
.
__addr


	)
317  
	#si_Œ­no
 
__d©a
.
__çuÉ
.
__Œ­no


	)
318  
	#si_Œ­aá”
 
__d©a
.
__çuÉ
.
__Œ­no


	)
319  
	#si_pc
 
__d©a
.
__çuÉ
.
__pc


	)
320  
	#si_fd
 
__d©a
.
__fe
.
__fd


	)
321  
	#si_bªd
 
__d©a
.
__fe
.
__bªd


	)
322  
	#si_t¡amp
 
__d©a
.
__´of
.
__t¡amp


	)
323  
	#si_sysÿÎ
 
__d©a
.
__´of
.
__sysÿÎ


	)
324  
	#si_nsy§rg
 
__d©a
.
__´of
.
__nsy§rg


	)
325  
	#si_sy§rg
 
__d©a
.
__´of
.
__sy§rg


	)
326  
	#si_çuÉ
 
__d©a
.
__´of
.
__çuÉ


	)
327  
	#si_çddr
 
__d©a
.
__´of
.
__çddr


	)
328  
	#si_m¡©e
 
__d©a
.
__´of
.
__m¡©e


	)
332 #ifdef 
__ılu¥lus


333 
	}
}

	@/usr/include/sys/time.h

19 #iâdeà
_SYS_TIME_H


20  
	#_SYS_TIME_H


	)
22 #´agm¨
id’t
 "@(#)time.h 2.52 96/11/15 SMI"

24 
	~<sys/ã©u»_‹¡s.h
>

31 #ifdef 
__ılu¥lus


35 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

36 
defšed
(
__EXTENSIONS__
è|| 
	$defšed
(
_XPG4_2
)

37 #iâdef 
_ASM


39 #iâdeà
_TIME_T


40  
	#_TIME_T


	)
41 
	ttime_t
;

44 
	stimev®
 {

45 
time_t
 
tv_£c
;

46 
tv_u£c
;

51 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

52 
	$defšed
(
__EXTENSIONS__
)

53 #iâdef 
_ASM


54 
	stimezÚe
 {

55 
tz_mšu‹swe¡
;

56 
tz_d¡time
;

62 #ifdef 
__ılu¥lus


63 
	}
}

70 #iâdef 
_ASM


71 
	~<sys/ty³s.h
>

74 #ifdef 
__ılu¥lus


78 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

79 
	$defšed
(
__EXTENSIONS__
)

81  
	#DST_NONE
 0

	)
82  
	#DST_USA
 1

	)
83  
	#DST_AUST
 2

	)
84  
	#DST_WET
 3

	)
85  
	#DST_MET
 4

	)
86  
	#DST_EET
 5

	)
87  
	#DST_CAN
 6

	)
88  
	#DST_GB
 7

	)
89  
	#DST_RUM
 8

	)
90  
	#DST_TUR
 9

	)
91  
	#DST_AUSTALT
 10

	)
98  
	#tim”is£t
(
tvp
) (Ñvp)->
tv_£c
 || (tvp)->
tv_u£c
)

	)
99  
	#tim”cmp
(
tvp
, 
uvp
, 
cmp
) \

101 ((
tvp
)->
tv_£c
 
	`cmp
 (
uvp
)->tv_sec || \

102 ((
tvp
)->
tv_£c
 =ğ(
uvp
)->tv_sec && \

104 (
tvp
)->
tv_u£c
 
	`cmp
 (
uvp
)->tv_u£c))

	)
106  
	#tim”ş—r
(
tvp
) (tvp)->
tv_£c
 = (tvp)->
tv_u£c
 = 0

	)
110 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

111 
	`defšed
(
_XPG4_2
è|| 
	$defšed
(
__EXTENSIONS__
)

116  
	#ITIMER_REAL
 0

	)
117  
	#ITIMER_VIRTUAL
 1

	)
118  
	#ITIMER_PROF
 2

	)
121  
	#ITIMER_REALPROF
 3

	)
125 #iâdef 
_ASM


126 
	s™im”v®
 {

127 
timev®
 
™_š‹rv®
;

128 
timev®
 
™_v®ue
;

134 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

135 
	$defšed
(
__EXTENSIONS__
)

139  
	#SEC
 1

	)
140  
	#MILLISEC
 1000

	)
141  
	#MICROSEC
 1000000

	)
142  
	#NANOSEC
 1000000000

	)
146 #ià!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
) || \

147 (
_POSIX_C_SOURCE
 > 2è|| 
	$defšed
(
__EXTENSIONS__
)

149  
	#__CLOCK_REALTIME0
 0

	)
150  
	#CLOCK_VIRTUAL
 1

	)
151  
	#CLOCK_PROF
 2

	)
152  
	#__CLOCK_REALTIME3
 3

	)
158 #if (
_POSIX_C_SOURCE
 >ğ199506Lè|| 
	`defšed
(
_POSIX_PER_PROCESS_TIMER_SOURCE
)

159  
	#CLOCK_REALTIME
 
__CLOCK_REALTIME3


	)
161  
	#CLOCK_REALTIME
 
__CLOCK_REALTIME0


	)
164  
	#TIMER_RELTIME
 0x0

	)
165  
	#TIMER_ABSTIME
 0x1

	)
169 #iâdef 
_ASM


175 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

176 (
_POSIX_C_SOURCE
 > 2è|| 
	`defšed
(
__EXTENSIONS__
)

177 #iâdef 
_TIMESPEC_T


178  
	#_TIMESPEC_T


	)
179 
	stime¥ec
 {

180 
time_t
 
tv_£c
;

181 
tv_n£c
;

182 } 
	ttime¥ec_t
;

185 #iâdef 
_TIMESTRUC_T


186  
	#_TIMESTRUC_T


	)
187 
time¥ec
 
	ttime¡ruc_t
;

192 #iâdef 
_TIMESPEC_T


193  
	#_TIMESPEC_T


	)
194 
	s_time¥ec
 {

195 
time_t
 
_tv_£c
;

196 
_tv_n£c
;

197 } 
	ttime¥ec_t
;

200 #iâdef 
_TIMESTRUC_T


201  
	#_TIMESTRUC_T


	)
202 
_time¥ec
 
	ttime¡ruc_t
;

211 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

212 
	`defšed
(
__EXTENSIONS__
)

213  
	#time¡ruc
 
time¥ec


	)
219 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

220 (
_POSIX_C_SOURCE
 > 2è|| 
	`defšed
(
__EXTENSIONS__
)

221 
	s™im”¥ec
 {

222 
time¥ec
 
™_š‹rv®
;

223 
time¥ec
 
™_v®ue
;

224 } 
	t™im”¥ec_t
;

230 
lÚglÚg_t
 
	th¹ime_t
;

232 #ifdeà
_KERNEL


234 
	~<sys/mu‹x.h
>

236 
tick_³r_m£c
;

237 
m£c_³r_tick
;

238 
u£c_³r_tick
;

239 
n£c_³r_tick
;

245  
	#TICK_TO_SEC
(
tick
) (Ñickè/ 
hz
)

	)
246  
	#SEC_TO_TICK
(
£c
) ((£cè* 
hz
)

	)
248  
	#TICK_TO_MSEC
(
tick
) \

249 (
m£c_³r_tick
 ? (
tick
è* m£c_³r_tick : (tickè/ 
tick_³r_m£c
)

	)
250  
	#MSEC_TO_TICK
(
m£c
) \

251 (
m£c_³r_tick
 ? (
m£c
è/ m£c_³r_tick : (m£cè* 
tick_³r_m£c
)

	)
252  
	#MSEC_TO_TICK_ROUNDUP
(
m£c
) \

253 (
m£c_³r_tick
 ? \

254 ((
m£c
è=ğ0 ? 0 : ((m£cè- 1è/ 
m£c_³r_tick
 + 1) : \

255 (
m£c
è* 
tick_³r_m£c
)

	)
257  
	#TICK_TO_USEC
(
tick
) (Ñickè* 
u£c_³r_tick
)

	)
258  
	#USEC_TO_TICK
(
u£c
) ((u£cè/ 
u£c_³r_tick
)

	)
259  
	#USEC_TO_TICK_ROUNDUP
(
u£c
) \

260 ((
u£c
è=ğ0 ? 0 : 
	`USEC_TO_TICK
((u£cè- 1è+ 1)

	)
262  
	#TICK_TO_NSEC
(
tick
) (Ñickè* 
n£c_³r_tick
)

	)
263  
	#NSEC_TO_TICK
(
n£c
) (Ò£cè/ 
n£c_³r_tick
)

	)
264  
	#NSEC_TO_TICK_ROUNDUP
(
n£c
) \

265 ((
n£c
è=ğ0 ? 0 : 
	`NSEC_TO_TICK
(Ò£cè- 1è+ 1)

	)
267  
	#TICK_TO_TIMEVAL
(
tick
, 
tvp
) { \

268 
şock_t
 
__tm±ck
 = (
tick
); \

269 (
tvp
)->
tv_£c
 = 
	`TICK_TO_SEC
(
__tm±ck
); \

270 (
tvp
)->
tv_u£c
 = 
	`TICK_TO_USEC
(
__tm±ck
 - 
	`SEC_TO_TICK
(Ñvp)->
tv_£c
)); \

271 }

	)
273  
	#TICK_TO_TIMESTRUC
(
tick
, 
t¥
) { \

274 
şock_t
 
__tm±ck
 = (
tick
); \

275 (
t¥
)->
tv_£c
 = 
	`TICK_TO_SEC
(
__tm±ck
); \

276 (
t¥
)->
tv_n£c
 = 
	`TICK_TO_NSEC
(
__tm±ck
 - 
	`SEC_TO_TICK
(Ñ¥)->
tv_£c
)); \

277 }

	)
279  
	#TIMEVAL_TO_TICK
(
tvp
) \

280 (
	`SEC_TO_TICK
((
tvp
)->
tv_£c
è+ 
	`USEC_TO_TICK
(Ñvp)->
tv_u£c
))

	)
282  
	#TIMESTRUC_TO_TICK
(
t¥
) \

283 (
	`SEC_TO_TICK
((
t¥
)->
tv_£c
è+ 
	`NSEC_TO_TICK
(Ñ¥)->
tv_n£c
))

	)
285 
	stodšfo
 {

286 
tod_£c
;

287 
tod_mš
;

288 
tod_hour
;

289 
tod_dow
;

290 
tod_day
;

291 
tod_mÚth
;

292 
tod_y—r
;

293 } 
	ttodšfo_t
;

295 
time¡ruc_t
 
h»¡ime
;

296 
lÚglÚg_t
 
timed–
;

297 
tod_Ãedsync
;

298 
kmu‹x_t
 
tod_lock
;

300 
time¡ruc_t
 
	`tod_g‘
();

301 
	`tod_£t
(
time¡ruc_t
);

302 
todšfo_t
 
	`utc_to_tod
(
time_t
);

303 
time_t
 
	`tod_to_utc
(
todšfo_t
);

304 
	`hr_şock_lock
();

305 
	`hr_şock_uÆock
();

306 
h¹ime_t
 
	`g‘h¹ime
();

307 
h¹ime_t
 
	`g‘h¹ime_unsÿËd
();

308 
	`sÿËh¹ime
(
h¹ime_t
 *);

309 
	`g‘h»¡ime
(
time¥ec_t
 *);

310 
	`h¹2ts
(
h¹ime_t
, 
time¡ruc_t
 *);

311 
h¹ime_t
 
	`ts2h¹
(
time¡ruc_t
 *);

312 
	`™im”fix
(
timev®
 *);

313 
	`™im”deü
(
™im”v®
 *, );

314 
	`timev®add
(
timev®
 *, timeval *);

315 
	`timev®sub
(
timev®
 *, timeval *);

316 
	`timev®fix
(
timev®
 *);

320 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

321 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
)

322 #ià
	`defšed
(
__STDC__
)

323 
	`adjtime
(
timev®
 *, timeval *);

325 
	`adjtime
();

329 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

330 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
è|| defšed(
_XPG4_2
)

331 #ià
	`defšed
(
__STDC__
)

332 
	`g‘™im”
(, 
™im”v®
 *);

334 #ià
	`defšed
(
_XPG4_2
)

335 
	`£t™im”
(, cÚ¡ 
™im”v®
 *, itimerval *);

336 
	`utimes
(cÚ¡ *, cÚ¡ 
timev®
 *);

338 
	`£t™im”
(, 
™im”v®
 *, itimerval *);

342 
	`g‘tim”
();

343 
	`£‰im”
();

344 
	`utimes
();

362 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

363 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
)

365 #ià
	`defšed
(
__STDC__
)

366 #ià
	`defšed
(
_SVID_GETTOD
)

367 
	`£‰imeofday
(
timev®
 *);

369 
	`£‰imeofday
(
timev®
 *, *);

371 
h¹ime_t
 
	`g‘h¹ime
();

372 
h¹ime_t
 
	`g‘hrvtime
();

374 
	`£‰imeofday
();

375 
h¹ime_t
 
	`g‘h¹ime
();

376 
h¹ime_t
 
	`g‘hrvtime
();

381 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

382 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
) || \

383 
	`defšed
(
_XPG4_2
)

385 #ià
	`defšed
(
__STDC__
)

386 #ià
	`defšed
(
_SVID_GETTOD
)

387 
	`g‘timeofday
(
timev®
 *);

389 
	`g‘timeofday
(
timev®
 *, *);

392 
	`g‘timeofday
();

397 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

398 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
)

399 
	~<time.h
>

402 #ià(!
	`defšed
(
_KERNEL
è&& !defšed(
_POSIX_C_SOURCE
) && \

403 !
	`defšed
(
_XOPEN_SOURCE
)è|| defšed(
__EXTENSIONS__
) || \

404 
	`defšed
(
_XPG4_2
)

405 
	~<sys/£Ëù.h
>

410 #ifdef 
__ılu¥lus


411 
	}
}

	@/usr/include/sys/types.h

13 #iâdeà
_SYS_TYPES_H


14  
	#_SYS_TYPES_H


	)
16 #´agm¨
id’t
 "@(#)types.h 1.51 97/05/06 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

19 
	~<sys/i§_defs.h
>

24 
	~<sys/machty³s.h
>

33 
	~<sys/št_ty³s.h
>

35 #ifdef 
__ılu¥lus


44 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

45 
	tlÚglÚg_t
;

46 
	tu_lÚglÚg_t
;

49 
	u
{

50 
	m_d
;

51 
	m_l
[2];

52 } 
	tlÚglÚg_t
;

53 
	u
{

54 
	m_d
;

55 
	m_l
[2];

56 } 
	tu_lÚglÚg_t
;

62 
	tuch¬_t
;

63 
	tushÜt_t
;

64 
	tušt_t
;

65 
	tulÚg_t
;

67 * 
	tÿddr_t
;

68 
	tdaddr_t
;

69 
	tút_t
;

71 
ulÚg_t
 
	t·ddr_t
;

72 
uch¬_t
 
	tu£_t
;

73 
	tsysid_t
;

74 
	tšdex_t
;

84 #iâdeà
_OFF_T


85  
	#_OFF_T


	)
86 #ià
_FILE_OFFSET_BITS
 == 32

87 
	toff_t
;

88 #–ià
_FILE_OFFSET_BITS
 == 64

89 
lÚglÚg_t
 
	toff_t
;

91 #if 
defšed
(
_LARGEFILE64_SOURCE
)

92 
lÚglÚg_t
 
	toff64_t
;

96 #ià
_FILE_OFFSET_BITS
 == 32

97 
ulÚg_t
 
	tšo_t
;

98 
	tblkút_t
;

99 
ulÚg_t
 
	tfsblkút_t
;

100 
ulÚg_t
 
	tfsfút_t
;

101 #–ià
_FILE_OFFSET_BITS
 == 64

102 
u_lÚglÚg_t
 
	tšo_t
;

103 
lÚglÚg_t
 
	tblkút_t
;

104 
u_lÚglÚg_t
 
	tfsblkút_t
;

105 
u_lÚglÚg_t
 
	tfsfút_t
;

107 #if 
defšed
(
_LARGEFILE64_SOURCE
)

108 
u_lÚglÚg_t
 
	tšo64_t
;

109 
lÚglÚg_t
 
	tblkút64_t
;

110 
u_lÚglÚg_t
 
	tfsblkút64_t
;

111 
u_lÚglÚg_t
 
	tfsfút64_t
;

114 #ià
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
)

115 
	e
{ 
	m_B_FALSE
, 
	m_B_TRUE
 } 
	tboŞ—n_t
;

117 
	e
{ 
	mB_FALSE
, 
	mB_TRUE
 } 
	tboŞ—n_t
;

127 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

128 
št64_t
 
	t·d64_t
;

129 
ušt64_t
 
	tu·d64_t
;

131 
	u
{

132 
	m_d
;

133 
št32_t
 
	m_l
[2];

134 } 
	t·d64_t
;

135 
	u
{

136 
	m_d
;

137 
ušt32_t
 
	m_l
[2];

138 } 
	tu·d64_t
;

141 
lÚglÚg_t
 
	toff£t_t
;

142 
u_lÚglÚg_t
 
	tu_off£t_t
;

143 
u_lÚglÚg_t
 
	tËn_t
;

144 
lÚglÚg_t
 
	tdiskaddr_t
;

151 #ifdeà
_LONG_LONG_LTOH


152 
	u
{

153 
off£t_t
 
	m_f
;

154 
	s
{

155 
off_t
 
	m_l
;

156 
	m_u
;

157 } 
	m_p
;

158 } 
	tÎoff_t
;

161 #ifdeà
_LONG_LONG_HTOL


162 
	u
{

163 
off£t_t
 
	m_f
;

164 
	s
{

165 
	m_u
;

166 
off_t
 
	m_l
;

167 } 
	m_p
;

168 } 
	tÎoff_t
;

171 #ifdeà
_LONG_LONG_LTOH


172 
	u
{

173 
diskaddr_t
 
	m_f
;

174 
	s
{

175 
daddr_t
 
	m_l
;

176 
	m_u
;

177 } 
	m_p
;

178 } 
	tÎdaddr_t
;

181 #ifdeà
_LONG_LONG_HTOL


182 
	u
{

183 
diskaddr_t
 
	m_f
;

184 
	s
{

185 
	m_u
;

186 
daddr_t
 
	m_l
;

187 } 
	m_p
;

188 } 
	tÎdaddr_t
;

191 
ulÚg_t
 
	tk_æt£t_t
;

200 
	tid_t
;

209 
ušt_t
 
	tu£cÚds_t
;

214 
ulÚg_t
 
	tmajÜ_t
;

215 
ulÚg_t
 
	tmšÜ_t
;

220 
	t´i_t
;

233 
ushÜt_t
 
	to_mode_t
;

234 
	to_dev_t
;

235 
ushÜt_t
 
	to_uid_t
;

236 
o_uid_t
 
	to_gid_t
;

237 
	to_Æšk_t
;

238 
	to_pid_t
;

239 
ushÜt_t
 
	to_šo_t
;

245 
	tkey_t
;

246 
ulÚg_t
 
	tmode_t
;

248 #iâdef 
_UID_T


249  
	#_UID_T


	)
250 
	tuid_t
;

253 
uid_t
 
	tgid_t
;

254 
ulÚg_t
 
	tÆšk_t
;

255 
ulÚg_t
 
	tdev_t
;

256 
	tpid_t
;

263 
	t±h»ad_t
;

264 
	t±h»ad_key_t
;

266 
	s_±h»ad_mu‹x
 {

267 
	s
{

268 
ušt8_t
 
	m__±h»ad_mu‹x_æag
[4];

269 
ušt32_t
 
	m__±h»ad_mu‹x_ty³
;

270 } 
	m__±h»ad_mu‹x_æags
;

271 
	u
{

272 
	s
{

273 
ušt8_t
 
	m__±h»ad_mu‹x_·d
[8];

274 } 
	m__±h»ad_mu‹x_lock64
;

275 
u·d64_t
 
	m__±h»ad_mu‹x_owÃr64
;

276 } 
	m__±h»ad_mu‹x_lock
;

277 
u·d64_t
 
	m__±h»ad_mu‹x_d©a
;

278 } 
	t±h»ad_mu‹x_t
;

280 
	s_±h»ad_cÚd
 {

281 
	s
{

282 
ušt8_t
 
	m__±h»ad_cÚd_æag
[4];

283 
ušt32_t
 
	m__±h»ad_cÚd_ty³
;

284 } 
	m__±h»ad_cÚd_æags
;

285 
u·d64_t
 
	m__±h»ad_cÚd_d©a
;

286 } 
	t±h»ad_cÚd_t
;

291 
	s_±h»ad_©Œ
 {

292 *
	m__±h»ad_©Œp
;

293 } 
	t±h»ad_©Œ_t
;

299 
	s_±h»ad_mu‹x©Œ
 {

300 *
	m__±h»ad_mu‹x©Œp
;

301 } 
	t±h»ad_mu‹x©Œ_t
;

307 
	s_±h»ad_cÚd©Œ
 {

308 *
	m__±h»ad_cÚd©Œp
;

309 } 
	t±h»ad_cÚd©Œ_t
;

314 
	s_Úû
 {

315 
u·d64_t
 
	m__±h»ad_Úû_·d
[4];

316 } 
	t±h»ad_Úû_t
;

318 #iâdeà
_SIZE_T


319  
	#_SIZE_T


	)
320 
ušt_t
 
	tsize_t
;

323 #iâdeà
_SSIZE_T


324  
	#_SSIZE_T


	)
325 
	tssize_t
;

329 #iâdeà
_TIME_T


330  
	#_TIME_T


	)
331 
	ttime_t
;

334 #iâdeà
_CLOCK_T


335  
	#_CLOCK_T


	)
336 
	tşock_t
;

339 #iâdeà
_CLOCKID_T


340  
	#_CLOCKID_T


	)
341 
	tşockid_t
;

344 #iâdeà
_TIMER_T


345  
	#_TIMER_T


	)
346 
	ttim”_t
;

349 #ià
defšed
(
__EXTENSIONS__
) || \

350 (!
defšed
(
_POSIX_C_SOURCE
è&& !
	$defšed
(
_XOPEN_SOURCE
))

352 
	tunch¬
;

353 
	tushÜt
;

354 
	tušt
;

355 
	tulÚg
;

357 #ià
	`defšed
(
_KERNEL
)

359  
	#SHRT_MIN
 (-32768)

	)
360  
	#SHRT_MAX
 32767

	)
361  
	#USHRT_MAX
 65535

	)
362  
	#INT_MIN
 (-2147483647-1è

	)
363  
	#INT_MAX
 2147483647

	)
364  
	#UINT_MAX
 4294967295U

	)
365 #ià
	`defšed
(
_LP64
)

366  
	#LONG_MIN
 (-9223372036854775807L-1L)

	)
368  
	#LONG_MAX
 9223372036854775807L

	)
370  
	#ULONG_MAX
 18446744073709551615UL

	)
373  
	#LONG_MIN
 (-2147483647L-1L)

	)
375  
	#LONG_MAX
 2147483647L

	)
376  
	#ULONG_MAX
 4294967295UL

	)
381  
	#P_MYPID
 ((
pid_t
)0)

	)
388  
	#P_MYID
 (-1)

	)
389  
	#NOPID
 (
pid_t
)(-1)

	)
391 #iâdeà
NODEV


392  
	#NODEV
 (
dev_t
)(-1)

	)
399 
	tho¡id_t
;

406  
	#P_MYHOSTID
 ((
ho¡id_t
)-1)

	)
408 
	tu_ch¬
;

409 
	tu_shÜt
;

410 
	tu_št
;

411 
	tu_lÚg
;

412 
	s_quad
 { 
v®
[2]; } 
	tquad
;

418 
	~<sys/£Ëù.h
>

432  
	#_VOID
 

	)
434 #ifdef 
__ılu¥lus


435 
	}
}

	@/usr/include/sys/va_list.h

6 #iâdef 
_SYS_VA_LIST_H


7  
	#_SYS_VA_LIST_H


	)
9 #´agm¨
id’t
 "@(#)va_list.h 1.6 96/01/26 SMI"

21 #ifdef 
__ılu¥lus


25 #ià
defšed
(
__µc
)

27 
	s__va_li¡_g
 {

28 
__g´
;

31 
__år
;

34 *
__šput_¬g_¬—
;

37 *
__»g_§ve_¬—
;

39 } 
	t__va_li¡
[1];

43 #ifdeà
__STDC__


44 *
	t__va_li¡
;

46 *
	t__va_li¡
;

51 #ifdef 
__ılu¥lus


	@/usr/include/sys/wait.h

13 #iâdeà
_SYS_WAIT_H


14  
	#_SYS_WAIT_H


	)
16 #´agm¨
id’t
 "@(#)wait.h 1.20 97/03/02 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

20 
	~<sys/ty³s.h
>

22 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

23 
defšed
(
_XPG4_2
è|| 
	$defšed
(
__EXTENSIONS__
)

24 
	~<sys/»sourû.h
>

25 
	~<sys/sigšfo.h
>

26 
	~<sys/´oc£t.h
>

29 #ifdef 
__ılu¥lus


37  
	#WUNTRACED
 0004

	)
38  
	#WNOHANG
 0100

	)
41 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

42 
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

43  
	#WEXITED
 0001

	)
44  
	#WTRAPPED
 0002

	)
45  
	#WSTOPPED
 
WUNTRACED


	)
46  
	#WCONTINUED
 0010

	)
47  
	#WNOWAIT
 0200

	)
48  
	#_WNOCHLD
 0400

	)
49  
	#WOPTMASK
 (
WEXITED
|
WTRAPPED
|
WSTOPPED
|
WCONTINUED
|
WNOHANG
|
WNOWAIT
|
_WNOCHLD
)

	)
56 #ià!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
) || \

57 
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

59  
	#WSTOPFLG
 0177

	)
60  
	#WCONTFLG
 0177777

	)
61  
	#WCOREFLG
 0200

	)
62  
	#WSIGMASK
 0177

	)
64  
	#WLOBYTE
(
¡©
) (()((¡©)&0377))

	)
65  
	#WHIBYTE
(
¡©
) (()(((¡©)>>8)&0377))

	)
66  
	#WWORD
(
¡©
) (()((¡©))&0177777)

	)
68  
	#WIFCONTINUED
(
¡©
) (
	`WWORD
(¡©è=ğ
WCONTFLG
)

	)
69  
	#WCOREDUMP
(
¡©
) ((¡©)&
WCOREFLG
)

	)
73  
	#WIFEXITED
(
¡©
) (()((¡©)&0xFFè=ğ0)

	)
74  
	#WIFSIGNALED
(
¡©
) (()((stat)&0xFF) > 0 && \

75 ()((
¡©
)&0xFF00è=ğ0)

	)
76  
	#WIFSTOPPED
(
¡©
) (()((stat)&0xFF) == 0177 && \

77 ()((
¡©
)&0xFF00è!ğ0)

	)
78  
	#WEXITSTATUS
(
¡©
) (()(((¡©)>>8)&0xFF))

	)
79  
	#WTERMSIG
(
¡©
) (()((¡©)&0x7F))

	)
80  
	#WSTOPSIG
(
¡©
) (()(((¡©)>>8)&0xFF))

	)
83 #ià!
	`defšed
(
_KERNEL
)

84 #ià
	`defšed
(
__STDC__
)

86 
pid_t
 
	`wa™
(*);

87 
pid_t
 
	`wa™pid
(pid_t, *, );

88 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

89 
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

90 
	`wa™id
(
idty³_t
, 
id_t
, 
sigšfo_t
 *, );

91 
pid_t
 
	`wa™3
(*, , 
ru§ge
 *);

96 
pid_t
 
	`wa™
();

97 
pid_t
 
	`wa™pid
();

98 #ià(!
	`defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

99 
	`defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

100 
	`wa™id
();

101 
pid_t
 
	`wa™3
();

107 #ifdef 
__ılu¥lus


108 
	}
}

	@/usr/include/varargs.h

13 #iâdeà
_VARARGS_H


14  
	#_VARARGS_H


	)
16 #´agm¨
id’t
 "@(#)varargs.h 1.37 96/01/30 SMI"

18 
	~<sys/va_li¡.h
>

20 #ifdef 
__ılu¥lus


31 #iâdef 
_VA_LIST


32  
	#_VA_LIST


	)
33 
__va_li¡
 
	tva_li¡
;

54 #ià(
defšed
(
__BUILTIN_VA_ARG_INCR
è|| defšed(
¥¬c
è|| defšed(
__¥¬c
) || \

55 
defšed
(
i386
è|| 
	$defšed
(
__i386
))

56  
	#va_®i¡
 
__butš_va_®i¡


	)
58  
	#va_dş
 
va_®i¡
;

	)
60 #ià(
	`defšed
(
__BUILTIN_VA_ARG_INCR
è|| defšed(
¥¬c
è|| defšed(
__¥¬c
) || \

61 
	`defšed
(
i386
è|| defšed(
__i386
)è&& !(defšed(
lšt
è|| 
	$defšed
(
__lšt
))

63 #ià
	`defšed
(
__µc
)

70 
	`__butš_va_šfo
(
va_li¡
);

71 *
	`__va_¬g
(
va_li¡
, ...);

72  
	#va_¡¬t
(
li¡
) 
	`__butš_va_šfo
Öi¡)

	)
73  
	#va_¬g
(
li¡
, 
mode
) ((mod*)
	`__va_¬g
Öi¡, (mod*è0))[0]

	)
81  
	#va_¡¬t
(
li¡
)†i¡ = (*è&
va_®i¡


	)
82  
	#va_¬g
(
li¡
, 
mode
) ((mod*)
	`__butš_va_¬g_šü
((mod*îi¡))[0]

	)
88 #ià
	`defšed
(
__µc
)

96  
	#va_¡¬t
(
li¡
) (li¡[0].
__»g_§ve_¬—
 = (*)&
va_®i¡
)

	)
97  
	#va_¬g
(
li¡
, 
mode
) ((mod*)&Öi¡))[0]

	)
106  
	#va_¡¬t
(
li¡
)†i¡ = (*è&
va_®i¡


	)
107  
	#va_¬g
(
li¡
, 
mode
) \

108 ((
mode
 *)(
li¡
 = (*)((*îi¡ +  (mode))))[-1]

	)
114  
	#va_’d
(
li¡
)

	)
120 #ià
	`defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

121 !
	`defšed
(
_POSIX_C_SOURCE
è&& !
	$defšed
(
_XOPEN_SOURCE
))

123 #ià
	`defšed
(
__µc
)

124  
	#va_cİy
(
to
, 
äom
) (Ño)[0] = (äom)[0])

	)
126  
	#va_cİy
(
to
, 
äom
) (Ñoèğ(äom))

	)
131 #ifdef 
__ılu¥lus


132 
	}
}

	@/usr/include/sys/ieeefp.h

5 #iâdeà
_SYS_IEEEFP_H


6  
	#_SYS_IEEEFP_H


	)
8 #´agm¨
id’t
 "@(#)ieeefp.h 2.7 94/11/09"

10 #ifdeà 
__ılu¥lus


17 #ià
defšed
(
¥¬c
è|| defšed(
__¥¬c
)

18 
	eå_dœeùiÚ_ty³
 {

19 
å_Ã¬e¡
 = 0,

20 
å_toz”o
 = 1,

21 
å_pos™ive
 = 2,

22 
å_Ãg©ive
 = 3

25 
	eå_´ecisiÚ_ty³
 {

26 
	må_ex‹nded
 = 0,

27 
	må_sšgË
 = 1,

28 
	må_doubË
 = 2,

29 
	må_´ecisiÚ_3
 = 3

32 
	eå_exû±iÚ_ty³
 {

33 
	må_šexaù
 = 0,

34 
	må_divisiÚ
 = 1,

35 
	må_und”æow
 = 2,

36 
	må_ov”æow
 = 3,

37 
	må_šv®id
 = 4

40 
	eå_Œ­_’abË_ty³
 {

41 
	må_Œ­_šexaù
 = 0,

42 
	må_Œ­_divisiÚ
 = 1,

43 
	må_Œ­_und”æow
 = 2,

44 
	må_Œ­_ov”æow
 = 3,

45 
	må_Œ­_šv®id
 = 4

49 #ià
defšed
(
i386
è|| defšed(
__i386
)

50 
	eå_dœeùiÚ_ty³
 {

51 
	må_Ã¬e¡
 = 0,

52 
	må_Ãg©ive
 = 1,

53 
	må_pos™ive
 = 2,

54 
	må_toz”o
 = 3

57 
	eå_´ecisiÚ_ty³
 {

58 
	må_sšgË
 = 0,

59 
	må_´ecisiÚ_3
 = 1,

60 
	må_doubË
 = 2,

61 
	må_ex‹nded
 = 3

64 
	eå_exû±iÚ_ty³
 {

65 
	må_šv®id
 = 0,

66 
	må_d’Üm®ized
 = 1,

67 
	må_divisiÚ
 = 2,

68 
	må_ov”æow
 = 3,

69 
	må_und”æow
 = 4,

70 
	må_šexaù
 = 5

73 
	eå_Œ­_’abË_ty³
 {

74 
	må_Œ­_šv®id
 = 0,

75 
	må_Œ­_d’Üm®ized
 = 1,

76 
	må_Œ­_divisiÚ
 = 2,

77 
	må_Œ­_ov”æow
 = 3,

78 
	må_Œ­_und”æow
 = 4,

79 
	må_Œ­_šexaù
 = 5

83 #ià
defšed
(
__µc
)

84 
	eå_dœeùiÚ_ty³
 {

85 
	må_Ã¬e¡
 = 0,

86 
	må_toz”o
 = 1,

87 
	må_pos™ive
 = 2,

88 
	må_Ãg©ive
 = 3

91 
	eå_´ecisiÚ_ty³
 {

92 
	må_ex‹nded
 = 0,

93 
	må_sšgË
 = 1,

94 
	må_doubË
 = 2,

95 
	må_´ecisiÚ_3
 = 3

98 
	eå_exû±iÚ_ty³
 {

99 
	må_šv®id_cvi
 = 8,

100 
	må_šv®id_sq¹
 = 9,

101 
	må_šv®id_soá
 = 10,

102 
	må_šv®id_vc
 = 19,

103 
	må_šv®id_imz
 = 20,

104 
	må_šv®id_zdz
 = 21,

105 
	må_šv®id_idi
 = 22,

106 
	må_šv®id_isi
 = 23,

107 
	må_šv®id_¢ª
 = 24,

108 
	må_šexaù
 = 25,

109 
	må_divisiÚ
 = 26,

110 
	må_und”æow
 = 27,

111 
	må_ov”æow
 = 28,

112 
	må_šv®id
 = 29

115 
	eå_Œ­_’abË_ty³
 {

116 
	må_Œ­_šexaù
 = 3,

117 
	må_Œ­_divisiÚ
 = 4,

118 
	må_Œ­_und”æow
 = 5,

119 
	må_Œ­_ov”æow
 = 6,

120 
	må_Œ­_šv®id
 = 7

124 
	eå_şass_ty³
 {

125 
	gå_z”o
 = 0,

126 
	gå_subnÜm®
 = 1,

127 
	gå_nÜm®
 = 2,

128 
	gå_šfš™y
 = 3,

129 
	gå_qu›t
 = 4,

130 
	gå_sigÇlšg
 = 5

133 #ifdeà 
__ılu¥lus


	@/usr/include/sys/int_types.h

6 #iâdeà
_SYS_INT_TYPES_H


7  
	#_SYS_INT_TYPES_H


	)
9 #´agm¨
id’t
 "@(#)int_types.h 1.4 96/09/25 SMI"

42 
	~<sys/i§_defs.h
>

44 #ifdeà
__ılu¥lus


61 #ià
defšed
(
_CHAR_IS_SIGNED
)

62 
	tšt8_t
;

64 #ià
defšed
(
__STDC__
)

65 sigÃd 
	tšt8_t
;

68 
	tšt16_t
;

69 
	tšt32_t
;

70 #ifdef 
_LP64


71 
	tšt64_t
;

73 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

74 
	tšt64_t
;

78 
	tušt8_t
;

79 
	tušt16_t
;

80 
	tušt32_t
;

81 #ifdef 
_LP64


82 
	tušt64_t
;

84 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

85 
	tušt64_t
;

93 #ià
defšed
(
_LP64
è|| (
__STDC__
 - 0 =ğ0 && !defšed(
_NO_LONGLONG
))

94 
št64_t
 
	tštmax_t
;

95 
ušt64_t
 
	tuštmax_t
;

97 
št32_t
 
	tštmax_t
;

98 
ušt32_t
 
	tuštmax_t
;

106 #ifdef 
_LP64


107 
	tšŒ_t
;

108 
	tušŒ_t
;

110 
	tšŒ_t
;

111 
	tušŒ_t
;

118 #ià
defšed
(
_CHAR_IS_SIGNED
)

119 
	tšt_Ëa¡8_t
;

121 #ià
defšed
(
__STDC__
)

122 sigÃd 
	tšt_Ëa¡8_t
;

125 
	tšt_Ëa¡16_t
;

126 
	tšt_Ëa¡32_t
;

127 #ifdef 
_LP64


128 
	tšt_Ëa¡64_t
;

130 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

131 
	tšt_Ëa¡64_t
;

135 
	tušt_Ëa¡8_t
;

136 
	tušt_Ëa¡16_t
;

137 
	tušt_Ëa¡32_t
;

138 #ifdef 
_LP64


139 
	tušt_Ëa¡64_t
;

141 #ià
__STDC__
 - 0 =ğ0 && !
defšed
(
_NO_LONGLONG
)

142 
	tušt_Ëa¡64_t
;

146 #ifdeà
__ılu¥lus


	@/usr/include/sys/isa_defs.h

6 #iâdef 
_SYS_ISA_DEFS_H


7  
	#_SYS_ISA_DEFS_H


	)
9 #´agm¨
id’t
 "@(#)isa_defs.h 1.11 97/03/21 SMI"

137 #ifdef 
__ılu¥lus


149 #ià
defšed
(
__i386
è|| defšed(
i386
)

154 #ià!
defšed
(
__i386
)

155  
	#__i386


	)
161  
	#_LITTLE_ENDIAN


	)
162  
	#_STACK_GROWS_DOWNWARD


	)
163  
	#_LONG_LONG_LTOH


	)
164  
	#_BIT_FIELDS_LTOH


	)
165  
	#_IEEE_754


	)
166  
	#_CHAR_IS_SIGNED


	)
167  
	#_CHAR_ALIGNMENT
 1

	)
168  
	#_SHORT_ALIGNMENT
 2

	)
169  
	#_INT_ALIGNMENT
 4

	)
170  
	#_LONG_ALIGNMENT
 4

	)
171  
	#_LONG_LONG_ALIGNMENT
 4

	)
172  
	#_DOUBLE_ALIGNMENT
 4

	)
173  
	#_LONG_DOUBLE_ALIGNMENT
 4

	)
174  
	#_POINTER_ALIGNMENT
 4

	)
175  
	#_MAX_ALIGNMENT
 4

	)
176  
	#_ALIGNMENT_REQUIRED
 0

	)
181  
	#_ILP32


	)
182  
	#_SUNOS_VTOC_16


	)
183  
	#_DMA_USES_PHYSADDR


	)
184  
	#_FIRMWARE_NEEDS_FDISK


	)
194 #–ià
defšed
(
__µc
)

199  
	#_LITTLE_ENDIAN


	)
200  
	#_STACK_GROWS_DOWNWARD


	)
201  
	#_LONG_LONG_LTOH


	)
202  
	#_BIT_FIELDS_LTOH


	)
203  
	#_IEEE_754


	)
204  
	#_CHAR_IS_UNSIGNED


	)
205  
	#_CHAR_ALIGNMENT
 1

	)
206  
	#_SHORT_ALIGNMENT
 2

	)
207  
	#_INT_ALIGNMENT
 4

	)
208  
	#_LONG_ALIGNMENT
 4

	)
209  
	#_LONG_LONG_ALIGNMENT
 8

	)
210  
	#_DOUBLE_ALIGNMENT
 8

	)
211  
	#_LONG_DOUBLE_ALIGNMENT
 16

	)
212  
	#_POINTER_ALIGNMENT
 4

	)
213  
	#_MAX_ALIGNMENT
 16

	)
214  
	#_ALIGNMENT_REQUIRED
 1

	)
219  
	#_ILP32


	)
220  
	#_SUNOS_VTOC_16


	)
221  
	#_DMA_USES_PHYSADDR


	)
222  
	#_FIRMWARE_NEEDS_FDISK


	)
243 #–ià
defšed
(
__¥¬c
è|| defšed(
¥¬c
)

248 #ià!
defšed
(
__¥¬c
)

249  
	#__¥¬c


	)
255 #ià
defšed
(
__¥¬cv8
è&& defšed(
__¥¬cv9
)

265 #ià!
defšed
(
__¥¬cv9
è&& !defšed(
__¥¬cv8
)

266  
	#__¥¬cv8


	)
273  
	#_BIG_ENDIAN


	)
274  
	#_STACK_GROWS_DOWNWARD


	)
275  
	#_LONG_LONG_HTOL


	)
276  
	#_BIT_FIELDS_HTOL


	)
277  
	#_IEEE_754


	)
278  
	#_CHAR_IS_SIGNED


	)
279  
	#_CHAR_ALIGNMENT
 1

	)
280  
	#_SHORT_ALIGNMENT
 2

	)
281  
	#_INT_ALIGNMENT
 4

	)
282  
	#_LONG_LONG_ALIGNMENT
 8

	)
283  
	#_DOUBLE_ALIGNMENT
 8

	)
284  
	#_ALIGNMENT_REQUIRED
 1

	)
289  
	#_SUNOS_VTOC_8


	)
290  
	#_DMA_USES_VIRTADDR


	)
291  
	#_NO_FDISK_PRESENT


	)
297 #ià
defšed
(
__¥¬cv8
)

302  
	#_LONG_ALIGNMENT
 4

	)
303  
	#_LONG_DOUBLE_ALIGNMENT
 8

	)
304  
	#_POINTER_ALIGNMENT
 4

	)
305  
	#_MAX_ALIGNMENT
 8

	)
310  
	#_ILP32


	)
316 #–ià
defšed
(
__¥¬cv9
)

321  
	#_LONG_ALIGNMENT
 8

	)
322  
	#_LONG_DOUBLE_ALIGNMENT
 16

	)
323  
	#_POINTER_ALIGNMENT
 8

	)
324  
	#_MAX_ALIGNMENT
 16

	)
329  
	#_LP64


	)
330  
	#_MULTI_DATAMODEL


	)
343 #ifdef 
__ılu¥lus


	@/usr/include/sys/machsig.h

13 #iâdef 
_SYS_MACHSIG_H


14  
	#_SYS_MACHSIG_H


	)
16 #´agm¨
id’t
 "@(#)machsig.h 1.12 96/04/29 SMI"

19 
	~<sys/ã©u»_‹¡s.h
>

21 #ifdef 
__ılu¥lus


37 #ià!
defšed
(
_POSIX_C_SOURCE
è|| defšed(
__EXTENSIONS__
)

43  
	#ILL_ILLOPC
 1

	)
44  
	#ILL_ILLOPN
 2

	)
45  
	#ILL_ILLADR
 3

	)
46  
	#ILL_ILLTRP
 4

	)
47  
	#ILL_PRVOPC
 5

	)
48  
	#ILL_PRVREG
 6

	)
49  
	#ILL_COPROC
 7

	)
50  
	#ILL_BADSTK
 8

	)
52 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

53  
	#NSIGILL
 8

	)
60 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

61  
	#EMT_TAGOVF
 1

	)
64 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

65  
	#NSIGEMT
 1

	)
72  
	#FPE_INTDIV
 1

	)
73  
	#FPE_INTOVF
 2

	)
74  
	#FPE_FLTDIV
 3

	)
75  
	#FPE_FLTOVF
 4

	)
76  
	#FPE_FLTUND
 5

	)
77  
	#FPE_FLTRES
 6

	)
78  
	#FPE_FLTINV
 7

	)
79  
	#FPE_FLTSUB
 8

	)
80 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

81  
	#NSIGFPE
 8

	)
88  
	#SEGV_MAPERR
 1

	)
89  
	#SEGV_ACCERR
 2

	)
90 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

91  
	#NSIGSEGV
 2

	)
98  
	#BUS_ADRALN
 1

	)
99  
	#BUS_ADRERR
 2

	)
100  
	#BUS_OBJERR
 3

	)
101 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

102  
	#NSIGBUS
 3

	)
107 #ifdef 
__ılu¥lus


	@/usr/include/sys/machtypes.h

13 #iâdeà
_SYS_MACHTYPES_H


14  
	#_SYS_MACHTYPES_H


	)
16 #´agm¨
id’t
 "@(#)machtypes.h 1.11 96/04/29 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

20 #ifdef 
__ılu¥lus


30 #ià(!
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

31 
	$defšed
(
__EXTENSIONS__
)

33 
	s_phy§dr_t
 { 
r
[1]; } *
	tphy§dr_t
;

35 
	s_Ïb–_t
 { 
v®
[2]; } 
	tÏb–_t
;

39 
	tlock_t
;

41 #ifdef 
__ılu¥lus


42 
	}
}

	@/usr/include/sys/mutex.h

6 #iâdeà
_SYS_MUTEX_H


7  
	#_SYS_MUTEX_H


	)
9 #´agm¨
id’t
 "@(#)mutex.h 1.17 97/04/04 SMI"

11 #iâdef 
_ASM


12 
	~<sys/ty³s.h
>

15 #ifdef 
__ılu¥lus


19 #iâdef 
_ASM


44 
	e
{

45 
MUTEX_ADAPTIVE
 = 0,

46 
MUTEX_SPIN
,

47 
MUTEX_ADAPTIVE_STAT
,

48 
MUTEX_SPIN_STAT
,

49 
MUTEX_DRIVER_NOSTAT
 = 4,

50 
MUTEX_DRIVER_STAT
 = 5,

51 
MUTEX_ADAPTIVE_DEF


52 } 
	tkmu‹x_ty³_t
;

54  
	#MUTEX_DEFAULT
 
MUTEX_ADAPTIVE_DEF


	)
55  
	#MUTEX_DRIVER
 
MUTEX_DRIVER_NOSTAT


	)
56  
	#MUTEX_SPIN_DEFAULT
 
MUTEX_SPIN


	)
64  
	#DEFAULT_WT
 
NULL


	)
67 
	smu‹x
 {

68 *
	m_İaque
[2];

69 } 
	tkmu‹x_t
;

72 #ià
defšed
(
_KERNEL
è&& defšed(
__STDC__
)

74  
	#MUTEX_HELD
(
x
) (
	`mu‹x_owÃd
(x))

	)
75  
	#MUTEX_NOT_HELD
(
x
) (!
	`mu‹x_owÃd
(xè|| 
·nic¡r
)

	)
81 
mu‹x_š™
(
kmu‹x_t
 *, *, 
kmu‹x_ty³_t
, *);

82 
mu‹x_de¡roy
(
kmu‹x_t
 *);

83 
mu‹x_’‹r
(
kmu‹x_t
 *);

84 
mu‹x_Œy’‹r
(
kmu‹x_t
 *);

85 
mu‹x_ex™
(
kmu‹x_t
 *);

86 
mu‹x_owÃd
(
kmu‹x_t
 *);

87 
_kth»ad
 *
mu‹x_owÃr
(
kmu‹x_t
 *);

100 #if 
defšed
(
¥¬c
)

101 
u_lÚglÚg_t
 
lßd_doubË
(u_longlong_t *);

102 
u_lÚglÚg_t
 
¡Üe_doubË
(u_longlong_t, u_longlong_t *);

103  
	#mu‹x_lßd_doubË
(
»suÉp
, 
v®u•
, 
mu‹xp
) \

105 *(
»suÉp
èğ
	`lßd_doubË
((
v®u•
)); \

106 }

	)
107  
	#mu‹x_¡Üe_doubË
(
v®ue
, 
»suÉp
) \

109 
	`¡Üe_doubË
((
v®ue
), (
»suÉp
)); \

110 }

	)
112  
	#mu‹x_lßd_doubË
(
»suÉp
, 
v®u•
, 
mu‹xp
) \

114 
	`mu‹x_’‹r
((
mu‹xp
)); \

115 *(
»suÉp
èğ*(
v®u•
); \

116 
	`mu‹x_ex™
((
mu‹xp
)); \

117 }

	)
118  
	#mu‹x_¡Üe_doubË
(
v®ue
, 
»suÉp
) \

120 *(
»suÉp
èğ(
v®ue
); \

121 }

	)
128 #ifdef 
__ılu¥lus


	@/usr/include/sys/procset.h

13 #iâdeà
_SYS_PROCSET_H


14  
	#_SYS_PROCSET_H


	)
16 #´agm¨
id’t
 "@(#)procset.h 1.17 96/04/24 SMI"

18 #ifdef 
__ılu¥lus


22 
	~<sys/ã©u»_‹¡s.h
>

30  
	#P_INITPID
 1

	)
31  
	#P_INITUID
 0

	)
32  
	#P_INITPGID
 0

	)
41 #ià!
defšed
(
	t_XPG4_2
è|| 
	tdefšed
(
	t__EXTENSIONS__
)

42 
	tidty³


45 
P_PID
,

46 
P_PPID
,

47 
P_PGID
,

49 
P_SID
,

50 
P_CID
,

51 
P_UID
,

52 
P_GID
,

53 
P_ALL
,

54 
P_LWPID


55 } 
	tidty³_t
;

63 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

64 
	eidİ
 {

65 
POP_DIFF
,

68 
POP_AND
,

71 
POP_OR
,

74 
POP_XOR


77 } 
	tidİ_t
;

85 
	s´oc£t
 {

86 
idİ_t
 
p_İ
;

91 
idty³_t
 
p_lidty³
;

94 
id_t
 
p_lid
;

96 
idty³_t
 
p_ridty³
;

99 
id_t
 
p_rid
;

100 } 
	t´oc£t_t
;

106  
	#£roc£t
(
p¥
, 
İ
, 
Éy³
, 
lid
, 
¹y³
, 
rid
) \

107 (
p¥
)->
p_İ
 = (
İ
); \

108 (
p¥
)->
p_lidty³
 = (
Éy³
); \

109 (
p¥
)->
p_lid
 = (
lid
); \

110 (
p¥
)->
p_ridty³
 = (
¹y³
); \

111 (
p¥
)->
p_rid
 = (
rid
);

	)
115 #ifdeà
_KERNEL


120 #ià
defšed
(
__STDC__
)

121 
	~<sys/´oc.h
>

122 
dÙİrocs
(
´oc£t_t
 *
p¥
, (*
funı
)(), *
¬g
);

123 
dÙŞwp
(
´oc£t_t
 *
p¥
, (*
funı
)(), *
¬g
);

124 
´ocš£t
(
´oc_t
 *
µ
, 
´oc£t_t
 *
p¥
);

125 
sig£nd´oc
(
´oc_t
 *, 
sig£nd_t
 *);

126 
sig£nd£t
(
´oc£t_t
 *, 
sig£nd_t
 *);

127 
boŞ—n_t
 
cur_š£t_Úly
(
´oc£t_t
 *
p¥
);

131 
dÙİrocs
();

132 
dÙŞwp
();

133 
´ocš£t
();

134 
sig£nd´oc
();

135 
sig£nd£t
();

136 
boŞ—n_t
 
cur_š£t_Úly
();

142 #ifdef 
__ılu¥lus


	@/usr/include/sys/resource.h

12 #iâdeà
_SYS_RESOURCE_H


13  
	#_SYS_RESOURCE_H


	)
15 #´agm¨
id’t
 "@(#)resource.h 1.21 96/06/03 SMI"

17 
	~<sys/ã©u»_‹¡s.h
>

19 
	~<sys/ty³s.h
>

21 #ifdef 
__ılu¥lus


29  
	#PRIO_PROCESS
 0

	)
30  
	#PRIO_PGRP
 1

	)
31  
	#PRIO_USER
 2

	)
38  
	#RLIMIT_CPU
 0

	)
39  
	#RLIMIT_FSIZE
 1

	)
40  
	#RLIMIT_DATA
 2

	)
41  
	#RLIMIT_STACK
 3

	)
42  
	#RLIMIT_CORE
 4

	)
43  
	#RLIMIT_NOFILE
 5

	)
44  
	#RLIMIT_VMEM
 6

	)
45  
	#RLIMIT_AS
 
RLIMIT_VMEM


	)
47  
	#RLIM_NLIMITS
 7

	)
53 #ià
_FILE_OFFSET_BITS
 == 32

55 
	t¾im_t
;

57  
	#RLIM_INFINITY
 0x7fffffff

	)
58  
	#RLIM_SAVED_MAX
 0x7fffffã

	)
59  
	#RLIM_SAVED_CUR
 0x7ffffffd

	)
63 
u_lÚglÚg_t
 
	t¾im_t
;

65  
	#RLIM_INFINITY
 ((
¾im_t
è-3)

	)
66  
	#RLIM_SAVED_MAX
 ((
¾im_t
è-2)

	)
67  
	#RLIM_SAVED_CUR
 ((
¾im_t
è-1)

	)
71 
	s¾im™
 {

72 
¾im_t
 
¾im_cur
;

73 
¾im_t
 
¾im_max
;

77 #ifdef 
_LARGEFILE64_SOURCE


79 
u_lÚglÚg_t
 
	t¾im64_t
;

81  
	#RLIM64_INFINITY
 ((
¾im64_t
è-3)

	)
82  
	#RLIM64_SAVED_MAX
 ((
¾im64_t
è-2)

	)
83  
	#RLIM64_SAVED_CUR
 ((
¾im64_t
è-1)

	)
85 
	s¾im™64
 {

86 
¾im64_t
 
¾im_cur
;

87 
¾im64_t
 
¾im_max
;

92 #ifdeà
_KERNEL


94 
¾im™64
 
¾im™s
[];

95 
¾im64_t
 
¾im_šfš™y_m­
[];

97 #ià
defšed
(
__STDC__
)

99 
¾im™
(, 
¾im64_t
,„lim64_t);

103 
¾im™
();

109 
	~<sys/time.h
>

111  
	#RUSAGE_SELF
 0

	)
112  
	#RUSAGE_CHILDREN
 -1

	)
114 
	sru§ge
 {

115 
timev®
 
	gru_utime
;

116 
timev®
 
	gru_¡ime
;

117 
	gru_maxrss
;

118 
	gru_ixrss
;

119 
	gru_idrss
;

120 
	gru_i¤ss
;

121 
	gru_mšæt
;

122 
	gru_majæt
;

123 
	gru_nsw­
;

124 
	gru_šblock
;

125 
	gru_oublock
;

126 
	gru_msg¢d
;

127 
	gru_msgrcv
;

128 
	gru_nsigÇls
;

129 
	gru_nvcsw
;

130 
	gru_nivcsw
;

134 #ià
_FILE_OFFSET_BITS
 == 64

135 #ifdeà
__PRAGMA_REDEFINE_EXTNAME


136 #´agm¨
»defše_exŠame
 
£Œlim™
 
£Œlim™64


137 #´agm¨
»defše_exŠame
 
g‘¾im™
 
g‘¾im™64


139  
	#£Œlim™
 
£Œlim™64


	)
140  
	#g‘¾im™
 
g‘¾im™64


	)
142  
	#¾im™
 
¾im™64


	)
146 #ià
defšed
(
__STDC__
)

148 
£Œlim™
(, cÚ¡ 
¾im™
 *);

149 
g‘¾im™
(, 
¾im™
 *);

152 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

153 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

154 
£Œlim™64
(, cÚ¡ 
¾im™64
 *);

155 
g‘¾im™64
(, 
¾im™64
 *);

158 
g‘´iÜ™y
(, 
id_t
);

159 
£riÜ™y
(, 
id_t
, );

160 
g‘ru§ge
(, 
ru§ge
 *);

164 
g‘¾im™
();

165 
£Œlim™
();

168 #if 
defšed
(
_LARGEFILE64_SOURCE
è&& !((
_FILE_OFFSET_BITS
 == 64) && \

169 !
defšed
(
__PRAGMA_REDEFINE_EXTNAME
))

170 
£Œlim™64
();

171 
g‘¾im™64
();

174 
g‘´iÜ™y
();

175 
£riÜ™y
();

176 
g‘ru§ge
();

182 #ifdef 
__ılu¥lus


	@/usr/include/sys/select.h

8 #iâdeà
_SYS_SELECT_H


9  
	#_SYS_SELECT_H


	)
11 #´agm¨
id’t
 "@(#)select.h 1.11 96/06/20 SMI"

13 
	~<sys/ã©u»_‹¡s.h
>

15 #iâdeà
_KERNEL


16 
	~<sys/time.h
>

19 #ifdef 
__ılu¥lus


29 #iâdef 
FD_SETSIZE


30  
	#FD_SETSIZE
 1024

	)
33 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

34 
	tfd_mask
;

36 
	tfds_mask
;

42  
	#_NBBY
 8

	)
43 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

44 #iâdeà
NBBY


45  
	#NBBY
 
_NBBY


	)
49 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

50  
	#NFDBITS
 ( (
fd_mask
è* 
NBBY
)

	)
52  
	#FD_NFDBITS
 ( (
fds_mask
è* 
_NBBY
)

	)
54  
	#__howmªy
(
__x
, 
__y
) (((__x)+((__y)-1))/(__y))

	)
55 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

56 #iâdef 
howmªy


57  
	#howmªy
(
x
, 
y
) (((x)+((y)-1))/(y))

	)
61 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

62 
	sfd_£t
 {

64 
	s__fd_£t
 {

66 
	mfds_b™s
[
__howmªy
(
FD_SETSIZE
, 
FD_NFDBITS
)];

67 } 
	tfd_£t
;

69  
	#FD_SET
(
__n
, 
__p
) ((__p)->
fds_b™s
[(__n)/
FD_NFDBITS
] |= \

70 (()1 << ((
__n
è% 
FD_NFDBITS
)))

	)
72  
	#FD_CLR
(
__n
, 
__p
) ((__p)->
fds_b™s
[(__n)/
FD_NFDBITS
] &= \

73 ~(()1 << ((
__n
è% 
FD_NFDBITS
)))

	)
75  
	#FD_ISSET
(
__n
, 
__p
) ((__p)->
fds_b™s
[(__n)/
FD_NFDBITS
] & \

76 (()1 << ((
__n
è% 
FD_NFDBITS
)))

	)
78 #ifdeà
_KERNEL


79  
	#FD_ZERO
(
p
) 
	`bz”o
((*)Õ),  (*Õ)))

	)
81  
	#FD_ZERO
(
__p
) 
	`mem£t
((*)(__p), 0,  (*(__p)))

	)
84 #iâdef 
_KERNEL


85 #ifdef 
__STDC__


86 
£Ëù
(, 
fd_£t
 *, fd_£ˆ*, fd_£ˆ*, 
timev®
 *);

88 
£Ëù
();

92 #ifdef 
__ılu¥lus


	@/usr/include/sys/proc.h

8 #iâdeà
_SYS_PROC_H


9  
	#_SYS_PROC_H


	)
11 #´agm¨
id’t
 "@(#)proc.h 1.105 97/10/31 SMI"

13 
	~<sys/time.h
>

15 
	~<sys/th»ad.h
>

16 
	~<sys/üed.h
>

17 
	~<sys/u£r.h
>

18 
	~<sys/tim”.h
>

19 
	~<sys/w©chpošt.h
>

20 #ià
defšed
(
i386
è|| defšed(
__i386
)

21 
	~<sys/£gm’t.h
>

24 #ifdef 
__ılu¥lus


31 
	s´of
 {

32 *
´_ba£
;

33 
´_size
;

34 
´_off
;

35 
´_sÿË
;

44 
	s´oc
 {

48 
vnode
 *
p_exec
;

49 
as
 *
p_as
;

50 
¶ock
 *
p_lockp
;

56 
p_nw·ge
;

57 
kmu‹x_t
 
p_ülock
;

58 
üed
 *
p_üed
;

62 
p_sw­út
;

63 
p_¡©
;

64 
p_wcode
;

65 
u_shÜt
 
p_pidæag
;

66 
p_wd©a
;

67 
pid_t
 
p_µid
;

68 
´oc
 *
p_lšk
;

69 
´oc
 *
p_·»Á
;

70 
´oc
 *
p_chd
;

71 
´oc
 *
p_siblšg
;

72 
´oc
 *
p_psiblšg
;

73 
´oc
 *
p_siblšg_ns
;

74 
´oc
 *
p_chd_ns
;

75 
´oc
 *
p_Ãxt
;

76 
´oc
 *
p_´ev
;

77 
´oc
 *
p_Ãxtofkš
;

78 
´oc
 *
p_Üphª
;

79 
´oc
 *
p_ÃxtÜph
;

80 
´oc
 *
p_pglšk
;

81 
´oc
 *
p_µglšk
;

82 
£ss
 *
p_£s¥
;

83 
pid
 *
p_pidp
;

84 
pid
 *
p_pgidp
;

88 
kcÚdv¬_t
 
p_cv
;

89 
kcÚdv¬_t
 
p_æag_cv
;

90 
kcÚdv¬_t
 
p_lw³x™
;

91 
kcÚdv¬_t
 
p_hŞdlwps
;

93 
kcÚdv¬_t
 
p_æock
;

94 
u_shÜt
 
p_´wªt
;

95 
u_št
 
p_æag
;

97 
şock_t
 
p_utime
;

98 
şock_t
 
p_¡ime
;

99 
şock_t
 
p_cutime
;

100 
şock_t
 
p_c¡ime
;

101 
ÿddr_t
 *
p_£gacù
;

102 
ÿddr_t
 
p_brkba£
;

103 
u_št
 
p_brksize
;

107 
k_sig£t_t
 
p_sig
;

108 
k_sig£t_t
 
p_ignÜe
;

109 
k_sig£t_t
 
p_sigšfo
;

110 
sigqueue
 *
p_sigqueue
;

111 
sigqhdr
 *
p_sigqhdr
;

112 
sigqhdr
 *
p_signhdr
;

113 
u_ch¬
 
p_¡İsig
;

119 
p_fix®ignm’t
;

124 
p_lw±Ù®
;

125 
p_lwpút
;

126 
p_lw´út
;

127 
p_lwpblocked
;

129 
p_zombút
;

130 
kth»ad_t
 *
p_i¡
;

131 
kth»ad_t
 *
p_zombli¡
;

135 
k_sig£t_t
 
p_sigmask
;

136 
k_æt£t_t
 
p_ætmask
;

137 
vnode
 *
p_Œaû
;

138 
vnode
 *
p_¶i¡
;

139 
kth»ad_t
 *
p_ag’‰p
;

140 
w©ched_¬—
 *
p_w¬—
;

141 
u_lÚg
 
p_nw¬—
;

142 
w©ched_·ge
 *
p_w·ge
;

143 
p_m­út
;

145 
´oc
 *
p_¾šk
;

146 
kcÚdv¬_t
 
p_¤wchª_cv
;

147 
u_št
 
p_¡ksize
;

151 
h¹ime_t
 
p_m¡¬t
;

152 
h¹ime_t
 
p_m‹rm
;

153 
h¹ime_t
 
p_mÌ—l
;

154 
h¹ime_t
 
p_acù
[
NMSTATES
];

155 
Ìu§ge
 
p_ru
;

156 
™im”v®
 
p_½rof_tim”
;

157 
p_½rof_tim”id
;

158 
u_št
 
p_defunù
;

163 
kmu‹x_t
 
p_pæock
;

179 vŞ©
´of
 
p_´of
;

184 
u£r
 
p_u£r
;

189 
kth»ad_t
 *
p_£rv”_th»ads
;

190 
doÜ_node
 *
p_uÄef_li¡
;

191 
kcÚdv¬_t
 
p_£rv”_cv
;

192 
p_uÄef_th»ad
;

197 
u_ch¬
 
p_Šf_æags
;

202 
ÿddr_t
 
p_aud™_d©a
;

203 
kth»ad_t
 *
p_a¦w±p
;

204 #ià
defšed
(
i386
è|| defšed(
__i386
)

208 
kmu‹x_t
 
p_ldock
;

209 
£g_desc
 *
p_ldt
;

210 
£g_desc
 
p_ldt_desc
;

211 
p_ldim™
;

213 
u_št
 
p_swrss
;

214 
aio
 *
p_aio
;

215 
tim”¡r
 *
p_™im”
;

216 
k_sig£t_t
 
p_nÙifsigs
;

217 
kcÚdv¬_t
 
p_nÙifcv
;

218 
kcÚdv¬_t
 
p_æock2
;

219 
p_®¬mid
;

220 
doÜ_node
 *
p_doÜ_li¡
;

221 
ušt32_t
 
p_sc_unblocked
;

222 
vnode
 *
p_sc_doÜ
;

223 
lwpchª_d©a
 *
p_lı
;

224 } 
	t´oc_t
;

226  
	#PROC_T


	)
230 
´oc_t
 *
´aùive
;

234 
´oc_t
 *
´oc_sched
;

235 
´oc_t
 *
´oc_š™
;

236 
´oc_t
 *
´oc_·geout
;

237 
´oc_t
 *
´oc_fsæush
;

246 
	supcouÁ
 {

247 
upcouÁ
 *
	gup_Ãxt
;

248 
uid_t
 
	gup_uid
;

249 
u_lÚg
 
	gup_couÁ
;

254 
	spid
 {

255 
	gpid_´šaùive
 :1;

256 
	gpid_pgÜphªed
 :1;

257 
	gpid_·ddšg
 :6;

258 
	gpid_´¦Ù
 :24;

259 
pid_t
 
	gpid_id
;

260 
´oc
 *
	gpid_pglšk
;

261 
pid
 *
	gpid_lšk
;

262 
u_št
 
	gpid_»f
;

265 
´oc_t
 
p0
;

266 
pid
 
pid0
;

268  
	#p_pg½
 
p_pgidp
->
pid_id


	)
269  
	#p_pid
 
p_pidp
->
pid_id


	)
270  
	#p_¦Ù
 
p_pidp
->
pid_´¦Ù


	)
271  
	#p_d‘ached
 
p_pgidp
->
pid_pgÜphªed


	)
273  
	#PID_HOLD
(
pidp
) 
	`ASSERT
(
	`MUTEX_HELD
(&
pidlock
)); \

274 ++(
pidp
)->
pid_»f
;

	)
275  
	#PID_RELE
(
pidp
) 
	`ASSERT
(
	`MUTEX_HELD
(&
pidlock
)); \

276 (
pidp
)->
pid_»f
 > 1 ? \

277 --(
pidp
)->
pid_»f
 : 
	`pid_»Ë
Õidp);

	)
283 
	s¶ock
 {

284 
kmu‹x_t
 
	g¶_lock
;

286  
	#p_lock
 
p_lockp
->
¶_lock


	)
290  
	#SSLEEP
 1

	)
291  
	#SRUN
 2

	)
292  
	#SZOMB
 3

	)
293  
	#SSTOP
 4

	)
294  
	#SIDL
 5

	)
295  
	#SONPROC
 6

	)
298  
	#CLDPEND
 0x0001

	)
299  
	#CLDCONT
 0x0002

	)
305  
	#SSYS
 0x00000001

	)
306  
	#STRC
 0x00000002

	)
307  
	#SLOAD
 0x00000008

	)
308  
	#SLOCK
 0x00000010

	)
309  
	#SPREXEC
 0x00000020

	)
310  
	#SPROCTR
 0x00000040

	)
311  
	#SPRFORK
 0x00000080

	)
312  
	#SKILLED
 0x00000100

	)
313  
	#SULOAD
 0x00000200

	)
314  
	#SRUNLCL
 0x00000400

	)
315  
	#SBPTADJ
 0x00000800

	)
316  
	#SKILLCL
 0x00001000

	)
317  
	#SOWEUPC
 0x00002000

	)
318  
	#SEXECED
 0x00004000

	)
319  
	#SPASYNC
 0x00008000

	)
320  
	#SJCTL
 0x00010000

	)
321  
	#SNOWAIT
 0x00020000

	)
322  
	#SVFORK
 0x00040000

	)
323  
	#SVFWAIT
 0x00080000

	)
324  
	#EXITLWPS
 0x00100000

	)
325  
	#HOLDFORK
 0x00200000

	)
326  
	#SWAITSIG
 0x00400000

	)
327  
	#HOLDFORK1
 0x00800000

	)
328  
	#COREDUMP
 0x01000000

	)
329  
	#SMSACCT
 0x02000000

	)
330  
	#ASLWP
 0x04000000

	)
332  
	#SPRLOCK
 0x08000000

	)
333  
	#NOCD
 0x10000000

	)
334  
	#HOLDWATCH
 0x20000000

	)
335  
	#SMSFORK
 0x40000000

	)
338  
	#PTOU
(
p
) (&Õ)->
p_u£r
)

	)
340  
	#Œacšg
(
p
, 
sig
) (
	`sigismemb”
(&Õ)->
p_sigmask
, sig))

	)
344  
	#ISSIG
(
t
, 
why
) 
	`ISSIG_FAST
Ñ, 
	`‰Şwp
Ñ), 
	`‰İroc
Ñ), why)

	)
354  
	#ISSIG_FAST
(
t
, 
lwp
, 
p
, 
why
) \

355 (
	`ISSIG_PENDING
(
t
, 
lwp
, 
p
è&& 
	`issig
(
why
))

	)
357  
	#ISSIG_PENDING
(
t
, 
lwp
, 
p
) \

358 ((
lwp
)->
lwp_cursig
 | \

359 (
p
)->
p_sig
.
__sigb™s
[0] | \

360 (
p
)->
p_sig
.
__sigb™s
[1] | \

361 (
t
)->
t_sig
.
__sigb™s
[0] | \

362 (
t
)->
t_sig
.
__sigb™s
[1] | \

363 (
p
)->
p_¡İsig
 | \

364 ((
t
)->
t_´oc_æag
 & (
TP_PRSTOP
|
TP_HOLDLWP
|
TP_CHKPT
|
TP_PAUSE
)) | \

365 ((
p
)->
p_æag
 & (
EXITLWPS
|
SKILLED
|
HOLDFORK1
|
HOLDWATCH
)))

	)
367  
	#ISSTOP
(
sig
) (
u
.
u_sigÇl
[sig-1] =ğ
SIG_DFL
 && \

368 
	`sigismemb”
(&
¡İdeçuÉ
, 
sig
))

	)
370  
	#ISHOLD
(
p
) (Õ)->
p_æag
 & 
HOLDFORK
)

	)
375  
	#ISANOMALOUS
(
p
) (
cu¹h»ad
->
t_a¡æag
 | \

376 ((
p
)->
p_æag
 & (
EXITLWPS
|
SKILLED
|
HOLDFORK
|
HOLDFORK1
|
HOLDWATCH
)) | \

377 (
cu¹h»ad
->
t_´oc_æag
 & 
TP_HOLDLWP
))

	)
381  
	#FORREAL
 0

	)
382  
	#JUSTLOOKING
 1

	)
385  
	#SUSPEND_NORMAL
 0

	)
386  
	#SUSPEND_PAUSE
 1

	)
389  
	#NOCLASS
 (-1)

	)
391 #ifdeà
_KERNEL


395 
addupc
((*)(), vŞ©
´of
 *, );

399 
ÿddr_t
 
fšdvaddr
(
´oc_t
 *);

400 
·ddr_t
 
vtİ
(
ÿddr_t
, 
´oc_t
 *);

401 
³x™
();

402 
Ãw´oc
((*)(), 
id_t
, );

403 
vfwa™
(
pid_t
);

404 
ä“´oc
(
´oc_t
 *);

405 
£Œun
(
kth»ad_t
 *);

406 
£Œun_locked
(
kth»ad_t
 *);

407 
ex™
(, );

408 
»lvm
();

409 
add_ns
(
´oc_t
 *,…roc_t *);

410 
d–‘e_ns
(
´oc_t
 *,…roc_t *);

411 
upcouÁ_šc
(
uid_t
);

412 
upcouÁ_dec
(
uid_t
);

413 
upcouÁ_g‘
(
uid_t
);

414 #ià
defšed
(
i386
è|| defšed(
__i386
)

415 
ldt_dup
(
´oc_t
 *,…roc_t *);

418 
sigşd
(
´oc_t
 *, 
sigqueue_t
 *);

419 
sigşd_d–‘e
(
k_sigšfo_t
 *);

420 
sigşd_»po¡
();

421 
fsig
(
k_sig£t_t
 *, 
kth»ad_t
 *);

422 
psig
();

423 
¡İ
(, );

424 
¡İ_Ú_çuÉ
(
u_št
, 
k_sigšfo_t
 *);

425 
issig
();

426 
job¡İ³d
(
´oc_t
 *);

427 
psigÇl
(
´oc_t
 *, );

428 
tsigÇl
(
kth»ad_t
 *, );

429 
sigtİroc
(
´oc_t
 *, 
kth»ad_t
 *, , );

430 
Œ­sig
(
k_sigšfo_t
 *, );

431 
—t_sigÇl
(
kth»ad_t
 *
t
, 
sig
);

433 
pid_£tmš
();

434 
pid_t
 
pid_assign
(
´oc_t
 *);

435 
pid_»Ë
(
pid
 *);

436 
pid_ex™
(
´oc_t
 *);

437 
´oc_’Œy_ä“
(
pid
 *);

438 
´oc_t
 *
´fšd
(
pid_t
);

439 
´oc_t
 *
pgfšd
(
pid_t
);

440 
pid_š™
();

441 
´oc_t
 *
pid_’Œy
();

442 
pid_¦Ù
(
´oc_t
 *);

443 
sigÇl
(
pid_t
, );

444 
´sigÇl
(
pid
 *, );

446 
pgsigÇl
(
pid
 *, );

447 
pgjoš
(
´oc_t
 *, 
pid
 *);

448 
pgü—‹
(
´oc_t
 *);

449 
pgex™
(
´oc_t
 *);

450 
pgd‘ach
(
´oc_t
 *);

451 
pgmemb”s
(
pid_t
);

453 
š™_m¡©e
(
kth»ad_t
 *, );

454 
Ãw_m¡©e
(
kth»ad_t
 *, );

455 
»¡Üe_m¡©e
(
kth»ad_t
 *);

456 
‹rm_m¡©e
(
kth»ad_t
 *);

457 
e¡im©e_m§cù
(
kth»ad_t
 *, 
h¹ime_t
);

458 
di§bË_m§cù
(
´oc_t
 *);

460 
u_št
 
ıu_deÿy
(u_št, 
şock_t
);

461 
u_št
 
ıu_grow
(u_št, 
şock_t
);

463 
£t_´oc_´e_sys
(
´oc_t
 *
p
);

464 
£t_´oc_po¡_sys
(
´oc_t
 *
p
);

465 
£t_´oc_sys
(
´oc_t
 *
p
);

466 
£t_´oc_a¡
(
´oc_t
 *
p
);

467 
£t_®l_´oc_sys
();

471 
kth»ad_t
 *
th»ad_ü—‹
(

472 
ÿddr_t
 
¡k
,

473 
¡ksize
,

474 (*
´oc
)(),

475 
ÿddr_t
 
¬g
,

476 
Ën
,

477 
´oc_t
 *
µ
,

478 
¡©e
,

479 
´i
);

480 
th»ad_ex™
();

481 
th»ad_de¡roy
(
kth»ad_t
 *);

482 
th»ad_ä“
(
kth»ad_t
 *);

483 
»­”
();

484 
§veùx
(
kth»ad_t
 *);

485 
»¡Üeùx
(
kth»ad_t
 *);

486 
fÜkùx
(
kth»ad_t
 *, kthread_t *);

487 
ä“ùx
(
kth»ad_t
 *);

488 
kth»ad_t
 *
th»ad_uÅš
();

489 
»Ëa£_š‹¼u±
();

490 
th»ad_ü—‹_šŒ
(
ıu
 *);

491 
th»ad_š™
();

492 
th»ad_lßd
(
kth»ad_t
 *, (*)(), 
ÿddr_t
, );

494 
tsd_ü—‹
(
u_št
 *, (*)(*));

495 
tsd_de¡roy
(
u_št
 *);

496 *
tsd_g‘ü—‹
(
u_št
 *, (*)(*), *(*)());

497 *
tsd_g‘
(
u_št
);

498 
tsd_£t
(
u_št
, *);

499 
tsd_ex™
();

503 
klwp_t
 *
lwp_ü—‹
(

504 (*
´oc
)(),

505 
ÿddr_t
 
¬g
,

506 
Ën
,

507 
´oc_t
 *
p
,

508 
¡©e
,

509 
´i
,

510 
k_sig£t_t
 
smask
,

511 
cid
);

512 
lwp_ex™
();

513 
lwp_su¥’d
(
kth»ad_t
 *, *);

514 
lwp_cÚtšue
(
kth»ad_t
 *);

515 
hŞdlwp
();

516 
¡İlwp
();

517 
hŞdlwps
();

518 
hŞdw©ch
();

519 
pok–wps
(
´oc_t
 *);

520 
cÚtšu–wps
(
´oc_t
 *);

521 
ex™lwps
();

522 
klwp_t
 *
fÜklwp
(klwp_ˆ*, 
´oc_t
 *);

523 
sigish–d
(
´oc_t
 *, );

524 
sigwa™šg_£nd
(
kmu‹x_t
 *);

525 
lwp_lßd
(
klwp_t
 *, 
ucÚ‹xt_t
 *);

526 
lwp_£Œv®
(
klwp_t
 *, , );

527 
lwp_fÜk»gs
(
klwp_t
 *, klwp_t *);

528 
lwp_ä“»gs
(
klwp_t
 *);

529 
ÿddr_t
 
lwp_¡k_š™
(
klwp_t
 *, caddr_t);

535 
sigqä“
(
´oc_t
 *);

536 
sigšfoä“
(
sigqueue_t
 *);

537 
sigdeq
(
´oc_t
 *, 
kth»ad_t
 *, , 
sigqueue_t
 **);

538 
sigd–q
(
´oc_t
 *, 
kth»ad_t
 *, );

539 
sigaddq
(
´oc_t
 *, 
kth»ad_t
 *, 
k_sigšfo_t
 *, );

540 
sigaddqa
(
´oc_t
 *, 
kth»ad_t
 *, 
sigqueue_t
 *);

541 
sigdupq
(
´oc_t
 *,…roc_t *);

542 
sigqueue_t
 *
sigq®loc
(
sigqhdr_t
 **);

543 
sigqhd¿Îoc
(
sigqhdr_t
 **, , );

544 
sigqhdrä“
(
sigqhdr_t
 **);

545 
sigq»l
(
sigqueue_t
 *);

546 
sigqueue_t
 *
sig­³nd
(
k_sig£t_t
 *, sigqueue_t *,

547 
k_sig£t_t
 *, 
sigqueue_t
 *);

548 
sigqueue_t
 *
sig´•’d
(
k_sig£t_t
 *, sigqueue_t *,

549 
k_sig£t_t
 *, 
sigqueue_t
 *);

550 
wšfo
(
´oc_t
 *, 
k_sigšfo_t
 *, );

551 
w¡©
(, );

552 
£ndsig
(, 
k_sigšfo_t
 *, (*)());

556 #ifdef 
__ılu¥lus


	@/usr/include/sys/cred.h

31 #iâdeà
_SYS_CRED_H


32  
	#_SYS_CRED_H


	)
34 #´agm¨
id’t
 "@(#)cred.h 1.20 96/12/06 SMI"

36 #ifdeà
_KERNEL


37 
	~<sys/t_lock.h
>

40 #ifdef 
__ılu¥lus


50 
	süed
 {

51 
ušt_t
 
ü_»f
;

52 
uid_t
 
ü_uid
;

53 
gid_t
 
ü_gid
;

54 
uid_t
 
ü_ruid
;

55 
gid_t
 
ü_rgid
;

56 
uid_t
 
ü_suid
;

57 
gid_t
 
ü_sgid
;

58 
ulÚg_t
 
ü_ngroups
;

59 
gid_t
 
ü_groups
[1];

60 } 
	tüed_t
;

62 #ifdeà
_KERNEL


64  
	#CRED
() 
cu¹h»ad
->
t_üed


	)
66 
´oc
;

68 
ngroups_max
;

72 
üed
 *
küed
;

74 
üed_š™
();

75 
ühŞd
(
üed_t
 *);

76 
üä“
(
üed_t
 *);

77 
üed_t
 *
üg‘
();

78 
üed_t
 *
ücİy
(cred_t *);

79 
ücİy_to
(
üed_t
 *, cred_t *);

80 
üed_t
 *
üdup
(cred_t *);

81 
üdup_to
(
üed_t
 *, cred_t *);

82 
üed_t
 *
üg‘üed
();

83 
ü£t
(
´oc
 *, 
üed_t
 *);

84 
su£r
(
üed_t
 *);

85 
groupmemb”
(
gid_t
, 
üed_t
 *);

86 
ha¥roı”m
(
üed_t
 *, cred_t *);

87 
ücmp
(
üed_t
 *, cred_t *);

91 #ifdef 
__ılu¥lus


	@/usr/include/sys/thread.h

6 #iâdef 
_SYS_THREAD_H


7  
	#_SYS_THREAD_H


	)
9 #´agm¨
id’t
 "@(#)thread.h 1.78 97/06/13 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/cÚdv¬.h
>

13 
	~<sys/t_lock.h
>

14 
	~<sys/klwp.h
>

15 
	~<sys/pœec.h
>

16 
	~<sys/¦“pq.h
>

17 
	~<sys/tuº¡e.h
>

18 
	~<sys/time.h
>

19 
	~<sys/sigÇl.h
>

20 
	~<vm/·ge.h
>

22 #ifdef 
__ılu¥lus


35  
	#TS_FREE
 0x00

	)
36  
	#TS_SLEEP
 0x01

	)
37  
	#TS_RUN
 0x02

	)
38  
	#TS_ONPROC
 0x04

	)
39  
	#TS_ZOMB
 0x08

	)
40  
	#TS_STOPPED
 0x10

	)
42 
	sùxİ
 {

43 (*
§ve_İ
)();

44 (*
»¡Üe_İ
)();

45 (*
fÜk_İ
)();

46 (*
ä“_İ
)();

47 
¬g
;

48 
ùxİ
 *
Ãxt
;

49 } 
	tùxİ_t
;

51 
_kth»ad
 *
	tkth»ad_id_t
;

53 
	s_kth»ad
 {

54 
_kth»ad
 *
t_lšk
;

56 
ÿddr_t
 
t_¡k
;

57 (*
t_¡¬c
)();

58 
ıu
 *
t_bound_ıu
;

59 
t_affš™yút
;

60 
t_bšd_ıu
;

61 
u_shÜt
 
t_æag
;

62 
u_shÜt
 
t_´oc_æag
;

63 
u_shÜt
 
t_schedæag
;

64 vŞ©
t_´“m±
;

65 vŞ©
t_´“m±_lk
;

66 
u_št
 
t_¡©e
;

67 
´i_t
 
t_´i
;

68 
´i_t
 
t_•ri
;

69 
Ïb–_t
 
t_pcb
;

71 
t_wchª0
;

72 
ÿddr_t
 
t_wchª
;

73 
_sobj_İs
 *
t_sobj_İs
;

74 
id_t
 
t_cid
;

75 
th»ad_İs
 *
t_şfuncs
;

76 *
t_şd©a
;

77 
ùxİ_t
 *
t_ùx
;

78 
u_št
 
t_loçuÉ
;

79 
Ïb–_t
 *
t_ÚçuÉ
;

80 *
t_noçuÉ
;

81 
ÿddr_t
 
t_sw­
;

82 
lock_t
 
t_lock
;

83 
ušt8_t
 
t_lock¡©
;

84 
kcÚdv¬_t
 
t_d–ay_cv
;

85 
ıu
 *
t_ıu
;

86 
_kth»ad
 *
t_šŒ
;

87 
u_št
 
t_did
;

88 
ÿddr_t
 
t_Šf_dp
;

93 
u_št
 
t_tid
;

94 
t_®¬mid
;

95 
™im”v®
 
t_»®™im”
;

96 
t_™im”id
;

97 
sigqueue
 *
t_sigqueue
;

98 
k_sig£t_t
 
t_sig
;

99 
k_sig£t_t
 
t_hŞd
;

100 
_kth»ad
 *
t_fÜw
;

101 
_kth»ad
 *
t_back
;

102 
klwp_t
 *
t_lwp
;

103 
´oc
 *
t_´oı
;

104 
ÿddr_t
 
t_aud™_d©a
;

105 
_kth»ad
 *
t_Ãxt
;

106 
_kth»ad
 *
t_´ev
;

107 
vnode
 *
t_Œaû
;

108 
u_shÜt
 
t_why¡İ
;

109 
u_shÜt
 
t_wh©¡İ
;

110 
t_d¦Ù
;

111 
pŞl¡©e
 *
t_pŞl¡©e
;

112 
üed
 *
t_üed
;

113 
time_t
 
t_¡¬t
;

114 
şock_t
 
t_lbŞt
;

115 
h¹ime_t
 
t_¡İtime
;

116 
t_sy¢um
;

118 
u_št
 
t_pùıu
;

126 
di¥_lock_t
 *
t_lockp
;

127 
u_shÜt
 
t_Şd¥l
;

128 vŞ©
t_´e_sys
;

129 
lock_t
 
t_lock_æush
;

130 
_di¥
 *
t_di¥_queue
;

131 
şock_t
 
t_di¥_time
;

132 
u_št
 
t_k´i_»q
;

149 
	u
{

150 
	s
{

151 vŞ©
_t_a¡æag
;

152 vŞ©
_t_sig_check
;

153 vŞ©
_t_po¡_sys
;

154 vŞ©
_t_Œ­»t
;

155 } 
_ts
;

156 vŞ©
_t_po¡_sys_a¡
;

157 } 
_tu
;

158  
	#t_a¡æag
 
_tu
.
_ts
.
_t_a¡æag


	)
159  
	#t_sig_check
 
_tu
.
_ts
.
_t_sig_check


	)
160  
	#t_po¡_sys
 
_tu
.
_ts
.
_t_po¡_sys


	)
161  
	#t_Œ­»t
 
_tu
.
_ts
.
_t_Œ­»t


	)
162  
	#t_po¡_sys_a¡
 
_tu
.
_t_po¡_sys_a¡


	)
168 
h¹ime_t
 
t_wa™rq
;

169 
t_m¡©e
;

170 
	s½rof
 {

171 
½_ªy¡©e
;

172 
u_lÚg
 
½_¡©e
[
NMSTATES
];

173 } *
t_½rof
;

181 
pœec_t
 *
t_´iošv
;

188 
tuº¡e_t
 *
t_ts
;

194 
u_št
 
t_mmuùx
;

201 
	stsd_th»ad
 {

202 
tsd_th»ad
 *
ts_Ãxt
;

203 
tsd_th»ad
 *
ts_´ev
;

204 
u_št
 
ts_nkeys
;

205 **
ts_v®ue
;

206 } *
t_tsd
;

208 
şock_t
 
t_¡ime
;

209 
doÜ_d©a
 *
t_doÜ
;

210 
kmu‹x_t
 *
t_¶ockp
;

212 
_kth»ad
 *
t_hªdoff
;

213 
sc_d©a
 *
t_schedùl
;

215 
ıu·¹
 *
t_ıu·¹
;

216 
t_bšd_p£t
;

218 
cİyİs
 *
t_cİyİs
;

220 
ÿddr_t
 
t_¡kba£
;

221 
·ge_t
 *
t_»d_µ
;

222 #ifdeà
__DOS_EMUL


227 
ÿddr_t
 
t_v86d©a
;

229 } 
	tkth»ad_t
;

242  
	#T_INTR_THREAD
 0x0001

	)
243  
	#T_WAKEABLE
 0x0002

	)
244  
	#T_TOMASK
 0x0004

	)
245  
	#T_TALLOCSTK
 0x0008

	)
246  
	#T_LWPZOMB
 0x0010

	)
247  
	#T_WOULDBLOCK
 0x0020

	)
248  
	#T_DONTBLOCK
 0x0040

	)
249  
	#T_DONTPEND
 0x0080

	)
250  
	#T_SYS_PROF
 0x0100

	)
251  
	#T_WAITCVSEM
 0x0200

	)
252  
	#T_WATCHPT
 0x0400

	)
259  
	#TP_WAITFOR
 0x001

	)
260  
	#TP_HOLDLWP
 0x002

	)
261  
	#TP_TWAIT
 0x004

	)
262  
	#TP_LWPEXIT
 0x008

	)
263  
	#TP_PRSTOP
 0x010

	)
264  
	#TP_CHKPT
 0x020

	)
265  
	#TP_EXITLWP
 0x040

	)
266  
	#TP_PRVSTOP
 0x080

	)
267  
	#TP_MSACCT
 0x100

	)
268  
	#TP_STOPPING
 0x200

	)
269  
	#TP_WATCHPT
 0x400

	)
270  
	#TP_PAUSE
 0x800

	)
276  
	#TS_LOAD
 0x0001

	)
277  
	#TS_DONT_SWAP
 0x0002

	)
278  
	#TS_SWAPENQ
 0x0004

	)
279  
	#TS_ON_SWAPQ
 0x0008

	)
280  
	#TS_CSTART
 0x0100

	)
281  
	#TS_UNPAUSE
 0x0200

	)
282  
	#TS_XSTART
 0x0400

	)
283  
	#TS_PSTART
 0x0800

	)
284  
	#TS_RESUME
 0x1000

	)
285  
	#TS_ALLSTART
 (
TS_CSTART
|
TS_UNPAUSE
|
TS_XSTART
|
TS_PSTART
|
TS_RESUME
)

	)
290  
	#a¡Ú
(
t
) (Ñ)->
t_a¡æag
 = 1)

	)
291  
	#a¡off
(
t
) (Ñ)->
t_a¡æag
 = 0)

	)
294  
	#ISTOPPED
(
t
è(Ñ)->
t_¡©e
 =ğ
TS_STOPPED
 && \

295 !((
t
)->
t_schedæag
 & 
TS_PSTART
))

	)
298  
	#CPR_ISTOPPED
(
t
è(Ñ)->
t_¡©e
 =ğ
TS_STOPPED
 && \

299 !((
t
)->
t_schedæag
 & 
TS_RESUME
))

	)
305  
	#VSTOPPED
(
t
) (Ñ)->
t_´oc_æag
 & 
TP_PRVSTOP
)

	)
308  
	#CPR_VSTOPPED
(
t
) \

309 ((
t
)->
t_¡©e
 =ğ
TS_SLEEP
 && \

310 (
t
)->
t_wchª0
 && \

311 ((
t
)->
t_æag
 & 
T_WAKEABLE
) && \

312 ((
t
)->
t_´oc_æag
 & 
TP_CHKPT
))

	)
315  
	#SUSPENDED
(
t
è(Ñ)->
t_¡©e
 =ğ
TS_STOPPED
 && \

316 ((
t
)->
t_schedæag
 & (
TS_CSTART
|
TS_UNPAUSE
)è!ğ(TS_CSTART|TS_UNPAUSE))

	)
319  
	#INHERITED
(
t
) (Ñ)->
t_•ri
 !ğ0)

	)
322  
	#DISP_PRIO
(
t
è(
	`INHERITED
Ñè? (t)->
t_•ri
 : (t)->
t_´i
)

	)
325  
	#ASSIGNED_PRIO
(
t
) (Ñ)->
t_´i
)

	)
331  
	#SWAP_OK
(
t
) (!
	`LOCK_HELD
(&Ñ)->
t_lock
))

	)
354  
	#´oùÙ
(
x
) ((x)->
p_i¡
)

	)
355  
	#´oùŞwp
(
x
) ((x)->
p_i¡
->
t_lwp
)

	)
356  
	#‰Şwp
(
x
) ((x)->
t_lwp
)

	)
357  
	#‰İroc
(
x
) ((x)->
t_´oı
)

	)
358  
	#lw±Ù
(
x
) ((x)->
lwp_th»ad
)

	)
359  
	#lw±İroc
(
x
) ((x)->
lwp_´oı
)

	)
361  
	#t_pc
 
t_pcb
.
v®
[0]

	)
362  
	#t_¥
 
t_pcb
.
v®
[1]

	)
364  
	#LWPCHAN
(
t
) ((
quad
 *)(&(Ñ)->
t_wchª0
)))

	)
366 #ifdef 
_KERNEL


368 
kth»ad_id_t
 
th»adp
();

369  
	#cu¹h»ad
 (
	`th»adp
())

	)
370  
	#cu½roc
 (
	`‰İroc
(
cu¹h»ad
))

	)
372 
_kth»ad
 
t0
;

373 
kmu‹x_t
 
pidlock
;

379 
kmu‹x_t
 
th»ad_ä“_lock
;

381 
kth»ad_t
 *
idtÙ
();

387 
th»ad_chªge_´i
(
kth»ad_t
 *
t
, 
´i_t
 
di¥_´i
, 
äÚt
);

388 
th»ad_chªge_•ri
(
kth»ad_t
 *
t
, 
´i_t
 
di¥_´i
);

395 
th»ad_Œªs™iÚ
(
kth»ad_id_t
);

396 
th»ad_lock
(
kth»ad_id_t
);

397 
th»ad_lock_high
(
kth»ad_id_t
);

398 
th»ad_Ú´oc
(
kth»ad_id_t
, 
ıu
 *);

400  
	#th»ad_uÆock
(
t
) 
	`di¥_lock_ex™
(Ñ)->
t_lockp
)

	)
401  
	#th»ad_uÆock_high
(
t
) 
	`di¥_lock_ex™_high
(Ñ)->
t_lockp
)

	)
402  
	#th»ad_uÆock_nİ»em±
(
t
) 
	`di¥_lock_ex™_nİ»em±
(Ñ)->
t_lockp
)

	)
404  
	#THREAD_LOCK_HELD
(
t
) (
	`DISP_LOCK_HELD
(Ñ)->
t_lockp
))

	)
406 
di¥_lock_t
 
Œªs™iÚ_lock
;

407 
di¥_lock_t
 
¡İ_lock
;

409 
ÿddr_t
 
th»ad_¡k_š™
(caddr_t);

423  
	#THREAD_KPRI_REQUEST
() (
cu¹h»ad
->
t_k´i_»q
++)

	)
424  
	#THREAD_KPRI_RELEASE
() (
cu¹h»ad
->
t_k´i_»q
--)

	)
425  
	#THREAD_KPRI_RELEASE_N
(
n
è(
cu¹h»ad
->
t_k´i_»q
 -ğÒ))

	)
430  
	#THREAD_SET_STATE
(

, 
¡©e
, 
Í
) \

431 ((

)->
t_¡©e
 = 
¡©e
, ()->
t_lockp
 = 
Í
)

	)
437  
	#THREAD_TRANSITION
(

è 
	`th»ad_Œªs™iÚ
Ñp);

	)
442  
	#THREAD_TRANSITION_NOLOCK
(

è (Ñp)->
t_lockp
 = &
Œªs™iÚ_lock
)

	)
448  
	#THREAD_RUN
(

, 
Í
) 
	`THREAD_SET_STATE
Ñp, 
TS_RUN
,†p)

	)
454  
	#THREAD_SWAP
(

, 
Í
) 
	`THREAD_SET_STATE
Ñp, 
TS_RUN
,†p)

	)
462  
	#THREAD_STOP
(

) \

463 { 
di¥_lock_t
 *
Í
 = (

)->
t_lockp
; \

464 
	`THREAD_SET_STATE
(

, 
TS_STOPPED
, &
¡İ_lock
); \

465 
	`di¥_lock_ex™
(
Í
); \

466 }

	)
472  
	#THREAD_ZOMB
(

) 
	`THREAD_SET_STATE
Ñp, 
TS_ZOMB
, 
NULL
)

	)
479  
	#THREAD_ONPROC
(

, 
ıu
) \

480 
	`THREAD_SET_STATE
(

, 
TS_ONPROC
, &(
ıu
)->
ıu_th»ad_lock
)

	)
486  
	#THREAD_SLEEP
(

, 
Í
) { \

487 
di¥_lock_t
 *
p
; \

488 
p
 = (

)->
t_lockp
; \

489 
	`THREAD_SET_STATE
(

, 
TS_SLEEP
, 
Í
); \

490 
	`di¥_lock_ex™_high
(
p
); \

491 }

	)
493 #ifdef 
__ılu¥lus


	@/usr/include/sys/timer.h

5 #iâdef 
_SYS_TIMER_H


6  
	#_SYS_TIMER_H


	)
8 #´agm¨
id’t
 "@(#)timer.h 1.12 94/12/06 SMI"

10 
	~<sys/ty³s.h
>

11 
	~<sys/´oc.h
>

12 
	~<sys/th»ad.h
>

14 #ifdef 
__ılu¥lus


18 #ifdef 
_KERNEL


20  
	#_TIMER_MAX
 32

	)
22  
	#tim”¥ecis£t
(
tvp
) (Ñvp)->
tv_£c
 || (tvp)->
tv_n£c
)

	)
23  
	#tim”¥eccmp
(
tvp
, 
uvp
) ((Ñvp)->
tv_£c
 - (uvp)->tv_sec) ? \

24 ((
tvp
)->
tv_£c
 - (
uvp
)->tv_£c):(Ñvp)->
tv_n£c
 - (uvp)->tv_n£c))

	)
25  
	#tim”¥ecş—r
(
tvp
) (Ñvp)->
tv_£c
 = (tvp)->
tv_n£c
 = 0)

	)
31 
	stim”¡r
 {

32 
Œs_æags
;

33 
şockid_t
 
Œs_şock_id
;

34 
™im”¥ec_t
 
Œs_™im”
;

35 
sigqueue
 *
Œs_sigqp
;

36 
Œs_ÿÎout_id
;

37 
Œs_ov”run1
;

38 
Œs_ov”run2
;

39 
	u
{

40 
klwp_t
 *
Œs_uÆwp
;

41 
´oc
 *
Œs_uÅroc
;

42 } 
Œs_un
;

43 } 
	ttim”¡r_t
;

45  
	#TRS_INUSE
 0x1

	)
46  
	#TRS_PERLWP
 0x2

	)
47  
	#TRS_SIGNAL
 0x4

	)
48  
	#TRS_PENDING
 0x8

	)
50  
	#Œs_lwp
 
Œs_un
.
Œs_uÆwp


	)
51  
	#Œs_´oc
 
Œs_un
.
Œs_uÅroc


	)
53 #ifdef 
__STDC__


54 
tim”_func
(
sigqueue_t
 *);

55 
tim”_ex™
();

56 
tim”_lw³x™
();

57 
hzto
(
timev®
 *);

58 
time¥eùohz
(
time¥ec_t
 *,imespec_t);

59 
™im”¥ecfix
(
time¥ec_t
 *);

60 
time¥eÿdd
(
time¥ec_t
 *,imespec_t *);

61 
time¥ecsub
(
time¥ec_t
 *,imespec_t *);

62 
time¥ecfix
(
time¥ec_t
 *);

64 
tim”_func
();

65 
tim”_ex™
();

66 
tim”_lw³x™
();

67 
hzto
();

68 
time¥eùohz
();

69 
™im”¥ecfix
();

70 
time¥eÿdd
();

71 
time¥ecsub
();

72 
time¥ecfix
();

77 #ifdef 
__ılu¥lus


	@/usr/include/sys/user.h

12 #iâdeà
_SYS_USER_H


13  
	#_SYS_USER_H


	)
15 #´agm¨
id’t
 "@(#)user.h 1.47 97/06/26 SMI"

17 
	~<sys/ty³s.h
>

18 
	~<sys/sigÇl.h
>

20 #ifdef 
__ılu¥lus


28 
	sexd©a
 {

29 
vnode
 *
vp
;

30 
size_t
 
ux_tsize
;

31 
size_t
 
ux_dsize
;

32 
size_t
 
ux_bsize
;

33 
size_t
 
ux_lsize
;

34 
ux_nshlibs
;

35 
ux_mach
;

36 
ux_mag
;

37 
off_t
 
ux_toff£t
;

38 
off_t
 
ux_doff£t
;

39 
off_t
 
ux_loff£t
;

40 
ÿddr_t
 
ux_txtÜg
;

41 
ÿddr_t
 
ux_d©Üg
;

42 
ÿddr_t
 
ux_’oc
;

45 #ifdef 
__ılu¥lus


49 #ià
defšed
(
_KERNEL
è|| defšed(
_KMEMUSER
)

51 
	~<sys/·¿m.h
>

52 
	~<sys/pcb.h
>

53 
	~<sys/sigšfo.h
>

54 
	~<sys/»sourû.h
>

55 
	~<sys/time.h
>

56 
	~<sys/auxv.h
>

57 
	~<sys/”ºo.h
>

58 
	~<sys/t_lock.h
>

60 #ifdef 
__ılu¥lus


75  
	#NFPCHUNK
 24

	)
77 
	suf_’Œy
 {

78 
fe
 *
uf_ofe
;

79 
uf_pofe
;

80 
uf_»fút
;

82 
uf_’Œy
 
	tuf_’Œy_t
;

84  
	#PSARGSZ
 80

	)
86  
	#PSCOMSIZ
 14

	)
88  
	#SYSMASKLEN
 9

	)
90  
	#MAXCOMLEN
 16

	)
92 
	s
{

93 
wÜd
[
SYSMASKLEN
];

94 } 
	tk_sys£t_t
;

105 #ià
defšed
(
¥¬c
è|| defšed(
__¥¬c
)

106  
	#__KERN_NAUXV_IMPL
 19

	)
107 #–ià
defšed
(
i386
è|| defšed(
__i386
)

108  
	#__KERN_NAUXV_IMPL
 21

	)
111 
	su£r
 {

115 
u_execid
;

116 
u_execsz
;

117 
ušt
 
u_tsize
;

118 
ušt
 
u_dsize
;

119 
time_t
 
u_¡¬t
;

120 
şock_t
 
u_ticks
;

121 
kcÚdv¬_t
 
u_cv
;

125 
exd©a
 
u_exd©a
;

126 
auxv_t
 
u_auxv
[
__KERN_NAUXV_IMPL
];

127 
u_p§rgs
[
PSARGSZ
];

128 
u_comm
[
MAXCOMLEN
 + 1];

132 
u_¬gc
;

133 **
u_¬gv
;

134 **
u_’vp
;

138 
vnode
 *
u_cdœ
;

139 
vnode
 *
u_rdœ
;

140 
vnode
 *
u_‰yvp
;

141 
mode_t
 
u_cmask
;

142 
u_mem
;

143 
u_sy¡¿p
;

150 
o_pid_t
 *
u_‰yp
;

151 
o_dev_t
 
u_‰yd
;

157 
k_sys£t_t
 
u_’Œymask
;

158 
k_sys£t_t
 
u_ex™mask
;

159 
k_sig£t_t
 
u_signodeãr
;

160 
k_sig£t_t
 
u_sigÚ¡ack
;

161 
k_sig£t_t
 
u_sig»£thªd
;

162 
k_sig£t_t
 
u_sig»¡¬t
;

163 
k_sig£t_t
 
u_sigmask
[
MAXSIG
];

164 (*
u_sigÇl
[
MAXSIG
])();

169 
u_nshm£g
;

170 
u_acæag
;

178 
¾im™64
 
u_¾im™
[
RLIM_NLIMITS
];

186 
¾im™64
 
u_§ved_¾im™
;

188 
kmu‹x_t
 
u_æock
;

189 
u_nofes
;

190 
uf_’Œy
 *
u_æi¡
;

191 
kmu‹x_t
 
u_æock2
;

192 #ià
defšed
(
i386
è|| defšed(
__i386
)

193 (*
u_sig»tuº
)();

195 **
u_auxvp
;

196 } 
	tu£r_t
;

198 
	~<sys/´oc.h
>

200 #ifdef 
_KERNEL


201 #ifdef 
sun


202  
	#u
 (
cu½roc
->
p_u£r
)

	)
210  
	#U_CURLIMIT
(
up
, 
ty³
) \

211 (((
up
)->
u_¾im™
[(
ty³
)].
¾im_cur
 =ğ
RLIM64_INFINITY
) ? \

212 
¾im_šfš™y_m­
[(
ty³
)] : (
up
)->
u_¾im™
[Ñy³)].
¾im_cur
)

	)
213  
	#U_MAXLIMIT
(
up
, 
ty³
) \

214 (((
up
)->
u_¾im™
[(
ty³
)].
¾im_max
 =ğ
RLIM64_INFINITY
) ? \

215 
¾im_šfš™y_m­
[(
ty³
)] : (
up
)->
u_¾im™
[Ñy³)].
¾im_max
)

	)
216  
	#UNLIMITED_CUR
(
up
, 
ty³
) \

217 (((
up
)->
u_¾im™
[(
ty³
)].
¾im_cur
 =ğ
RLIM64_INFINITY
è? 1 : 0)

	)
218  
	#UNLIMITED_MAX
(
up
, 
ty³
) \

219 (((
up
)->
u_¾im™
[(
ty³
)].
¾im_max
 =ğ
RLIM64_INFINITY
è? 1 : 0)

	)
223 #ifdef 
__ılu¥lus


244 
	~<sys/»g£t.h
>

246 #ifdef 
__ılu¥lus


250  
	#PSARGSZ
 80

	)
252 
	su£r
 {

253 
g»g£t_t
 
u_»g
;

254 
g»g_t
 * 
u_¬0
;

255 
u_p§rgs
[
PSARGSZ
];

256 (*
u_sigÇl
[
MAXSIG
])();

257 
u_code
;

258 
ÿddr_t
 
u_addr
;

259 } 
	tu£r_t
;

261 #ifdef 
__ılu¥lus


	@/usr/include/sys/watchpoint.h

6 #iâdeà
_SYS_WATCHPOINT_H


7  
	#_SYS_WATCHPOINT_H


	)
9 #´agm¨
id’t
 "@(#)watchpoint.h 1.2 97/05/09 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<vm/£g_’um.h
>

13 
	~<sys/cİyİs.h
>

15 #ifdef 
__ılu¥lus


28 
	sw©ched_¬—
 {

29 
w©ched_¬—
 *
wa_fÜw
;

30 
w©ched_¬—
 *
wa_back
;

31 
ÿddr_t
 
wa_vaddr
;

32 
ÿddr_t
 
wa_—ddr
;

33 
u_št
 
wa_æags
;

40 
	sw©ched_·ge
 {

41 
w©ched_·ge
 *
wp_fÜw
;

42 
w©ched_·ge
 *
wp_back
;

43 
ÿddr_t
 
wp_vaddr
;

44 
u_ch¬
 
wp_´Ù
;

45 
u_ch¬
 
wp_İrÙ
;

46 
u_ch¬
 
wp_um­
[3];

47 
u_ch¬
 
wp_km­
[3];

48 
u_shÜt
 
wp_æags
;

49 
wp_»ad
;

50 
wp_wr™e
;

51 
wp_exec
;

55  
	#WP_NOWATCH
 0x01

	)
56  
	#WP_SETPROT
 0x02

	)
58 #ifdef 
_KERNEL


60 
k_sigšfo
;

61 
´_m­·ge
(
ÿddr_t
, 
u_št
, 
£g_rw
, );

62 
´_unm­·ge
(
ÿddr_t
, 
u_št
, 
£g_rw
, );

63 
£Îw©ch
();

64 
´_is_w©ch·ge
(
ÿddr_t
, 
£g_rw
);

65 
´_is_w©chpošt
(
ÿddr_t
 *, *, , 
size_t
 *, 
£g_rw
);

66 
do_w©ch_¡•
(
ÿddr_t
, , 
£g_rw
, , 
g»g_t
);

67 
undo_w©ch_¡•
(
k_sigšfo
 *);

69 
cİyİs
 
w©ch_cİyİs
;

73 #ifdef 
__ılu¥lus


	@/usr/include/sys/auxv.h

8 #iâdef 
_SYS_AUXV_H


9  
	#_SYS_AUXV_H


	)
11 #´agm¨
id’t
 "@(#)auxv.h 1.23 97/06/26 SMI"

13 #ifdef 
__ılu¥lus


17 #ià!
defšed
(
_ASM
)

19 
	s
{

20 
a_ty³
;

21 
	u
{

22 
a_v®
;

23 #ifdeà
__STDC__


24 *
a_±r
;

26 *
a_±r
;

28 (*
a_fú
)();

29 } 
a_un
;

30 } 
	tauxv_t
;

33  
	#AT_NULL
 0

	)
34  
	#AT_IGNORE
 1

	)
35  
	#AT_EXECFD
 2

	)
36  
	#AT_PHDR
 3

	)
37  
	#AT_PHENT
 4

	)
38  
	#AT_PHNUM
 5

	)
39  
	#AT_PAGESZ
 6

	)
40  
	#AT_BASE
 7

	)
41  
	#AT_FLAGS
 8

	)
42  
	#AT_ENTRY
 9

	)
43  
	#AT_DCACHEBSIZE
 10

	)
44  
	#AT_ICACHEBSIZE
 11

	)
45  
	#AT_UCACHEBSIZE
 12

	)
47  
	#AT_SUN_UID
 2000

	)
48  
	#AT_SUN_RUID
 2001

	)
49  
	#AT_SUN_GID
 2002

	)
50  
	#AT_SUN_RGID
 2003

	)
55  
	#AT_SUN_LDELF
 2004

	)
56  
	#AT_SUN_LDSHDR
 2005

	)
57  
	#AT_SUN_LDNAME
 2006

	)
58  
	#AT_SUN_LPAGESZ
 2007

	)
64  
	#AT_SUN_PLATFORM
 2008

	)
69  
	#AT_SUN_HWCAP
 2009

	)
71 #ià
defšed
(
_KERNEL
)

72 
auxv_hwÿp
;

73 
kauxv_hwÿp
;

76  
	#AT_SUN_IFLUSH
 2010

	)
77  
	#AT_SUN_CPU
 2011

	)
86  
	#AT_SUN_EMUL_ENTRY
 2012

	)
87  
	#AT_SUN_EMUL_EXECFD
 2013

	)
94  
	#AT_SUN_EXECNAME
 2014

	)
114 #ifdef 
__ılu¥lus


	@/usr/include/sys/condvar.h

14 #iâdeà
_SYS_CONDVAR_H


15  
	#_SYS_CONDVAR_H


	)
17 #´agm¨
id’t
 "@(#)condvar.h 1.8 97/03/14 SMI"

19 #iâdef 
_ASM


20 
	~<sys/ty³s.h
>

21 #ifdeà
_KERNEL


22 
	~<sys/mu‹x.h
>

26 #ifdef 
__ılu¥lus


30 #iâdef 
_ASM


36 
	s_kcÚdv¬
 {

37 
ushÜt_t
 
_İaque
;

38 } 
	tkcÚdv¬_t
;

40 
	e
{

41 
	mCV_DEFAULT
,

42 
	mCV_DRIVER


43 } 
	tkcv_ty³_t
;

46 #ià
defšed
(
_KERNEL
)

52 
cv_š™
(
kcÚdv¬_t
 *, *, 
kcv_ty³_t
, *);

53 
cv_de¡roy
(
kcÚdv¬_t
 *);

54 
cv_wa™
(
kcÚdv¬_t
 *, 
kmu‹x_t
 *);

55 
cv_timedwa™
(
kcÚdv¬_t
 *, 
kmu‹x_t
 *, 
şock_t
);

56 
cv_wa™_sig
(
kcÚdv¬_t
 *, 
kmu‹x_t
 *);

57 
cv_timedwa™_sig
(
kcÚdv¬_t
 *, 
kmu‹x_t
 *, 
şock_t
);

58 
cv_wa™_sig_sw­
(
kcÚdv¬_t
 *, 
kmu‹x_t
 *);

59 
cv_sigÇl
(
kcÚdv¬_t
 *);

60 
cv_brßdÿ¡
(
kcÚdv¬_t
 *);

61 
kcÚdv¬_t
 *
cv_®loc
(*, 
kcv_ty³_t
, *);

62 
cv_ä“
(
kcÚdv¬_t
 *);

68 #ifdef 
__ılu¥lus


	@/usr/include/sys/copyops.h

6 #iâdef 
_SYS_COPYOPS_H


7  
	#_SYS_COPYOPS_H


	)
9 #´agm¨
id’t
 "@(#)copyops.h 1.1 97/05/09 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/th»ad.h
>

14 #ifdef 
__ılu¥lus


37 
	scİyİs
 {

39 (*
ı_cİyš
)(cÚ¡ *, *, 
size_t
);

40 (*
ı_xcİyš
)(cÚ¡ *, *, 
size_t
);

41 (*
ı_cİyout
)(cÚ¡ *, *, 
size_t
);

42 (*
ı_xcİyout
)(cÚ¡ *, *, 
size_t
);

43 (*
ı_cİyš¡r
)(*, *, 
size_t
, size_t *);

44 (*
ı_cİyout¡r
)(*, *, 
size_t
, size_t *);

47 (*
ı_fuby‹
)(
ÿddr_t
);

48 (*
ı_fuiby‹
)(
ÿddr_t
);

49 (*
ı_fuswÜd
)(
ÿddr_t
);

50 (*
ı_fuwÜd
)(*);

51 (*
ı_fuiwÜd
)(*);

52 (*
ı_suby‹
)(
ÿddr_t
, );

53 (*
ı_suiby‹
)(
ÿddr_t
, );

54 (*
ı_suswÜd
)(
ÿddr_t
, );

55 (*
ı_suwÜd
)(*, );

56 (*
ı_suiwÜd
)(*, );

59 
lÚglÚg_t
 (*
ı_fuextwÜd
)(
u_lÚglÚg_t
 *);

60 
lÚglÚg_t
 (*
ı_fu›xtwÜd
)(
u_lÚglÚg_t
 *);

61 (*
ı_suextwÜd
)(
u_lÚglÚg_t
 *, 
lÚglÚg_t
);

62 (*
ı_su›xtwÜd
)(
u_lÚglÚg_t
 *, 
lÚglÚg_t
);

63 } 
	tcİyİs_t
;

65  
	#CP_COPYIN
(
uaddr
, 
kaddr
, 
couÁ
) \

66 ((*
cu¹h»ad
->
t_cİyİs
->
ı_cİyš
)(
uaddr
, 
kaddr
, 
couÁ
))

	)
67  
	#CP_XCOPYIN
(
uaddr
, 
kaddr
, 
couÁ
) \

68 ((*
cu¹h»ad
->
t_cİyİs
->
ı_xcİyš
)(
uaddr
, 
kaddr
, 
couÁ
))

	)
69  
	#CP_COPYOUT
(
kaddr
, 
uaddr
, 
couÁ
) \

70 ((*
cu¹h»ad
->
t_cİyİs
->
ı_cİyout
)(
kaddr
, 
uaddr
, 
couÁ
))

	)
71  
	#CP_XCOPYOUT
(
kaddr
, 
uaddr
, 
couÁ
) \

72 ((*
cu¹h»ad
->
t_cİyİs
->
ı_xcİyout
)(
kaddr
, 
uaddr
, 
couÁ
))

	)
73  
	#CP_COPYINSTR
(
uaddr
, 
kaddr
, 
max
, 
Ëncİ›d
) \

74 ((*
cu¹h»ad
->
t_cİyİs
->
ı_cİyš¡r
)(
uaddr
, 
kaddr
, 
max
, 
Ëncİ›d
))

	)
75  
	#CP_COPYOUTSTR
(
kaddr
, 
uaddr
, 
max
, 
Ëncİ›d
) \

76 ((*
cu¹h»ad
->
t_cİyİs
->
ı_cİyout¡r
)(
kaddr
, 
uaddr
, 
max
, 
Ëncİ›d
))

	)
77  
	#CP_FUBYTE
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuby‹
)×ddr))

	)
78  
	#CP_FUIBYTE
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuiby‹
)×ddr))

	)
79  
	#CP_FUSWORD
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuswÜd
)×ddr))

	)
80  
	#CP_FUWORD
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuwÜd
)×ddr))

	)
81  
	#CP_FUIWORD
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuiwÜd
)×ddr))

	)
82  
	#CP_SUBYTE
(
addr
, 
v®ue
) \

83 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suby‹
)(
addr
, 
v®ue
))

	)
84  
	#CP_SUIBYTE
(
addr
, 
v®ue
) \

85 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suiby‹
)(
addr
, 
v®ue
))

	)
86  
	#CP_SUSWORD
(
addr
, 
v®ue
) \

87 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suswÜd
)(
addr
, 
v®ue
))

	)
88  
	#CP_SUWORD
(
addr
, 
v®ue
) \

89 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suwÜd
)(
addr
, 
v®ue
))

	)
90  
	#CP_SUIWORD
(
addr
, 
v®ue
) \

91 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suiwÜd
)(
addr
, 
v®ue
))

	)
92  
	#CP_FUEXTWORD
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fuextwÜd
)×ddr))

	)
93  
	#CP_FUIEXTWORD
(
addr
) ((*
cu¹h»ad
->
t_cİyİs
->
ı_fu›xtwÜd
)×ddr))

	)
94  
	#CP_SUEXTWORD
(
addr
, 
v®ue
) \

95 ((*
cu¹h»ad
->
t_cİyİs
->
ı_suextwÜd
)(
addr
, 
v®ue
))

	)
96  
	#CP_SUIEXTWORD
(
addr
, 
v®ue
) \

97 ((*
cu¹h»ad
->
t_cİyİs
->
ı_su›xtwÜd
)(
addr
, 
v®ue
))

	)
108 
cİyİs
 
deçuÉ_cİyİs
;

110 
deçuÉ_cİyš
(cÚ¡ *, *, 
size_t
);

111 
deçuÉ_xcİyš
(cÚ¡ *, *, 
size_t
);

112 
deçuÉ_cİyout
(cÚ¡ *, *, 
size_t
);

113 
deçuÉ_xcİyout
(cÚ¡ *, *, 
size_t
);

114 
deçuÉ_cİyš¡r
(*, *, 
size_t
, size_t *);

115 
deçuÉ_cİyout¡r
(*, *, 
size_t
, size_t *);

116 
deçuÉ_fuby‹
(
ÿddr_t
);

117 
deçuÉ_fuiby‹
(
ÿddr_t
);

118 
deçuÉ_fuswÜd
(
ÿddr_t
);

119 
deçuÉ_fuwÜd
(*);

120 
deçuÉ_fuiwÜd
(*);

121 
deçuÉ_suby‹
(
ÿddr_t
, );

122 
deçuÉ_suiby‹
(
ÿddr_t
, );

123 
deçuÉ_suswÜd
(
ÿddr_t
, );

124 
deçuÉ_suwÜd
(*, );

125 
deçuÉ_suiwÜd
(*, );

126 
lÚglÚg_t
 
deçuÉ_fuextwÜd
(
u_lÚglÚg_t
 *);

127 
lÚglÚg_t
 
deçuÉ_fu›xtwÜd
(
u_lÚglÚg_t
 *);

128 
deçuÉ_suextwÜd
(
u_lÚglÚg_t
 *, 
lÚglÚg_t
);

129 
deçuÉ_su›xtwÜd
(
u_lÚglÚg_t
 *, 
lÚglÚg_t
);

131 #ifdef 
__ılu¥lus


	@/usr/include/sys/errno.h

8 #iâdeà
_SYS_ERRNO_H


9  
	#_SYS_ERRNO_H


	)
11 #´agm¨
id’t
 "@(#)errno.h 1.16 95/07/04 SMI"

34 #ifdef 
__ılu¥lus


42  
	#EPERM
 1

	)
43  
	#ENOENT
 2

	)
44  
	#ESRCH
 3

	)
45  
	#EINTR
 4

	)
46  
	#EIO
 5

	)
47  
	#ENXIO
 6

	)
48  
	#E2BIG
 7

	)
49  
	#ENOEXEC
 8

	)
50  
	#EBADF
 9

	)
51  
	#ECHILD
 10

	)
52  
	#EAGAIN
 11

	)
53  
	#ENOMEM
 12

	)
54  
	#EACCES
 13

	)
55  
	#EFAULT
 14

	)
56  
	#ENOTBLK
 15

	)
57  
	#EBUSY
 16

	)
58  
	#EEXIST
 17

	)
59  
	#EXDEV
 18

	)
60  
	#ENODEV
 19

	)
61  
	#ENOTDIR
 20

	)
62  
	#EISDIR
 21

	)
63  
	#EINVAL
 22

	)
64  
	#ENFILE
 23

	)
65  
	#EMFILE
 24

	)
66  
	#ENOTTY
 25

	)
67  
	#ETXTBSY
 26

	)
68  
	#EFBIG
 27

	)
69  
	#ENOSPC
 28

	)
70  
	#ESPIPE
 29

	)
71  
	#EROFS
 30

	)
72  
	#EMLINK
 31

	)
73  
	#EPIPE
 32

	)
74  
	#EDOM
 33

	)
75  
	#ERANGE
 34

	)
76  
	#ENOMSG
 35

	)
77  
	#EIDRM
 36

	)
78  
	#ECHRNG
 37

	)
79  
	#EL2NSYNC
 38

	)
80  
	#EL3HLT
 39

	)
81  
	#EL3RST
 40

	)
82  
	#ELNRNG
 41

	)
83  
	#EUNATCH
 42

	)
84  
	#ENOCSI
 43

	)
85  
	#EL2HLT
 44

	)
86  
	#EDEADLK
 45

	)
87  
	#ENOLCK
 46

	)
88  
	#ECANCELED
 47

	)
89  
	#ENOTSUP
 48

	)
92  
	#EDQUOT
 49

	)
95  
	#EBADE
 50

	)
96  
	#EBADR
 51

	)
97  
	#EXFULL
 52

	)
98  
	#ENOANO
 53

	)
99  
	#EBADRQC
 54

	)
100  
	#EBADSLT
 55

	)
101  
	#EDEADLOCK
 56

	)
103  
	#EBFONT
 57

	)
106  
	#ENOSTR
 60

	)
107  
	#ENODATA
 61

	)
108  
	#ETIME
 62

	)
109  
	#ENOSR
 63

	)
111  
	#ENONET
 64

	)
112  
	#ENOPKG
 65

	)
113  
	#EREMOTE
 66

	)
114  
	#ENOLINK
 67

	)
115  
	#EADV
 68

	)
116  
	#ESRMNT
 69

	)
118  
	#ECOMM
 70

	)
119  
	#EPROTO
 71

	)
120  
	#EMULTIHOP
 74

	)
121  
	#EBADMSG
 77

	)
122  
	#ENAMETOOLONG
 78

	)
123  
	#EOVERFLOW
 79

	)
124  
	#ENOTUNIQ
 80

	)
125  
	#EBADFD
 81

	)
126  
	#EREMCHG
 82

	)
129  
	#ELIBACC
 83

	)
130  
	#ELIBBAD
 84

	)
131  
	#ELIBSCN
 85

	)
132  
	#ELIBMAX
 86

	)
133  
	#ELIBEXEC
 87

	)
134  
	#EILSEQ
 88

	)
135  
	#ENOSYS
 89

	)
136  
	#ELOOP
 90

	)
137  
	#ERESTART
 91

	)
138  
	#ESTRPIPE
 92

	)
139  
	#ENOTEMPTY
 93

	)
140  
	#EUSERS
 94

	)
144  
	#ENOTSOCK
 95

	)
145  
	#EDESTADDRREQ
 96

	)
146  
	#EMSGSIZE
 97

	)
147  
	#EPROTOTYPE
 98

	)
148  
	#ENOPROTOOPT
 99

	)
149  
	#EPROTONOSUPPORT
 120

	)
150  
	#ESOCKTNOSUPPORT
 121

	)
151  
	#EOPNOTSUPP
 122

	)
152  
	#EPFNOSUPPORT
 123

	)
153  
	#EAFNOSUPPORT
 124

	)
155  
	#EADDRINUSE
 125

	)
156  
	#EADDRNOTAVAIL
 126

	)
158  
	#ENETDOWN
 127

	)
159  
	#ENETUNREACH
 128

	)
160  
	#ENETRESET
 129

	)
162  
	#ECONNABORTED
 130

	)
163  
	#ECONNRESET
 131

	)
164  
	#ENOBUFS
 132

	)
165  
	#EISCONN
 133

	)
166  
	#ENOTCONN
 134

	)
168  
	#ESHUTDOWN
 143

	)
169  
	#ETOOMANYREFS
 144

	)
170  
	#ETIMEDOUT
 145

	)
171  
	#ECONNREFUSED
 146

	)
172  
	#EHOSTDOWN
 147

	)
173  
	#EHOSTUNREACH
 148

	)
174  
	#EWOULDBLOCK
 
EAGAIN


	)
175  
	#EALREADY
 149

	)
176  
	#EINPROGRESS
 150

	)
179  
	#ESTALE
 151

	)
182 #ifdef 
__ılu¥lus


	@/usr/include/sys/klwp.h

6 #iâdef 
_SYS_KLWP_H


7  
	#_SYS_KLWP_H


	)
9 #´agm¨
id’t
 "@(#)klwp.h 1.28 97/04/18 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/cÚdv¬.h
>

13 
	~<sys/th»ad.h
>

14 
	~<sys/sigÇl.h
>

15 
	~<sys/sigšfo.h
>

16 
	~<sys/pcb.h
>

17 
	~<sys/time.h
>

18 
	~<sys/m§cù.h
>

19 
	~<sys/ucÚ‹xt.h
>

20 
	~<sys/lwp.h
>

22 #ià(
defšed
(
_KERNEL
è|| defšed(
_KMEMUSER
)è&& defšed(
_MACHDEP
)

23 
	~<sys/mach·¿m.h
>

26 #ifdef 
__ılu¥lus


35  
	#MAXSYSARGS
 8

	)
38  
	#NORMALRETURN
 0

	)
39  
	#JUSTRETURN
 1

	)
44 
	sÌu§ge
 {

45 
u_lÚg
 
mšæt
;

46 
u_lÚg
 
majæt
;

47 
u_lÚg
 
nsw­
;

48 
u_lÚg
 
šblock
;

49 
u_lÚg
 
oublock
;

50 
u_lÚg
 
msg¢d
;

51 
u_lÚg
 
msgrcv
;

52 
u_lÚg
 
nsigÇls
;

53 
u_lÚg
 
nvcsw
;

54 
u_lÚg
 
nivcsw
;

55 
u_lÚg
 
sysc
;

56 
u_lÚg
 
ioch
;

59 
_klwp
 *
	tklwp_id_t
;

61 
	s_klwp
 {

65 
pcb
 
lwp_pcb
;

66 
ucÚ‹xt
 *
lwp_ŞdcÚ‹xt
;

71 *
lwp_­
;

72 
lwp_”ºo
;

76 
lwp_”rÜ
;

77 
lwp_eosys
;

78 
lwp_¬g§ved
;

79 
lwp_w©chŒ­
;

80 
lwp_¬g
[
MAXSYSARGS
];

81 *
lwp_»gs
;

82 *
lwp_åu
;

83 
Ïb–_t
 
lwp_q§v
;

88 
u_ch¬
 
lwp_cursig
;

89 
u_ch¬
 
lwp_curæt
;

90 
u_ch¬
 
lwp_sy§bÜt
;

91 
u_ch¬
 
lwp_a¦“p
;

92 
¡ack_t
 
lwp_sig®t¡ack
;

93 
sigqueue
 *
lwp_curšfo
;

94 
k_sigšfo_t
 
lwp_sigšfo
;

95 
k_sig£t_t
 
lwp_sigŞdmask
;

96 
	slwp_w©ch
 {

97 
ÿddr_t
 
w·ddr
;

98 
u_št
 
wpsize
;

99 
wpcode
;

100 
g»g_t
 
wµc
;

101 } 
lwp_w©ch
[4];

103 
şock_t
 
lwp_sÿÎ_¡¬t
;

115 
	sm¡©e
 {

116 
ms_´ev
;

117 
h¹ime_t
 
ms_¡¬t
;

118 
h¹ime_t
 
ms_‹rm
;

119 
h¹ime_t
 
ms_¡©e_¡¬t
;

120 
h¹ime_t
 
ms_acù
[
NMSTATES
];

121 } 
lwp_m¡©e
;

126 
Ìu§ge
 
lwp_ru
;

131 
lwp_Ï¡çuÉ
;

132 
ÿddr_t
 
lwp_Ï¡çddr
;

137 
™im”v®
 
lwp_tim”
[3];

142 
lwp_oweupc
;

143 
lwp_¡©e
;

144 
u_shÜt
 
lwp_no¡İ
;

145 
kcÚdv¬_t
 
lwp_cv
;

150 
şock_t
 
lwp_utime
;

151 
şock_t
 
lwp_¡ime
;

156 
_kth»ad
 *
lwp_th»ad
;

157 
´oc
 *
lwp_´oı
;

158 } 
	tklwp_t
;

161  
	#LWP_USER
 0x01

	)
162  
	#LWP_SYS
 0x02

	)
164  
	#LWPNULL
 (
klwp_t
 *)0

	)
166 #if 
defšed
(
_KERNEL
)

167 
lwp_deçuÉ_¡ksize
;

168 
lwp_»­út
;

170 
_kth»ad
 *
lwp_d—throw
;

171 
kmu‹x_t
 
»­lock
;

172 
kmem_ÿche
 *
lwp_ÿche
;

173 *
£gkp_lwp
;

176 
lwp_¹t
();

181 #ifdef 
__ılu¥lus


	@/usr/include/sys/param.h

31 #iâdeà
_SYS_PARAM_H


32  
	#_SYS_PARAM_H


	)
34 #´agm¨
id’t
 "@(#)param.h 1.48 97/06/26 SMI"

36 #iâdeà
_ASM


37 
	~<sys/ty³s.h
>

38 
	~<sys/i§_defs.h
>

42 #ifdef 
__ılu¥lus


50 #iâdef 
_POSIX_VDISABLE


51  
	#_POSIX_VDISABLE
 0

	)
54 #iâdef 
MAX_INPUT


55  
	#MAX_INPUT
 512

	)
58 #iâdef 
MAX_CANON


59  
	#MAX_CANON
 256

	)
62  
	#UID_NOBODY
 60001

	)
63  
	#GID_NOBODY
 
UID_NOBODY


	)
65  
	#UID_NOACCESS
 60002

	)
67  
	#MAXPID
 30000

	)
68  
	#MAXUID
 2147483647

	)
69  
	#MAXLINK
 32767

	)
71  
	#NMOUNT
 40

	)
73  
	#CANBSIZ
 256

	)
75  
	#NOFILE
 20

	)
84  
	#NGROUPS_UMIN
 0

	)
85  
	#NGROUPS_UMAX
 32

	)
91  
	#NGROUPS_MAX_DEFAULT
 16

	)
97  
	#PMASK
 0177

	)
98  
	#PCATCH
 0400

	)
99  
	#PNOSTOP
 01000

	)
100  
	#PSWP
 0

	)
101  
	#PINOD
 10

	)
102  
	#PSNDD
 
PINOD


	)
103  
	#PAMAP
 
PINOD


	)
104  
	#PPMAP
 
PAMAP


	)
105  
	#PRIBIO
 20

	)
106  
	#PZERO
 25

	)
107  
	#PMEM
 0

	)
108  
	#NZERO
 20

	)
109  
	#PPIPE
 26

	)
110  
	#PVFS
 27

	)
111  
	#PWAIT
 30

	)
112  
	#PLOCK
 35

	)
113  
	#PSLEP
 39

	)
114  
	#PUSER
 60

	)
115  
	#PIDLE
 127

	)
121  
	#NBPW
  ()

	)
122 #iâdeà
NULL


123  
	#NULL
 0

	)
125  
	#CMASK
 0

	)
126  
	#CDLIMIT
 (1L<<11)

	)
127  
	#NBPS
 0x20000

	)
128  
	#NBPSCTR
 512

	)
129  
	#UBSIZE
 512

	)
130  
	#SCTRSHFT
 9

	)
132 #ifdeà
_LITTLE_ENDIAN


133  
	#loby‹
(
X
) (((*)&(X))[0])

	)
134  
	#hiby‹
(
X
) (((*)&(X))[1])

	)
135  
	#lowÜd
(
X
) (((
ushÜt
 *)&(X))[0])

	)
136  
	#hiwÜd
(
X
) (((
ushÜt
 *)&(X))[1])

	)
138 #ifdeà
_BIG_ENDIAN


139  
	#loby‹
(
X
) (((*)&(X))[1])

	)
140  
	#hiby‹
(
X
) (((*)&(X))[0])

	)
141  
	#lowÜd
(
X
) (((
ushÜt
 *)&(X))[1])

	)
142  
	#hiwÜd
(
X
) (((
ushÜt
 *)&(X))[0])

	)
146  
	#SYSNAME
 9

	)
147  
	#PREMOTE
 39

	)
159  
	#MAXPATHLEN
 1024

	)
160  
	#MAXSYMLINKS
 20

	)
161  
	#MAXNAMELEN
 256

	)
163 #iâdeà
NADDR


164  
	#NADDR
 13

	)
172 #iâdeà
PIPE_BUF


173  
	#PIPE_BUF
 5120

	)
176 #iâdeà
PIPE_MAX


177  
	#PIPE_MAX
 5120

	)
180 #iâdeà
NBBY


181  
	#NBBY
 8

	)
185  
	#dkblock
(
bp
) ((bp)->
b_blkno
)

	)
186  
	#dkun™
(
bp
) (
	`mšÜ
((bp)->
b_dev
è>> 3)

	)
201  
	#MAXBSIZE
 8192

	)
202  
	#DEV_BSIZE
 512

	)
203  
	#DEV_BSHIFT
 9

	)
204  
	#MAXFRAG
 8

	)
205  
	#MAXOFF_T
 0x7fffffff

	)
206 #ifdeà
_NO_LONGLONG


207  
	#MAXOFFSET_T
 
MAXOFF_T


	)
209  
	#MAXOFFSET_T
 0x7fffffffffffffffLL

	)
212  
	#btodb
(
by‹s
) \

213 (()(
by‹s
è>> 
DEV_BSHIFT
)

	)
214  
	#dbtob
(
db
) \

215 (()(
db
è<< 
DEV_BSHIFT
)

	)
218  
	#lbtodb
(
by‹s
) \

219 ((
off£t_t
)(
by‹s
è>> 
DEV_BSHIFT
)

	)
220  
	#ldbtob
(
db
) \

221 ((
off£t_t
)(
db
è<< 
DEV_BSHIFT
)

	)
223 #iâdeà
_ASM


224 #iâdeà
NODEV


225  
	#NODEV
 (
dev_t
)(-1)

	)
232  
	#NCARGS
 0x100000

	)
238  
	#FSHIFT
 8

	)
239  
	#FSCALE
 (1<<
FSHIFT
)

	)
246 #ià
defšed
(
_KERNEL
è&& !defšed(
_ASM
)

247 
drv_u£cwa™
(
şock_t
);

248  
	#DELAY
(
n
) 
	`drv_u£cwa™
Ò)

	)
249  
	#CDELAY
(
c
, 
n
) \

251 
N
 = 
n
; \

252 --
N
 > 0) { \

253 
c
) \

255 
	`drv_u£cwa™
(1); \

257 }

	)
260 #ifdef 
__ılu¥lus


269 #ià(
defšed
(
_KERNEL
è|| defšed(
_KMEMUSER
))

271 #ià
defšed
(
_MACHDEP
)

272 
	~<sys/mach·¿m.h
>

275 #ifdef 
__ılu¥lus


279 #ià!
defšed
(
_MACHDEP
)

285 #ià
defšed
(
_KERNEL
è&& !defšed(
_ASM
)

286 
hz
;

287 
ıu_deÿy_çùÜ
;

288 cÚ¡ 
_·gesize
;

289 cÚ¡ 
_·geshiá
;

290 cÚ¡ 
_·geoff£t
;

291 cÚ¡ 
_·gemask
;

292 cÚ¡ 
_mmu_·gesize
;

293 cÚ¡ 
_mmu_·geshiá
;

294 cÚ¡ 
_mmu_·geoff£t
;

295 cÚ¡ 
_mmu_·gemask
;

296 cÚ¡ 
_k”Ãlba£
;

297 cÚ¡ 
_u£¾im™
;

298 cÚ¡ 
_¬gsba£
;

299 cÚ¡ 
_msg_bsize
;

300 cÚ¡ 
_deçuÉ¡ksz
;

301 cÚ¡ 
_nbpg
;

302 cÚ¡ 
_nıu
;

303 cÚ¡ 
_şsize
;

306  
	#PAGESIZE
 
_·gesize


	)
307  
	#PAGESHIFT
 
_·geshiá


	)
308  
	#PAGEOFFSET
 
_·geoff£t


	)
309  
	#PAGEMASK
 
_·gemask


	)
310  
	#MMU_PAGESIZE
 
_mmu_·gesize


	)
311  
	#MMU_PAGESHIFT
 
_mmu_·geshiá


	)
312  
	#MMU_PAGEOFFSET
 
_mmu_·geoff£t


	)
313  
	#MMU_PAGEMASK
 
_mmu_·gemask


	)
315  
	#KERNELBASE
 
_k”Ãlba£


	)
316  
	#USERLIMIT
 
_u£¾im™


	)
317  
	#ARGSBASE
 
_¬gsba£


	)
318  
	#MSG_BSIZE
 
_msg_bsize


	)
319  
	#DEFAULTSTKSZ
 
_deçuÉ¡ksz


	)
320  
	#NBPG
 
_nbpg


	)
321  
	#NCPU
 
_nıu


	)
322  
	#CLSIZE
 
_şsize


	)
336  
	#mmu_±ob
(
x
) ((xè<< 
MMU_PAGESHIFT
)

	)
337  
	#mmu_btİ
(
x
) (((x)è>> 
MMU_PAGESHIFT
)

	)
338  
	#mmu_btİr
(
x
) ((((xè+ 
MMU_PAGEOFFSET
è>> 
MMU_PAGESHIFT
))

	)
343  
	#mmu_±od
(
x
) ((xè<< (
MMU_PAGESHIFT
 - 
DEV_BSHIFT
))

	)
344  
	#±od
(
x
) ((xè<< (
PAGESHIFT
 - 
DEV_BSHIFT
))

	)
352  
	#±ob
(
x
) ((xè<< 
PAGESHIFT
)

	)
353  
	#btİ
(
x
) ((
u_št
)((xè>> 
PAGESHIFT
))

	)
354  
	#btİr
(
x
) ((
u_št
)(((xè+ 
PAGEOFFSET
è>> 
PAGESHIFT
))

	)
359  
	#NDPP
 (
PAGESIZE
/
DEV_BSHIFT
)

	)
360  
	#dtİ
(
DD
) (((DDè+ 
NDPP
 - 1è>> (
PAGESHIFT
 - 
DEV_BSHIFT
))

	)
361  
	#dtİt
(
DD
) ((DDè>> (
PAGESHIFT
 - 
DEV_BSHIFT
))

	)
366  
	#PAGOFF
(
x
) (((
ušt
)(x)è& 
PAGEOFFSET
)

	)
367  
	#NBPC
 
MMU_PAGESIZE


	)
368  
	#NBPP
 
MMU_PAGESIZE


	)
369  
	#BPCSHIFT
 
MMU_PAGESHIFT


	)
376  
	#_AIO_LISTIO_MAX
 (256)

	)
377  
	#_AIO_MAX
 (-1)

	)
378  
	#_AIO_PRIO_DELTA_MAX
 (-1)

	)
379  
	#_MQ_OPEN_MAX
 (32)

	)
380  
	#_MQ_PRIO_MAX
 (32)

	)
381  
	#_SEM_NSEMS_MAX
 
INT_MAX


	)
382  
	#_SEM_VALUE_MAX
 
INT_MAX


	)
384 #ifdef 
__ılu¥lus


398 
	~<sys/uni¡d.h
>

400 #ifdef 
__ılu¥lus


404 #ià!
defšed
(
_ASM
)

405 
_syscÚf
();

408  
	#HZ
 (()
	`_syscÚf
(
_SC_CLK_TCK
))

	)
409  
	#TICK
 (1000000000/(()
	`_syscÚf
(
_SC_CLK_TCK
)))

	)
410  
	#PAGESIZE
 (
	`_syscÚf
(
_SC_PAGESIZE
))

	)
411  
	#PAGEOFFSET
 (
PAGESIZE
 - 1)

	)
412  
	#PAGEMASK
 (~
PAGEOFFSET
)

	)
414 #ifdef 
__ılu¥lus


	@/usr/include/sys/pcb.h

5 #iâdeà
_SYS_PCB_H


6  
	#_SYS_PCB_H


	)
8 #´agm¨
id’t
 "@(#)pcb.h 1.24 96/09/05 SMI"

10 
	~<sys/»g£t.h
>

12 #ifdef 
__ılu¥lus


20 #iâdeà
_ASM


21 
	spcb
 {

22 
pcb_æags
;

23 
ÿddr_t
 
pcb_Œ­0addr
;

24 
pcb_š¡r
;

25 
	e
{ 
XREGNONE
 = 0, 
XREGPRESENT
, 
XREGMODIFIED
 }

26 
pcb_x»g¡©
;

27 
rwšdow
 
pcb_x»gs
;

28 
	e
{ 
STEP_NONE
 = 0, 
STEP_REQUESTED
, 
STEP_ACTIVE
, 
STEP_WASACTIVE
 }

29 
pcb_¡•
;

30 
ÿddr_t
 
pcb_Œaûpc
;

31 } 
	tpcb_t
;

35  
	#INSTR_VALID
 0x02

	)
36  
	#NORMAL_STEP
 0x04

	)
37  
	#WATCH_STEP
 0x08

	)
39 #ifdef 
__ılu¥lus


	@/usr/include/sys/pirec.h

6 #iâdeà
_SYS_PIREC_H


7  
	#_SYS_PIREC_H


	)
9 #´agm¨
id’t
 "@(#)pirec.h 1.12 97/03/14 SMI"

11 
	~<sys/ty³s.h
>

13 #ifdef 
__ılu¥lus


35 
	spœec


37 
pœec
 *
pi_fÜw
;

38 
pœec
 *
pi_back
;

39 
_kth»ad
 *
pi_b’ef
;

40 
ušt_t
 
pi_•ri_hi
;

41 } 
	tpœec_t
;

43 #ifdef 
_KERNEL


50  
	#PIREC_RAISE
(
p
, 
d´i
) \

51 (
p
)->
pi_•ri_hi
 < (
d´i
)) \

52 (
p
)->
pi_•ri_hi
 = (
d´i
)

	)
54 
pœec_š™
(
pœec_t
 *, 
_kth»ad
 *, 
´i_t
);

55 
pœec_ş—r
(
pœec_t
 *);

56 
pœec_šsque
(
pœec_t
 *,…irec_t *);

57 
pœec_»mque
(
pœec_t
 *);

58 
´i_t
 
pœec_ÿlıri
(
pœec_t
 *,…ri_t);

62 #ifdef 
__ılu¥lus


	@/usr/include/sys/regset.h

13 #iâdef 
_SYS_REGSET_H


14  
	#_SYS_REGSET_H


	)
16 #´agm¨
id’t
 "@(#)regset.h 1.18 97/05/12 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

20 #ifdef 
__ılu¥lus


28 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

29  
	#REG_PSR
 (0)

	)
30  
	#REG_PC
 (1)

	)
31  
	#REG_nPC
 (2)

	)
32  
	#REG_Y
 (3)

	)
33  
	#REG_G1
 (4)

	)
34  
	#REG_G2
 (5)

	)
35  
	#REG_G3
 (6)

	)
36  
	#REG_G4
 (7)

	)
37  
	#REG_G5
 (8)

	)
38  
	#REG_G6
 (9)

	)
39  
	#REG_G7
 (10)

	)
40  
	#REG_O0
 (11)

	)
41  
	#REG_O1
 (12)

	)
42  
	#REG_O2
 (13)

	)
43  
	#REG_O3
 (14)

	)
44  
	#REG_O4
 (15)

	)
45  
	#REG_O5
 (16)

	)
46  
	#REG_O6
 (17)

	)
47  
	#REG_O7
 (18)

	)
50  
	#REG_PS
 
REG_PSR


	)
51  
	#REG_SP
 
REG_O6


	)
52  
	#REG_R0
 
REG_O0


	)
53  
	#REG_R1
 
REG_O1


	)
56 #iâdef 
_ASM


58 
	tg»g_t
;

68  
	#_NGREG
 19

	)
69 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

70  
	#NGREG
 
_NGREG


	)
73 
g»g_t
 
	tg»g£t_t
[
_NGREG
];

75 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

83  
	#SPARC_MAXREGWINDOW
 31

	)
85 
	srwšdow
 {

86 
g»g_t
 
	mrw_loÿl
[8];

87 
g»g_t
 
	mrw_š
[8];

90  
	#rw_å
 
rw_š
[6]

	)
91  
	#rw_¹n
 
rw_š
[7]

	)
93 
	sgwšdows
 {

94 
	mwbút
;

95 *
	m¥buf
[
SPARC_MAXREGWINDOW
];

96 
rwšdow
 
	mwbuf
[
SPARC_MAXREGWINDOW
];

99 
gwšdows
 
	tgwšdows_t
;

105  
	#MAXFPQ
 16

	)
115 
	såq
 {

116 *
	måq_addr
;

117 
	måq_š¡r
;

120 
	sfq
 {

121 
	u
{

122 
	mwhŞe
;

123 
åq
 
	måq
;

124 } 
	mFQu
;

140  
	#FPU_REGS_TYPE
 

	)
141  
	#FPU_DREGS_TYPE
 

	)
142  
	#V7_FPU_FSR_TYPE
 

	)
143  
	#V9_FPU_FSR_TYPE
 

	)
144  
	#V9_FPU_FPRS_TYPE
 

	)
146 #ifdef 
__¥¬cv9ıu


147  
	#FPU_FSR_TYPE
 
V9_FPU_FSR_TYPE


	)
149  
	#FPU_FSR_TYPE
 
V7_FPU_FSR_TYPE


	)
152 
	såu
 {

153 
	u
{

154 
FPU_REGS_TYPE
 
	måu_»gs
[32];

155 
	måu_d»gs
[16];

156 } 
	måu_ä
;

157 
fq
 *
	måu_q
;

158 
V7_FPU_FSR_TYPE
 
	måu_f¤
;

159 
	måu_qút
;

160 
	måu_q_’Œysize
;

161 
	måu_’
;

164 
åu
 
	tå»g£t_t
;

166 #ifdeà
__¥¬cv9ıu


174 
	sv9_åu
 {

175 
	u
{

176 
FPU_REGS_TYPE
 
	måu_»gs
[32];

177 
FPU_DREGS_TYPE
 
	måu_d»gs
[32];

178 
	måu_q»gs
[16];

179 } 
	måu_ä
;

180 
V9_FPU_FSR_TYPE
 
	måu_f¤
;

181 
V9_FPU_FPRS_TYPE
 
	måu_års
;

182 
fq
 *
	måu_q
;

183 
	måu_qút
;

184 
	måu_q_’Œysize
;

185 
	måu_’
;

188 
v9_åu
 
	tv9_å»g£t_t
;

193 #ifdef 
_KERNEL


198 #ifdef 
__¥¬cv9ıu


199 
v9_åu
 
	tkåu_t
;

201 
åu
 
	tkåu_t
;

206 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

217 
	s
{

218 
	mxrs_id
;

219 
ÿddr_t
 
	mxrs_±r
;

220 } 
	txrs_t
;

222  
	#XRS_ID
 0x78727300

	)
240 
	s
{

241 
g»g£t_t
 
	mg»gs
;

242 
gwšdows_t
 *
	mgwšs
;

243 
å»g£t_t
 
	må»gs
;

244 
xrs_t
 
	mxrs
;

245 
	mfËr
[19];

246 } 
	tmcÚ‹xt_t
;

251 #ià!
defšed
(
_KERNEL
è&& !defšed(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

252 
	~<v7/sys/´iv»gs.h
>

261 #ià
defšed
(
_XPG4_2
è&& !defšed(
__EXTENSIONS__
)

273 #iâdef 
_ASM


279  
	#_SPARC_MAXREGWINDOW
 31

	)
281 
	s__rwšdow
 {

282 
g»g_t
 
	m__rw_loÿl
[8];

283 
g»g_t
 
	m__rw_š
[8];

286  
	#__rw_å
 
__rw_š
[6]

	)
287  
	#__rw_¹n
 
__rw_š
[7]

	)
289 
	s__gwšdows
 {

290 
	m__wbút
;

291 *
	m__¥buf
[
_SPARC_MAXREGWINDOW
];

292 
__rwšdow
 
	m__wbuf
[
_SPARC_MAXREGWINDOW
];

295 
__gwšdows
 
	tgwšdows_t
;

302 
	s__åq
 {

303 *
	m__åq_addr
;

304 
	m__åq_š¡r
;

307 
	s__fq
 {

308 
	u
{

309 
	m__whŞe
;

310 
__åq
 
	m__åq
;

311 } 
	m_FQu
;

318  
	#_FPU_REGS_TYPE
 

	)
319  
	#_FPU_DREGS_TYPE
 

	)
320  
	#_V7_FPU_FSR_TYPE
 

	)
321  
	#_V9_FPU_FSR_TYPE
 

	)
322  
	#_V9_FPU_FPRS_TYPE
 

	)
324 #ifdef 
__¥¬cv9ıu


325  
	#_FPU_FSR_TYPE
 
_V9_FPU_FSR_TYPE


	)
327  
	#_FPU_FSR_TYPE
 
_V7_FPU_FSR_TYPE


	)
330 
	s__åu
 {

331 
	u
{

332 
_FPU_REGS_TYPE
 
	m__åu_»gs
[32];

333 
	m__åu_d»gs
[16];

334 } 
	m__åu_ä
;

335 
__fq
 *
	m__åu_q
;

336 
_V7_FPU_FSR_TYPE
 
	m__åu_f¤
;

337 
	m__åu_qút
;

338 
	m__åu_q_’Œysize
;

339 
	m__åu_’
;

342 
__åu
 
	tå»g£t_t
;

344 #ifdeà
__¥¬cv9ıu


349 
	s__v9_åu
 {

350 
	u
{

351 
_FPU_REGS_TYPE
 
	m__åu_»gs
[32];

352 
_FPU_DREGS_TYPE
 
	m__åu_d»gs
[32];

353 
	m__åu_q»gs
[16];

354 } 
	m__åu_ä
;

355 
_V9_FPU_FSR_TYPE
 
	m__åu_f¤
;

356 
_V9_FPU_FPRS_TYPE
 
	m__åu_års
;

357 
__fq
 *
	m__åu_q
;

358 
	m__åu_qút
;

359 
	m__åu_q_’Œysize
;

360 
	m__åu_’
;

363 
__v9_åu
 
	tv9_å»g£t_t
;

371 
	s
{

372 
	m__xrs_id
;

373 
ÿddr_t
 
	m__xrs_±r
;

374 } 
	txrs_t
;

376  
	#_XRS_ID
 0x78727300

	)
381 
	s
{

382 
g»g£t_t
 
	m__g»gs
;

383 
gwšdows_t
 *
	m__gwšs
;

384 
å»g£t_t
 
	m__å»gs
;

385 
xrs_t
 
	m__xrs
;

386 
	m__fËr
[19];

387 } 
	tmcÚ‹xt_t
;

393 #ifdef 
__ılu¥lus


	@/usr/include/sys/signal.h

13 #iâdeà
_SYS_SIGNAL_H


14  
	#_SYS_SIGNAL_H


	)
16 #´agm¨
id’t
 "@(#)signal.h 1.50 97/04/16 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

21 
	~<sys/uni¡d.h
>

23 #ifdef 
__ılu¥lus


27  
	#SIGHUP
 1

	)
28  
	#SIGINT
 2

	)
29  
	#SIGQUIT
 3

	)
30  
	#SIGILL
 4

	)
31  
	#SIGTRAP
 5

	)
32  
	#SIGIOT
 6

	)
33  
	#SIGABRT
 6

	)
34  
	#SIGEMT
 7

	)
35  
	#SIGFPE
 8

	)
36  
	#SIGKILL
 9

	)
37  
	#SIGBUS
 10

	)
38  
	#SIGSEGV
 11

	)
39  
	#SIGSYS
 12

	)
40  
	#SIGPIPE
 13

	)
41  
	#SIGALRM
 14

	)
42  
	#SIGTERM
 15

	)
43  
	#SIGUSR1
 16

	)
44  
	#SIGUSR2
 17

	)
45  
	#SIGCLD
 18

	)
46  
	#SIGCHLD
 18

	)
47  
	#SIGPWR
 19

	)
48  
	#SIGWINCH
 20

	)
49  
	#SIGURG
 21

	)
50  
	#SIGPOLL
 22

	)
51  
	#SIGIO
 
SIGPOLL


	)
52  
	#SIGSTOP
 23

	)
53  
	#SIGTSTP
 24

	)
54  
	#SIGCONT
 25

	)
55  
	#SIGTTIN
 26

	)
56  
	#SIGTTOU
 27

	)
57  
	#SIGVTALRM
 28

	)
58  
	#SIGPROF
 29

	)
59  
	#SIGXCPU
 30

	)
60  
	#SIGXFSZ
 31

	)
61  
	#SIGWAITING
 32

	)
62  
	#SIGLWP
 33

	)
63  
	#SIGFREEZE
 34

	)
64  
	#SIGTHAW
 35

	)
65  
	#SIGCANCEL
 36

	)
66  
	#SIGLOST
 37

	)
69  
	#_SIGRTMIN
 38

	)
70  
	#_SIGRTMAX
 45

	)
71 
_syscÚf
();

72  
	#SIGRTMIN
 
	`_syscÚf
(
_SC_SIGRT_MIN
)

	)
73  
	#SIGRTMAX
 
	`_syscÚf
(
_SC_SIGRT_MAX
)

	)
75 #if 
defšed
(
__ılu¥lus
)

77 
	tSIG_FUNC_TYP
();

78 
SIG_FUNC_TYP
 *
	tSIG_TYP
;

79  
	#SIG_PF
 
SIG_TYP


	)
81  
	#SIG_DFL
 (
SIG_PF
)0

	)
82  
	#SIG_ERR
 (
SIG_PF
)-1

	)
83  
	#SIG_IGN
 (
SIG_PF
)1

	)
84  
	#SIG_HOLD
 (
SIG_PF
)2

	)
86 #–if 
defšed
(
lšt
)

88  
	#SIG_DFL
 ((*)())0

	)
89  
	#SIG_ERR
 ((*)())0

	)
90  
	#SIG_IGN
 ((*)())0

	)
91  
	#SIG_HOLD
 ((*)())0

	)
95  
	#SIG_DFL
 ((*)())0

	)
96  
	#SIG_ERR
 ((*)())-1

	)
97  
	#SIG_IGN
 ((*)())1

	)
98  
	#SIG_HOLD
 ((*)())2

	)
102  
	#SIG_BLOCK
 1

	)
103  
	#SIG_UNBLOCK
 2

	)
104  
	#SIG_SETMASK
 3

	)
106  
	#SIGNO_MASK
 0xFF

	)
107  
	#SIGDEFER
 0x100

	)
108  
	#SIGHOLD
 0x200

	)
109  
	#SIGRELSE
 0x400

	)
110  
	#SIGIGNORE
 0x800

	)
111  
	#SIGPAUSE
 0x1000

	)
113 #ià
defšed
(
__EXTENSIONS__
è|| (
__STDC__
 - 0 == 0) || \

114 
defšed
(
_POSIX_C_SOURCE
è|| defšed(
_XOPEN_SOURCE
) || \

115 
defšed
(
_XPG4_2
)

117 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

118 !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

119 (
	g_POSIX_C_SOURCE
 > 2è|| 
defšed
(
_XPG4_2
)

123 
	~<sys/sigšfo.h
>

128 #iâdef 
_SIGSET_T


129  
	#_SIGSET_T


	)
130 
	s
{

131 
	g__sigb™s
[4];

132 } 
	tsig£t_t
;

135 
	s
{

136 
	g__sigb™s
[2];

137 } 
	tk_sig£t_t
;

153 
	ssigaùiÚ
 {

154 
	g§_æags
;

155 
	u
{

156 #ifdef 
__ılu¥lus


157 (*
	g_hªdËr
)();

159 (*
	g_hªdËr
)();

161 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

162 !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

163 (
	g_POSIX_C_SOURCE
 > 2è|| 
defšed
(
_XPG4_2
)

164 (*
	g_sigaùiÚ
)(, 
	gsigšfo_t
 *, *);

166 } 
	g_funıŒ
;

167 
sig£t_t
 
	g§_mask
;

168 
	g§_»sv
[2];

170  
	#§_hªdËr
 
_funıŒ
.
_hªdËr


	)
171  
	#§_sigaùiÚ
 
_funıŒ
.
_sigaùiÚ


	)
174  
	#SA_NOCLDSTOP
 0x00020000

	)
177 #ià
defšed
(
__EXTENSIONS__
) || \

178 ((
	g__STDC__
 - 0 =ğ0è&& !
defšed
(
_POSIX_C_SOURCE
)) || \

179 
defšed
(
_XPG4_2
)

184  
	#SA_ONSTACK
 0x00000001

	)
185  
	#SA_RESETHAND
 0x00000002

	)
186  
	#SA_RESTART
 0x00000004

	)
189 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

190 !
defšed
(
_POSIX_C_SOURCE
)) || (_POSIX_C_SOURCE > 2) || \

191 
defšed
(
_XPG4_2
)

192  
	#SA_SIGINFO
 0x00000008

	)
195 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

196 !
defšed
(
_POSIX_C_SOURCE
)è|| defšed(
_XPG4_2
)

197  
	#SA_NODEFER
 0x00000010

	)
200  
	#SA_NOCLDWAIT
 0x00010000

	)
203  
	#SA_WAITSIG
 0x00010000

	)
205 #ià
defšed
(
__EXTENSIONS__
è|| !defšed(
_XPG4_2
)

210  
	#NSIG
 46

	)
211  
	#MAXSIG
 45

	)
216  
	#S_SIGNAL
 1

	)
217  
	#S_SIGSET
 2

	)
218  
	#S_SIGACTION
 3

	)
219  
	#S_NONE
 4

	)
222  
	#MINSIGSTKSZ
 2048

	)
223  
	#SIGSTKSZ
 8192

	)
225  
	#SS_ONSTACK
 0x00000001

	)
226  
	#SS_DISABLE
 0x00000002

	)
229 #iâdef 
_STACK_T


230  
	#_STACK_T


	)
231 #ià
defšed
(
__EXTENSIONS__
è|| !defšed(
_XPG4_2
)

232 
	ssig®t¡ack
 {

234 
	s
{

236 *
ss_¥
;

237 
size_t
 
	gss_size
;

238 
	gss_æags
;

239 } 
	t¡ack_t
;

244 #ià
defšed
(
__EXTENSIONS__
è|| ((
__STDC__
 - 0 == 0) && \

245 !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
))

248 
	ssignÙify_id
 {

249 
pid_t
 
	g¢_pid
;

250 
	g¢_šdex
;

251 
	g¢_·d
;

252 } 
	tsignÙify_id_t
;

256  
	#SN_PROC
 1

	)
257  
	#SN_CANCEL
 2

	)
258  
	#SN_SEND
 3

	)
263 #ià
defšed
(
__EXTENSIONS__
è|| (
__STDC__
 == 0 && \

264 !
defšed
(
_POSIX_C_SOURCE
è&& !defšed(
_XOPEN_SOURCE
)) || \

265 
defšed
(
_XPG4_2
)

266 
	ssig¡ack
 {

267 *
	gss_¥
;

268 
	gss_Ú¡ack
;

276 #ià
defšed
(
_XPG4_2
)

277 
	~<sys/ucÚ‹xt.h
>

280 #ifdeà
_KERNEL


281 
	~<sys/t_lock.h
>

283 
k_sig£t_t


285 
nuÎsmask
,

286 
fl£t
,

287 
hŞdvfÜk
,

288 
ÿÁmask
,

289 
ÿÁ»£t
,

290 
ignÜedeçuÉ
,

291 
¡İdeçuÉ
,

292 
cÜedeçuÉ
;

294  
	#sigmask
(
n
) (()1 << ((Òè- 1è& (32 - 1)))

	)
295  
	#sigwÜd
(
n
) ((()(Òè- 1))>>5)

	)
297  
	#sigem±y£t
(
s
) (*(sèğ
nuÎsmask
)

	)
298  
	#sigfl£t
(
s
) (*(sèğ
fl£t
)

	)
299  
	#sigadd£t
(
s
, 
n
) ((s)->
__sigb™s
[
	`sigwÜd
Ò)] |ğ
	`sigmask
Ò))

	)
300  
	#sigd–£t
(
s
, 
n
) ((s)->
__sigb™s
[
	`sigwÜd
Ò)] &ğ~
	`sigmask
Ò))

	)
301  
	#sigismemb”
(
s
, 
n
) (
	`sigmask
Òè& (s)->
__sigb™s
[
	`sigwÜd
Ò)])

	)
302  
	#sigi£m±y
(
s
) (!(((s)->
__sigb™s
[0]è| ((s)->__sigb™s[1])))

	)
303  
	#sigutok
(
us
, 
ks
) ((ks)->
__sigb™s
[0] = (us)->__sigbits[0], \

304 (
ks
)->
__sigb™s
[1] = (
us
)->__sigb™s[1])

	)
305  
	#sigktou
(
ks
, 
us
) ((us)->
__sigb™s
[0] = (ks)->__sigbits[0], \

306 (
us
)->
__sigb™s
[1] = (
ks
)->__sigbits[1], \

307 (
us
)->
__sigb™s
[2] = 0, \

308 (
us
)->
__sigb™s
[3] = 0)

	)
309 
	s
{

310 
	gsig
;

311 
	g³rm
;

312 
	gcheck³rm
;

313 
	gsicode
;

314 
sigv®
 
	gv®ue
;

315 } 
	tsig£nd_t
;

317 
	s
{

318 
sigqueue_t
 
	g¢_sigq
;

319 
u_lÚglÚg_t
 
	g¢_¢id
;

320 } 
	tsignÙifyq_t
;

323 
	ssigqhdr
 {

324 
sigqueue_t
 *
	gsqb_ä“
;

325 
uch¬_t
 
	gsqb_couÁ
;

326 
uch¬_t
 
	gsqb_maxcouÁ
;

327 
ushÜt_t
 
	gsqb_size
;

328 
uch¬_t
 
	gsqb_³x™ed
;

329 
kmu‹x_t
 
	gsqb_lock
;

330 } 
	tsigqhdr_t
;

332  
	#_SIGQUEUE_MAX
 32

	)
333  
	#_SIGNOTIFY_MAX
 32

	)
335 #ià
defšed
(
__STDC__
)

336 
£tsigaù
(, (*)(), 
k_sig£t_t
, );

337 
sigÜ£t
(
k_sig£t_t
 *, k_sigset_t *);

338 
sigªd£t
(
k_sig£t_t
 *, k_sigset_t *);

339 
sigdiff£t
(
k_sig£t_t
 *, k_sigset_t *);

340 
sigšŒ
(
k_sig£t_t
 *, );

341 
sigunšŒ
(
k_sig£t_t
 *);

342 
sig»¶aû
(
k_sig£t_t
 *, k_sigset_t *);

344 
£tsigaù
();

345 
sigÜ£t
();

346 
sigªd£t
();

347 
sigdiff£t
();

348 
sigšŒ
();

349 
sigunšŒ
();

350 
sig»¶aû
();

355 #ifdef 
__ılu¥lus


	@/usr/include/sys/sleepq.h

6 #iâdeà
_SYS_SLEEPQ_H


7  
	#_SYS_SLEEPQ_H


	)
9 #´agm¨
id’t
 "@(#)sleepq.h 1.19 97/04/04 SMI"

11 
	~<sys/machlock.h
>

13 #ifdef 
__ılu¥lus


23 
	s¦“pq
 {

24 
_kth»ad
 *
sq_fœ¡
;

25 } 
	t¦“pq_t
;

30 
	s_¦“pq_h—d
 {

31 
¦“pq_t
 
sq_queue
;

32 
di¥_lock_t
 
sq_lock
;

33 } 
	t¦“pq_h—d_t
;

35 #ifdef 
_KERNEL


37 
¦“pq_š£¹
(
¦“pq_t
 *, 
_kth»ad
 *);

38 
¦“pq_wakeÚe
(
¦“pq_t
 *);

39 
¦“pq_wakeÚe_chª
(
¦“pq_t
 *, 
ÿddr_t
);

40 
¦“pq_wak—Î_chª
(
¦“pq_t
 *, 
ÿddr_t
);

41 
_kth»ad
 *
¦“pq_un¦“p
(
¦“pq_t
 *, _kthread *);

42 
_kth»ad
 *
¦“pq_dequeue
(
¦“pq_t
 *, _kthread *);

44 
¦“pq_h—d_t
 *
sqhash
(
ÿddr_t
 
wchª
);

66  
	#NSLEEPQ
 512

	)
67  
	#sqhashšdex
(
X
) (((
u_št
)X >> 2è+ ((u_št)(Xè>> 9è& (
NSLEEPQ
 - 1))

	)
71 #ifdef 
__ılu¥lus


	@/usr/include/sys/t_lock.h

12 #iâdeà
_SYS_T_LOCK_H


13  
	#_SYS_T_LOCK_H


	)
15 #´agm¨
id’t
 "@(#)t_lock.h 1.43 97/04/04 SMI"

17 #iâdef 
_ASM


18 
	~<sys/machlock.h
>

19 
	~<sys/¦“pq.h
>

20 
	~<sys/tuº¡e.h
>

21 
	~<sys/mu‹x.h
>

22 
	~<sys/rwlock.h
>

23 
	~<sys/£m­hÜe.h
>

24 
	~<sys/cÚdv¬.h
>

27 #ifdef 
__ılu¥lus


31 #iâdef 
_ASM


43 #ià
defšed
(
_KERNEL
)

45 
nıus
;

47 
kmu‹x_t
 
un§ã_driv”
;

49  
	#UNSAFE_DRIVER_LOCK_HELD
() (
	`mu‹x_owÃd
(&
un§ã_driv”
))

	)
50  
	#UNSAFE_DRIVER_LOCK_NOT_HELD
() \

51 (!
	`mu‹x_owÃd
(&
un§ã_driv”
è|| 
·nic¡r
)

	)
58 
di¥_lock_’‹r
(
di¥_lock_t
 *);

59 
di¥_lock_ex™
(
di¥_lock_t
 *);

60 
di¥_lock_ex™_nİ»em±
(
di¥_lock_t
 *);

61 
di¥_lock_’‹r_high
(
di¥_lock_t
 *);

62 
di¥_lock_ex™_high
(
di¥_lock_t
 *);

63 
di¥_lock_š™
(
di¥_lock_t
 *
Í
, *
Çme
);

64 
di¥_lock_de¡roy
(
di¥_lock_t
 *
Í
);

66  
	#DISP_LOCK_INIT
(
Í
) 
	`LOCK_INIT_CLEAR
((
lock_t
 *)Öp))

	)
67  
	#DISP_LOCK_HELD
(
Í
) 
	`LOCK_HELD
((
lock_t
 *)Öp))

	)
68  
	#DISP_LOCK_DESTROY
(
Í
) 
	`ASSERT
(!
	`DISP_LOCK_HELD
Öp))

	)
76 #iâdeà
NO_LOCKS_HELD


77  
	#NO_LOCKS_HELD
 1

	)
79 #iâdeà
NO_COMPETING_THREADS


80  
	#NO_COMPETING_THREADS
 1

	)
87 #ifdef 
__ılu¥lus


	@/usr/include/sys/turnstile.h

6 #iâdeà
_SYS_TURNSTILE_H


7  
	#_SYS_TURNSTILE_H


	)
9 #´agm¨
id’t
 "@(#)turnstile.h 1.30 97/04/23 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/·¿m.h
>

13 
	~<sys/pœec.h
>

14 
	~<sys/¦“pq.h
>

16 #ifdef 
__ılu¥lus


20  
	#NTSTILE_SQ
 2

	)
27 
	e
{

28 
QOBJ_UND
 = -1,

29 
QOBJ_DEF
 = 0,

30 
QOBJ_READER
 = 0,

31 
QOBJ_WRITER
 = 1,

32 
QOBJ_CV
 = 0,

33 
QOBJ_MUTEX
 = 0,

34 
QOBJ_SEMA
 = 0

35 } 
	tqobj_t
;

38  
	#TSTILE_FREE
 0

	)
39  
	#TSTILE_ACTIVE
 1

	)
41 
tuº¡e
 
	ttuº¡e_t
;

43 
ushÜt_t
 
	ttuº¡e_id_t
;

45 
	stuº¡e
 {

46 
	ut¡e_un
 {

51 
tuº¡e_t
 *
ts_fÜw
;

58 
pœec_t
 
ts_´iošv
;

59 } 
tsun
;

65 
¦“pq_t
 
ts_¦“pq
[
NTSTILE_SQ
];

72 
tuº¡e_id_t
 
ts_id
;

73 
uch¬_t
 
ts_æags
;

74 
di¥_lock_t
 
ts_wlock
;

81 *
ts_sobj_´iv_d©a
;

84 #ifdef 
_KERNEL


90  
	#TS_ROWSZ
 512

	)
91  
	#TS_COLSZ
 128

	)
92  
	#TS_ROWBITS
 9

	)
93  
	#TS_COLBITS
 7

	)
94  
	#TS_ROWMASK
 ((1 << 
TS_ROWBITS
è- 1)

	)
99  
	#TS_ROWCOL
(
row
, 
cŞ
) (cŞ << 
TS_ROWBITS
 |„ow)

	)
104  
	#TS_COL
(
ts_id
) (Ñs_idè>> 
TS_ROWBITS
)

	)
109  
	#TS_ROW
(
ts_id
) (Ñs_idè& 
TS_ROWMASK
)

	)
114  
	#TS_NEW
(
n
, 
cÚd
) \

115 (
tuº¡e_t
 *)
	`kmem_z®loc
(
n
 *  (tuº¡e_t), 
cÚd
)

	)
121  
	#TS_VALID
(
r
, 
c
) (Ô < 
t¡e_mod
.
tsm_rowút
) && \

122 (
c
 < 
t¡e_mod
.
tsm_cŞsz
))

	)
125  
	#TSTILE_PRIO_INVERTED
(
ts
) \

126 ((
ts
)->
tsun
.
ts_´iošv
.
pi_b’ef
 !ğ
NULL
)

	)
127  
	#TSTILE_INSERT
(
ts
, 
qnum
, 
c
) \

128 
	`¦“pq_š£¹
(&(
ts
)->
ts_¦“pq
[
qnum
], 
c
)

	)
129  
	#TSTILE_WAKEONE
(
ts
, 
qnum
) \

130 
	`¦“pq_wakeÚe
(&(
ts
)->
ts_¦“pq
[
qnum
])

	)
131  
	#TSTILE_SLEEPQ
(
ts
, 
sobj_İs
) \

132 ((
ts
)->
ts_¦“pq
[
	`SOBJ_QNUM
(
sobj_İs
)])

	)
133  
	#TSTILE_DEQ
(
ts
, 
qnum
, 
t
) \

134 
	`¦“pq_dequeue
(&(
ts
)->
ts_¦“pq
[
qnum
], 
t
)

	)
135  
	#TSTILE_UNSLEEP
(
ts
, 
qnum
, 
t
) \

136 
	`¦“pq_un¦“p
(&(
ts
)->
ts_¦“pq
[
qnum
], 
t
)

	)
137  
	#TSTILE_EMPTY
(
ts
, 
qnum
) \

138 ((
ts
)->
ts_¦“pq
[
qnum
].
sq_fœ¡
 =ğ
NULL
)

	)
141 
t¡e_š™
();

142 
t¡e_mÜe
(, );

143 
tuº¡e_t
 *
t¡e_poš‹r
(
tuº¡e_id_t
);

144 
tuº¡e_t
 *
t¡e_poš‹r_v”ify
(
tuº¡e_id_t
);

145 
tuº¡e_t
 *
t¡e_®loc
();

146 
t¡e_ä“
(
tuº¡e_t
 *);

147 
_kth»ad
 *
t¡e_un¦“p
(
tuº¡e_t
 *, 
qobj_t
,

148 
_kth»ad
 *);

149 
t¡e_š£¹
(
tuº¡e_t
 *, 
qobj_t
, 
_kth»ad
 *);

150 
t¡e_deq
(
tuº¡e_t
 *, 
qobj_t
, 
_kth»ad
 *
t
);

151 
´i_t
 
t¡e_max´i
(
tuº¡e_t
 *);

152 
t¡e_´io_šv”‹d
(
tuº¡e_t
 *);

153 
t¡e_em±y
(
tuº¡e_t
 *, 
qobj_t
);

154 
_kth»ad
 *
t¡e_šh”™Ü
(
tuº¡e_t
 *);

155 
t¡e_Üd”
(
tuº¡e_t
 *, 
qobj_t
, 
_kth»ad
 *);

159 #ifdef 
__ılu¥lus


	@/usr/include/vm/page.h

36 #iâdef 
_VM_PAGE_H


37  
	#_VM_PAGE_H


	)
39 #´agm¨
id’t
 "@(#)page.h 1.102 97/05/04 SMI"

42 #ifdef 
__ılu¥lus


46 #ià
defšed
(
_KERNEL
è|| defšed(
_KMEMUSER
)

55 
	e
{

56 
SE_SHARED
,

57 
SE_EXCL


58 } 
	t£_t
;

63 
	e
{

64 
	mP_RECLAIM
,

65 
	mP_NO_RECLAIM


66 } 
	t»şaim_t
;

70 
	t£lock_t
;

77 #ifdeà
DEBUG


78  
	#VM_STATS


	)
81 #ifdeà
VM_STATS


82  
	#VM_STAT_ADD
(
¡©
) (¡©)++

	)
84  
	#VM_STAT_ADD
(
¡©
)

	)
87 #ifdeà
_KERNEL


92  
	#·ge_¡ruù_lock
(
µ
) 
	`mu‹x_’‹r
(&
·ge_Îock
)

	)
93  
	#·ge_¡ruù_uÆock
(
µ
) 
	`mu‹x_ex™
(&
·ge_Îock
)

	)
97 
	~<sys/t_lock.h
>

99 
	gas
;

359 
	s·ge
 {

360 
vnode
 *
	gp_vnode
;

361 
·ge
 *
	gp_hash
;

362 
·ge
 *
	gp_v²ext
;

363 
·ge
 *
	gp_vµ»v
;

364 
·ge
 *
	gp_Ãxt
;

365 
·ge
 *
	gp_´ev
;

366 
u_off£t_t
 
	gp_off£t
;

367 
£lock_t
 
	gp_£lock
;

368 
u_shÜt
 
	gp_lckút
;

369 
u_shÜt
 
	gp_cowút
;

370 
kcÚdv¬_t
 
	gp_cv
;

371 
kcÚdv¬_t
 
	gp_io_cv
;

372 
u_ch¬
 
	gp_iŞock_¡©e
;

373 
u_ch¬
 
	gp_fËr
;

374 
u_ch¬
 
	gp_fsd©a
;

375 
u_ch¬
 
	gp_¡©e
;

376 } 
	t·ge_t
;

378 
·ge_t
 
	tdev·ge_t
;

379  
	#dev·ge
 
·ge


	)
393  
	#PAGE_HASHSZ
 
·ge_hashsz


	)
394  
	#PAGE_HASHAVELEN
 4

	)
395  
	#PAGE_HASHVPSHIFT
 6

	)
396  
	#PAGE_HASH_FUNC
(
vp
, 
off
) \

397 ((((
u_št
)(
off
è>> 
PAGESHIFT
è+ (()(
vp
è>> 
PAGE_HASHVPSHIFT
)) & \

398 (
PAGE_HASHSZ
 - 1))

	)
400 #ifdeà
_KERNEL


405  
	#PG_EXCL
 0x0001

	)
406  
	#PG_WAIT
 0x0002

	)
407  
	#PG_PHYSCONTIG
 0x0004

	)
408  
	#PG_MATCH_COLOR
 0x0008

	)
410  
	#PAGE_LOCKED
(
µ
) (Õp)->
p_£lock
 !ğ0)

	)
411  
	#PAGE_SHARED
(
µ
) (Õp)->
p_£lock
 > 0)

	)
412  
	#PAGE_EXCL
(
µ
) (Õp)->
p_£lock
 < 0)

	)
413  
	#PAGE_LOCKED_SE
(
µ
, 
£
) \

414 ((
£
è=ğ
SE_EXCL
 ? 
	`PAGE_EXCL
(
µ
è: 
	`PAGE_SHARED
Õp))

	)
416 
·ge_hashsz
;

417 
·ge_t
 **
·ge_hash
;

419 
kmu‹x_t
 
·ge_Îock
;

420 
kmu‹x_t
 
ä“mem_lock
;

422 
u_št
 
tÙ®_·ges
;

427 
u_št
 
·ges_µ_maximum
;

429  
	#PG_FREE_LIST
 1

	)
430  
	#PG_CACHE_LIST
 2

	)
432  
	#PG_LIST_TAIL
 0

	)
433  
	#PG_LIST_HEAD
 1

	)
438 
·ge_t
 *
·ge_lookup
(
vnode
 *, 
u_off£t_t
, 
£_t
);

439 
·ge_t
 *
·ge_lookup_nowa™
(
vnode
 *, 
u_off£t_t
, 
£_t
);

440 
·ge_t
 *
·ge_fšd
(
vnode
 *, 
u_off£t_t
);

441 
·ge_exi¡s
(
vnode
 *, 
u_off£t_t
);

442 
·ge_Ãedä“
();

443 
·ge_t
 *
·ge_ü—‹
(
vnode
 *, 
u_off£t_t
, 
u_št
, u_int);

444 
·ge_t
 *
·ge_ü—‹_va
(
vnode
 *, 
u_off£t_t
, 
u_št
, u_int,

445 
as
 *, 
ÿddr_t
);

446 
·ge_ü—‹_wa™
(
u_št
 
Åages
, u_šˆ
æags
);

447 
·ge_ü—‹_putback
(
Åages
);

448 
·ge_ä“
(
·ge_t
 *, );

449 
ä“_vp_·ges
(
vnode
 *, 
u_št
, u_int);

450 
·ge_»şaim
(
·ge_t
 *, 
kmu‹x_t
 *);

451 
·ge_de¡roy
(
·ge_t
 *, );

452 
·ge_de¡roy_ä“
(
·ge_t
 *);

453 
·ge_»Çme
(
·ge_t
 *, 
vnode
 *, 
u_off£t_t
);

454 
·ge_hashš
(
·ge_t
 *, 
vnode
 *, 
u_off£t_t
, 
kmu‹x_t
 *);

455 
·ge_hashout
(
·ge_t
 *, 
kmu‹x_t
 *);

456 
·ge_num_hashš
(
u_št
, 
vnode
 *, 
u_off£t_t
);

457 
·ge_add
(
·ge_t
 **,…age_t *);

458 
·ge_sub
(
·ge_t
 **,…age_t *);

459 
·ge_t
 *
·ge_g‘_ä“li¡
(
vnode
 *, 
u_off£t_t
, 
as
 *,

460 
ÿddr_t
, 
size_t
, 
u_št
 
æags
);

462 
·ge_t
 *
·ge_g‘_ÿch–i¡
(
vnode
 *, 
u_off£t_t
, 
as
 *,

463 
ÿddr_t
, 
u_št
 
æags
);

464 
·ge_li¡_add
(, 
·ge_t
 *, );

465 
·ge_li¡_sub
(, 
·ge_t
 *);

466 
·ge_li¡_b»ak
(
·ge_t
 **,…age_ˆ**, 
u_št
);

467 
·ge_li¡_cÚÿt
(
·ge_t
 **,…age_t **);

468 
·ge_v·dd
(
·ge_t
 **,…age_t *);

469 
·ge_vpsub
(
·ge_t
 **,…age_t *);

470 
·ge_lock
(
·ge_t
 *, 
£_t
, 
kmu‹x_t
 *, 
»şaim_t
);

471 
·ge_Œylock
(
·ge_t
 *, 
£_t
);

472 
·ge_Œy_»şaim_lock
(
·ge_t
 *, 
£_t
);

473 
·ge_Œyupg¿de
(
·ge_t
 *);

474 
·ge_downg¿de
(
·ge_t
 *);

475 
·ge_uÆock
(
·ge_t
 *);

476 
·ge_µ_lock
(
·ge_t
 *, , );

477 
·ge_µ_uÆock
(
·ge_t
 *, , );

478 
·ge_µ_u£şaim
(
·ge_t
 *,…age_t *, );

479 
·ge_addşaim
(
·ge_t
 *);

480 
·ge_subşaim
(
·ge_t
 *);

481 
u_št
 
·ge_µtÚum
(
·ge_t
 *);

482 
·ge_t
 *
·ge_numtİp
(
u_št
, 
£_t
);

483 
·ge_t
 *
·ge_numtİp_nŞock
(
u_št
);

484 
·ge_t
 *
·ge_numtİp_nowa™
(
u_št
, 
£_t
);

485 
·ge_t
 *
·ge_fœ¡
();

486 
·ge_t
 *
·ge_Ãxt
(page_t *);

487 
·ge_t
 *
·ge_li¡_Ãxt
(page_t *);

488 
·ge_t
 *
·ge_ÃxŠ
Õage_ˆ*, 
u_št
);

489 
µcİy
(
·ge_t
 *,…age_t *);

490 
·gez”o
(
·ge_t
 *, 
u_št
, u_int);

491 
·ge_io_lock
(
·ge_t
 *);

492 
·ge_io_uÆock
(
·ge_t
 *);

493 
·ge_io_Œylock
(
·ge_t
 *);

494 
·ge_iŞock_as£¹
(
·ge_t
 *);

495 
·ge_iŞock_š™
(
·ge_t
 *);

496 
·ge_busy
();

497 
·ge_lock_š™
();

498 
·ge_issh¬ed
(
·ge_t
 *);

499 
·ge_isä“
(
·ge_t
 *);

500 
·ge_i¤ef
(
·ge_t
 *);

501 
·ge_ismod
(
·ge_t
 *);

503 
·ge_£t_´İs
(
·ge_t
 *, 
u_št
);

504 
·ge_şr_®l_´İs
(
·ge_t
 *);

506 
kmu‹x_t
 *
·ge_vnode_mu‹x
(
vnode
 *);

507 
kmu‹x_t
 *
·ge_£_mu‹x
(
·ge
 *);

512 
add_physmem
(
·ge_t
 *, 
u_št
);

519  
	#PAGE_IO_INUSE
 0x1

	)
520  
	#PAGE_IO_WANTED
 0x2

	)
526  
	#P_FREE
 0x80

	)
528  
	#PP_ISFREE
(
µ
) (Õp)->
p_¡©e
 & 
P_FREE
)

	)
529  
	#PP_ISAGED
(
µ
) ((Õp)->
p_¡©e
 & 
P_FREE
) && \

530 ((
µ
)->
p_vnode
 =ğ
NULL
))

	)
532  
	#PP_SETFREE
(
µ
) (Õp)->
p_¡©e
 |ğ
P_FREE
)

	)
533  
	#PP_SETAGED
(
µ
) 
	`ASSERT
(
	`PP_ISAGED
Õp))

	)
535  
	#PP_CLRFREE
(
µ
) (Õp)->
p_¡©e
 &ğ~
P_FREE
)

	)
536  
	#PP_CLRAGED
(
µ
) 
	`ASSERT
(!
	`PP_ISAGED
Õp))

	)
538 #ifdef 
__ılu¥lus


	@/usr/include/vm/seg_enum.h

31 #iâdef 
_VM_SEG_ENUM_H


32  
	#_VM_SEG_ENUM_H


	)
34 #´agm¨
id’t
 "@(#)seg_enum.h 1.3 95/12/22 SMI"

36 #ifdef 
__ılu¥lus


50 
	eçuÉ_ty³
 {

51 
F_INVAL
,

52 
F_PROT
,

53 
F_SOFTLOCK
,

54 
F_SOFTUNLOCK


60 
	elock_ty³
 {

61 
L_PAGELOCK
,

62 
L_PAGEUNLOCK
,

63 
L_PAGERECLAIM


69 
	e£g_rw
 {

70 
S_OTHER
,

71 
S_READ
,

72 
S_WRITE
,

73 
S_EXEC
,

74 
S_CREATE


77 #ifdef 
__ılu¥lus


	@/usr/include/sys/lwp.h

5 #iâdef 
_SYS_LWP_H


6  
	#_SYS_LWP_H


	)
8 #´agm¨
id’t
 "@(#)lwp.h 1.28 97/05/27 SMI"

10 
	~<sys/synch.h
>

11 
	~<sys/ucÚ‹xt.h
>

13 #ifdef 
__ılu¥lus


20  
	#LWP_DETACHED
 0x00000040

	)
21  
	#LWP_SUSPENDED
 0x00000080

	)
27  
	#__LWP_ASLWP
 0x00000100

	)
32 
	slwpšfo
 {

33 
time¡ruc_t
 
lwp_utime
;

34 
time¡ruc_t
 
lwp_¡ime
;

35 
lwpšfo_·d
 [64];

38 #iâdeà
_KERNEL


40 
	tlwpid_t
;

42 
_lwp_makecÚ‹xt
(
ucÚ‹xt_t
 *, ((*)(*)),

43 *, *, 
ÿddr_t
, 
size_t
);

44 
_lwp_ü—‹
(
ucÚ‹xt_t
 *, , 
lwpid_t
 *);

45 
_lwp_kl
(
lwpid_t
, );

46 
_lwp_šfo
(
lwpšfo
 *);

47 
_lwp_ex™
();

48 
_lwp_wa™
(
lwpid_t
,†wpid_t *);

49 
lwpid_t
 
_lwp_£lf
();

50 
_lwp_su¥’d
(
lwpid_t
);

51 
_lwp_su¥’d2
(
lwpid_t
, *);

52 
_lwp_cÚtšue
(
lwpid_t
);

53 
_lwp_£riv©e
(*);

54 * 
_lwp_g‘´iv©e
();

58 #ifdef 
__ılu¥lus


	@/usr/include/sys/machlock.h

6 #iâdeà
_SYS_MACHLOCK_H


7  
	#_SYS_MACHLOCK_H


	)
9 #´agm¨
id’t
 "@(#)machlock.h 1.15 97/04/04 SMI"

11 #ifdef 
__ılu¥lus


15 #iâdef 
_ASM


17 
	~<sys/ty³s.h
>

19 #ifdeà
_KERNEL


21 
lock_£t
(
lock_t
 *
Í
);

22 
lock_Œy
(
lock_t
 *
Í
);

23 
ulock_Œy
(
lock_t
 *
Í
);

24 
lock_ş—r
(
lock_t
 *
Í
);

25 
ulock_ş—r
(
lock_t
 *
Í
);

26 
lock_£t_¥l
(
lock_t
 *
Í
, 
Ãw_p
, 
u_shÜt
 *
Şd_p
);

27 
lock_ş—r_¥lx
(
lock_t
 *
Í
, 
s
);

31  
	#LOCK_HELD_VALUE
 0xff

	)
32  
	#LOCK_INIT_CLEAR
(
Í
) (*Öpèğ0)

	)
33  
	#LOCK_INIT_HELD
(
Í
) (*Öpèğ
LOCK_HELD_VALUE
)

	)
34  
	#LOCK_HELD
(
Í
) (*Öpè!ğ0)

	)
36 
lock_t
 
	tdi¥_lock_t
;

42  
	#SPIN_LOCK
(
¶
) (Õlè> 
	`Éo¥l
(
LOCK_LEVEL
))

	)
50  
	#LOCK_SAMPLE_INTERVAL
(
i
) (((iè& 0xffè=ğ0)

	)
55 
h»s_lock
;

56 
şock_»s
;

60  
	#LOCK_LEVEL
 10

	)
61  
	#CLOCK_LEVEL
 10

	)
71  
	#PTR24_LSB
 5

	)
72  
	#PTR24_MSB
 (
PTR24_LSB
 + 24)

	)
73  
	#PTR24_ALIGN
 32

	)
74  
	#PTR24_BASE
 0xe0000000

	)
76 #ifdef 
__ılu¥lus


	@/usr/include/sys/msacct.h

5 #iâdef 
_SYS_MSACCT_H


6  
	#_SYS_MSACCT_H


	)
8 #´agm¨
id’t
 "@(#)msacct.h 1.7 93/07/13 SMI"

10 #ifdef 
__ılu¥lus


15  
	#LMS_USER
 0

	)
16  
	#LMS_SYSTEM
 1

	)
17  
	#LMS_TRAP
 2

	)
18  
	#LMS_TFAULT
 3

	)
19  
	#LMS_DFAULT
 4

	)
20  
	#LMS_KFAULT
 5

	)
21  
	#LMS_USER_LOCK
 6

	)
22  
	#LMS_SLEEP
 7

	)
23  
	#LMS_WAIT_CPU
 8

	)
24  
	#LMS_STOPPED
 9

	)
30  
	#NMSTATES
 10

	)
32 #ifdef 
__ılu¥lus


	@/usr/include/sys/rwlock.h

14 #iâdeà
_SYS_RWLOCK_H


15  
	#_SYS_RWLOCK_H


	)
17 #´agm¨
id’t
 "@(#)rwlock.h 1.5 97/04/04 SMI"

19 
	~<sys/ty³s.h
>

21 #ifdef 
__ılu¥lus


25 #iâdeà
_ASM


27 
	e
{

28 
RW_SLEEP
,

29 
RW_SLEEP_STAT
,

30 
RW_DRIVER_NOSTAT
 = 2,

31 
RW_DRIVER_STAT
 = 3,

32 
RW_DEFAULT


33 } 
	tkrw_ty³_t
;

35 
	e
{

36 
	mRW_WRITER
,

37 
	mRW_READER


38 } 
	tkrw_t
;

40  
	#RW_DRIVER
 
RW_DRIVER_NOSTAT


	)
42 
	s_krwlock
 {

43 *
	m_İaque
[3];

44 } 
	tkrwlock_t
;

47 #ià
defšed
(
_KERNEL
)

49  
	#RW_READ_HELD
(
x
) (
	`rw_»ad_h–d
((x)))

	)
50  
	#RW_WRITE_HELD
(
x
) (
	`rw_wr™e_h–d
((x)))

	)
51  
	#RW_LOCK_HELD
(
x
) (
	`rw_lock_h–d
((x)))

	)
52  
	#RW_ISWRITER
(
x
) (
	`rw_iswr™”
(x))

	)
54 
rw_š™
(
krwlock_t
 *, *, 
krw_ty³_t
, *);

55 
rw_de¡roy
(
krwlock_t
 *);

56 
rw_’‹r
(
krwlock_t
 *, 
krw_t
);

57 
rw_Œy’‹r
(
krwlock_t
 *, 
krw_t
);

58 
rw_»ad_locked
(
krwlock_t
 *);

59 
rw_ex™
(
krwlock_t
 *);

60 
rw_downg¿de
(
krwlock_t
 *);

61 
rw_Œyupg¿de
(
krwlock_t
 *);

62 
rw_»ad_h–d
(
krwlock_t
 *);

63 
rw_wr™e_h–d
(
krwlock_t
 *);

64 
rw_lock_h–d
(
krwlock_t
 *);

65 
rw_iswr™”
(
krwlock_t
 *);

66 
_kth»ad
 *
rw_owÃr
(
krwlock_t
 *);

78 #if 
defšed
(
¥¬c
)

79 
u_lÚglÚg_t
 
lßd_doubË
(u_longlong_t *);

80 
u_lÚglÚg_t
 
¡Üe_doubË
(u_longlong_t, u_longlong_t *);

81  
	#rw_lßd_doubË
(
»suÉp
, 
v®u•
, 
rwlockp
) \

83 *(
»suÉp
èğ
	`lßd_doubË
((
v®u•
)); \

84 }

	)
85  
	#rw_¡Üe_doubË
(
v®ue
, 
»suÉp
) \

87 
	`¡Üe_doubË
((
v®ue
), (
»suÉp
)); \

88 }

	)
90  
	#rw_lßd_doubË
(
»suÉp
, 
v®u•
, 
rwlockp
) \

92 
	`rw_’‹r
((
rwlockp
), 
RW_READER
); \

93 *(
»suÉp
èğ*(
v®u•
); \

94 
	`rw_ex™
((
rwlockp
)); \

95 }

	)
96  
	#rw_¡Üe_doubË
(
v®ue
, 
»suÉp
) \

98 *(
»suÉp
èğ(
v®ue
); \

99 }

	)
106 #ifdef 
__ılu¥lus


	@/usr/include/sys/semaphore.h

14 #iâdeà
_SYS_SEMAPHORE_H


15  
	#_SYS_SEMAPHORE_H


	)
17 #´agm¨
id’t
 "@(#)semaphore.h 1.4 94/07/29 SMI"

19 #iâdef 
_ASM


20 #ifdeà
_KERNEL


21 
	~<sys/th»ad.h
>

26 #ifdef 
__ılu¥lus


30 #iâdef 
_ASM


35 
	e
{

36 
SEMA_DEFAULT
,

37 
SEMA_DRIVER


38 } 
	tk£ma_ty³_t
;

40 
	s_k£ma
 {

41 * 
	m_İaque
[2];

42 } 
	tk£ma_t
;

44 #ià
defšed
(
_KERNEL
)

46  
	#SEMA_HELD
(
x
) (
	`£ma_h–d
((x)))

	)
48 
£ma_š™
(
k£ma_t
 *, , *,

49 
k£ma_ty³_t
, *);

50 
£ma_de¡roy
(
k£ma_t
 *);

51 
£ma_p
(
k£ma_t
 *);

52 
£ma_p_sig
(
k£ma_t
 *);

53 
£ma_v
(
k£ma_t
 *);

54 
£ma_Œyp
(
k£ma_t
 *);

55 
£ma_h–d
(
k£ma_t
 *);

56 
£ma_mu‹x_š™
();

61 #ifdef 
__ılu¥lus


	@/usr/include/sys/ucontext.h

13 #iâdeà
_SYS_UCONTEXT_H


14  
	#_SYS_UCONTEXT_H


	)
16 #´agm¨
id’t
 "@(#)ucontext.h 1.16 96/04/24 SMI"

18 
	~<sys/ã©u»_‹¡s.h
>

20 
	~<sys/ty³s.h
>

21 
	~<sys/»g£t.h
>

22 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

23 
	~<sys/sigÇl.h
>

26 #ifdef 
__ılu¥lus


36 #ià
defšed
(
_XPG4_2
è&& !defšed(
__EXTENSIONS__
)

37 #iâdef 
_SIGSET_T


38  
	#_SIGSET_T


	)
39 
	s
{

40 
__sigb™s
[4];

41 } 
	tsig£t_t
;

44 #iâdef 
_STACK_T


45  
	#_STACK_T


	)
46 
	s
{

47 *
	mss_¥
;

48 
size_t
 
	mss_size
;

49 
	mss_æags
;

50 } 
	t¡ack_t
;

54 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

55 
ucÚ‹xt
 
	tucÚ‹xt_t
;

57 
__ucÚ‹xt
 
	tucÚ‹xt_t
;

60 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

61 
	sucÚ‹xt
 {

63 
	s__ucÚ‹xt
 {

65 
ulÚg_t
 
	guc_æags
;

66 
ucÚ‹xt_t
 *
	guc_lšk
;

67 
sig£t_t
 
	guc_sigmask
;

68 
¡ack_t
 
	guc_¡ack
;

69 
mcÚ‹xt_t
 
	guc_mcÚ‹xt
;

70 
	guc_fËr
[23];

73 #ià!
defšed
(
_XPG4_2
è|| defšed(
__EXTENSIONS__
)

74  
	#GETCONTEXT
 0

	)
75  
	#SETCONTEXT
 1

	)
84  
	#UC_SIGMASK
 001

	)
85  
	#UC_STACK
 002

	)
86  
	#UC_CPU
 004

	)
87  
	#UC_MAU
 010

	)
88  
	#UC_FPU
 
UC_MAU


	)
89  
	#UC_INTR
 020

	)
91  
	#UC_MCONTEXT
 (
UC_CPU
|
UC_FPU
)

	)
97  
	#UC_ALL
 (
UC_SIGMASK
|
UC_STACK
|
UC_MCONTEXT
)

	)
100 #ifdeà
_KERNEL


101 
§vecÚ‹xt
(
ucÚ‹xt_t
 *, 
k_sig£t_t
);

104 #ifdef 
__ılu¥lus


	@/usr/include/sys/unistd.h

20 #iâdeà
_SYS_UNISTD_H


21  
	#_SYS_UNISTD_H


	)
23 #´agm¨
id’t
 "@(#)unistd.h 1.29 96/06/05 SMI"

25 
	~<sys/ã©u»_‹¡s.h
>

27 #ifdef 
__ılu¥lus


34  
	#_SC_ARG_MAX
 1

	)
35  
	#_SC_CHILD_MAX
 2

	)
36  
	#_SC_CLK_TCK
 3

	)
37  
	#_SC_NGROUPS_MAX
 4

	)
38  
	#_SC_OPEN_MAX
 5

	)
39  
	#_SC_JOB_CONTROL
 6

	)
40  
	#_SC_SAVED_IDS
 7

	)
41  
	#_SC_VERSION
 8

	)
43  
	#_SC_PASS_MAX
 9

	)
44  
	#_SC_LOGNAME_MAX
 10

	)
45  
	#_SC_PAGESIZE
 11

	)
46  
	#_SC_XOPEN_VERSION
 12

	)
48  
	#_SC_NPROCESSORS_CONF
 14

	)
49  
	#_SC_NPROCESSORS_ONLN
 15

	)
50  
	#_SC_STREAM_MAX
 16

	)
51  
	#_SC_TZNAME_MAX
 17

	)
53  
	#_SC_AIO_LISTIO_MAX
 18

	)
54  
	#_SC_AIO_MAX
 19

	)
55  
	#_SC_AIO_PRIO_DELTA_MAX
 20

	)
56  
	#_SC_ASYNCHRONOUS_IO
 21

	)
57  
	#_SC_DELAYTIMER_MAX
 22

	)
58  
	#_SC_FSYNC
 23

	)
59  
	#_SC_MAPPED_FILES
 24

	)
60  
	#_SC_MEMLOCK
 25

	)
61  
	#_SC_MEMLOCK_RANGE
 26

	)
62  
	#_SC_MEMORY_PROTECTION
 27

	)
63  
	#_SC_MESSAGE_PASSING
 28

	)
64  
	#_SC_MQ_OPEN_MAX
 29

	)
65  
	#_SC_MQ_PRIO_MAX
 30

	)
66  
	#_SC_PRIORITIZED_IO
 31

	)
67  
	#_SC_PRIORITY_SCHEDULING
 32

	)
68  
	#_SC_REALTIME_SIGNALS
 33

	)
69  
	#_SC_RTSIG_MAX
 34

	)
70  
	#_SC_SEMAPHORES
 35

	)
71  
	#_SC_SEM_NSEMS_MAX
 36

	)
72  
	#_SC_SEM_VALUE_MAX
 37

	)
73  
	#_SC_SHARED_MEMORY_OBJECTS
 38

	)
74  
	#_SC_SIGQUEUE_MAX
 39

	)
75  
	#_SC_SIGRT_MIN
 40

	)
76  
	#_SC_SIGRT_MAX
 41

	)
77  
	#_SC_SYNCHRONIZED_IO
 42

	)
78  
	#_SC_TIMERS
 43

	)
79  
	#_SC_TIMER_MAX
 44

	)
81  
	#_SC_2_C_BIND
 45

	)
82  
	#_SC_2_C_DEV
 46

	)
83  
	#_SC_2_C_VERSION
 47

	)
84  
	#_SC_2_FORT_DEV
 48

	)
85  
	#_SC_2_FORT_RUN
 49

	)
86  
	#_SC_2_LOCALEDEF
 50

	)
87  
	#_SC_2_SW_DEV
 51

	)
88  
	#_SC_2_UPE
 52

	)
89  
	#_SC_2_VERSION
 53

	)
90  
	#_SC_BC_BASE_MAX
 54

	)
91  
	#_SC_BC_DIM_MAX
 55

	)
92  
	#_SC_BC_SCALE_MAX
 56

	)
93  
	#_SC_BC_STRING_MAX
 57

	)
94  
	#_SC_COLL_WEIGHTS_MAX
 58

	)
95  
	#_SC_EXPR_NEST_MAX
 59

	)
96  
	#_SC_LINE_MAX
 60

	)
97  
	#_SC_RE_DUP_MAX
 61

	)
98  
	#_SC_XOPEN_CRYPT
 62

	)
99  
	#_SC_XOPEN_ENH_I18N
 63

	)
100  
	#_SC_XOPEN_SHM
 64

	)
102  
	#_CS_PATH
 65

	)
105  
	#_SC_2_CHAR_TERM
 66

	)
106  
	#_SC_XOPEN_XCU_VERSION
 67

	)
112  
	#_CS_LFS_CFLAGS
 68

	)
113  
	#_CS_LFS_LDFLAGS
 69

	)
114  
	#_CS_LFS_LIBS
 70

	)
115  
	#_CS_LFS_LINTFLAGS
 71

	)
117  
	#_CS_LFS64_CFLAGS
 72

	)
118  
	#_CS_LFS64_LDFLAGS
 73

	)
119  
	#_CS_LFS64_LIBS
 74

	)
120  
	#_CS_LFS64_LINTFLAGS
 75

	)
123  
	#_SC_ATEXIT_MAX
 76

	)
124  
	#_SC_IOV_MAX
 77

	)
125  
	#_SC_XOPEN_UNIX
 78

	)
126  
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)
128  
	#_SC_PHYS_PAGES
 500

	)
129  
	#_SC_AVPHYS_PAGES
 501

	)
134  
	#_SC_COHER_BLKSZ
 503

	)
135  
	#_SC_SPLIT_CACHE
 504

	)
136  
	#_SC_ICACHE_SZ
 505

	)
137  
	#_SC_DCACHE_SZ
 506

	)
138  
	#_SC_ICACHE_LINESZ
 507

	)
139  
	#_SC_DCACHE_LINESZ
 508

	)
140  
	#_SC_ICACHE_BLKSZ
 509

	)
141  
	#_SC_DCACHE_BLKSZ
 510

	)
142  
	#_SC_DCACHE_TBLKSZ
 511

	)
143  
	#_SC_ICACHE_ASSOC
 512

	)
144  
	#_SC_DCACHE_ASSOC
 513

	)
150  
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 568

	)
151  
	#_SC_GETGR_R_SIZE_MAX
 569

	)
152  
	#_SC_GETPW_R_SIZE_MAX
 570

	)
153  
	#_SC_LOGIN_NAME_MAX
 571

	)
154  
	#_SC_THREAD_KEYS_MAX
 572

	)
155  
	#_SC_THREAD_STACK_MIN
 573

	)
156  
	#_SC_THREAD_THREADS_MAX
 574

	)
157  
	#_SC_TTY_NAME_MAX
 575

	)
158  
	#_SC_THREADS
 576

	)
159  
	#_SC_THREAD_ATTR_STACKADDR
 577

	)
160  
	#_SC_THREAD_ATTR_STACKSIZE
 578

	)
161  
	#_SC_THREAD_PRIORITY_SCHEDULING
 579

	)
162  
	#_SC_THREAD_PRIO_INHERIT
 580

	)
163  
	#_SC_THREAD_PRIO_PROTECT
 581

	)
164  
	#_SC_THREAD_PROCESS_SHARED
 582

	)
165  
	#_SC_THREAD_SAFE_FUNCTIONS
 583

	)
168  
	#_SC_PPC_GRANULE_SZ
 601

	)
169  
	#_SC_PPC_TB_TICKSPSECH
 602

	)
170  
	#_SC_PPC_TB_TICKSPSECL
 603

	)
176  
	#_PC_LINK_MAX
 1

	)
177  
	#_PC_MAX_CANON
 2

	)
178  
	#_PC_MAX_INPUT
 3

	)
179  
	#_PC_NAME_MAX
 4

	)
180  
	#_PC_PATH_MAX
 5

	)
181  
	#_PC_PIPE_BUF
 6

	)
182  
	#_PC_NO_TRUNC
 7

	)
183  
	#_PC_VDISABLE
 8

	)
184  
	#_PC_CHOWN_RESTRICTED
 9

	)
186  
	#_PC_ASYNC_IO
 10

	)
187  
	#_PC_PRIO_IO
 11

	)
188  
	#_PC_SYNC_IO
 12

	)
196  
	#_PC_FILESIZEBITS
 67

	)
197  
	#_PC_LAST
 67

	)
199 #iâdef 
_POSIX_VERSION


200  
	#_POSIX_VERSION
 199506L

	)
203 #iâdef 
_POSIX2_VERSION


204  
	#_POSIX2_VERSION
 199209L

	)
207 #iâdef 
_POSIX2_C_VERSION


208  
	#_POSIX2_C_VERSION
 199209L

	)
211  
	#_XOPEN_XPG3


	)
212  
	#_XOPEN_XPG4


	)
213  
	#_XOPEN_UNIX


	)
215 #iâdef 
_XOPEN_XCU_VERSION


216  
	#_XOPEN_XCU_VERSION
 4

	)
219  
	#_POSIX2_C_BIND
 1

	)
220  
	#_POSIX2_CHAR_TERM
 1

	)
221  
	#_POSIX2_LOCALEDEF
 1

	)
222  
	#_POSIX2_C_DEV
 1

	)
223  
	#_POSIX2_SW_DEV
 1

	)
224  
	#_POSIX2_UPE
 1

	)
226 #ifdef 
__ılu¥lus


	@/usr/include/v7/sys/privregs.h

5 #iâdeà
_SYS_PRIVREGS_H


6  
	#_SYS_PRIVREGS_H


	)
8 #´agm¨
id’t
 "@(#)privregs.h 1.3 95/02/24 SMI"

10 #ifdef 
__ılu¥lus


23 
	~<v7/sys/p¤.h
>

24 
	~<sys/f¤.h
>

26 #iâdef 
_ASM


28 
	s»gs
 {

29 
r_p¤
;

30 
r_pc
;

31 
r_Åc
;

32 
r_y
;

33 
r_g1
;

34 
r_g2
;

35 
r_g3
;

36 
r_g4
;

37 
r_g5
;

38 
r_g6
;

39 
r_g7
;

40 
r_o0
;

41 
r_o1
;

42 
r_o2
;

43 
r_o3
;

44 
r_o4
;

45 
r_o5
;

46 
r_o6
;

47 
r_o7
;

50  
	#r_ps
 
r_p¤


	)
51  
	#r_r0
 
r_o0


	)
52  
	#r_¥
 
r_o6


	)
56 #ifdeà
_KERNEL


58  
	#lw±Üegs
(
lwp
) ((
»gs
 *)(Öwp)->
lwp_»gs
))

	)
59  
	#lw±oåu
(
lwp
) ((
åu
 *)(Öwp)->
lwp_åu
))

	)
65  
	#SAVE_GLOBALS
(
RP
) \

66 
¡
 %
g1
, [
RP
 + 
G1
*4]; \

67 
¡d
 %
g2
, [
RP
 + 
G2
*4]; \

68 
¡d
 %
g4
, [
RP
 + 
G4
*4]; \

69 
¡d
 %
g6
, [
RP
 + 
G6
*4]; \

70 
mov
 %
y
, %
g1
; \

71 
¡
 %
g1
, [
RP
 + 
Y
*4]

	)
73  
	#RESTORE_GLOBALS
(
RP
) \

74 
ld
 [
RP
 + 
Y
*4], %
g1
; \

75 
mov
 %
g1
, %
y
; \

76 
ld
 [
RP
 + 
G1
*4], %
g1
; \

77 
ldd
 [
RP
 + 
G2
*4], %
g2
; \

78 
ldd
 [
RP
 + 
G4
*4], %
g4
; \

79 
ldd
 [
RP
 + 
G6
*4], %
g6
;

	)
81  
	#SAVE_OUTS
(
RP
) \

82 
¡d
 %
i0
, [
RP
 + 
O0
*4]; \

83 
¡d
 %
i2
, [
RP
 + 
O2
*4]; \

84 
¡d
 %
i4
, [
RP
 + 
O4
*4]; \

85 
¡d
 %
i6
, [
RP
 + 
O6
*4];

	)
87  
	#RESTORE_OUTS
(
RP
) \

88 
ldd
 [
RP
 + 
O0
*4], %
i0
; \

89 
ldd
 [
RP
 + 
O2
*4], %
i2
; \

90 
ldd
 [
RP
 + 
O4
*4], %
i4
; \

91 
ldd
 [
RP
 + 
O6
*4], %
i6
;

	)
93  
	#SAVE_WINDOW
(
SBP
) \

94 
¡d
 %
l0
, [
SBP
 + (0*4)]; \

95 
¡d
 %
l2
, [
SBP
 + (2*4)]; \

96 
¡d
 %
l4
, [
SBP
 + (4*4)]; \

97 
¡d
 %
l6
, [
SBP
 + (6*4)]; \

98 
¡d
 %
i0
, [
SBP
 + (8*4)]; \

99 
¡d
 %
i2
, [
SBP
 + (10*4)]; \

100 
¡d
 %
i4
, [
SBP
 + (12*4)]; \

101 
¡d
 %
i6
, [
SBP
 + (14*4)];

	)
103  
	#RESTORE_WINDOW
(
SBP
) \

104 
ldd
 [
SBP
 + (0*4)], %
l0
; \

105 
ldd
 [
SBP
 + (2*4)], %
l2
; \

106 
ldd
 [
SBP
 + (4*4)], %
l4
; \

107 
ldd
 [
SBP
 + (6*4)], %
l6
; \

108 
ldd
 [
SBP
 + (8*4)], %
i0
; \

109 
ldd
 [
SBP
 + (10*4)], %
i2
; \

110 
ldd
 [
SBP
 + (12*4)], %
i4
; \

111 
ldd
 [
SBP
 + (14*4)], %
i6
;

	)
113  
	#STORE_FPREGS
(
FP
) \

114 
¡d
 %
f0
, [
FP
]; \

115 
¡d
 %
f2
, [
FP
 + 8]; \

116 
¡d
 %
f4
, [
FP
 + 16]; \

117 
¡d
 %
f6
, [
FP
 + 24]; \

118 
¡d
 %
f8
, [
FP
 + 32]; \

119 
¡d
 %
f10
, [
FP
 + 40]; \

120 
¡d
 %
f12
, [
FP
 + 48]; \

121 
¡d
 %
f14
, [
FP
 + 56]; \

122 
¡d
 %
f16
, [
FP
 + 64]; \

123 
¡d
 %
f18
, [
FP
 + 72]; \

124 
¡d
 %
f20
, [
FP
 + 80]; \

125 
¡d
 %
f22
, [
FP
 + 88]; \

126 
¡d
 %
f24
, [
FP
 + 96]; \

127 
¡d
 %
f26
, [
FP
 + 104]; \

128 
¡d
 %
f28
, [
FP
 + 112]; \

129 
¡d
 %
f30
, [
FP
 + 120];

	)
131  
	#LOAD_FPREGS
(
FP
) \

132 
ldd
 [
FP
], %
f0
; \

133 
ldd
 [
FP
 + 8], %
f2
; \

134 
ldd
 [
FP
 + 16], %
f4
; \

135 
ldd
 [
FP
 + 24], %
f6
; \

136 
ldd
 [
FP
 + 32], %
f8
; \

137 
ldd
 [
FP
 + 40], %
f10
; \

138 
ldd
 [
FP
 + 48], %
f12
; \

139 
ldd
 [
FP
 + 56], %
f14
; \

140 
ldd
 [
FP
 + 64], %
f16
; \

141 
ldd
 [
FP
 + 72], %
f18
; \

142 
ldd
 [
FP
 + 80], %
f20
; \

143 
ldd
 [
FP
 + 88], %
f22
; \

144 
ldd
 [
FP
 + 96], %
f24
; \

145 
ldd
 [
FP
 + 104], %
f26
; \

146 
ldd
 [
FP
 + 112], %
f28
; \

147 
ldd
 [
FP
 + 120], %
f30
;

	)
151 #ifdef 
__ılu¥lus


	@/usr/include/sys/fsr.h

5 #iâdeà
_SYS_FSR_H


6  
	#_SYS_FSR_H


	)
8 #´agm¨
id’t
 "@(#)fsr.h 1.2 94/11/18 SMI"

10 #ifdef 
__ılu¥lus


36  
	#FSR_CEXC
 0x0000001f

	)
37  
	#FSR_AEXC
 0x000003e0

	)
38  
	#FSR_FCC
 0x00000c00

	)
39  
	#FSR_PR
 0x00001000

	)
40  
	#FSR_QNE
 0x00002000

	)
41  
	#FSR_FTT
 0x0001c000

	)
42  
	#FSR_VER
 0x000e0000

	)
43  
	#FSR_TEM
 0x0f800000

	)
44  
	#FSR_RP
 0x30000000

	)
45  
	#FSR_RD
 0xc0000000

	)
46  
	#FSR_VER_SHIFT
 17

	)
47  
	#FSR_FCC1
 0x00000003

	)
48  
	#FSR_FCC2
 0x0000000C

	)
49  
	#FSR_FCC3
 0x00000030

	)
54  
	#FSR_CEXC_NX
 0x00000001

	)
55  
	#FSR_CEXC_DZ
 0x00000002

	)
56  
	#FSR_CEXC_UF
 0x00000004

	)
57  
	#FSR_CEXC_OF
 0x00000008

	)
58  
	#FSR_CEXC_NV
 0x00000010

	)
63  
	#FSR_AEXC_NX
 (0x1 << 5)

	)
64  
	#FSR_AEXC_DZ
 (0x2 << 5)

	)
65  
	#FSR_AEXC_UF
 (0x4 << 5)

	)
66  
	#FSR_AEXC_OF
 (0x8 << 5)

	)
67  
	#FSR_AEXC_NV
 (0x10 << 5)

	)
72  
	#FTT_NONE
 0

	)
73  
	#FTT_IEEE
 1

	)
74  
	#FTT_UNFIN
 2

	)
75  
	#FTT_UNIMP
 3

	)
76  
	#FTT_SEQ
 4

	)
77  
	#FTT_ALIGN
 5

	)
78  
	#FTT_DFAULT
 6

	)
79  
	#FSR_FTT_SHIFT
 14

	)
80  
	#FSR_FTT_IEEE
 (
FTT_IEEE
 << 
FSR_FTT_SHIFT
)

	)
81  
	#FSR_FTT_UNFIN
 (
FTT_UNFIN
 << 
FSR_FTT_SHIFT
)

	)
82  
	#FSR_FTT_UNIMP
 (
FTT_UNIMP
 << 
FSR_FTT_SHIFT
)

	)
83  
	#FSR_FTT_SEQ
 (
FTT_SEQ
 << 
FSR_FTT_SHIFT
)

	)
84  
	#FSR_FTT_ALIGN
 (
FTT_ALIGN
 << 
FSR_FTT_SHIFT
)

	)
85  
	#FSR_FTT_DFAULT
 (
FTT_DFAULT
 << 
FSR_FTT_SHIFT
)

	)
90  
	#FSR_TEM_NX
 (0x1 << 23)

	)
91  
	#FSR_TEM_DZ
 (0x2 << 23)

	)
92  
	#FSR_TEM_UF
 (0x4 << 23)

	)
93  
	#FSR_TEM_OF
 (0x8 << 23)

	)
94  
	#FSR_TEM_NV
 (0x10 << 23)

	)
99  
	#RP_DBLEXT
 0

	)
100  
	#RP_SINGLE
 1

	)
101  
	#RP_DOUBLE
 2

	)
102  
	#RP_RESERVED
 3

	)
107  
	#RD_NEAR
 0

	)
108  
	#RD_ZER0
 1

	)
109  
	#RD_POSINF
 2

	)
110  
	#RD_NEGINF
 3

	)
122  
	#FPRS_DL
 0x1

	)
123  
	#FPRS_DU
 0x2

	)
124  
	#FPRS_FEF
 0x4

	)
126 #ifdef 
__ılu¥lus


	@/usr/include/sys/synch.h

6 #iâdef 
_SYS_SYNCH_H


7  
	#_SYS_SYNCH_H


	)
9 #´agm¨
id’t
 "@(#)synch.h 1.26 96/07/24 SMI"

11 
	~<sys/ty³s.h
>

12 
	~<sys/št_ty³s.h
>

14 #ifdef 
__ılu¥lus


22 
	s_lwp_mu‹x
 {

23 
	s_mu‹x_æags
 {

24 
ušt8_t
 
æag
[4];

25 
ušt16_t
 
ty³
;

26 
ušt16_t
 
magic
;

27 } 
æags
;

28 
	u_mu‹x_lock_un
 {

29 
	s_mu‹x_lock
 {

30 
ušt8_t
 
·d
[8];

31 } 
lock64
;

32 
u·d64_t
 
owÃr64
;

33 } 
lock
;

34 
u·d64_t
 
d©a
;

35 } 
	tlwp_mu‹x_t
;

37  
	#mu‹x_lockw
 
lock
.
lock64
.
·d
[7]

	)
43 
	s_lwp_cÚd
 {

44 
	s_lwp_cÚd_æags
 {

45 
ušt8_t
 
æag
[4];

46 
ušt16_t
 
ty³
;

47 
ušt16_t
 
magic
;

48 } 
æags
;

49 
u·d64_t
 
d©a
;

50 } 
	tlwp_cÚd_t
;

57 
	s_lwp_£ma
 {

58 
ušt32_t
 
couÁ
;

59 
ušt32_t
 
ty³
;

60 
ušt8_t
 
æags
[8];

61 
u·d64_t
 
d©a
;

62 } 
	tlwp_£ma_t
;

67  
	#USYNC_THREAD
 0

	)
68  
	#USYNC_PROCESS
 1

	)
69  
	#TRACE_TYPE
 2

	)
71 #ifdef 
__ılu¥lus


	@/usr/include/v7/sys/psr.h

5 #iâdeà
_SYS_PSR_H


6  
	#_SYS_PSR_H


	)
8 #´agm¨
id’t
 "@(#)psr.h 1.3 96/09/12 SMI"

10 #ifdef 
__ılu¥lus


26  
	#PSR_CWP
 0x0000001F

	)
27  
	#PSR_ET
 0x00000020

	)
28  
	#PSR_PS
 0x00000040

	)
29  
	#PSR_S
 0x00000080

	)
30  
	#PSR_PIL
 0x00000F00

	)
31  
	#PSR_EF
 0x00001000

	)
32  
	#PSR_EC
 0x00002000

	)
33  
	#PSR_RSV
 0x000FC000

	)
34  
	#PSR_ICC
 0x00F00000

	)
35  
	#PSR_C
 0x00100000

	)
36  
	#PSR_V
 0x00200000

	)
37  
	#PSR_Z
 0x00400000

	)
38  
	#PSR_N
 0x00800000

	)
39  
	#PSR_VER
 0x0F000000

	)
40  
	#PSR_IMPL
 0xF0000000

	)
42  
	#PSL_ALLCC
 
PSR_ICC


	)
44 #iâdeà
_ASM


45 
	tpsw_t
;

51  
	#PSL_USER
 (
PSR_S
)

	)
52  
	#PSL_USERMASK
 (
PSR_ICC
)

	)
54  
	#PSL_UBITS
 (
PSR_ICC
|
PSR_EF
)

	)
57 #iâdef 
__¥¬cv9ıu


61  
	#USERMODE
(
ps
) ((Õsè& 
PSR_PS
è=ğ0)

	)
64 #ifdef 
__ılu¥lus


	@
1
.
1
/usr/include
98
1862
coarsen.c
comm.c
debug.c
defs.h
diffuse.c
diffutil.c
drivers.c
edge_refine.c
fold.c
frename.c
gmetis.c
grsetup.c
iidxsort.c
iintsort.c
ikeysort.c
ikeyvalsort.c
initdiff.c
initmsection.c
initpart.c
kmetis.c
macros.h
memory.c
move.c
node_refine.c
ometis.c
order.c
parmetis.h
pqueue.c
proto.h
pspases.c
remap.c
rename.h
rmetis.c
scremap.c
setup.c
struct.h
timer.c
util.c
wave.c
xyzpart.c
/usr/include/ctype.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/stdarg.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/time.h
/usr/include/floatingpoint.h
/usr/include/sys/feature_tests.h
/usr/include/sys/siginfo.h
/usr/include/sys/time.h
/usr/include/sys/types.h
/usr/include/sys/va_list.h
/usr/include/sys/wait.h
/usr/include/varargs.h
/usr/include/sys/ieeefp.h
/usr/include/sys/int_types.h
/usr/include/sys/isa_defs.h
/usr/include/sys/machsig.h
/usr/include/sys/machtypes.h
/usr/include/sys/mutex.h
/usr/include/sys/procset.h
/usr/include/sys/resource.h
/usr/include/sys/select.h
/usr/include/sys/proc.h
/usr/include/sys/cred.h
/usr/include/sys/thread.h
/usr/include/sys/timer.h
/usr/include/sys/user.h
/usr/include/sys/watchpoint.h
/usr/include/sys/auxv.h
/usr/include/sys/condvar.h
/usr/include/sys/copyops.h
/usr/include/sys/errno.h
/usr/include/sys/klwp.h
/usr/include/sys/param.h
/usr/include/sys/pcb.h
/usr/include/sys/pirec.h
/usr/include/sys/regset.h
/usr/include/sys/signal.h
/usr/include/sys/sleepq.h
/usr/include/sys/t_lock.h
/usr/include/sys/turnstile.h
/usr/include/vm/page.h
/usr/include/vm/seg_enum.h
/usr/include/sys/lwp.h
/usr/include/sys/machlock.h
/usr/include/sys/msacct.h
/usr/include/sys/rwlock.h
/usr/include/sys/semaphore.h
/usr/include/sys/ucontext.h
/usr/include/sys/unistd.h
/usr/include/v7/sys/privregs.h
/usr/include/sys/fsr.h
/usr/include/sys/synch.h
/usr/include/v7/sys/psr.h
