#! /bin/bash
EXTRA_ARGS=$@

#needed to find qt
export PATH=/home/trilinos/tpl/gcc4.1.2/qt-4.5.2/bin:$PATH

rm -f CMakeCache.txt

cmake \
-D CMAKE_BUILD_TYPE:STRING=RELEASE \
-D CMAKE_VERBOSE_MAKEFILE:BOOL=TRUE \
-D DART_TESTING_TIMEOUT:STRING=120 \
-D COVERAGE_COMMAND:FILEPATH=/usr/bin/gcov \
-D MEMORYCHECK_COMMAND:FILEPATH=/usr/bin/valgrind \
-D TPL_ENABLE_Nemesis:BOOL=ON \
  -D Nemesis_INCLUDE_DIRS:FILEPATH="/home/trilinos/tpl/gcc4.1.2/nemesis_3.09/include" \
  -D Nemesis_LIBRARY_DIRS:FILEPATH="/home/trilinos/tpl/gcc4.1.2/nemesis_3.09/lib" \
-D TPL_ENABLE_ExodusII:BOOL=ON \
  -D ExodusII_INCLUDE_DIRS:FILEPATH="/home/trilinos/tpl/gcc4.1.2/exodusII_4.84/include;/home/trilinos/tpl/gcc4.1.2/netcdf_4.0/include" \
  -D ExodusII_LIBRARY_DIRS:FILEPATH="/home/trilinos/tpl/gcc4.1.2/exodusII_4.84/lib;/home/trilinos/tpl/gcc4.1.2/netcdf_4.0/lib" \
-D Trilinos_DATA_DIR:STRING=/home/bmpersc/nightly/TrilinosData \
-D TPL_ENABLE_MPI:BOOL=ON \
  -D MPI_BASE_DIR:PATH=/usr/lib64/openmpi/1.2.7-gcc \
-D TPL_ENABLE_ParMETIS:BOOL=ON \
  -D ParMETIS_LIBRARY_DIRS:PATH=/home/trilinos/tpl/gcc4.1.2/ParMETIS3_1 \
-D TPL_ENABLE_Scotch:BOOL=ON \
  -D Scotch_INCLUDE_DIRS:PATH=/home/trilinos/tpl/gcc4.1.2/scotch_5.1/include \
  -D Scotch_LIBRARY_DIRS:PATH=/home/trilinos/tpl/gcc4.1.2/scotch_5.1/lib \
-D Trilinos_ENABLE_ALL_PACKAGES:BOOL=ON \
-D Trilinos_ENABLE_SECONDARY_STABLE_CODE:BOOL=ON \
-D Trilinos_ENABLE_TriKota:BOOL=OFF \
-D Trilinos_ENABLE_PyTrilinos:BOOL=OFF \
-D Trilinos_ENABLE_TrilinosCouplings:BOOL=ON \
-D Trilinos_ENABLE_ALL_OPTIONAL_PACKAGES:BOOL=ON \
-D Trilinos_ENABLE_FRAMEWORK_UNIT_TESTS:BOOL=OFF \
-D Trilinos_ENABLE_TESTS:BOOL=ON \
-D Trilinos_ENABLE_EXPLICIT_INSTANTIATION:BOOL=ON \
$EXTRA_ARGS \
../
 \
